const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Palette-DfyCJY_S.js","assets/index-KKYn1hr3.js","assets/vendor-B7FnPyzq.js","assets/index-DyUq36P8.css"])))=>i.map(i=>d[i]);
import{r,j as e,X as b,Q as v,g as w,d as i,m as y,_ as z}from"./index-KKYn1hr3.js";import"./vendor-B7FnPyzq.js";const T=y.lazy(()=>z(()=>import("./Palette-DfyCJY_S.js"),__vite__mapDeps([0,1,2,3]))),k=({onClose:g,onUpdate:n})=>{const[o,c]=r.useState([]),[d,p]=r.useState([]),[l,x]=r.useState(""),[m,f]=r.useState("blue"),[u,h]=r.useState(null);r.useEffect(()=>{(async()=>{const[t,a]=await Promise.all([i.getTags(),i.getNotes()]);c(t),p(a)})()},[]);const j=async()=>{if(!l.trim())return;if(h(null),o.some(t=>t.name.toLowerCase()===l.toLowerCase())){h("Tag name already exists.");return}const s={id:`tag_${crypto.randomUUID()}`,name:l,color:m};await i.saveTag(s),c([...o,s]),x(""),n&&n()},N=async s=>{const t=d.filter(a=>a.tags.includes(s)).length;t>0&&!confirm(`This tag is used in ${t} notes. Delete anyway?`)||(await i.deleteTag(s),c(o.filter(a=>a.id!==s)),n&&n())};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"w-full max-w-sm bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[85vh]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-800 bg-zinc-900/50 shrink-0",children:[e.jsx("h3",{className:"text-sm font-bold text-white",children:"Manage Tags"}),e.jsx("button",{onClick:g,className:"text-zinc-500 hover:text-white transition-colors",children:e.jsx(b,{size:16})})]}),e.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto custom-scrollbar flex-1",children:[u&&e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-red-400 bg-red-500/10 p-2 rounded border border-red-500/20",children:[e.jsx(v,{size:12})," ",u]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-zinc-500",children:"Name"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:l,onChange:s=>x(s.target.value),className:"flex-1 bg-black border border-zinc-700 rounded p-2 text-xs text-white focus:border-indigo-500 outline-none",placeholder:"Tag Name"}),e.jsx("button",{onClick:j,disabled:!l.trim(),className:"px-3 bg-indigo-600 text-white rounded text-xs font-bold hover:bg-indigo-500 disabled:opacity-50 transition-colors",children:e.jsx(w,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] uppercase font-bold text-zinc-500",children:"Color Theme"}),e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"h-20 bg-zinc-900 animate-pulse rounded"}),children:e.jsx(T,{selectedColor:m,onSelect:f})})]})]}),e.jsxs("div",{className:"border-t border-zinc-800 pt-4",children:[e.jsx("h4",{className:"text-[10px] uppercase font-bold text-zinc-500 mb-3",children:"Existing Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(s=>{const t=d.filter(a=>a.tags.includes(s.id)).length;return e.jsxs("div",{className:`group flex items-center gap-2 pl-2 pr-1 py-1 rounded-full border text-xs bg-${s.color}-500/20 text-${s.color}-500 border-${s.color}-500/20 transition-all hover:bg-${s.color}-500/30`,children:[e.jsx("span",{className:"font-medium",children:s.name}),t>0&&e.jsxs("span",{className:"text-[9px] opacity-60",children:["(",t,")"]}),e.jsx("button",{onClick:()=>N(s.id),className:`p-0.5 rounded-full hover:bg-${s.color}-500/40 hover:text-white transition-colors`,children:e.jsx(b,{size:10})})]},s.id)})})]})]})]})})};export{k as default};
