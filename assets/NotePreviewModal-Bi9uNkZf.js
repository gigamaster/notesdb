import{r as i,Y as m,s as f,n as z,j as e,u as w,h as u,E as y,X as k,o as C,T as E,d as o}from"./index-DboLLwwP.js";import"./vendor-B7FnPyzq.js";const T=({noteId:d,onClose:p,onNavigate:g})=>{const[s,h]=i.useState(null),[t,b]=i.useState(null),[x,j]=i.useState([]),r=i.useRef(null);if(i.useEffect(()=>{(async()=>{const n=(await o.getNotes()).find(c=>c.id===d);if(n){h(n);const c=await o.getCategories(),N=await o.getTags();b(c.find(l=>l.id===n.categoryId)||null),j(N.filter(l=>n.tags.includes(l.id)))}})()},[d]),i.useEffect(()=>{s&&r.current&&m.preloadStandard().then(()=>{r.current&&r.current.querySelectorAll("pre code").forEach(n=>{m.highlightBlock(n)})})},[s]),!s)return null;const v=t&&f[t.icon]?f[t.icon]:z;return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"w-full max-w-2xl bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl overflow-hidden flex flex-col animate-in zoom-in-95 duration-200 max-h-[80vh]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-800 bg-zinc-900/50",children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[t&&e.jsx("div",{className:`p-2 rounded-lg bg-${t.color}-500/10 text-${t.color}-500 shrink-0`,children:e.jsx(v,{size:18})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-sm font-bold text-white truncate",children:s.title}),e.jsxs("p",{className:"text-xs text-zinc-500 flex items-center gap-2",children:[e.jsx(w,{size:10})," ",new Date(s.updatedAt).toLocaleDateString(),s.isEncrypted&&e.jsxs("span",{className:"flex items-center gap-1 text-orange-500",children:[e.jsx(u,{size:10})," Encrypted"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>g(s.id),className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-xs font-bold transition-colors",children:["Open Full ",e.jsx(y,{size:12})]}),e.jsx("button",{onClick:p,className:"p-2 text-zinc-500 hover:text-white transition-colors hover:bg-zinc-800 rounded-lg",children:e.jsx(k,{size:18})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 bg-zinc-950",children:s.isEncrypted?e.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-zinc-500",children:[e.jsx(u,{size:32,className:"mb-2 opacity-50"}),e.jsx("p",{className:"text-xs",children:"Content is encrypted. Open full view to decrypt."})]}):e.jsx("div",{ref:r,className:"prose prose-invert prose-sm max-w-none prose-zinc",dangerouslySetInnerHTML:{__html:s.content}})}),x.length>0&&e.jsx("div",{className:"p-3 border-t border-zinc-800 bg-zinc-900/50 flex gap-2 overflow-x-auto",children:x.map(a=>e.jsxs("span",{className:`text-[10px] px-2 py-1 rounded border flex items-center gap-1 ${C[a.color]}`,children:[e.jsx(E,{size:10})," ",a.name]},a.id))})]})})};export{T as default};
