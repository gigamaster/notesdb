import{c as P,r as g,j as e,n as B,F as v,T as p,t as E,u as F,s as I,h as z,p as L,v as q,w as W,o as H,d as m}from"./index-DboLLwwP.js";import{C as O}from"./CollectionHeader-C_4O6W4b.js";import{A as R,W as _}from"./webhook-C_oAgQux.js";import{H as U}from"./hard-drive-DyEggHGx.js";import"./vendor-B7FnPyzq.js";import"./arrow-left-D3hN5_uF.js";import"./search-DXFRVerH.js";import"./layout-grid-UR75HWh0.js";/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],K=P("trending-up",G),ne=({notes:d,categories:h,tags:u,onNavigate:Q,onSelectNote:w,onBack:y})=>{const[r,k]=g.useState({attachmentCount:0,webhookServiceCount:0,outbox:{pending:0,success:0,failed:0},storage:{usage:0,quota:0}});g.useEffect(()=>{(async()=>{const i=await m.getAttachmentCount(),c=await m.getSettings(),o=await m.getAllOutboxTasks(),x=await m.getStorageEstimate();k({attachmentCount:i,webhookServiceCount:c.webhooks.length,outbox:{pending:o.filter(l=>l.status==="pending").length,success:o.filter(l=>l.status==="sent").length,failed:o.filter(l=>l.status==="failed").length},storage:x||{usage:0,quota:0}})})()},[]);const n=g.useMemo(()=>{const s=d.length,i=d.filter(t=>!!t.intent).length,c=s>0?Math.round(i/s*100):0,o=d.filter(t=>t.isEncrypted).sort((t,a)=>a.updatedAt-t.updatedAt),x=h.map(t=>({...t,count:d.filter(a=>a.categoryId===t.id).length})).sort((t,a)=>a.count-t.count),l=u.map(t=>({...t,count:d.filter(a=>a.tags.includes(t.id)).length})).sort((t,a)=>a.count-t.count).slice(0,5),S=new Date,f=[];for(let t=83;t>=0;t--){const a=new Date;a.setDate(S.getDate()-t);const j=a.toDateString(),M=d.filter(N=>{const T=new Date(N.createdAt).toDateString(),$=new Date(N.updatedAt).toDateString();return T===j||$===j}).length;f.push({date:a,count:M})}return{totalNotes:s,totalWithIntent:i,intentPercentage:c,catDist:x,tagFreq:l,heatmapData:f,encryptedNotes:o}},[d,h,u]),C=s=>s===0?"bg-zinc-900 border-zinc-800":s===1?"bg-indigo-900/40 border-indigo-900/60":s<=3?"bg-indigo-700/60 border-indigo-700/80":"bg-indigo-500 border-indigo-400",b=(s,i=2)=>{if(!+s)return"0 Bytes";const c=1024,o=i<0?0:i,x=["Bytes","KB","MB","GB","TB"],l=Math.floor(Math.log(s)/Math.log(c));return`${parseFloat((s/Math.pow(c,l)).toFixed(o))} ${x[l]}`},D=s=>{const i=s/1048576;return i<100?"from-emerald-600 to-emerald-400":i<500?"from-amber-600 to-amber-400":"from-red-600 to-red-400"},A=s=>Math.min(100,s/1073741824*100);return e.jsxs("div",{className:"flex flex-col h-full bg-black animate-in fade-in duration-300",children:[e.jsx(O,{title:"Dashboard",subtitle:`Real-time insights into your ${n.totalNotes} notes.`,icon:e.jsx(R,{size:24}),onBack:y}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"p-4 bg-zinc-900 border border-zinc-800 rounded-xl flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-zinc-800 rounded-full text-zinc-400",children:e.jsx(B,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-white",children:n.totalNotes}),e.jsx("p",{className:"text-xs text-zinc-500 uppercase font-bold tracking-wider",children:"Total Notes"})]})]}),e.jsxs("div",{className:"p-4 bg-zinc-900 border border-zinc-800 rounded-xl flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-zinc-800 rounded-full text-zinc-400",children:e.jsx(v,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-white",children:h.length}),e.jsx("p",{className:"text-xs text-zinc-500 uppercase font-bold tracking-wider",children:"Categories"})]})]}),e.jsxs("div",{className:"p-4 bg-zinc-900 border border-zinc-800 rounded-xl flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-zinc-800 rounded-full text-zinc-400",children:e.jsx(p,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-white",children:u.length}),e.jsx("p",{className:"text-xs text-zinc-500 uppercase font-bold tracking-wider",children:"Total Tags"})]})]}),e.jsxs("div",{className:"p-4 bg-zinc-900 border border-zinc-800 rounded-xl flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-zinc-800 rounded-full text-zinc-400",children:e.jsx(E,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-white",children:r.attachmentCount}),e.jsx("p",{className:"text-xs text-zinc-500 uppercase font-bold tracking-wider",children:"Attachments"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-800 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(F,{size:16,className:"text-indigo-500"}),e.jsx("h3",{className:"text-sm font-bold text-zinc-200",children:"Activity (Last 12 Weeks)"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"flex gap-1 h-32 items-end",children:n.heatmapData.map((s,i)=>e.jsx("div",{className:`flex-1 rounded-sm border transition-all hover:scale-125 hover:z-10 relative group ${C(s.count)}`,style:{height:`${Math.max(10,Math.min(100,s.count*20))}%`},children:e.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block bg-zinc-800 text-white text-[10px] px-2 py-1 rounded border border-zinc-700 whitespace-nowrap z-20",children:[s.date.toLocaleDateString(),": ",s.count," notes"]})},i))}),e.jsxs("div",{className:"flex justify-between text-[9px] text-zinc-600 font-mono mt-2 uppercase",children:[e.jsx("span",{children:"12 Weeks Ago"}),e.jsx("span",{children:"Today"})]})]})]}),e.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-800 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(v,{size:16,className:"text-indigo-500"}),e.jsx("h3",{className:"text-sm font-bold text-zinc-200",children:"Category Breakdown"})]}),e.jsx("div",{className:"space-y-4",children:n.catDist.map(s=>{if(s.count===0)return null;const i=s.count/n.totalNotes*100,c=I[s.icon];return e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-zinc-300",children:[e.jsx(c,{size:14,className:`text-${s.color}-500`}),e.jsx("span",{className:"font-medium",children:s.name})]}),e.jsxs("div",{className:"text-zinc-400 font-mono",children:[s.count," ",e.jsxs("span",{className:"opacity-70",children:["(",Math.round(i),"%)"]})]})]}),e.jsx("div",{className:"h-2 w-full bg-zinc-950 rounded-full overflow-hidden border border-zinc-800/50",children:e.jsx("div",{className:`h-full rounded-full bg-${s.color}-500 opacity-80 group-hover:opacity-100 transition-all duration-500`,style:{width:`${i}%`}})})]},s.id)})})]}),e.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-800 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(z,{size:16,className:"text-orange-500"}),e.jsx("h3",{className:"text-sm font-bold text-zinc-200",children:"Encrypted Notes"})]}),e.jsxs("div",{className:"space-y-3",children:[n.encryptedNotes.length===0&&e.jsx("p",{className:"text-xs text-zinc-500 italic",children:"No encrypted notes found."}),n.encryptedNotes.slice(0,5).map(s=>e.jsxs("button",{onClick:()=>w(s),className:"w-full flex items-center justify-between p-3 bg-zinc-950 rounded-lg border border-zinc-800 hover:border-orange-500/50 transition-colors group text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("div",{className:"p-1.5 bg-orange-500/10 rounded text-orange-500 shrink-0",children:e.jsx(z,{size:14})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:"text-xs font-bold text-zinc-300 truncate group-hover:text-orange-400 transition-colors",children:s.title}),e.jsxs("p",{className:"text-[10px] text-zinc-600 font-mono truncate",children:["Updated ",new Date(s.updatedAt).toLocaleDateString()]})]})]}),e.jsx("div",{className:"text-zinc-700 group-hover:text-orange-500 transition-colors",children:e.jsx(L,{size:14})})]},s.id))]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-800 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(K,{size:16,className:"text-indigo-500"}),e.jsx("h3",{className:"text-sm font-bold text-zinc-200",children:"Data Health"})]}),e.jsxs("div",{className:"space-y-4",children:[n.intentPercentage<50&&e.jsxs("div",{className:"flex gap-3 p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg",children:[e.jsx(q,{size:16,className:"text-amber-500 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-amber-200",children:"Missing Context"}),e.jsxs("p",{className:"text-[10px] text-amber-500/80 mt-1 leading-relaxed",children:["More than half your notes lack an ",e.jsx("strong",{children:"Intent"}),". Add intents to help the AI Agent understand your goals."]})]})]}),n.totalNotes>0&&n.tagFreq.length===0&&e.jsxs("div",{className:"flex gap-3 p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[e.jsx(p,{size:16,className:"text-blue-500 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-blue-200",children:"Organize with Tags"}),e.jsx("p",{className:"text-[10px] text-blue-400/80 mt-1 leading-relaxed",children:"Tags help create non-hierarchical connections between notes. Try adding some!"})]})]}),e.jsxs("div",{className:"p-3 bg-zinc-950 rounded-lg border border-zinc-800",children:[e.jsx("p",{className:"text-[10px] text-zinc-500 uppercase font-bold mb-2",children:"System Status"}),e.jsxs("div",{className:"flex justify-between text-xs text-zinc-300 mb-1",children:[e.jsx("span",{children:"Storage Engine"}),e.jsx("span",{className:"text-emerald-500",children:"IndexedDB"})]}),e.jsxs("div",{className:"flex justify-between text-xs text-zinc-300",children:[e.jsx("span",{children:"Local Encryption"}),e.jsx("span",{className:"text-emerald-500",children:"Active (AES)"})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-900",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsxs("span",{className:"text-zinc-400 flex items-center gap-1",children:[e.jsx(U,{size:10})," Usage"]}),e.jsx("span",{className:"text-zinc-200 font-mono font-bold",children:b(r.storage.usage)})]}),e.jsx("div",{className:"h-1.5 w-full bg-zinc-900 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-gradient-to-r ${D(r.storage.usage)} transition-all duration-1000`,style:{width:`${Math.max(2,A(r.storage.usage))}%`}})}),e.jsx("div",{className:"flex justify-between items-center mt-1",children:e.jsxs("span",{className:"text-[9px] text-zinc-600",children:["Quota: ",b(r.storage.quota,0)]})})]})]})]})]}),e.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-800 rounded-xl p-6 relative overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{size:16,className:n.intentPercentage>80?"text-emerald-500":"text-amber-500"}),e.jsx("h3",{className:"text-sm font-bold text-zinc-200",children:"AI Readiness"})]}),e.jsxs("span",{className:"text-xl font-bold text-white",children:[n.intentPercentage,"%"]})]}),e.jsx("div",{className:"h-2 w-full bg-zinc-950 rounded-full overflow-hidden relative z-10",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${n.intentPercentage>80?"bg-emerald-500":"bg-amber-500"}`,style:{width:`${n.intentPercentage}%`}})}),e.jsx("p",{className:"text-[10px] text-zinc-500 mt-2 relative z-10",children:"Percentage of notes with defined user intents."})]}),e.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-800 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(_,{size:16,className:"text-indigo-500"}),e.jsxs("h3",{className:"text-sm font-bold text-zinc-200",children:["Webhooks ",e.jsxs("span",{className:"text-zinc-500 text-xs ml-1 font-normal",children:["(",r.webhookServiceCount,")"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1 text-amber-500 font-medium",children:[e.jsx("span",{children:"Pending"}),e.jsx("span",{children:r.outbox.pending})]}),e.jsx("div",{className:"h-1.5 w-full bg-zinc-950 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-500 rounded-full transition-all duration-500",style:{width:"100%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1 text-lime-500 font-medium",children:[e.jsx("span",{children:"Success"}),e.jsx("span",{children:r.outbox.success})]}),e.jsx("div",{className:"h-1.5 w-full bg-zinc-950 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-lime-500 rounded-full transition-all duration-500",style:{width:"100%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1 text-red-500 font-medium",children:[e.jsx("span",{children:"Failure"}),e.jsx("span",{children:r.outbox.failed})]}),e.jsx("div",{className:"h-1.5 w-full bg-zinc-950 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-red-500 rounded-full transition-all duration-500",style:{width:"100%"}})})]})]})]}),e.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-800 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(p,{size:16,className:"text-indigo-500"}),e.jsx("h3",{className:"text-sm font-bold text-zinc-200",children:"Top Tags"})]}),e.jsxs("div",{className:"space-y-3",children:[n.tagFreq.length===0&&e.jsx("p",{className:"text-xs text-zinc-500 italic",children:"No tags used yet."}),n.tagFreq.map((s,i)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`flex items-center gap-2 px-2 py-1 rounded border text-xs ${H[s.color]}`,children:e.jsxs("span",{className:"font-bold",children:["#",s.name]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-1.5 bg-zinc-950 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-zinc-600 rounded-full",style:{width:`${s.count/n.totalNotes*100}%`}})}),e.jsx("span",{className:"text-[10px] text-zinc-500 font-mono w-4 text-right",children:s.count})]})]},s.id))]})]})]})]})]})]})};export{ne as default};
