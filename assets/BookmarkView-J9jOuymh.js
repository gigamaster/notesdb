import{r as l,d,j as e,a2 as B,a3 as E,g as U,a4 as $,G as D,E as F}from"./index-BewSTdif.js";import{A}from"./arrow-left-jBfm2t9c.js";import"./vendor-B7FnPyzq.js";const M=({onNavigateManager:h,onBack:g})=>{const[p,f]=l.useState([]),[N,k]=l.useState([]),[v,z]=l.useState([]),[b,x]=l.useState("default"),[c,u]=l.useState(!1);l.useEffect(()=>{j()},[]);const j=async()=>{const[t,s,o]=await Promise.all([d.getBookmarks(),d.getCategories(),d.getSettings()]);k(s),z(o.savedBookmarkLayouts||[]);const r=o.bookmarkLayout||[];if(r.length>0){const n=new Map(t.map(i=>[i.id,i])),m=r.map(i=>n.get(i)).filter(i=>!!i);f(m);const I=JSON.stringify(r),y=(o.savedBookmarkLayouts||[]).find(i=>JSON.stringify(i.bookmarkIds)===I);y?(x(y.id),u(!1)):(x("custom"),u(!0))}else f(t.filter(n=>n.isFavorite)),x("default"),u(!1)},w=async t=>{var r;const s=t.target.value,o=await d.getSettings();if(s==="default")o.bookmarkLayout=[],await d.saveSettings(o);else{const n=(r=o.savedBookmarkLayouts)==null?void 0:r.find(m=>m.id===s);n&&(o.bookmarkLayout=n.bookmarkIds,await d.saveSettings(o))}j()},a=v.find(t=>t.id===b),L=a?a.name:c?"Custom View":"Favorites",S=a!=null&&a.description?a.description:c?"Unsaved dashboard arrangement.":"Your pinned bookmarks dashboard.",C=(a==null?void 0:a.color)||"zinc";return e.jsxs("div",{className:"flex flex-col h-full animate-in fade-in duration-300",children:[e.jsxs("div",{className:"min-16-h flex justify-between px-8 py-3 border-b border-zinc-700 bg-black animate-in fade-in slide-in-from-top-2 duration-300",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[g&&e.jsx("button",{onClick:g,className:"p-2 -ml-2 rounded-lg text-zinc-500 hover:text-white hover:bg-zinc-800 transition-colors",children:e.jsx(A,{size:24})}),a&&e.jsx("div",{className:`w-6 h-6 rounded-full bg-${C}-500`}),c&&e.jsx("div",{className:"w-full h-full p-2"}),e.jsx("h1",{className:"text-2xl font-bold flex items-center gap-3 text-white",children:L}),e.jsx("p",{className:"text-zinc-500 text-sm",children:S})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(B,{size:14,className:"text-zinc-500 group-hover:text-indigo-400 transition-colors"})}),e.jsxs("select",{value:b,onChange:w,className:"appearance-none bg-zinc-900 border border-zinc-800 rounded-lg py-2 pl-9 pr-8 text-xs text-white focus:border-indigo-500 outline-none cursor-pointer hover:border-zinc-700 transition-colors min-w-[180px]",children:[e.jsx("option",{value:"default",children:"Default Favorites"}),e.jsx("optgroup",{label:"Saved Layouts",children:v.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))}),c&&e.jsx("option",{value:"custom",disabled:!0,children:"Custom (Unsaved)"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx(E,{size:12,className:"text-zinc-600"})})]}),e.jsxs("button",{onClick:h,className:"flex items-center gap-2 text-xs text-indigo-400 hover:text-white font-bold bg-indigo-500/10 hover:bg-indigo-600 px-4 py-2 rounded-lg border border-indigo-500/20 hover:border-transparent transition-all shadow-lg shadow-indigo-900/10 hover:shadow-indigo-900/30",children:[e.jsx(U,{size:14})," Customize"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:p.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-zinc-600 border-2 border-dashed border-zinc-900 rounded-xl bg-zinc-950/50",children:[e.jsx($,{size:48,className:"mb-4 opacity-20"}),e.jsx("p",{className:"text-sm font-medium mb-2",children:"No bookmarks in this view."}),e.jsx("button",{onClick:h,className:"text-xs text-indigo-400 hover:underline",children:"Open Manager to add bookmarks"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-12",children:p.map(t=>{const s=N.find(o=>o.id===t.categoryId);return e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4 hover:border-indigo-500 transition-all hover:shadow-lg hover:shadow-indigo-900/10 group flex flex-col h-42 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-indigo-500/10 rounded-bl-full -mr-10 -mt-10 transition-transform group-hover:scale-150 pointer-events-none"}),e.jsxs("div",{className:"flex items-start justify-between mb-4 relative z-10",children:[e.jsx("div",{className:"p-1.5 bg-zinc-200 rounded-lg shadow-sm shrink-0",children:t.faviconUrl?e.jsx("img",{src:t.faviconUrl,alt:"",className:"w-6 h-6 object-contain"}):e.jsx(D,{size:24,className:"text-zinc-400"})}),e.jsx(F,{size:16,className:"text-zinc-700 group-hover:text-indigo-400 transition-colors"})]}),e.jsx("h3",{className:"font-bold text-zinc-200 group-hover:text-white truncate mb-1 text-base relative z-10",children:t.title}),e.jsx("p",{className:"text-xs text-zinc-500 line-clamp-2 leading-relaxed relative z-10",children:t.description||(()=>{try{return new URL(t.url).hostname}catch{return t.url}})()}),e.jsx("div",{className:"mt-auto pt-2 relative z-10",children:s&&e.jsx("span",{className:`text-[10px] px-2 py-1 rounded border ${s.color?`text-${s.color}-500 border-${s.color}-500/20 bg-${s.color}-500/10`:"text-zinc-500 border-zinc-800"}`,children:s.name})})]},t.id)})})})]})};export{M as default};
