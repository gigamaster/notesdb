const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CalendarFilters-DK9xQR4L.js","assets/index-BewSTdif.js","assets/vendor-B7FnPyzq.js"])))=>i.map(i=>d[i]);
import{j as e,u as C,g as I,X as G,s as L,n as X,o as P,z as q,r as p,x as A,p as _,y as J,m as K,_ as Q}from"./index-BewSTdif.js";import{L as Z}from"./layout-list-BJ5UpGG5.js";import{L as V}from"./layout-grid-Cl6Kqb9y.js";import"./vendor-B7FnPyzq.js";const ee=({date:D,events:j,categories:y,onClose:z,onSelectNote:w,onCreateEvent:m})=>{const a=[...j].sort((i,r)=>{const d=i.eventDate||i.createdAt,v=r.eventDate||r.createdAt;return d-v}),u=i=>new Date(i).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"w-full max-w-md bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl overflow-hidden flex flex-col animate-in zoom-in-95 duration-200 max-h-[80vh]",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-zinc-800 bg-zinc-900/50",children:[e.jsxs("h3",{className:"text-sm font-bold text-white flex items-center gap-2",children:[e.jsx(C,{size:16,className:"text-indigo-400"}),D.toLocaleDateString("default",{weekday:"long",month:"long",day:"numeric"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:m,className:"flex items-center text-xs hover:bg-indigo-900 rounded text-indigo-400 hover:text-white px-2 py-1.5 transition-colors",title:"Add Event",children:[e.jsx(I,{size:16})," Add event"]}),e.jsx("button",{onClick:z,className:"p-1.5 hover:bg-zinc-800 rounded text-zinc-500 hover:text-white transition-colors",children:e.jsx(G,{size:18})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 custom-scrollbar",children:a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-zinc-600",children:[e.jsx(C,{size:32,className:"mb-2 opacity-20"}),e.jsx("p",{className:"text-xs",children:"No events scheduled."})]}):e.jsx("div",{className:"space-y-1",children:a.map(i=>{const r=y.find(f=>f.id===i.categoryId),d=r&&L[r.icon]?L[r.icon]:X,v=r?P[r.color]:"bg-zinc-800 text-zinc-400 border-zinc-700";return e.jsxs("button",{onClick:()=>{w(i),z()},className:`w-full flex items-center gap-2 p-2 rounded-lg border transition-all hover:brightness-110 text-left group ${v}`,children:[e.jsx("div",{className:"p-2 bg-black/20 rounded-md shrink-0",children:e.jsx(d,{size:16})}),e.jsxs("div",{className:"flex flex-1 flex-row justify-between min-w-0",children:[e.jsx("h4",{className:"text-xs font-bold truncate",children:i.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5 opacity-70",children:[i.eventDate&&e.jsxs("span",{className:"text-[10px] flex items-center gap-1 font-mono",children:[e.jsx(q,{size:10})," ",u(i.eventDate)]}),r&&e.jsx("span",{className:"text-[10px]",children:r.name})]})]})]},i.id)})})})]})})},te=K.lazy(()=>Q(()=>import("./CalendarFilters-DK9xQR4L.js"),__vite__mapDeps([0,1,2]))),re=({notes:D,categories:j,tags:y,onSelectNote:z,onNavigateView:w,onCreateEvent:m})=>{const[a,u]=p.useState(new Date),[i,r]=p.useState(null),[d,v]=p.useState(new Set),[f,k]=p.useState(new Set),$=t=>t.eventDate||t.updatedAt||t.createdAt,E=p.useMemo(()=>D.filter(t=>!(d.size>0&&!d.has(t.categoryId)||f.size>0&&!t.tags.some(o=>f.has(o)))),[D,d,f]),O=t=>{const s=new Set(d);s.has(t)?s.delete(t):s.add(t),v(s)},R=t=>{const s=new Set(f);s.has(t)?s.delete(t):s.add(t),k(s)},Y=()=>{v(new Set),k(new Set)},W=p.useMemo(()=>{const t=a.getFullYear(),s=a.getMonth(),o=new Date(t,s,1),g=o.getDay(),c=g===0?6:g-1,x=new Date(o);x.setDate(x.getDate()-c);const h=[],n=42;for(let l=0;l<n;l++){const b=new Date(x);b.setDate(x.getDate()+l),h.push(b)}return h},[a]),M=()=>{const t=new Date(a);t.setMonth(t.getMonth()-1),u(t)},T=()=>{const t=new Date(a);t.setMonth(t.getMonth()+1),u(t)},S=t=>{const s=new Date;return t.getDate()===s.getDate()&&t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()},H=t=>t.getMonth()===a.getMonth(),F=t=>{const s=new Date(t);s.setHours(0,0,0,0);const o=new Date(t);return o.setHours(23,59,59,999),E.filter(g=>{const c=$(g);return c>=s.getTime()&&c<=o.getTime()})},U=()=>{var t;m?m(new Date):z({id:crypto.randomUUID(),title:"New Event Note",content:"",categoryId:(t=j[0])==null?void 0:t.id,tags:[],createdAt:Date.now(),updatedAt:Date.now(),eventDate:a.getTime(),originalData:null})},B=()=>{const t=a.getFullYear(),s=a.getMonth(),o=new Date(t,s,1),g=new Date(t,s+1,0).getDate(),c=o.getDay(),x=c===0?6:c-1,h=[];for(let n=0;n<x;n++)h.push(null);for(let n=1;n<=g;n++)h.push(new Date(t,s,n));return e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-[10px] font-bold text-zinc-200",children:a.toLocaleString("default",{month:"long",year:"numeric"})}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:M,className:"p-1 hover:bg-zinc-800 rounded text-zinc-400",children:e.jsx(A,{size:14})}),e.jsx("button",{onClick:()=>u(new Date),className:"text-[10px] px-2 bg-zinc-800 rounded text-zinc-300 hover:text-white",children:"Month"}),e.jsx("button",{onClick:T,className:"p-1 hover:bg-zinc-800 rounded text-zinc-400",children:e.jsx(_,{size:14})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-2",children:["M","T","W","T","F","S","S"].map((n,l)=>e.jsx("span",{className:"text-[10px] text-zinc-600 font-bold",children:n},l))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:h.map((n,l)=>{if(!n)return e.jsx("div",{},l);const b=n.getDate()===a.getDate(),N=S(n);return e.jsx("button",{onClick:()=>u(n),className:`
                                  h-7 w-7 flex items-center justify-center rounded text-xs transition-colors
                                  ${b?"bg-indigo-600 text-white font-bold":"text-zinc-400 hover:bg-zinc-800"}
                                  ${N&&!b?"text-indigo-400 font-bold":""}
                              `,children:n.getDate()},l)})})]})};return e.jsxs("div",{className:"flex h-full bg-zinc-950 animate-in fade-in duration-500",children:[i&&e.jsx(ee,{date:i,events:F(i),categories:j,onClose:()=>r(null),onSelectNote:z,onCreateEvent:()=>{r(null),m&&m(i)}}),e.jsxs("div",{className:"w-64 border-r border-zinc-800 flex flex-col bg-black/50 hidden md:flex",children:[e.jsx("div",{className:"min-h-16 p-3 border-b border-zinc-700",children:e.jsxs("button",{onClick:U,className:"w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-500 text-white py-2 rounded-lg text-sm font-bold shadow-lg shadow-indigo-900/20 transition-all",children:[e.jsx(I,{size:16})," Create Event"]})}),e.jsxs("div",{className:"p-4 space-y-6 flex-1 overflow-y-auto custom-scrollbar",children:[e.jsx(B,{}),e.jsx(p.Suspense,{fallback:e.jsx("div",{className:"h-32 animate-pulse bg-zinc-900 rounded-xl"}),children:e.jsx(te,{categories:j,tags:y,selectedCategories:d,selectedTags:f,onToggleCategory:O,onToggleTag:R,onClear:Y})})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-zinc-950",children:[e.jsxs("div",{className:"min-h-16 border-b border-zinc-800 bg-zinc-900/50 backdrop-blur z-10 flex items-center justify-between px-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{size:20,className:"text-indigo-500"}),e.jsx("h2",{className:"text-lg font-bold text-white",children:a.toLocaleString("default",{month:"long",year:"numeric"})})]}),e.jsxs("div",{className:"flex bg-zinc-900 rounded-lg p-0.5 border border-zinc-800",children:[e.jsx("button",{onClick:M,className:"p-1.5 hover:bg-zinc-800 rounded text-zinc-400 hover:text-white",children:e.jsx(A,{size:16})}),e.jsx("button",{onClick:()=>u(new Date),className:"px-3 text-xs font-bold text-zinc-300 hover:text-white",children:"Today"}),e.jsx("button",{onClick:T,className:"p-1.5 hover:bg-zinc-800 rounded text-zinc-400 hover:text-white",children:e.jsx(_,{size:16})})]})]}),e.jsxs("div",{className:"flex items-center bg-zinc-900 rounded-lg p-0.5 border border-zinc-800",children:[e.jsxs("button",{onClick:()=>w("day"),className:"px-3 py-1.5 rounded-md text-xs font-bold text-zinc-500 hover:text-zinc-300 flex items-center gap-2",children:[e.jsx(Z,{size:14})," Day"]}),e.jsxs("button",{onClick:()=>w("week"),className:"px-3 py-1.5 rounded-md text-xs font-bold text-zinc-500 hover:text-zinc-300 flex items-center gap-2",children:[e.jsx(J,{size:14})," Week"]}),e.jsxs("button",{onClick:()=>w("month"),className:"px-3 py-1.5 rounded-md text-xs font-bold bg-zinc-800 text-white shadow-sm flex items-center gap-2",children:[e.jsx(V,{size:14})," Month"]})]})]}),e.jsx("div",{className:"grid grid-cols-7 border-b border-zinc-800 bg-zinc-900/30",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(t=>e.jsx("div",{className:"py-2 text-center text-[10px] font-bold text-zinc-500 uppercase tracking-wider border-r border-zinc-800/50 last:border-0",children:t},t))}),e.jsx("div",{className:"flex-1 grid grid-cols-7 grid-rows-6 auto-rows-fr bg-zinc-900/10",children:W.map((t,s)=>{const o=S(t),g=H(t),c=F(t),x=4,h=c.length-x;return e.jsxs("div",{className:`
                                border-b border-r border-zinc-800/50 p-2 min-h-[100px] flex flex-col relative transition-colors group
                                ${g?"bg-transparent text-zinc-300 hover:bg-zinc-900/20":"bg-zinc-950/30 text-zinc-600"}
                            `,onClick:()=>{m&&m(t)},children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:`
                                    text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full
                                    ${o?"bg-indigo-600 text-white":""}
                                `,children:t.getDate()}),o&&e.jsx("span",{className:"text-[9px] font-bold text-indigo-400",children:"Today"})]}),e.jsxs("div",{className:"flex-1 flex flex-col gap-1 overflow-hidden",children:[c.slice(0,x).map(n=>{const l=j.find(N=>N.id===n.categoryId),b=l?P[l.color]:"bg-zinc-800 text-zinc-400 border-zinc-700";return e.jsx("button",{onClick:N=>{N.stopPropagation(),z(n)},className:`
                                                text-left text-[10px] px-1.5 py-0.5 rounded border truncate w-full transition-all hover:scale-[1.02]
                                                ${b}
                                            `,title:n.title,children:n.title},n.id)}),h>0&&e.jsxs("button",{onClick:n=>{n.stopPropagation(),r(t)},className:"text-[10px] text-indigo-400 pl-1 hover:text-white hover:underline text-left",children:["+",h," more"]})]})]},s)})})]})]})};export{re as default};
