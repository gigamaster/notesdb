const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PluginManagerModal-DMO7ehbr.js","assets/search-DXFRVerH.js","assets/toggle-right-Jg58VjQp.js","assets/vendor-B7FnPyzq.js","assets/CategoryManagerModal-ByWPupyB.js","assets/TagManagerModal-B-MA6qjC.js","assets/TemplateManagerModal-DXPbqgyx.js","assets/Palette-Da6hWOEh.js","assets/Toast-B_dwJU6k.js","assets/NotesToc-CQgVTXV7.js","assets/ResearchSidebar-BuT8IglB.js","assets/index-jRiquA6t.js","assets/SettingsAdmin-CjyZQBiU.js","assets/storage-Cb65Cn9F.js","assets/webhook-C_oAgQux.js","assets/hard-drive-DyEggHGx.js","assets/server-DwMTwVy7.js","assets/arrow-left-D3hN5_uF.js","assets/SearchPalette-IxceRV1K.js","assets/hash-D4bagVh5.js","assets/LibraryView-Cu_CbN9Q.js","assets/CollectionHeader-C_4O6W4b.js","assets/layout-grid-UR75HWh0.js","assets/DashboardView-DZiFCX_v.js","assets/CalendarWeek-q9nm1UDd.js","assets/layout-list-BSn5hpP2.js","assets/CalendarMonth-DbAaOLdi.js","assets/CalendarDay-B2S61wtw.js","assets/AttachmentManager-BEsqdKrB.js","assets/InfoModal-2XG9T8mW.js","assets/AttachmentPreviewModal-BHF15BqN.js","assets/EventModal-D6Dr8-iB.js","assets/GraphView-CA_YTEuF.js","assets/NotePreviewModal-Bi9uNkZf.js","assets/CategoryBrowser-DaDIjLO5.js","assets/BookmarkView-ChTIE2Pb.js","assets/BookmarkLibrary-D_WhoPAS.js","assets/BookmarkManager-BLRRF4C1.js"])))=>i.map(i=>d[i]);
import{r as Bt,g as Mr,a as Hp,c as Zs,b as Up}from"./vendor-B7FnPyzq.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var tl={exports:{}},Vi={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wu;function Vy(){if(wu)return Vi;wu=1;var t=Bt(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var d,u={},h=null,f=null;c!==void 0&&(h=""+c),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(f=l.ref);for(d in l)r.call(l,d)&&!s.hasOwnProperty(d)&&(u[d]=l[d]);if(a&&a.defaultProps)for(d in l=a.defaultProps,l)u[d]===void 0&&(u[d]=l[d]);return{$$typeof:e,type:a,key:h,ref:f,props:u,_owner:i.current}}return Vi.Fragment=n,Vi.jsx=o,Vi.jsxs=o,Vi}var ku;function Wy(){return ku||(ku=1,tl.exports=Vy()),tl.exports}var m=Wy(),$=Bt();const Q=Mr($);var Qs={},Su;function qy(){if(Su)return Qs;Su=1;var t=Hp();return Qs.createRoot=t.createRoot,Qs.hydrateRoot=t.hydrateRoot,Qs}var dc=qy();const Ky=Mr(dc),Gy="modulepreload",Jy=function(t){return"/notesdb/"+t},Eu={},Xe=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let o=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=o(n.map(c=>{if(c=Jy(c),c in Eu)return;Eu[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Gy,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function eo(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var nl={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Cu;function Yy(){return Cu||(Cu=1,(function(t,e){(function(n){t.exports=n()})(function(){return(function n(r,i,s){function o(c,d){if(!i[c]){if(!r[c]){var u=typeof eo=="function"&&eo;if(!d&&u)return u(c,!0);if(a)return a(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var f=i[c]={exports:{}};r[c][0].call(f.exports,function(p){var g=r[c][1][p];return o(g||p)},f,f.exports,n,r,i,s)}return i[c].exports}for(var a=typeof eo=="function"&&eo,l=0;l<s.length;l++)o(s[l]);return o})({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var c,d,u,h,f,p,g,y=[],b=0,x=l.length,w=x,v=s.getTypeOf(l)!=="string";b<l.length;)w=x-b,u=v?(c=l[b++],d=b<x?l[b++]:0,b<x?l[b++]:0):(c=l.charCodeAt(b++),d=b<x?l.charCodeAt(b++):0,b<x?l.charCodeAt(b++):0),h=c>>2,f=(3&c)<<4|d>>4,p=1<w?(15&d)<<2|u>>6:64,g=2<w?63&u:64,y.push(a.charAt(h)+a.charAt(f)+a.charAt(p)+a.charAt(g));return y.join("")},i.decode=function(l){var c,d,u,h,f,p,g=0,y=0,b="data:";if(l.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var x,w=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&w--,l.charAt(l.length-2)===a.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=o.uint8array?new Uint8Array(0|w):new Array(0|w);g<l.length;)c=a.indexOf(l.charAt(g++))<<2|(h=a.indexOf(l.charAt(g++)))>>4,d=(15&h)<<4|(f=a.indexOf(l.charAt(g++)))>>2,u=(3&f)<<6|(p=a.indexOf(l.charAt(g++))),x[y++]=c,f!==64&&(x[y++]=d),p!==64&&(x[y++]=u);return x}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(d,u,h,f,p){this.compressedSize=d,this.uncompressedSize=u,this.crc32=h,this.compression=f,this.compressedContent=p}c.prototype={getContentWorker:function(){var d=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),u=this;return d.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(d,u,h){return d.pipe(new a).pipe(new l("uncompressedSize")).pipe(u.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",u)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),o=(function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l})();r.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?(function(c,d,u,h){var f=o,p=h+u;c^=-1;for(var g=h;g<p;g++)c=c>>>8^f[255&(c^d[g])];return-1^c})(0|l,a,a.length,0):(function(c,d,u,h){var f=o,p=h+u;c^=-1;for(var g=h;g<p;g++)c=c>>>8^f[255&(c^d.charCodeAt(g))];return-1^c})(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),c=s?"uint8array":"array";function d(u,h){l.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=h,this.meta={}}i.magic="\b\0",a.inherits(d,l),d.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,u.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(h){u.push({data:h,meta:u.meta})}},i.compressWorker=function(u){return new d("Deflate",u)},i.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(f,p){var g,y="";for(g=0;g<p;g++)y+=String.fromCharCode(255&f),f>>>=8;return y}function o(f,p,g,y,b,x){var w,v,E=f.file,C=f.compression,N=x!==c.utf8encode,j=a.transformTo("string",x(E.name)),M=a.transformTo("string",c.utf8encode(E.name)),T=E.comment,P=a.transformTo("string",x(T)),_=a.transformTo("string",c.utf8encode(T)),z=M.length!==E.name.length,k=_.length!==T.length,L="",W="",H="",ie=E.dir,q=E.date,fe={crc32:0,compressedSize:0,uncompressedSize:0};p&&!g||(fe.crc32=f.crc32,fe.compressedSize=f.compressedSize,fe.uncompressedSize=f.uncompressedSize);var I=0;p&&(I|=8),N||!z&&!k||(I|=2048);var D=0,ae=0;ie&&(D|=16),b==="UNIX"?(ae=798,D|=(function(J,_e){var Pe=J;return J||(Pe=_e?16893:33204),(65535&Pe)<<16})(E.unixPermissions,ie)):(ae=20,D|=(function(J){return 63&(J||0)})(E.dosPermissions)),w=q.getUTCHours(),w<<=6,w|=q.getUTCMinutes(),w<<=5,w|=q.getUTCSeconds()/2,v=q.getUTCFullYear()-1980,v<<=4,v|=q.getUTCMonth()+1,v<<=5,v|=q.getUTCDate(),z&&(W=s(1,1)+s(d(j),4)+M,L+="up"+s(W.length,2)+W),k&&(H=s(1,1)+s(d(P),4)+_,L+="uc"+s(H.length,2)+H);var Z="";return Z+=`
\0`,Z+=s(I,2),Z+=C.magic,Z+=s(w,2),Z+=s(v,2),Z+=s(fe.crc32,4),Z+=s(fe.compressedSize,4),Z+=s(fe.uncompressedSize,4),Z+=s(j.length,2),Z+=s(L.length,2),{fileRecord:u.LOCAL_FILE_HEADER+Z+j+L,dirRecord:u.CENTRAL_FILE_HEADER+s(ae,2)+Z+s(P.length,2)+"\0\0\0\0"+s(D,4)+s(y,4)+j+L+P}}var a=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),d=n("../crc32"),u=n("../signature");function h(f,p,g,y){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=g,this.encodeFileName=y,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,l),h.prototype.push=function(f){var p=f.meta.percent||0,g=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,l.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:g?(p+100*(g-y-1))/g:100}}))},h.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var p=this.streamFiles&&!f.file.dir;if(p){var g=o(f,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(f){this.accumulate=!1;var p=this.streamFiles&&!f.file.dir,g=o(f,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),p)this.push({data:(function(y){return u.DATA_DESCRIPTOR+s(y.crc32,4)+s(y.compressedSize,4)+s(y.uncompressedSize,4)})(f),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var f=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var g=this.bytesWritten-f,y=(function(b,x,w,v,E){var C=a.transformTo("string",E(v));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(b,2)+s(b,2)+s(x,4)+s(w,4)+s(C.length,2)+C})(this.dirRecords.length,g,f,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(f){this._sources.push(f);var p=this;return f.on("data",function(g){p.processChunk(g)}),f.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),f.on("error",function(g){p.error(g)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(f){var p=this._sources;if(!l.prototype.error.call(this,f))return!1;for(var g=0;g<p.length;g++)try{p[g].error(f)}catch{}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var f=this._sources,p=0;p<f.length;p++)f[p].lock()},r.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker");i.generateWorker=function(a,l,c){var d=new o(l.streamFiles,c,l.platform,l.encodeFileName),u=0;try{a.forEach(function(h,f){u++;var p=(function(x,w){var v=x||w,E=s[v];if(!E)throw new Error(v+" is not a valid compression method !");return E})(f.options.compression,l.compression),g=f.options.compressionOptions||l.compressionOptions||{},y=f.dir,b=f.date;f._compressWorker(p,g).withStreamInfo("file",{name:h,dir:y,date:b,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(d)}),d.entriesCount=u}catch(h){d.error(h)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function u(h){return new o.Promise(function(f,p){var g=h.decompressed.getContentWorker().pipe(new c);g.on("error",function(y){p(y)}).on("end",function(){g.streamInfo.crc32!==h.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}r.exports=function(h,f){var p=this;return f=s.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,f.optimizedBinaryString,f.base64).then(function(g){var y=new l(f);return y.load(g),y}).then(function(g){var y=[o.Promise.resolve(g)],b=g.files;if(f.checkCRC32)for(var x=0;x<b.length;x++)y.push(u(b[x]));return o.Promise.all(y)}).then(function(g){for(var y=g.shift(),b=y.files,x=0;x<b.length;x++){var w=b[x],v=w.fileNameStr,E=s.resolve(w.fileNameStr);p.file(E,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:f.createFolders}),w.dir||(p.file(E).unsafeOriginalName=v)}return y.zipComment.length&&(p.comment=y.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function a(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(a,o),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(d){c.push({data:d,meta:{percent:0}})}).on("error",function(d){c.isPaused?this.generatedError=d:c.error(d)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function o(a,l,c){s.call(this,l),this._helper=a;var d=this;a.on("data",function(u,h){d.push(u)||d._helper.pause(),c&&c(h)}).on("error",function(u){d.emit("error",u)}).on("end",function(){d.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(E,C,N){var j,M=a.getTypeOf(C),T=a.extend(N||{},d);T.date=T.date||new Date,T.compression!==null&&(T.compression=T.compression.toUpperCase()),typeof T.unixPermissions=="string"&&(T.unixPermissions=parseInt(T.unixPermissions,8)),T.unixPermissions&&16384&T.unixPermissions&&(T.dir=!0),T.dosPermissions&&16&T.dosPermissions&&(T.dir=!0),T.dir&&(E=b(E)),T.createFolders&&(j=y(E))&&x.call(this,j,!0);var P=M==="string"&&T.binary===!1&&T.base64===!1;N&&N.binary!==void 0||(T.binary=!P),(C instanceof u&&C.uncompressedSize===0||T.dir||!C||C.length===0)&&(T.base64=!1,T.binary=!0,C="",T.compression="STORE",M="string");var _=null;_=C instanceof u||C instanceof l?C:p.isNode&&p.isStream(C)?new g(E,C):a.prepareContent(E,C,T.binary,T.optimizedBinaryString,T.base64);var z=new h(E,_,T);this.files[E]=z}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),d=n("./defaults"),u=n("./compressedObject"),h=n("./zipObject"),f=n("./generate"),p=n("./nodejsUtils"),g=n("./nodejs/NodejsStreamInputAdapter"),y=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var C=E.lastIndexOf("/");return 0<C?E.substring(0,C):""},b=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},x=function(E,C){return C=C!==void 0?C:d.createFolders,E=b(E),this.files[E]||s.call(this,E,null,{dir:!0,createFolders:C}),this.files[E]};function w(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var C,N,j;for(C in this.files)j=this.files[C],(N=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&E(N,j)},filter:function(E){var C=[];return this.forEach(function(N,j){E(N,j)&&C.push(j)}),C},file:function(E,C,N){if(arguments.length!==1)return E=this.root+E,s.call(this,E,C,N),this;if(w(E)){var j=E;return this.filter(function(T,P){return!P.dir&&j.test(T)})}var M=this.files[this.root+E];return M&&!M.dir?M:null},folder:function(E){if(!E)return this;if(w(E))return this.filter(function(M,T){return T.dir&&E.test(M)});var C=this.root+E,N=x.call(this,C),j=this.clone();return j.root=N.name,j},remove:function(E){E=this.root+E;var C=this.files[E];if(C||(E.slice(-1)!=="/"&&(E+="/"),C=this.files[E]),C&&!C.dir)delete this.files[E];else for(var N=this.filter(function(M,T){return T.name.slice(0,E.length)===E}),j=0;j<N.length;j++)delete this.files[N[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var C,N={};try{if((N=a.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=N.type.toLowerCase(),N.compression=N.compression.toUpperCase(),N.type==="binarystring"&&(N.type="string"),!N.type)throw new Error("No output type specified.");a.checkSupport(N.type),N.platform!=="darwin"&&N.platform!=="freebsd"&&N.platform!=="linux"&&N.platform!=="sunos"||(N.platform="UNIX"),N.platform==="win32"&&(N.platform="DOS");var j=N.comment||this.comment||"";C=f.generateWorker(this,N,j)}catch(M){(C=new l("error")).error(M)}return new c(C,N.type||"string",N.mimeType)},generateAsync:function(E,C){return this.generateInternalStream(E).accumulate(C)},generateNodeStream:function(E,C){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(C)}};r.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),u=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===c&&this.data[h+2]===d&&this.data[h+3]===u)return h-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),u=a.charCodeAt(3),h=this.readData(4);return l===h[0]&&c===h[1]&&d===h[2]&&u===h[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(u){var h=s.getTypeOf(u);return s.checkSupport(h),h!=="string"||o.uint8array?h==="nodebuffer"?new c(u):o.uint8array?new d(s.transformTo("uint8array",u)):new a(s.transformTo("array",u)):new l(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){c.dataIsReady=!0,c.data=d,c.max=d&&d.length||0,c.type=s.getTypeOf(d),c.isPaused||c._tickAndRepeat()},function(d){c.error(d)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),c=n("../support"),d=n("../external"),u=null;if(c.nodestream)try{u=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(p,g){return new d.Promise(function(y,b){var x=[],w=p._internalType,v=p._outputType,E=p._mimeType;p.on("data",function(C,N){x.push(C),g&&g(N)}).on("error",function(C){x=[],b(C)}).on("end",function(){try{var C=(function(N,j,M){switch(N){case"blob":return s.newBlob(s.transformTo("arraybuffer",j),M);case"base64":return l.encode(j);default:return s.transformTo(N,j)}})(v,(function(N,j){var M,T=0,P=null,_=0;for(M=0;M<j.length;M++)_+=j[M].length;switch(N){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(P=new Uint8Array(_),M=0;M<j.length;M++)P.set(j[M],T),T+=j[M].length;return P;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+N+"'")}})(w,x),E);y(C)}catch(N){b(N)}x=[]}).resume()})}function f(p,g,y){var b=g;switch(g){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=g,this._mimeType=y,s.checkSupport(b),this._worker=p.pipe(new o(b)),p.lock()}catch(x){this._worker=new a("error"),this._worker.error(x)}}f.prototype={accumulate:function(p){return h(this,p)},on:function(p,g){var y=this;return p==="data"?this._worker.on(p,function(b){g.call(y,b.data,b.meta)}):this._worker.on(p,function(){s.delay(g,arguments,y)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},p)}},r.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;c[254]=c[254]=1;function u(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}i.utf8encode=function(f){return o.nodebuffer?a.newBufferFrom(f,"utf-8"):(function(p){var g,y,b,x,w,v=p.length,E=0;for(x=0;x<v;x++)(64512&(y=p.charCodeAt(x)))==55296&&x+1<v&&(64512&(b=p.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(b-56320),x++),E+=y<128?1:y<2048?2:y<65536?3:4;for(g=o.uint8array?new Uint8Array(E):new Array(E),x=w=0;w<E;x++)(64512&(y=p.charCodeAt(x)))==55296&&x+1<v&&(64512&(b=p.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(b-56320),x++),y<128?g[w++]=y:(y<2048?g[w++]=192|y>>>6:(y<65536?g[w++]=224|y>>>12:(g[w++]=240|y>>>18,g[w++]=128|y>>>12&63),g[w++]=128|y>>>6&63),g[w++]=128|63&y);return g})(f)},i.utf8decode=function(f){return o.nodebuffer?s.transformTo("nodebuffer",f).toString("utf-8"):(function(p){var g,y,b,x,w=p.length,v=new Array(2*w);for(g=y=0;g<w;)if((b=p[g++])<128)v[y++]=b;else if(4<(x=c[b]))v[y++]=65533,g+=x-1;else{for(b&=x===2?31:x===3?15:7;1<x&&g<w;)b=b<<6|63&p[g++],x--;1<x?v[y++]=65533:b<65536?v[y++]=b:(b-=65536,v[y++]=55296|b>>10&1023,v[y++]=56320|1023&b)}return v.length!==y&&(v.subarray?v=v.subarray(0,y):v.length=y),s.applyFromCharCode(v)})(f=s.transformTo(o.uint8array?"uint8array":"array",f))},s.inherits(u,l),u.prototype.processChunk=function(f){var p=s.transformTo(o.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var g=p;(p=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),p.set(g,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var y=(function(x,w){var v;for((w=w||x.length)>x.length&&(w=x.length),v=w-1;0<=v&&(192&x[v])==128;)v--;return v<0||v===0?w:v+c[x[v]]>w?v:w})(p),b=p;y!==p.length&&(o.uint8array?(b=p.subarray(0,y),this.leftOver=p.subarray(y,p.length)):(b=p.slice(0,y),this.leftOver=p.slice(y,p.length))),this.push({data:i.utf8decode(b),meta:f.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=u,s.inherits(h,l),h.prototype.processChunk=function(f){this.push({data:i.utf8encode(f.data),meta:f.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function c(g){return g}function d(g,y){for(var b=0;b<g.length;++b)y[b]=255&g.charCodeAt(b);return y}n("setimmediate"),i.newBlob=function(g,y){i.checkSupport("blob");try{return new Blob([g],{type:y})}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(g),b.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(g,y,b){var x=[],w=0,v=g.length;if(v<=b)return String.fromCharCode.apply(null,g);for(;w<v;)y==="array"||y==="nodebuffer"?x.push(String.fromCharCode.apply(null,g.slice(w,Math.min(w+b,v)))):x.push(String.fromCharCode.apply(null,g.subarray(w,Math.min(w+b,v)))),w+=b;return x.join("")},stringifyByChar:function(g){for(var y="",b=0;b<g.length;b++)y+=String.fromCharCode(g[b]);return y},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}})()}};function h(g){var y=65536,b=i.getTypeOf(g),x=!0;if(b==="uint8array"?x=u.applyCanBeUsed.uint8array:b==="nodebuffer"&&(x=u.applyCanBeUsed.nodebuffer),x)for(;1<y;)try{return u.stringifyByChunk(g,b,y)}catch{y=Math.floor(y/2)}return u.stringifyByChar(g)}function f(g,y){for(var b=0;b<g.length;b++)y[b]=g[b];return y}i.applyFromCharCode=h;var p={};p.string={string:c,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return p.string.uint8array(g).buffer},uint8array:function(g){return d(g,new Uint8Array(g.length))},nodebuffer:function(g){return d(g,a.allocBuffer(g.length))}},p.array={string:h,array:c,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(g)}},p.arraybuffer={string:function(g){return h(new Uint8Array(g))},array:function(g){return f(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:c,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(new Uint8Array(g))}},p.uint8array={string:h,array:function(g){return f(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:c,nodebuffer:function(g){return a.newBufferFrom(g)}},p.nodebuffer={string:h,array:function(g){return f(g,new Array(g.length))},arraybuffer:function(g){return p.nodebuffer.uint8array(g).buffer},uint8array:function(g){return f(g,new Uint8Array(g.length))},nodebuffer:c},i.transformTo=function(g,y){if(y=y||"",!g)return y;i.checkSupport(g);var b=i.getTypeOf(y);return p[b][g](y)},i.resolve=function(g){for(var y=g.split("/"),b=[],x=0;x<y.length;x++){var w=y[x];w==="."||w===""&&x!==0&&x!==y.length-1||(w===".."?b.pop():b.push(w))}return b.join("/")},i.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(g)?"nodebuffer":s.uint8array&&g instanceof Uint8Array?"uint8array":s.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(g){if(!s[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(g){var y,b,x="";for(b=0;b<(g||"").length;b++)x+="\\x"+((y=g.charCodeAt(b))<16?"0":"")+y.toString(16).toUpperCase();return x},i.delay=function(g,y,b){setImmediate(function(){g.apply(b||null,y||[])})},i.inherits=function(g,y){function b(){}b.prototype=y.prototype,g.prototype=new b},i.extend=function(){var g,y,b={};for(g=0;g<arguments.length;g++)for(y in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],y)&&b[y]===void 0&&(b[y]=arguments[g][y]);return b},i.prepareContent=function(g,y,b,x,w){return l.Promise.resolve(y).then(function(v){return s.blob&&(v instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(v))!==-1)&&typeof FileReader<"u"?new l.Promise(function(E,C){var N=new FileReader;N.onload=function(j){E(j.target.result)},N.onerror=function(j){C(j.target.error)},N.readAsArrayBuffer(v)}):v}).then(function(v){var E=i.getTypeOf(v);return E?(E==="arraybuffer"?v=i.transformTo("uint8array",v):E==="string"&&(w?v=o.decode(v):b&&x!==!0&&(v=(function(C){return d(C,s.uint8array?new Uint8Array(C.length):new Array(C.length))})(v))),v):l.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),c=n("./support");function d(u){this.files=[],this.loadOptions=u}d.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(u)+")")}},isSignature:function(u,h){var f=this.reader.index;this.reader.setIndex(u);var p=this.reader.readString(4)===h;return this.reader.setIndex(f),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),h=c.uint8array?"uint8array":"array",f=o.transformTo(h,u);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,h,f,p=this.zip64EndOfCentralSize-44;0<p;)u=this.reader.readInt(2),h=this.reader.readInt(4),f=this.reader.readData(h),this.zip64ExtensibleData[u]={id:u,length:h,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,h;for(u=0;u<this.files.length;u++)h=this.files[u],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(u=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var h=u;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var p=h-f;if(0<p)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(u){this.reader=s(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),d=n("./compressions"),u=n("./support");function h(f,p){this.options=f,this.loadOptions=p}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var p,g;if(f.skip(22),this.fileNameLength=f.readInt(2),g=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=(function(y){for(var b in d)if(Object.prototype.hasOwnProperty.call(d,b)&&d[b].magic===y)return d[b];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,p,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var p=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(p),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var p,g,y,b=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<b;)p=f.readInt(2),g=f.readInt(2),y=f.readData(g),this.extraFields[p]={id:p,length:g,value:y};f.setIndex(b)},handleUTF8:function(){var f=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var g=o.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var b=o.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var p=s(f.value);return p.readInt(1)!==1||l(this.fileName)!==p.readInt(4)?null:c.utf8decode(p.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var p=s(f.value);return p.readInt(1)!==1||l(this.fileComment)!==p.readInt(4)?null:c.utf8decode(p.readData(f.length-5))}return null}},r.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(p,g,y){this.name=p,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=g,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),d=n("./stream/GenericWorker");s.prototype={internalStream:function(p){var g=null,y="string";try{if(!p)throw new Error("No output type specified.");var b=(y=p.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),g=this._decompressWorker();var x=!this._dataBinary;x&&!b&&(g=g.pipe(new l.Utf8EncodeWorker)),!x&&b&&(g=g.pipe(new l.Utf8DecodeWorker))}catch(w){(g=new d("error")).error(w)}return new o(g,y,"")},async:function(p,g){return this.internalStream(p).accumulate(g)},nodeStream:function(p,g){return this.internalStream(p||"nodebuffer").toNodejsStream(g)},_compressWorker:function(p,g){if(this._data instanceof c&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(y,p,g)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof d?this._data:new a(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<u.length;f++)s.prototype[u[f]]=h;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var c=0,d=new l(p),u=s.document.createTextNode("");d.observe(u,{characterData:!0}),o=function(){u.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:function(){setTimeout(p,0)};else{var h=new s.MessageChannel;h.port1.onmessage=p,o=function(){h.port2.postMessage(0)}}var f=[];function p(){var g,y;a=!0;for(var b=f.length;b;){for(y=f,f=[],g=-1;++g<b;)y[g]();b=f.length}a=!1}r.exports=function(g){f.push(g)!==1||a||o()}}).call(this,typeof Zs<"u"?Zs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],d=["PENDING"];function u(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,b!==o&&g(this,b)}function h(b,x,w){this.promise=b,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function f(b,x,w){s(function(){var v;try{v=x(w)}catch(E){return a.reject(b,E)}v===b?a.reject(b,new TypeError("Cannot resolve promise with itself")):a.resolve(b,v)})}function p(b){var x=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof x=="function")return function(){x.apply(b,arguments)}}function g(b,x){var w=!1;function v(N){w||(w=!0,a.reject(b,N))}function E(N){w||(w=!0,a.resolve(b,N))}var C=y(function(){x(E,v)});C.status==="error"&&v(C.value)}function y(b,x){var w={};try{w.value=b(x),w.status="success"}catch(v){w.status="error",w.value=v}return w}(r.exports=u).prototype.finally=function(b){if(typeof b!="function")return this;var x=this.constructor;return this.then(function(w){return x.resolve(b()).then(function(){return w})},function(w){return x.resolve(b()).then(function(){throw w})})},u.prototype.catch=function(b){return this.then(null,b)},u.prototype.then=function(b,x){if(typeof b!="function"&&this.state===c||typeof x!="function"&&this.state===l)return this;var w=new this.constructor(o);return this.state!==d?f(w,this.state===c?b:x,this.outcome):this.queue.push(new h(w,b,x)),w},h.prototype.callFulfilled=function(b){a.resolve(this.promise,b)},h.prototype.otherCallFulfilled=function(b){f(this.promise,this.onFulfilled,b)},h.prototype.callRejected=function(b){a.reject(this.promise,b)},h.prototype.otherCallRejected=function(b){f(this.promise,this.onRejected,b)},a.resolve=function(b,x){var w=y(p,x);if(w.status==="error")return a.reject(b,w.value);var v=w.value;if(v)g(b,v);else{b.state=c,b.outcome=x;for(var E=-1,C=b.queue.length;++E<C;)b.queue[E].callFulfilled(x)}return b},a.reject=function(b,x){b.state=l,b.outcome=x;for(var w=-1,v=b.queue.length;++w<v;)b.queue[w].callRejected(x);return b},u.resolve=function(b){return b instanceof this?b:a.resolve(new this(o),b)},u.reject=function(b){var x=new this(o);return a.reject(x,b)},u.all=function(b){var x=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=b.length,v=!1;if(!w)return this.resolve([]);for(var E=new Array(w),C=0,N=-1,j=new this(o);++N<w;)M(b[N],N);return j;function M(T,P){x.resolve(T).then(function(_){E[P]=_,++C!==w||v||(v=!0,a.resolve(j,E))},function(_){v||(v=!0,a.reject(j,_))})}},u.race=function(b){var x=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=b.length,v=!1;if(!w)return this.resolve([]);for(var E=-1,C=new this(o);++E<w;)N=b[E],x.resolve(N).then(function(j){v||(v=!0,a.resolve(C,j))},function(j){v||(v=!0,a.reject(C,j))});var N;return C}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),d=Object.prototype.toString,u=0,h=-1,f=0,p=8;function g(b){if(!(this instanceof g))return new g(b);this.options=o.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},b||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var w=s.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(w!==u)throw new Error(l[w]);if(x.header&&s.deflateSetHeader(this.strm,x.header),x.dictionary){var v;if(v=typeof x.dictionary=="string"?a.string2buf(x.dictionary):d.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(w=s.deflateSetDictionary(this.strm,v))!==u)throw new Error(l[w]);this._dict_set=!0}}function y(b,x){var w=new g(x);if(w.push(b,!0),w.err)throw w.msg||l[w.err];return w.result}g.prototype.push=function(b,x){var w,v,E=this.strm,C=this.options.chunkSize;if(this.ended)return!1;v=x===~~x?x:x===!0?4:0,typeof b=="string"?E.input=a.string2buf(b):d.call(b)==="[object ArrayBuffer]"?E.input=new Uint8Array(b):E.input=b,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new o.Buf8(C),E.next_out=0,E.avail_out=C),(w=s.deflate(E,v))!==1&&w!==u)return this.onEnd(w),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||v!==4&&v!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(E.output,E.next_out))):this.onData(o.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&w!==1);return v===4?(w=s.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===u):v!==2||(this.onEnd(u),!(E.avail_out=0))},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},i.Deflate=g,i.deflate=y,i.deflateRaw=function(b,x){return(x=x||{}).raw=!0,y(b,x)},i.gzip=function(b,x){return(x=x||{}).gzip=!0,y(b,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),d=n("./zlib/zstream"),u=n("./zlib/gzheader"),h=Object.prototype.toString;function f(g){if(!(this instanceof f))return new f(g);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},g||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||g&&g.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&(15&y.windowBits)==0&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var b=s.inflateInit2(this.strm,y.windowBits);if(b!==l.Z_OK)throw new Error(c[b]);this.header=new u,s.inflateGetHeader(this.strm,this.header)}function p(g,y){var b=new f(y);if(b.push(g,!0),b.err)throw b.msg||c[b.err];return b.result}f.prototype.push=function(g,y){var b,x,w,v,E,C,N=this.strm,j=this.options.chunkSize,M=this.options.dictionary,T=!1;if(this.ended)return!1;x=y===~~y?y:y===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof g=="string"?N.input=a.binstring2buf(g):h.call(g)==="[object ArrayBuffer]"?N.input=new Uint8Array(g):N.input=g,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new o.Buf8(j),N.next_out=0,N.avail_out=j),(b=s.inflate(N,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&M&&(C=typeof M=="string"?a.string2buf(M):h.call(M)==="[object ArrayBuffer]"?new Uint8Array(M):M,b=s.inflateSetDictionary(this.strm,C)),b===l.Z_BUF_ERROR&&T===!0&&(b=l.Z_OK,T=!1),b!==l.Z_STREAM_END&&b!==l.Z_OK)return this.onEnd(b),!(this.ended=!0);N.next_out&&(N.avail_out!==0&&b!==l.Z_STREAM_END&&(N.avail_in!==0||x!==l.Z_FINISH&&x!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=a.utf8border(N.output,N.next_out),v=N.next_out-w,E=a.buf2string(N.output,w),N.next_out=v,N.avail_out=j-v,v&&o.arraySet(N.output,N.output,w,v,0),this.onData(E)):this.onData(o.shrinkBuf(N.output,N.next_out)))),N.avail_in===0&&N.avail_out===0&&(T=!0)}while((0<N.avail_in||N.avail_out===0)&&b!==l.Z_STREAM_END);return b===l.Z_STREAM_END&&(x=l.Z_FINISH),x===l.Z_FINISH?(b=s.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===l.Z_OK):x!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(N.avail_out=0))},f.prototype.onData=function(g){this.chunks.push(g)},f.prototype.onEnd=function(g){g===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Inflate=f,i.inflate=p,i.inflateRaw=function(g,y){return(y=y||{}).raw=!0,p(g,y)},i.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var u in d)d.hasOwnProperty(u)&&(l[u]=d[u])}}return l},i.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,d,u,h){if(c.subarray&&l.subarray)l.set(c.subarray(d,d+u),h);else for(var f=0;f<u;f++)l[h+f]=c[d+f]},flattenChunks:function(l){var c,d,u,h,f,p;for(c=u=0,d=l.length;c<d;c++)u+=l[c].length;for(p=new Uint8Array(u),c=h=0,d=l.length;c<d;c++)f=l[c],p.set(f,h),h+=f.length;return p}},a={arraySet:function(l,c,d,u,h){for(var f=0;f<u;f++)l[h+f]=c[d+f]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function d(u,h){if(h<65537&&(u.subarray&&a||!u.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(u,h));for(var f="",p=0;p<h;p++)f+=String.fromCharCode(u[p]);return f}l[254]=l[254]=1,i.string2buf=function(u){var h,f,p,g,y,b=u.length,x=0;for(g=0;g<b;g++)(64512&(f=u.charCodeAt(g)))==55296&&g+1<b&&(64512&(p=u.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),g++),x+=f<128?1:f<2048?2:f<65536?3:4;for(h=new s.Buf8(x),g=y=0;y<x;g++)(64512&(f=u.charCodeAt(g)))==55296&&g+1<b&&(64512&(p=u.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),g++),f<128?h[y++]=f:(f<2048?h[y++]=192|f>>>6:(f<65536?h[y++]=224|f>>>12:(h[y++]=240|f>>>18,h[y++]=128|f>>>12&63),h[y++]=128|f>>>6&63),h[y++]=128|63&f);return h},i.buf2binstring=function(u){return d(u,u.length)},i.binstring2buf=function(u){for(var h=new s.Buf8(u.length),f=0,p=h.length;f<p;f++)h[f]=u.charCodeAt(f);return h},i.buf2string=function(u,h){var f,p,g,y,b=h||u.length,x=new Array(2*b);for(f=p=0;f<b;)if((g=u[f++])<128)x[p++]=g;else if(4<(y=l[g]))x[p++]=65533,f+=y-1;else{for(g&=y===2?31:y===3?15:7;1<y&&f<b;)g=g<<6|63&u[f++],y--;1<y?x[p++]=65533:g<65536?x[p++]=g:(g-=65536,x[p++]=55296|g>>10&1023,x[p++]=56320|1023&g)}return d(x,p)},i.utf8border=function(u,h){var f;for((h=h||u.length)>u.length&&(h=u.length),f=h-1;0<=f&&(192&u[f])==128;)f--;return f<0||f===0?h:f+l[u[f]]>h?f:h}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,o,a,l){for(var c=65535&s|0,d=s>>>16&65535|0,u=0;a!==0;){for(a-=u=2e3<a?2e3:a;d=d+(c=c+o[l++]|0)|0,--u;);c%=65521,d%=65521}return c|d<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=(function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a})();r.exports=function(o,a,l,c){var d=s,u=c+l;o^=-1;for(var h=c;h<u;h++)o=o>>>8^d[255&(o^a[h])];return-1^o}},{}],46:[function(n,r,i){var s,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),c=n("./crc32"),d=n("./messages"),u=0,h=4,f=0,p=-2,g=-1,y=4,b=2,x=8,w=9,v=286,E=30,C=19,N=2*v+1,j=15,M=3,T=258,P=T+M+1,_=42,z=113,k=1,L=2,W=3,H=4;function ie(S,K){return S.msg=d[K],K}function q(S){return(S<<1)-(4<S?9:0)}function fe(S){for(var K=S.length;0<=--K;)S[K]=0}function I(S){var K=S.state,V=K.pending;V>S.avail_out&&(V=S.avail_out),V!==0&&(o.arraySet(S.output,K.pending_buf,K.pending_out,V,S.next_out),S.next_out+=V,K.pending_out+=V,S.total_out+=V,S.avail_out-=V,K.pending-=V,K.pending===0&&(K.pending_out=0))}function D(S,K){a._tr_flush_block(S,0<=S.block_start?S.block_start:-1,S.strstart-S.block_start,K),S.block_start=S.strstart,I(S.strm)}function ae(S,K){S.pending_buf[S.pending++]=K}function Z(S,K){S.pending_buf[S.pending++]=K>>>8&255,S.pending_buf[S.pending++]=255&K}function J(S,K){var V,O,A=S.max_chain_length,B=S.strstart,Y=S.prev_length,te=S.nice_match,F=S.strstart>S.w_size-P?S.strstart-(S.w_size-P):0,re=S.window,he=S.w_mask,le=S.prev,Ee=S.strstart+T,Fe=re[B+Y-1],Be=re[B+Y];S.prev_length>=S.good_match&&(A>>=2),te>S.lookahead&&(te=S.lookahead);do if(re[(V=K)+Y]===Be&&re[V+Y-1]===Fe&&re[V]===re[B]&&re[++V]===re[B+1]){B+=2,V++;do;while(re[++B]===re[++V]&&re[++B]===re[++V]&&re[++B]===re[++V]&&re[++B]===re[++V]&&re[++B]===re[++V]&&re[++B]===re[++V]&&re[++B]===re[++V]&&re[++B]===re[++V]&&B<Ee);if(O=T-(Ee-B),B=Ee-T,Y<O){if(S.match_start=K,te<=(Y=O))break;Fe=re[B+Y-1],Be=re[B+Y]}}while((K=le[K&he])>F&&--A!=0);return Y<=S.lookahead?Y:S.lookahead}function _e(S){var K,V,O,A,B,Y,te,F,re,he,le=S.w_size;do{if(A=S.window_size-S.lookahead-S.strstart,S.strstart>=le+(le-P)){for(o.arraySet(S.window,S.window,le,le,0),S.match_start-=le,S.strstart-=le,S.block_start-=le,K=V=S.hash_size;O=S.head[--K],S.head[K]=le<=O?O-le:0,--V;);for(K=V=le;O=S.prev[--K],S.prev[K]=le<=O?O-le:0,--V;);A+=le}if(S.strm.avail_in===0)break;if(Y=S.strm,te=S.window,F=S.strstart+S.lookahead,re=A,he=void 0,he=Y.avail_in,re<he&&(he=re),V=he===0?0:(Y.avail_in-=he,o.arraySet(te,Y.input,Y.next_in,he,F),Y.state.wrap===1?Y.adler=l(Y.adler,te,he,F):Y.state.wrap===2&&(Y.adler=c(Y.adler,te,he,F)),Y.next_in+=he,Y.total_in+=he,he),S.lookahead+=V,S.lookahead+S.insert>=M)for(B=S.strstart-S.insert,S.ins_h=S.window[B],S.ins_h=(S.ins_h<<S.hash_shift^S.window[B+1])&S.hash_mask;S.insert&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[B+M-1])&S.hash_mask,S.prev[B&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=B,B++,S.insert--,!(S.lookahead+S.insert<M)););}while(S.lookahead<P&&S.strm.avail_in!==0)}function Pe(S,K){for(var V,O;;){if(S.lookahead<P){if(_e(S),S.lookahead<P&&K===u)return k;if(S.lookahead===0)break}if(V=0,S.lookahead>=M&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+M-1])&S.hash_mask,V=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),V!==0&&S.strstart-V<=S.w_size-P&&(S.match_length=J(S,V)),S.match_length>=M)if(O=a._tr_tally(S,S.strstart-S.match_start,S.match_length-M),S.lookahead-=S.match_length,S.match_length<=S.max_lazy_match&&S.lookahead>=M){for(S.match_length--;S.strstart++,S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+M-1])&S.hash_mask,V=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart,--S.match_length!=0;);S.strstart++}else S.strstart+=S.match_length,S.match_length=0,S.ins_h=S.window[S.strstart],S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+1])&S.hash_mask;else O=a._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++;if(O&&(D(S,!1),S.strm.avail_out===0))return k}return S.insert=S.strstart<M-1?S.strstart:M-1,K===h?(D(S,!0),S.strm.avail_out===0?W:H):S.last_lit&&(D(S,!1),S.strm.avail_out===0)?k:L}function ne(S,K){for(var V,O,A;;){if(S.lookahead<P){if(_e(S),S.lookahead<P&&K===u)return k;if(S.lookahead===0)break}if(V=0,S.lookahead>=M&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+M-1])&S.hash_mask,V=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),S.prev_length=S.match_length,S.prev_match=S.match_start,S.match_length=M-1,V!==0&&S.prev_length<S.max_lazy_match&&S.strstart-V<=S.w_size-P&&(S.match_length=J(S,V),S.match_length<=5&&(S.strategy===1||S.match_length===M&&4096<S.strstart-S.match_start)&&(S.match_length=M-1)),S.prev_length>=M&&S.match_length<=S.prev_length){for(A=S.strstart+S.lookahead-M,O=a._tr_tally(S,S.strstart-1-S.prev_match,S.prev_length-M),S.lookahead-=S.prev_length-1,S.prev_length-=2;++S.strstart<=A&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+M-1])&S.hash_mask,V=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),--S.prev_length!=0;);if(S.match_available=0,S.match_length=M-1,S.strstart++,O&&(D(S,!1),S.strm.avail_out===0))return k}else if(S.match_available){if((O=a._tr_tally(S,0,S.window[S.strstart-1]))&&D(S,!1),S.strstart++,S.lookahead--,S.strm.avail_out===0)return k}else S.match_available=1,S.strstart++,S.lookahead--}return S.match_available&&(O=a._tr_tally(S,0,S.window[S.strstart-1]),S.match_available=0),S.insert=S.strstart<M-1?S.strstart:M-1,K===h?(D(S,!0),S.strm.avail_out===0?W:H):S.last_lit&&(D(S,!1),S.strm.avail_out===0)?k:L}function ge(S,K,V,O,A){this.good_length=S,this.max_lazy=K,this.nice_length=V,this.max_chain=O,this.func=A}function Ce(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*N),this.dyn_dtree=new o.Buf16(2*(2*E+1)),this.bl_tree=new o.Buf16(2*(2*C+1)),fe(this.dyn_ltree),fe(this.dyn_dtree),fe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(j+1),this.heap=new o.Buf16(2*v+1),fe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*v+1),fe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Le(S){var K;return S&&S.state?(S.total_in=S.total_out=0,S.data_type=b,(K=S.state).pending=0,K.pending_out=0,K.wrap<0&&(K.wrap=-K.wrap),K.status=K.wrap?_:z,S.adler=K.wrap===2?0:1,K.last_flush=u,a._tr_init(K),f):ie(S,p)}function Re(S){var K=Le(S);return K===f&&(function(V){V.window_size=2*V.w_size,fe(V.head),V.max_lazy_match=s[V.level].max_lazy,V.good_match=s[V.level].good_length,V.nice_match=s[V.level].nice_length,V.max_chain_length=s[V.level].max_chain,V.strstart=0,V.block_start=0,V.lookahead=0,V.insert=0,V.match_length=V.prev_length=M-1,V.match_available=0,V.ins_h=0})(S.state),K}function Ge(S,K,V,O,A,B){if(!S)return p;var Y=1;if(K===g&&(K=6),O<0?(Y=0,O=-O):15<O&&(Y=2,O-=16),A<1||w<A||V!==x||O<8||15<O||K<0||9<K||B<0||y<B)return ie(S,p);O===8&&(O=9);var te=new Ce;return(S.state=te).strm=S,te.wrap=Y,te.gzhead=null,te.w_bits=O,te.w_size=1<<te.w_bits,te.w_mask=te.w_size-1,te.hash_bits=A+7,te.hash_size=1<<te.hash_bits,te.hash_mask=te.hash_size-1,te.hash_shift=~~((te.hash_bits+M-1)/M),te.window=new o.Buf8(2*te.w_size),te.head=new o.Buf16(te.hash_size),te.prev=new o.Buf16(te.w_size),te.lit_bufsize=1<<A+6,te.pending_buf_size=4*te.lit_bufsize,te.pending_buf=new o.Buf8(te.pending_buf_size),te.d_buf=1*te.lit_bufsize,te.l_buf=3*te.lit_bufsize,te.level=K,te.strategy=B,te.method=V,Re(S)}s=[new ge(0,0,0,0,function(S,K){var V=65535;for(V>S.pending_buf_size-5&&(V=S.pending_buf_size-5);;){if(S.lookahead<=1){if(_e(S),S.lookahead===0&&K===u)return k;if(S.lookahead===0)break}S.strstart+=S.lookahead,S.lookahead=0;var O=S.block_start+V;if((S.strstart===0||S.strstart>=O)&&(S.lookahead=S.strstart-O,S.strstart=O,D(S,!1),S.strm.avail_out===0)||S.strstart-S.block_start>=S.w_size-P&&(D(S,!1),S.strm.avail_out===0))return k}return S.insert=0,K===h?(D(S,!0),S.strm.avail_out===0?W:H):(S.strstart>S.block_start&&(D(S,!1),S.strm.avail_out),k)}),new ge(4,4,8,4,Pe),new ge(4,5,16,8,Pe),new ge(4,6,32,32,Pe),new ge(4,4,16,16,ne),new ge(8,16,32,32,ne),new ge(8,16,128,128,ne),new ge(8,32,128,256,ne),new ge(32,128,258,1024,ne),new ge(32,258,258,4096,ne)],i.deflateInit=function(S,K){return Ge(S,K,x,15,8,0)},i.deflateInit2=Ge,i.deflateReset=Re,i.deflateResetKeep=Le,i.deflateSetHeader=function(S,K){return S&&S.state?S.state.wrap!==2?p:(S.state.gzhead=K,f):p},i.deflate=function(S,K){var V,O,A,B;if(!S||!S.state||5<K||K<0)return S?ie(S,p):p;if(O=S.state,!S.output||!S.input&&S.avail_in!==0||O.status===666&&K!==h)return ie(S,S.avail_out===0?-5:p);if(O.strm=S,V=O.last_flush,O.last_flush=K,O.status===_)if(O.wrap===2)S.adler=0,ae(O,31),ae(O,139),ae(O,8),O.gzhead?(ae(O,(O.gzhead.text?1:0)+(O.gzhead.hcrc?2:0)+(O.gzhead.extra?4:0)+(O.gzhead.name?8:0)+(O.gzhead.comment?16:0)),ae(O,255&O.gzhead.time),ae(O,O.gzhead.time>>8&255),ae(O,O.gzhead.time>>16&255),ae(O,O.gzhead.time>>24&255),ae(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),ae(O,255&O.gzhead.os),O.gzhead.extra&&O.gzhead.extra.length&&(ae(O,255&O.gzhead.extra.length),ae(O,O.gzhead.extra.length>>8&255)),O.gzhead.hcrc&&(S.adler=c(S.adler,O.pending_buf,O.pending,0)),O.gzindex=0,O.status=69):(ae(O,0),ae(O,0),ae(O,0),ae(O,0),ae(O,0),ae(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),ae(O,3),O.status=z);else{var Y=x+(O.w_bits-8<<4)<<8;Y|=(2<=O.strategy||O.level<2?0:O.level<6?1:O.level===6?2:3)<<6,O.strstart!==0&&(Y|=32),Y+=31-Y%31,O.status=z,Z(O,Y),O.strstart!==0&&(Z(O,S.adler>>>16),Z(O,65535&S.adler)),S.adler=1}if(O.status===69)if(O.gzhead.extra){for(A=O.pending;O.gzindex<(65535&O.gzhead.extra.length)&&(O.pending!==O.pending_buf_size||(O.gzhead.hcrc&&O.pending>A&&(S.adler=c(S.adler,O.pending_buf,O.pending-A,A)),I(S),A=O.pending,O.pending!==O.pending_buf_size));)ae(O,255&O.gzhead.extra[O.gzindex]),O.gzindex++;O.gzhead.hcrc&&O.pending>A&&(S.adler=c(S.adler,O.pending_buf,O.pending-A,A)),O.gzindex===O.gzhead.extra.length&&(O.gzindex=0,O.status=73)}else O.status=73;if(O.status===73)if(O.gzhead.name){A=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>A&&(S.adler=c(S.adler,O.pending_buf,O.pending-A,A)),I(S),A=O.pending,O.pending===O.pending_buf_size)){B=1;break}B=O.gzindex<O.gzhead.name.length?255&O.gzhead.name.charCodeAt(O.gzindex++):0,ae(O,B)}while(B!==0);O.gzhead.hcrc&&O.pending>A&&(S.adler=c(S.adler,O.pending_buf,O.pending-A,A)),B===0&&(O.gzindex=0,O.status=91)}else O.status=91;if(O.status===91)if(O.gzhead.comment){A=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>A&&(S.adler=c(S.adler,O.pending_buf,O.pending-A,A)),I(S),A=O.pending,O.pending===O.pending_buf_size)){B=1;break}B=O.gzindex<O.gzhead.comment.length?255&O.gzhead.comment.charCodeAt(O.gzindex++):0,ae(O,B)}while(B!==0);O.gzhead.hcrc&&O.pending>A&&(S.adler=c(S.adler,O.pending_buf,O.pending-A,A)),B===0&&(O.status=103)}else O.status=103;if(O.status===103&&(O.gzhead.hcrc?(O.pending+2>O.pending_buf_size&&I(S),O.pending+2<=O.pending_buf_size&&(ae(O,255&S.adler),ae(O,S.adler>>8&255),S.adler=0,O.status=z)):O.status=z),O.pending!==0){if(I(S),S.avail_out===0)return O.last_flush=-1,f}else if(S.avail_in===0&&q(K)<=q(V)&&K!==h)return ie(S,-5);if(O.status===666&&S.avail_in!==0)return ie(S,-5);if(S.avail_in!==0||O.lookahead!==0||K!==u&&O.status!==666){var te=O.strategy===2?(function(F,re){for(var he;;){if(F.lookahead===0&&(_e(F),F.lookahead===0)){if(re===u)return k;break}if(F.match_length=0,he=a._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++,he&&(D(F,!1),F.strm.avail_out===0))return k}return F.insert=0,re===h?(D(F,!0),F.strm.avail_out===0?W:H):F.last_lit&&(D(F,!1),F.strm.avail_out===0)?k:L})(O,K):O.strategy===3?(function(F,re){for(var he,le,Ee,Fe,Be=F.window;;){if(F.lookahead<=T){if(_e(F),F.lookahead<=T&&re===u)return k;if(F.lookahead===0)break}if(F.match_length=0,F.lookahead>=M&&0<F.strstart&&(le=Be[Ee=F.strstart-1])===Be[++Ee]&&le===Be[++Ee]&&le===Be[++Ee]){Fe=F.strstart+T;do;while(le===Be[++Ee]&&le===Be[++Ee]&&le===Be[++Ee]&&le===Be[++Ee]&&le===Be[++Ee]&&le===Be[++Ee]&&le===Be[++Ee]&&le===Be[++Ee]&&Ee<Fe);F.match_length=T-(Fe-Ee),F.match_length>F.lookahead&&(F.match_length=F.lookahead)}if(F.match_length>=M?(he=a._tr_tally(F,1,F.match_length-M),F.lookahead-=F.match_length,F.strstart+=F.match_length,F.match_length=0):(he=a._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++),he&&(D(F,!1),F.strm.avail_out===0))return k}return F.insert=0,re===h?(D(F,!0),F.strm.avail_out===0?W:H):F.last_lit&&(D(F,!1),F.strm.avail_out===0)?k:L})(O,K):s[O.level].func(O,K);if(te!==W&&te!==H||(O.status=666),te===k||te===W)return S.avail_out===0&&(O.last_flush=-1),f;if(te===L&&(K===1?a._tr_align(O):K!==5&&(a._tr_stored_block(O,0,0,!1),K===3&&(fe(O.head),O.lookahead===0&&(O.strstart=0,O.block_start=0,O.insert=0))),I(S),S.avail_out===0))return O.last_flush=-1,f}return K!==h?f:O.wrap<=0?1:(O.wrap===2?(ae(O,255&S.adler),ae(O,S.adler>>8&255),ae(O,S.adler>>16&255),ae(O,S.adler>>24&255),ae(O,255&S.total_in),ae(O,S.total_in>>8&255),ae(O,S.total_in>>16&255),ae(O,S.total_in>>24&255)):(Z(O,S.adler>>>16),Z(O,65535&S.adler)),I(S),0<O.wrap&&(O.wrap=-O.wrap),O.pending!==0?f:1)},i.deflateEnd=function(S){var K;return S&&S.state?(K=S.state.status)!==_&&K!==69&&K!==73&&K!==91&&K!==103&&K!==z&&K!==666?ie(S,p):(S.state=null,K===z?ie(S,-3):f):p},i.deflateSetDictionary=function(S,K){var V,O,A,B,Y,te,F,re,he=K.length;if(!S||!S.state||(B=(V=S.state).wrap)===2||B===1&&V.status!==_||V.lookahead)return p;for(B===1&&(S.adler=l(S.adler,K,he,0)),V.wrap=0,he>=V.w_size&&(B===0&&(fe(V.head),V.strstart=0,V.block_start=0,V.insert=0),re=new o.Buf8(V.w_size),o.arraySet(re,K,he-V.w_size,V.w_size,0),K=re,he=V.w_size),Y=S.avail_in,te=S.next_in,F=S.input,S.avail_in=he,S.next_in=0,S.input=K,_e(V);V.lookahead>=M;){for(O=V.strstart,A=V.lookahead-(M-1);V.ins_h=(V.ins_h<<V.hash_shift^V.window[O+M-1])&V.hash_mask,V.prev[O&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=O,O++,--A;);V.strstart=O,V.lookahead=M-1,_e(V)}return V.strstart+=V.lookahead,V.block_start=V.strstart,V.insert=V.lookahead,V.lookahead=0,V.match_length=V.prev_length=M-1,V.match_available=0,S.next_in=te,S.input=F,S.avail_in=Y,V.wrap=B,f},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,o){var a,l,c,d,u,h,f,p,g,y,b,x,w,v,E,C,N,j,M,T,P,_,z,k,L;a=s.state,l=s.next_in,k=s.input,c=l+(s.avail_in-5),d=s.next_out,L=s.output,u=d-(o-s.avail_out),h=d+(s.avail_out-257),f=a.dmax,p=a.wsize,g=a.whave,y=a.wnext,b=a.window,x=a.hold,w=a.bits,v=a.lencode,E=a.distcode,C=(1<<a.lenbits)-1,N=(1<<a.distbits)-1;e:do{w<15&&(x+=k[l++]<<w,w+=8,x+=k[l++]<<w,w+=8),j=v[x&C];t:for(;;){if(x>>>=M=j>>>24,w-=M,(M=j>>>16&255)===0)L[d++]=65535&j;else{if(!(16&M)){if((64&M)==0){j=v[(65535&j)+(x&(1<<M)-1)];continue t}if(32&M){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}T=65535&j,(M&=15)&&(w<M&&(x+=k[l++]<<w,w+=8),T+=x&(1<<M)-1,x>>>=M,w-=M),w<15&&(x+=k[l++]<<w,w+=8,x+=k[l++]<<w,w+=8),j=E[x&N];n:for(;;){if(x>>>=M=j>>>24,w-=M,!(16&(M=j>>>16&255))){if((64&M)==0){j=E[(65535&j)+(x&(1<<M)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(P=65535&j,w<(M&=15)&&(x+=k[l++]<<w,(w+=8)<M&&(x+=k[l++]<<w,w+=8)),f<(P+=x&(1<<M)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(x>>>=M,w-=M,(M=d-u)<P){if(g<(M=P-M)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(z=b,(_=0)===y){if(_+=p-M,M<T){for(T-=M;L[d++]=b[_++],--M;);_=d-P,z=L}}else if(y<M){if(_+=p+y-M,(M-=y)<T){for(T-=M;L[d++]=b[_++],--M;);if(_=0,y<T){for(T-=M=y;L[d++]=b[_++],--M;);_=d-P,z=L}}}else if(_+=y-M,M<T){for(T-=M;L[d++]=b[_++],--M;);_=d-P,z=L}for(;2<T;)L[d++]=z[_++],L[d++]=z[_++],L[d++]=z[_++],T-=3;T&&(L[d++]=z[_++],1<T&&(L[d++]=z[_++]))}else{for(_=d-P;L[d++]=L[_++],L[d++]=L[_++],L[d++]=L[_++],2<(T-=3););T&&(L[d++]=L[_++],1<T&&(L[d++]=L[_++]))}break}}break}}while(l<c&&d<h);l-=T=w>>3,x&=(1<<(w-=T<<3))-1,s.next_in=l,s.next_out=d,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=d<h?h-d+257:257-(d-h),a.hold=x,a.bits=w}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),d=1,u=2,h=0,f=-2,p=1,g=852,y=592;function b(_){return(_>>>24&255)+(_>>>8&65280)+((65280&_)<<8)+((255&_)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(_){var z;return _&&_.state?(z=_.state,_.total_in=_.total_out=z.total=0,_.msg="",z.wrap&&(_.adler=1&z.wrap),z.mode=p,z.last=0,z.havedict=0,z.dmax=32768,z.head=null,z.hold=0,z.bits=0,z.lencode=z.lendyn=new s.Buf32(g),z.distcode=z.distdyn=new s.Buf32(y),z.sane=1,z.back=-1,h):f}function v(_){var z;return _&&_.state?((z=_.state).wsize=0,z.whave=0,z.wnext=0,w(_)):f}function E(_,z){var k,L;return _&&_.state?(L=_.state,z<0?(k=0,z=-z):(k=1+(z>>4),z<48&&(z&=15)),z&&(z<8||15<z)?f:(L.window!==null&&L.wbits!==z&&(L.window=null),L.wrap=k,L.wbits=z,v(_))):f}function C(_,z){var k,L;return _?(L=new x,(_.state=L).window=null,(k=E(_,z))!==h&&(_.state=null),k):f}var N,j,M=!0;function T(_){if(M){var z;for(N=new s.Buf32(512),j=new s.Buf32(32),z=0;z<144;)_.lens[z++]=8;for(;z<256;)_.lens[z++]=9;for(;z<280;)_.lens[z++]=7;for(;z<288;)_.lens[z++]=8;for(c(d,_.lens,0,288,N,0,_.work,{bits:9}),z=0;z<32;)_.lens[z++]=5;c(u,_.lens,0,32,j,0,_.work,{bits:5}),M=!1}_.lencode=N,_.lenbits=9,_.distcode=j,_.distbits=5}function P(_,z,k,L){var W,H=_.state;return H.window===null&&(H.wsize=1<<H.wbits,H.wnext=0,H.whave=0,H.window=new s.Buf8(H.wsize)),L>=H.wsize?(s.arraySet(H.window,z,k-H.wsize,H.wsize,0),H.wnext=0,H.whave=H.wsize):(L<(W=H.wsize-H.wnext)&&(W=L),s.arraySet(H.window,z,k-L,W,H.wnext),(L-=W)?(s.arraySet(H.window,z,k-L,L,0),H.wnext=L,H.whave=H.wsize):(H.wnext+=W,H.wnext===H.wsize&&(H.wnext=0),H.whave<H.wsize&&(H.whave+=W))),0}i.inflateReset=v,i.inflateReset2=E,i.inflateResetKeep=w,i.inflateInit=function(_){return C(_,15)},i.inflateInit2=C,i.inflate=function(_,z){var k,L,W,H,ie,q,fe,I,D,ae,Z,J,_e,Pe,ne,ge,Ce,Le,Re,Ge,S,K,V,O,A=0,B=new s.Buf8(4),Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_||!_.state||!_.output||!_.input&&_.avail_in!==0)return f;(k=_.state).mode===12&&(k.mode=13),ie=_.next_out,W=_.output,fe=_.avail_out,H=_.next_in,L=_.input,q=_.avail_in,I=k.hold,D=k.bits,ae=q,Z=fe,K=h;e:for(;;)switch(k.mode){case p:if(k.wrap===0){k.mode=13;break}for(;D<16;){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}if(2&k.wrap&&I===35615){B[k.check=0]=255&I,B[1]=I>>>8&255,k.check=a(k.check,B,2,0),D=I=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&I)<<8)+(I>>8))%31){_.msg="incorrect header check",k.mode=30;break}if((15&I)!=8){_.msg="unknown compression method",k.mode=30;break}if(D-=4,S=8+(15&(I>>>=4)),k.wbits===0)k.wbits=S;else if(S>k.wbits){_.msg="invalid window size",k.mode=30;break}k.dmax=1<<S,_.adler=k.check=1,k.mode=512&I?10:12,D=I=0;break;case 2:for(;D<16;){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}if(k.flags=I,(255&k.flags)!=8){_.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){_.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=I>>8&1),512&k.flags&&(B[0]=255&I,B[1]=I>>>8&255,k.check=a(k.check,B,2,0)),D=I=0,k.mode=3;case 3:for(;D<32;){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}k.head&&(k.head.time=I),512&k.flags&&(B[0]=255&I,B[1]=I>>>8&255,B[2]=I>>>16&255,B[3]=I>>>24&255,k.check=a(k.check,B,4,0)),D=I=0,k.mode=4;case 4:for(;D<16;){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}k.head&&(k.head.xflags=255&I,k.head.os=I>>8),512&k.flags&&(B[0]=255&I,B[1]=I>>>8&255,k.check=a(k.check,B,2,0)),D=I=0,k.mode=5;case 5:if(1024&k.flags){for(;D<16;){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}k.length=I,k.head&&(k.head.extra_len=I),512&k.flags&&(B[0]=255&I,B[1]=I>>>8&255,k.check=a(k.check,B,2,0)),D=I=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(q<(J=k.length)&&(J=q),J&&(k.head&&(S=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),s.arraySet(k.head.extra,L,H,J,S)),512&k.flags&&(k.check=a(k.check,L,J,H)),q-=J,H+=J,k.length-=J),k.length))break e;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(q===0)break e;for(J=0;S=L[H+J++],k.head&&S&&k.length<65536&&(k.head.name+=String.fromCharCode(S)),S&&J<q;);if(512&k.flags&&(k.check=a(k.check,L,J,H)),q-=J,H+=J,S)break e}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(q===0)break e;for(J=0;S=L[H+J++],k.head&&S&&k.length<65536&&(k.head.comment+=String.fromCharCode(S)),S&&J<q;);if(512&k.flags&&(k.check=a(k.check,L,J,H)),q-=J,H+=J,S)break e}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;D<16;){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}if(I!==(65535&k.check)){_.msg="header crc mismatch",k.mode=30;break}D=I=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),_.adler=k.check=0,k.mode=12;break;case 10:for(;D<32;){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}_.adler=k.check=b(I),D=I=0,k.mode=11;case 11:if(k.havedict===0)return _.next_out=ie,_.avail_out=fe,_.next_in=H,_.avail_in=q,k.hold=I,k.bits=D,2;_.adler=k.check=1,k.mode=12;case 12:if(z===5||z===6)break e;case 13:if(k.last){I>>>=7&D,D-=7&D,k.mode=27;break}for(;D<3;){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}switch(k.last=1&I,D-=1,3&(I>>>=1)){case 0:k.mode=14;break;case 1:if(T(k),k.mode=20,z!==6)break;I>>>=2,D-=2;break e;case 2:k.mode=17;break;case 3:_.msg="invalid block type",k.mode=30}I>>>=2,D-=2;break;case 14:for(I>>>=7&D,D-=7&D;D<32;){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}if((65535&I)!=(I>>>16^65535)){_.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&I,D=I=0,k.mode=15,z===6)break e;case 15:k.mode=16;case 16:if(J=k.length){if(q<J&&(J=q),fe<J&&(J=fe),J===0)break e;s.arraySet(W,L,H,J,ie),q-=J,H+=J,fe-=J,ie+=J,k.length-=J;break}k.mode=12;break;case 17:for(;D<14;){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}if(k.nlen=257+(31&I),I>>>=5,D-=5,k.ndist=1+(31&I),I>>>=5,D-=5,k.ncode=4+(15&I),I>>>=4,D-=4,286<k.nlen||30<k.ndist){_.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;D<3;){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}k.lens[Y[k.have++]]=7&I,I>>>=3,D-=3}for(;k.have<19;)k.lens[Y[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,V={bits:k.lenbits},K=c(0,k.lens,0,19,k.lencode,0,k.work,V),k.lenbits=V.bits,K){_.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;ge=(A=k.lencode[I&(1<<k.lenbits)-1])>>>16&255,Ce=65535&A,!((ne=A>>>24)<=D);){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}if(Ce<16)I>>>=ne,D-=ne,k.lens[k.have++]=Ce;else{if(Ce===16){for(O=ne+2;D<O;){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}if(I>>>=ne,D-=ne,k.have===0){_.msg="invalid bit length repeat",k.mode=30;break}S=k.lens[k.have-1],J=3+(3&I),I>>>=2,D-=2}else if(Ce===17){for(O=ne+3;D<O;){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}D-=ne,S=0,J=3+(7&(I>>>=ne)),I>>>=3,D-=3}else{for(O=ne+7;D<O;){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}D-=ne,S=0,J=11+(127&(I>>>=ne)),I>>>=7,D-=7}if(k.have+J>k.nlen+k.ndist){_.msg="invalid bit length repeat",k.mode=30;break}for(;J--;)k.lens[k.have++]=S}}if(k.mode===30)break;if(k.lens[256]===0){_.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,V={bits:k.lenbits},K=c(d,k.lens,0,k.nlen,k.lencode,0,k.work,V),k.lenbits=V.bits,K){_.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,V={bits:k.distbits},K=c(u,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,V),k.distbits=V.bits,K){_.msg="invalid distances set",k.mode=30;break}if(k.mode=20,z===6)break e;case 20:k.mode=21;case 21:if(6<=q&&258<=fe){_.next_out=ie,_.avail_out=fe,_.next_in=H,_.avail_in=q,k.hold=I,k.bits=D,l(_,Z),ie=_.next_out,W=_.output,fe=_.avail_out,H=_.next_in,L=_.input,q=_.avail_in,I=k.hold,D=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;ge=(A=k.lencode[I&(1<<k.lenbits)-1])>>>16&255,Ce=65535&A,!((ne=A>>>24)<=D);){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}if(ge&&(240&ge)==0){for(Le=ne,Re=ge,Ge=Ce;ge=(A=k.lencode[Ge+((I&(1<<Le+Re)-1)>>Le)])>>>16&255,Ce=65535&A,!(Le+(ne=A>>>24)<=D);){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}I>>>=Le,D-=Le,k.back+=Le}if(I>>>=ne,D-=ne,k.back+=ne,k.length=Ce,ge===0){k.mode=26;break}if(32&ge){k.back=-1,k.mode=12;break}if(64&ge){_.msg="invalid literal/length code",k.mode=30;break}k.extra=15&ge,k.mode=22;case 22:if(k.extra){for(O=k.extra;D<O;){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}k.length+=I&(1<<k.extra)-1,I>>>=k.extra,D-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;ge=(A=k.distcode[I&(1<<k.distbits)-1])>>>16&255,Ce=65535&A,!((ne=A>>>24)<=D);){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}if((240&ge)==0){for(Le=ne,Re=ge,Ge=Ce;ge=(A=k.distcode[Ge+((I&(1<<Le+Re)-1)>>Le)])>>>16&255,Ce=65535&A,!(Le+(ne=A>>>24)<=D);){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}I>>>=Le,D-=Le,k.back+=Le}if(I>>>=ne,D-=ne,k.back+=ne,64&ge){_.msg="invalid distance code",k.mode=30;break}k.offset=Ce,k.extra=15&ge,k.mode=24;case 24:if(k.extra){for(O=k.extra;D<O;){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}k.offset+=I&(1<<k.extra)-1,I>>>=k.extra,D-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){_.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(fe===0)break e;if(J=Z-fe,k.offset>J){if((J=k.offset-J)>k.whave&&k.sane){_.msg="invalid distance too far back",k.mode=30;break}_e=J>k.wnext?(J-=k.wnext,k.wsize-J):k.wnext-J,J>k.length&&(J=k.length),Pe=k.window}else Pe=W,_e=ie-k.offset,J=k.length;for(fe<J&&(J=fe),fe-=J,k.length-=J;W[ie++]=Pe[_e++],--J;);k.length===0&&(k.mode=21);break;case 26:if(fe===0)break e;W[ie++]=k.length,fe--,k.mode=21;break;case 27:if(k.wrap){for(;D<32;){if(q===0)break e;q--,I|=L[H++]<<D,D+=8}if(Z-=fe,_.total_out+=Z,k.total+=Z,Z&&(_.adler=k.check=k.flags?a(k.check,W,Z,ie-Z):o(k.check,W,Z,ie-Z)),Z=fe,(k.flags?I:b(I))!==k.check){_.msg="incorrect data check",k.mode=30;break}D=I=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;D<32;){if(q===0)break e;q--,I+=L[H++]<<D,D+=8}if(I!==(4294967295&k.total)){_.msg="incorrect length check",k.mode=30;break}D=I=0}k.mode=29;case 29:K=1;break e;case 30:K=-3;break e;case 31:return-4;case 32:default:return f}return _.next_out=ie,_.avail_out=fe,_.next_in=H,_.avail_in=q,k.hold=I,k.bits=D,(k.wsize||Z!==_.avail_out&&k.mode<30&&(k.mode<27||z!==4))&&P(_,_.output,_.next_out,Z-_.avail_out)?(k.mode=31,-4):(ae-=_.avail_in,Z-=_.avail_out,_.total_in+=ae,_.total_out+=Z,k.total+=Z,k.wrap&&Z&&(_.adler=k.check=k.flags?a(k.check,W,Z,_.next_out-Z):o(k.check,W,Z,_.next_out-Z)),_.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(ae==0&&Z===0||z===4)&&K===h&&(K=-5),K)},i.inflateEnd=function(_){if(!_||!_.state)return f;var z=_.state;return z.window&&(z.window=null),_.state=null,h},i.inflateGetHeader=function(_,z){var k;return _&&_.state?(2&(k=_.state).wrap)==0?f:((k.head=z).done=!1,h):f},i.inflateSetDictionary=function(_,z){var k,L=z.length;return _&&_.state?(k=_.state).wrap!==0&&k.mode!==11?f:k.mode===11&&o(1,z,L,0)!==k.check?-3:P(_,z,L,L)?(k.mode=31,-4):(k.havedict=1,h):f},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,u,h,f,p,g,y,b){var x,w,v,E,C,N,j,M,T,P=b.bits,_=0,z=0,k=0,L=0,W=0,H=0,ie=0,q=0,fe=0,I=0,D=null,ae=0,Z=new s.Buf16(16),J=new s.Buf16(16),_e=null,Pe=0;for(_=0;_<=15;_++)Z[_]=0;for(z=0;z<f;z++)Z[u[h+z]]++;for(W=P,L=15;1<=L&&Z[L]===0;L--);if(L<W&&(W=L),L===0)return p[g++]=20971520,p[g++]=20971520,b.bits=1,0;for(k=1;k<L&&Z[k]===0;k++);for(W<k&&(W=k),_=q=1;_<=15;_++)if(q<<=1,(q-=Z[_])<0)return-1;if(0<q&&(d===0||L!==1))return-1;for(J[1]=0,_=1;_<15;_++)J[_+1]=J[_]+Z[_];for(z=0;z<f;z++)u[h+z]!==0&&(y[J[u[h+z]]++]=z);if(N=d===0?(D=_e=y,19):d===1?(D=o,ae-=257,_e=a,Pe-=257,256):(D=l,_e=c,-1),_=k,C=g,ie=z=I=0,v=-1,E=(fe=1<<(H=W))-1,d===1&&852<fe||d===2&&592<fe)return 1;for(;;){for(j=_-ie,T=y[z]<N?(M=0,y[z]):y[z]>N?(M=_e[Pe+y[z]],D[ae+y[z]]):(M=96,0),x=1<<_-ie,k=w=1<<H;p[C+(I>>ie)+(w-=x)]=j<<24|M<<16|T|0,w!==0;);for(x=1<<_-1;I&x;)x>>=1;if(x!==0?(I&=x-1,I+=x):I=0,z++,--Z[_]==0){if(_===L)break;_=u[h+y[z]]}if(W<_&&(I&E)!==v){for(ie===0&&(ie=W),C+=k,q=1<<(H=_-ie);H+ie<L&&!((q-=Z[H+ie])<=0);)H++,q<<=1;if(fe+=1<<H,d===1&&852<fe||d===2&&592<fe)return 1;p[v=I&E]=W<<24|H<<16|C-g|0}}return I!==0&&(p[C+I]=_-ie<<24|64<<16|0),b.bits=W,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=0,a=1;function l(A){for(var B=A.length;0<=--B;)A[B]=0}var c=0,d=29,u=256,h=u+1+d,f=30,p=19,g=2*h+1,y=15,b=16,x=7,w=256,v=16,E=17,C=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],P=new Array(2*(h+2));l(P);var _=new Array(2*f);l(_);var z=new Array(512);l(z);var k=new Array(256);l(k);var L=new Array(d);l(L);var W,H,ie,q=new Array(f);function fe(A,B,Y,te,F){this.static_tree=A,this.extra_bits=B,this.extra_base=Y,this.elems=te,this.max_length=F,this.has_stree=A&&A.length}function I(A,B){this.dyn_tree=A,this.max_code=0,this.stat_desc=B}function D(A){return A<256?z[A]:z[256+(A>>>7)]}function ae(A,B){A.pending_buf[A.pending++]=255&B,A.pending_buf[A.pending++]=B>>>8&255}function Z(A,B,Y){A.bi_valid>b-Y?(A.bi_buf|=B<<A.bi_valid&65535,ae(A,A.bi_buf),A.bi_buf=B>>b-A.bi_valid,A.bi_valid+=Y-b):(A.bi_buf|=B<<A.bi_valid&65535,A.bi_valid+=Y)}function J(A,B,Y){Z(A,Y[2*B],Y[2*B+1])}function _e(A,B){for(var Y=0;Y|=1&A,A>>>=1,Y<<=1,0<--B;);return Y>>>1}function Pe(A,B,Y){var te,F,re=new Array(y+1),he=0;for(te=1;te<=y;te++)re[te]=he=he+Y[te-1]<<1;for(F=0;F<=B;F++){var le=A[2*F+1];le!==0&&(A[2*F]=_e(re[le]++,le))}}function ne(A){var B;for(B=0;B<h;B++)A.dyn_ltree[2*B]=0;for(B=0;B<f;B++)A.dyn_dtree[2*B]=0;for(B=0;B<p;B++)A.bl_tree[2*B]=0;A.dyn_ltree[2*w]=1,A.opt_len=A.static_len=0,A.last_lit=A.matches=0}function ge(A){8<A.bi_valid?ae(A,A.bi_buf):0<A.bi_valid&&(A.pending_buf[A.pending++]=A.bi_buf),A.bi_buf=0,A.bi_valid=0}function Ce(A,B,Y,te){var F=2*B,re=2*Y;return A[F]<A[re]||A[F]===A[re]&&te[B]<=te[Y]}function Le(A,B,Y){for(var te=A.heap[Y],F=Y<<1;F<=A.heap_len&&(F<A.heap_len&&Ce(B,A.heap[F+1],A.heap[F],A.depth)&&F++,!Ce(B,te,A.heap[F],A.depth));)A.heap[Y]=A.heap[F],Y=F,F<<=1;A.heap[Y]=te}function Re(A,B,Y){var te,F,re,he,le=0;if(A.last_lit!==0)for(;te=A.pending_buf[A.d_buf+2*le]<<8|A.pending_buf[A.d_buf+2*le+1],F=A.pending_buf[A.l_buf+le],le++,te===0?J(A,F,B):(J(A,(re=k[F])+u+1,B),(he=N[re])!==0&&Z(A,F-=L[re],he),J(A,re=D(--te),Y),(he=j[re])!==0&&Z(A,te-=q[re],he)),le<A.last_lit;);J(A,w,B)}function Ge(A,B){var Y,te,F,re=B.dyn_tree,he=B.stat_desc.static_tree,le=B.stat_desc.has_stree,Ee=B.stat_desc.elems,Fe=-1;for(A.heap_len=0,A.heap_max=g,Y=0;Y<Ee;Y++)re[2*Y]!==0?(A.heap[++A.heap_len]=Fe=Y,A.depth[Y]=0):re[2*Y+1]=0;for(;A.heap_len<2;)re[2*(F=A.heap[++A.heap_len]=Fe<2?++Fe:0)]=1,A.depth[F]=0,A.opt_len--,le&&(A.static_len-=he[2*F+1]);for(B.max_code=Fe,Y=A.heap_len>>1;1<=Y;Y--)Le(A,re,Y);for(F=Ee;Y=A.heap[1],A.heap[1]=A.heap[A.heap_len--],Le(A,re,1),te=A.heap[1],A.heap[--A.heap_max]=Y,A.heap[--A.heap_max]=te,re[2*F]=re[2*Y]+re[2*te],A.depth[F]=(A.depth[Y]>=A.depth[te]?A.depth[Y]:A.depth[te])+1,re[2*Y+1]=re[2*te+1]=F,A.heap[1]=F++,Le(A,re,1),2<=A.heap_len;);A.heap[--A.heap_max]=A.heap[1],(function(Be,lt){var sn,Et,Zt,G,U,ye,ke=lt.dyn_tree,$e=lt.max_code,Te=lt.stat_desc.static_tree,et=lt.stat_desc.has_stree,Ze=lt.stat_desc.extra_bits,Mt=lt.stat_desc.extra_base,Ot=lt.stat_desc.max_length,it=0;for(G=0;G<=y;G++)Be.bl_count[G]=0;for(ke[2*Be.heap[Be.heap_max]+1]=0,sn=Be.heap_max+1;sn<g;sn++)Ot<(G=ke[2*ke[2*(Et=Be.heap[sn])+1]+1]+1)&&(G=Ot,it++),ke[2*Et+1]=G,$e<Et||(Be.bl_count[G]++,U=0,Mt<=Et&&(U=Ze[Et-Mt]),ye=ke[2*Et],Be.opt_len+=ye*(G+U),et&&(Be.static_len+=ye*(Te[2*Et+1]+U)));if(it!==0){do{for(G=Ot-1;Be.bl_count[G]===0;)G--;Be.bl_count[G]--,Be.bl_count[G+1]+=2,Be.bl_count[Ot]--,it-=2}while(0<it);for(G=Ot;G!==0;G--)for(Et=Be.bl_count[G];Et!==0;)$e<(Zt=Be.heap[--sn])||(ke[2*Zt+1]!==G&&(Be.opt_len+=(G-ke[2*Zt+1])*ke[2*Zt],ke[2*Zt+1]=G),Et--)}})(A,B),Pe(re,Fe,A.bl_count)}function S(A,B,Y){var te,F,re=-1,he=B[1],le=0,Ee=7,Fe=4;for(he===0&&(Ee=138,Fe=3),B[2*(Y+1)+1]=65535,te=0;te<=Y;te++)F=he,he=B[2*(te+1)+1],++le<Ee&&F===he||(le<Fe?A.bl_tree[2*F]+=le:F!==0?(F!==re&&A.bl_tree[2*F]++,A.bl_tree[2*v]++):le<=10?A.bl_tree[2*E]++:A.bl_tree[2*C]++,re=F,Fe=(le=0)===he?(Ee=138,3):F===he?(Ee=6,3):(Ee=7,4))}function K(A,B,Y){var te,F,re=-1,he=B[1],le=0,Ee=7,Fe=4;for(he===0&&(Ee=138,Fe=3),te=0;te<=Y;te++)if(F=he,he=B[2*(te+1)+1],!(++le<Ee&&F===he)){if(le<Fe)for(;J(A,F,A.bl_tree),--le!=0;);else F!==0?(F!==re&&(J(A,F,A.bl_tree),le--),J(A,v,A.bl_tree),Z(A,le-3,2)):le<=10?(J(A,E,A.bl_tree),Z(A,le-3,3)):(J(A,C,A.bl_tree),Z(A,le-11,7));re=F,Fe=(le=0)===he?(Ee=138,3):F===he?(Ee=6,3):(Ee=7,4)}}l(q);var V=!1;function O(A,B,Y,te){Z(A,(c<<1)+(te?1:0),3),(function(F,re,he,le){ge(F),ae(F,he),ae(F,~he),s.arraySet(F.pending_buf,F.window,re,he,F.pending),F.pending+=he})(A,B,Y)}i._tr_init=function(A){V||((function(){var B,Y,te,F,re,he=new Array(y+1);for(F=te=0;F<d-1;F++)for(L[F]=te,B=0;B<1<<N[F];B++)k[te++]=F;for(k[te-1]=F,F=re=0;F<16;F++)for(q[F]=re,B=0;B<1<<j[F];B++)z[re++]=F;for(re>>=7;F<f;F++)for(q[F]=re<<7,B=0;B<1<<j[F]-7;B++)z[256+re++]=F;for(Y=0;Y<=y;Y++)he[Y]=0;for(B=0;B<=143;)P[2*B+1]=8,B++,he[8]++;for(;B<=255;)P[2*B+1]=9,B++,he[9]++;for(;B<=279;)P[2*B+1]=7,B++,he[7]++;for(;B<=287;)P[2*B+1]=8,B++,he[8]++;for(Pe(P,h+1,he),B=0;B<f;B++)_[2*B+1]=5,_[2*B]=_e(B,5);W=new fe(P,N,u+1,h,y),H=new fe(_,j,0,f,y),ie=new fe(new Array(0),M,0,p,x)})(),V=!0),A.l_desc=new I(A.dyn_ltree,W),A.d_desc=new I(A.dyn_dtree,H),A.bl_desc=new I(A.bl_tree,ie),A.bi_buf=0,A.bi_valid=0,ne(A)},i._tr_stored_block=O,i._tr_flush_block=function(A,B,Y,te){var F,re,he=0;0<A.level?(A.strm.data_type===2&&(A.strm.data_type=(function(le){var Ee,Fe=4093624447;for(Ee=0;Ee<=31;Ee++,Fe>>>=1)if(1&Fe&&le.dyn_ltree[2*Ee]!==0)return o;if(le.dyn_ltree[18]!==0||le.dyn_ltree[20]!==0||le.dyn_ltree[26]!==0)return a;for(Ee=32;Ee<u;Ee++)if(le.dyn_ltree[2*Ee]!==0)return a;return o})(A)),Ge(A,A.l_desc),Ge(A,A.d_desc),he=(function(le){var Ee;for(S(le,le.dyn_ltree,le.l_desc.max_code),S(le,le.dyn_dtree,le.d_desc.max_code),Ge(le,le.bl_desc),Ee=p-1;3<=Ee&&le.bl_tree[2*T[Ee]+1]===0;Ee--);return le.opt_len+=3*(Ee+1)+5+5+4,Ee})(A),F=A.opt_len+3+7>>>3,(re=A.static_len+3+7>>>3)<=F&&(F=re)):F=re=Y+5,Y+4<=F&&B!==-1?O(A,B,Y,te):A.strategy===4||re===F?(Z(A,2+(te?1:0),3),Re(A,P,_)):(Z(A,4+(te?1:0),3),(function(le,Ee,Fe,Be){var lt;for(Z(le,Ee-257,5),Z(le,Fe-1,5),Z(le,Be-4,4),lt=0;lt<Be;lt++)Z(le,le.bl_tree[2*T[lt]+1],3);K(le,le.dyn_ltree,Ee-1),K(le,le.dyn_dtree,Fe-1)})(A,A.l_desc.max_code+1,A.d_desc.max_code+1,he+1),Re(A,A.dyn_ltree,A.dyn_dtree)),ne(A),te&&ge(A)},i._tr_tally=function(A,B,Y){return A.pending_buf[A.d_buf+2*A.last_lit]=B>>>8&255,A.pending_buf[A.d_buf+2*A.last_lit+1]=255&B,A.pending_buf[A.l_buf+A.last_lit]=255&Y,A.last_lit++,B===0?A.dyn_ltree[2*Y]++:(A.matches++,B--,A.dyn_ltree[2*(k[Y]+u+1)]++,A.dyn_dtree[2*D(B)]++),A.last_lit===A.lit_bufsize-1},i._tr_align=function(A){Z(A,2,3),J(A,w,P),(function(B){B.bi_valid===16?(ae(B,B.bi_buf),B.bi_buf=0,B.bi_valid=0):8<=B.bi_valid&&(B.pending_buf[B.pending++]=255&B.bi_buf,B.bi_buf>>=8,B.bi_valid-=8)})(A)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(o,a){if(!o.setImmediate){var l,c,d,u,h=1,f={},p=!1,g=o.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(o);y=y&&y.setTimeout?y:o,l={}.toString.call(o.process)==="[object process]"?function(v){process.nextTick(function(){x(v)})}:(function(){if(o.postMessage&&!o.importScripts){var v=!0,E=o.onmessage;return o.onmessage=function(){v=!1},o.postMessage("","*"),o.onmessage=E,v}})()?(u="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",w,!1):o.attachEvent("onmessage",w),function(v){o.postMessage(u+v,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(v){x(v.data)},function(v){d.port2.postMessage(v)}):g&&"onreadystatechange"in g.createElement("script")?(c=g.documentElement,function(v){var E=g.createElement("script");E.onreadystatechange=function(){x(v),E.onreadystatechange=null,c.removeChild(E),E=null},c.appendChild(E)}):function(v){setTimeout(x,0,v)},y.setImmediate=function(v){typeof v!="function"&&(v=new Function(""+v));for(var E=new Array(arguments.length-1),C=0;C<E.length;C++)E[C]=arguments[C+1];var N={callback:v,args:E};return f[h]=N,l(h),h++},y.clearImmediate=b}function b(v){delete f[v]}function x(v){if(p)setTimeout(x,0,v);else{var E=f[v];if(E){p=!0;try{(function(C){var N=C.callback,j=C.args;switch(j.length){case 0:N();break;case 1:N(j[0]);break;case 2:N(j[0],j[1]);break;case 3:N(j[0],j[1],j[2]);break;default:N.apply(a,j)}})(E)}finally{b(v),p=!1}}}}function w(v){v.source===o&&typeof v.data=="string"&&v.data.indexOf(u)===0&&x(+v.data.slice(u.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Zs<"u"?Zs:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(nl)),nl.exports}var Xy=Yy();const _u=Mr(Xy);let Lr=null;const Zy=1e5,Qy="NotesDB_Local_Salt_v1",rl=new TextEncoder,eb=new TextDecoder,_n={initSession:async t=>{const e=rl.encode(t),n=rl.encode(Qy),r=await crypto.subtle.importKey("raw",e,{name:"PBKDF2"},!1,["deriveKey"]);Lr=await crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:Zy,hash:"SHA-256"},r,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]);const i=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(i)).map(a=>a.toString(16).padStart(2,"0")).join("")},hasSessionKey:()=>Lr!==null,clearSession:()=>{Lr=null},encrypt:async t=>{if(!Lr)throw new Error("Encryption Session Not Active");const e=crypto.getRandomValues(new Uint8Array(12)),n=rl.encode(t),r=await crypto.subtle.encrypt({name:"AES-GCM",iv:e},Lr,n),i=Nu(r),s=Nu(e);return{ciphertext:i,iv:s}},decrypt:async(t,e)=>{if(!Lr)throw new Error("Encryption Session Not Active");const n=Tu(e),r=Tu(t);try{const i=await crypto.subtle.decrypt({name:"AES-GCM",iv:n},Lr,r);return eb.decode(i)}catch(i){throw console.error("Decryption failed",i),new Error("Decryption failed. Wrong password or corrupted data.")}}};function Nu(t){let e="";const n=new Uint8Array(t),r=n.byteLength;for(let i=0;i<r;i++)e+=String.fromCharCode(n[i]);return btoa(e)}function Tu(t){const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return r}const tb="NotesDB_v1",se={NOTES:"notes",BOOKMARKS:"bookmarks",SOURCE_PLUGINS:"source_plugins",TEMPLATES:"templates",SETTINGS:"settings",AUTH:"auth",CATEGORIES:"categories",TAGS:"tags",ATTACHMENTS:"attachments",OUTBOX:"outbox"},nb={hasCompletedOnboarding:!1,theme:"dark",isEditorEnabled:!0,libraryMode:!1,codeLanguages:["javascript","typescript","python","html","css","bash","json","sql"],internalLinkTrigger:"[[",aiConfig:{enabled:!1,baseUrl:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o",systemPrompt:`You are the Agentic Research Lab. Your mission is to help the user achieve their User Intent by analyzing the Live Content.

Execution Rules:
1. Start every response by explaining how the content relates to the Intent.
2. Connect the Dots: Don't just list items. Explain why specific content is useful for specific parts of the Intent.
3. Filter Noise: Ignore technical metadata like userId or id unless requested.
4. Structural Analysis: If content is placeholder, analyze its length, structure, and hierarchy from a UI UX perspective.
5. Action Oriented: Provide bold, technical, and actionable next steps.`,intentPolishPrompt:`Intent Polish Instruction:

1. ACTION: Rewrite the user's intent shorthand.
2. LIMIT: Maximum 250 characters.
3. FORMAT: Plain text only. No Markdown, no quotes, no brackets.
4. CONTENT: Focus on technical keywords and the "Why" behind the note.
5. REDUNDANCY: If the input already contains "Optimized for...", do not repeat it. Use it to inform a better sentence.`,agenticSource:"provider",webLlmModel:"smol",enableDebug:!1,responseParserPath:""},syncConfig:{enabled:!1,provider:"github",hostUrl:"",personalAccessToken:"",lastGistId:""},webhooks:[],storageConfigs:[],bookmarkLayout:[],savedBookmarkLayouts:[],proxyConfigs:[],graphConfig:{enableAutoRotate:!1,autoRotateSpeed:.5,showLabels:!1,linkStrength:1,usePreview:!1,showOrphans:!0}},Ue=t=>new Promise((e,n)=>{t.onsuccess=()=>e(t.result),t.onerror=()=>n(t.error)}),Au=[{id:"cat_inbox",name:"Inbox",icon:"Inbox",color:"slate",isSystem:!0},{id:"cat_articles",name:"Articles",icon:"Newspaper",color:"sky"},{id:"cat_ideas",name:"Ideas",icon:"Lightbulb",color:"violet"},{id:"cat_project",name:"Projects",icon:"FolderKanban",color:"emerald"},{id:"cat_tasks",name:"Tasks",icon:"ListTodo",color:"orange"},{id:"cat_travel",name:"Travel",icon:"Plane",color:"cyan"},{id:"cat_private",name:"Private",icon:"Lock",color:"red",isSystem:!0}],rb=[{id:"tag_todo",name:"Todo",color:"red"},{id:"tag_code",name:"Code",color:"blue"},{id:"tag_idea",name:"Idea",color:"sky"},{id:"tag_ref",name:"Reference",color:"lime"},{id:"tag_active",name:"Active",color:"green"},{id:"tag_pending",name:"Pending",color:"orange"},{id:"tag_completed",name:"Completed",color:"indigo"}];let fn=null,Wi=null;const Je=()=>fn?Promise.resolve(fn):Wi||(Wi=new Promise((t,e)=>{const n=indexedDB.open(tb,9);n.onblocked=()=>{const r="Database upgrade blocked. Please close other tabs/windows of this app and reload.";console.error(r),alert(r),e(new Error(r))},n.onupgradeneeded=r=>{const i=r.target.result,s=r.target.transaction,o=(d,u,h)=>{let f;return i.objectStoreNames.contains(d)?f=s.objectStore(d):(f=i.createObjectStore(d,{keyPath:u}),h&&h.length>0&&h.forEach(p=>f.put(p))),f};o(se.NOTES,"id"),o(se.BOOKMARKS,"id"),o(se.SOURCE_PLUGINS,"id"),o(se.TEMPLATES,"id"),o(se.SETTINGS,"key"),o(se.AUTH,"id");const a=o(se.CATEGORIES,"id",Au);o(se.TAGS,"id",rb),o(se.ATTACHMENTS,"id"),r.oldVersion<9&&Au.forEach(d=>a.put(d));const l=o(se.OUTBOX,"id");l.indexNames.contains("status")||l.createIndex("status","status",{unique:!1}),l.indexNames.contains("noteId")||l.createIndex("noteId","noteId",{unique:!1});const c=s.objectStore(se.NOTES);c.indexNames.contains("categoryId")||c.createIndex("categoryId","categoryId",{unique:!1}),c.indexNames.contains("tags")||c.createIndex("tags","tags",{unique:!1,multiEntry:!0}),c.indexNames.contains("title")||c.createIndex("title","title",{unique:!1})},n.onsuccess=r=>{fn=r.target.result,fn.onversionchange=()=>{fn==null||fn.close(),fn=null},fn.onclose=()=>{fn=null},t(fn)},n.onerror=r=>{fn=null,Wi=null,console.error("IndexedDB Open Failed:",r.target.error),e(r.target.error)}}),Wi),ib=async t=>new Promise((i,s)=>{const o=new Image;o.src=URL.createObjectURL(t),o.onload=()=>{let a=o.width,l=o.height;a>l?a>1920&&(l*=1920/a,a=1920):l>1920&&(a*=1920/l,l=1920);const c=document.createElement("canvas");c.width=a,c.height=l;const d=c.getContext("2d");if(!d){s(new Error("Canvas context not available"));return}d.drawImage(o,0,0,a,l),c.toBlob(u=>{URL.revokeObjectURL(o.src),u?i(u):s(new Error("Compression failed"))},"image/jpeg",.8)},o.onerror=a=>s(a)}),Ke={async getNotes(){const e=(await Je()).transaction(se.NOTES,"readonly");return Ue(e.objectStore(se.NOTES).getAll())},async getNoteCount(){const e=(await Je()).transaction(se.NOTES,"readonly");return Ue(e.objectStore(se.NOTES).count())},async getNoteCountByCategory(t){const r=(await Je()).transaction(se.NOTES,"readonly").objectStore(se.NOTES).index("categoryId");return Ue(r.count(t))},async getNoteCountByTag(t){const r=(await Je()).transaction(se.NOTES,"readonly").objectStore(se.NOTES).index("tags");return Ue(r.count(t))},async searchNotes(t,e=8){const s=(await Je()).transaction(se.NOTES,"readonly").objectStore(se.NOTES).index("title"),o=t?IDBKeyRange.bound(t,t+""):null;return Ue(s.getAll(o,e))},async saveNote(t){const n=(await Je()).transaction(se.NOTES,"readwrite");await Ue(n.objectStore(se.NOTES).put(t))},async deleteNote(t){const n=(await Je()).transaction(se.NOTES,"readwrite");await Ue(n.objectStore(se.NOTES).delete(t))},async getBookmarks(){const e=(await Je()).transaction(se.BOOKMARKS,"readonly");return Ue(e.objectStore(se.BOOKMARKS).getAll())},async saveBookmark(t){const n=(await Je()).transaction(se.BOOKMARKS,"readwrite");await Ue(n.objectStore(se.BOOKMARKS).put(t))},async deleteBookmark(t){const n=(await Je()).transaction(se.BOOKMARKS,"readwrite");await Ue(n.objectStore(se.BOOKMARKS).delete(t))},async saveAttachment(t){const e=await Je();let n=t,r=t.type||"application/octet-stream";if(t.type.startsWith("image/"))try{n=await ib(t),r="image/jpeg"}catch(a){console.warn("Image compression failed, saving original",a)}const i=`att_${crypto.randomUUID()}`,s={id:i,blob:n,mimeType:r,fileName:t.name,size:n.size,createdAt:Date.now()},o=e.transaction(se.ATTACHMENTS,"readwrite");return await Ue(o.objectStore(se.ATTACHMENTS).put(s)),i},async getAttachment(t){const n=(await Je()).transaction(se.ATTACHMENTS,"readonly");return Ue(n.objectStore(se.ATTACHMENTS).get(t))},async getAttachmentsMeta(){const n=(await Je()).transaction(se.ATTACHMENTS,"readonly").objectStore(se.ATTACHMENTS),r=[];return new Promise((i,s)=>{const o=n.openCursor();o.onsuccess=a=>{const l=a.target.result;if(l){const{blob:c,...d}=l.value;r.push(d),l.continue()}else i(r)},o.onerror=()=>s(o.error)})},async getAttachmentCount(){const e=(await Je()).transaction(se.ATTACHMENTS,"readonly");return Ue(e.objectStore(se.ATTACHMENTS).count())},async deleteAttachment(t){const n=(await Je()).transaction(se.ATTACHMENTS,"readwrite");await Ue(n.objectStore(se.ATTACHMENTS).delete(t))},async getStorageEstimate(){if(navigator.storage&&navigator.storage.estimate)try{const t=await navigator.storage.estimate();return{usage:t.usage||0,quota:t.quota||0}}catch(t){return console.warn("Storage estimate failed",t),null}return null},async getCategories(){const e=(await Je()).transaction(se.CATEGORIES,"readonly");return Ue(e.objectStore(se.CATEGORIES).getAll())},async saveCategory(t){const n=(await Je()).transaction(se.CATEGORIES,"readwrite");await Ue(n.objectStore(se.CATEGORIES).put(t))},async deleteCategory(t){const n=(await Je()).transaction(se.CATEGORIES,"readwrite");await Ue(n.objectStore(se.CATEGORIES).delete(t))},async getTags(){const e=(await Je()).transaction(se.TAGS,"readonly");return Ue(e.objectStore(se.TAGS).getAll())},async saveTag(t){const n=(await Je()).transaction(se.TAGS,"readwrite");await Ue(n.objectStore(se.TAGS).put(t))},async deleteTag(t){const n=(await Je()).transaction(se.TAGS,"readwrite");await Ue(n.objectStore(se.TAGS).delete(t))},async saveOutboxTask(t){const n=(await Je()).transaction(se.OUTBOX,"readwrite");await Ue(n.objectStore(se.OUTBOX).put(t))},async getPendingOutboxTasks(){const r=(await Je()).transaction(se.OUTBOX,"readonly").objectStore(se.OUTBOX).index("status");return Ue(r.getAll("pending"))},async getAllOutboxTasks(){const e=(await Je()).transaction(se.OUTBOX,"readonly");return Ue(e.objectStore(se.OUTBOX).getAll())},async deleteOutboxTask(t){const n=(await Je()).transaction(se.OUTBOX,"readwrite");await Ue(n.objectStore(se.OUTBOX).delete(t))},async getSettings(){const e=(await Je()).transaction(se.SETTINGS,"readonly"),n=await Ue(e.objectStore(se.SETTINGS).get("appSettings"));let r={};const i=await Ue(e.objectStore(se.SETTINGS).get("private"));if(i)if(i.__encrypted&&i.ciphertext&&i.iv)if(_n.hasSessionKey())try{const a=await _n.decrypt(i.ciphertext,i.iv);r=JSON.parse(a)}catch(a){console.error("Private Settings Decryption Failed:",a),r={}}else console.warn("Private Settings Locked: Session key missing."),r={};else r=i;const s={...nb},o={...s,...n};return(!o.codeLanguages||!Array.isArray(o.codeLanguages))&&(o.codeLanguages=s.codeLanguages),o.internalLinkTrigger||(o.internalLinkTrigger=s.internalLinkTrigger),n&&n.aiConfig&&(o.aiConfig={...s.aiConfig,...n.aiConfig},o.aiConfig.intentPolishPrompt||(o.aiConfig.intentPolishPrompt=s.aiConfig.intentPolishPrompt),o.aiConfig.systemPrompt||(o.aiConfig.systemPrompt=s.aiConfig.systemPrompt),o.aiConfig.enableDebug===void 0&&(o.aiConfig.enableDebug=s.aiConfig.enableDebug),o.aiConfig.responseParserPath===void 0&&(o.aiConfig.responseParserPath=s.aiConfig.responseParserPath)),o.syncConfig||(o.syncConfig=s.syncConfig),o.graphConfig||(o.graphConfig=s.graphConfig),o.webhooks||(o.webhooks=[]),o.storageConfigs||(o.storageConfigs=[]),o.bookmarkLayout||(o.bookmarkLayout=[]),o.savedBookmarkLayouts||(o.savedBookmarkLayouts=[]),o.proxyConfigs||(o.proxyConfigs=[]),r.aiApiKey&&(o.aiConfig.apiKey=r.aiApiKey),r.syncToken&&(o.syncConfig.personalAccessToken=r.syncToken),r.webhookUrls?o.webhooks=o.webhooks.map(a=>{var l;return{...a,url:((l=r.webhookUrls)==null?void 0:l[a.id])||""}}):r.webhookUrl&&o.webhooks.length===0&&o.webhooks.push({id:"legacy_hook",name:"Default Webhook",url:r.webhookUrl,triggerTagId:"",enabled:!0}),r.storageCredentials&&o.storageConfigs&&(o.storageConfigs=o.storageConfigs.map(a=>{var l;return{...a,credentials:(l=r.storageCredentials)==null?void 0:l[a.id]}})),r.proxyTokens&&o.proxyConfigs&&(o.proxyConfigs=o.proxyConfigs.map(a=>{var l;return{...a,token:(l=r.proxyTokens)==null?void 0:l[a.id]}})),o},async saveSettings(t){const r=(await Je()).transaction(se.SETTINGS,"readwrite").objectStore(se.SETTINGS),i={},s=t.webhooks.map(f=>(i[f.id]=f.url,{...f,url:""})),o={},a=(t.storageConfigs||[]).map(f=>{f.credentials&&(o[f.id]=f.credentials);const{credentials:p,...g}=f;return g}),l={},c=(t.proxyConfigs||[]).map(f=>{f.token&&(l[f.id]=f.token);const{token:p,...g}=f;return g}),d={aiApiKey:t.aiConfig.apiKey,syncToken:t.syncConfig.personalAccessToken,webhookUrls:i,storageCredentials:o,proxyTokens:l};let u=d;if(_n.hasSessionKey())try{const f=JSON.stringify(d),{ciphertext:p,iv:g}=await _n.encrypt(f);u={__encrypted:!0,ciphertext:p,iv:g,updatedAt:Date.now()}}catch(f){console.error("Encryption of settings failed. Saving plaintext as fallback (Risk).",f)}const h={...t,aiConfig:{...t.aiConfig,apiKey:""},syncConfig:{...t.syncConfig,personalAccessToken:""},webhooks:s,storageConfigs:a,proxyConfigs:c};await Promise.all([Ue(r.put({key:"appSettings",...h})),Ue(r.put({key:"private",...u}))])},async getSourcePlugins(){const e=(await Je()).transaction(se.SOURCE_PLUGINS,"readonly");return Ue(e.objectStore(se.SOURCE_PLUGINS).getAll())},async saveSourcePlugin(t){const n=(await Je()).transaction(se.SOURCE_PLUGINS,"readwrite");await Ue(n.objectStore(se.SOURCE_PLUGINS).put(t))},async getTemplates(){const e=(await Je()).transaction(se.TEMPLATES,"readonly");return Ue(e.objectStore(se.TEMPLATES).getAll())},async saveTemplate(t){const n=(await Je()).transaction(se.TEMPLATES,"readwrite");await Ue(n.objectStore(se.TEMPLATES).put(t))},async checkAuth(){const e=(await Je()).transaction(se.AUTH,"readonly");return!!await Ue(e.objectStore(se.AUTH).get("user"))},async registerUser(t){const n=(await Je()).transaction(se.AUTH,"readwrite");await Ue(n.objectStore(se.AUTH).put({id:"user",hash:t}))},async verifyUser(t){const n=(await Je()).transaction(se.AUTH,"readonly"),r=await Ue(n.objectStore(se.AUTH).get("user"));return r&&r.hash===t},async createBackup(){const e=(await Je()).transaction([se.NOTES,se.CATEGORIES,se.TAGS,se.TEMPLATES,se.SOURCE_PLUGINS,se.SETTINGS,se.ATTACHMENTS,se.BOOKMARKS],"readonly"),[n,r,i,s,o,a,l,c]=await Promise.all([Ue(e.objectStore(se.NOTES).getAll()),Ue(e.objectStore(se.CATEGORIES).getAll()),Ue(e.objectStore(se.TAGS).getAll()),Ue(e.objectStore(se.TEMPLATES).getAll()),Ue(e.objectStore(se.SOURCE_PLUGINS).getAll()),Ue(e.objectStore(se.SETTINGS).get("appSettings")),Ue(e.objectStore(se.ATTACHMENTS).getAll()),Ue(e.objectStore(se.BOOKMARKS).getAll())]),d={version:3,timestamp:Date.now(),notes:n,bookmarks:c,categories:r,tags:i,templates:s,sourcePlugins:o,appSettings:a?a.appSettings||a:void 0},u=new _u;u.file("data.json",JSON.stringify(d,null,2));const h=u.folder("attachments");return h&&l&&l.forEach(f=>{const p=f.mimeType?f.mimeType.split("/")[1]:"bin";f.fileName?f.id+""+f.fileName:`${f.id}${p}`,h.file(f.id,f.blob)}),await u.generateAsync({type:"blob"})},async restoreBackup(t){const e=await Je();let n,r=null,i=[];try{n=await _u.loadAsync(t);const l=n.file("data.json");if(l){const d=await l.async("string");r=JSON.parse(d)}const c=n.folder("attachments");if(c){const d=[];c.forEach((u,h)=>{const f=(async()=>{const p=await h.async("blob");i.push({id:u,blob:p})})();d.push(f)}),await Promise.all(d)}}catch{try{const c=await t.text();r=JSON.parse(c)}catch{throw new Error("Invalid Backup Format. Must be a JSON file or NotesDB ZIP archive.")}}if(!r)throw new Error("No data found in backup.");const s=e.transaction([se.NOTES,se.CATEGORIES,se.TAGS,se.TEMPLATES,se.SOURCE_PLUGINS,se.SETTINGS,se.ATTACHMENTS,se.BOOKMARKS],"readwrite"),o=(l,c)=>{const d=s.objectStore(l);Array.isArray(c)&&c.forEach(u=>d.put(u))};r.notes&&o(se.NOTES,r.notes),r.bookmarks&&o(se.BOOKMARKS,r.bookmarks),r.categories&&o(se.CATEGORIES,r.categories),r.tags&&o(se.TAGS,r.tags),r.templates&&o(se.TEMPLATES,r.templates),r.sourcePlugins&&o(se.SOURCE_PLUGINS,r.sourcePlugins),r.appSettings&&s.objectStore(se.SETTINGS).put({key:"appSettings",...r.appSettings});const a=s.objectStore(se.ATTACHMENTS);return i.forEach(l=>{a.put({id:l.id,blob:l.blob,mimeType:l.blob.type||"application/octet-stream",fileName:"restored_file",size:l.blob.size,createdAt:Date.now()})}),new Promise((l,c)=>{s.oncomplete=()=>l(),s.onerror=()=>c(s.error)})}};var Se=(t=>(t.RICH_TEXT="rich-text",t.TEXTAREA="textarea",t.IMAGE="image",t.CODE="code",t.CHIP="chip",t.HEADING="heading",t.DATE="date",t.LINK="link",t))(Se||{});const Mu=(t,e)=>{if(t&&typeof t=="object"){if(t["@_type"]){const n=t["@_type"];if(n.includes("html"))return Se.RICH_TEXT;if(n.includes("image"))return Se.IMAGE;if(n.includes("xml")||n.includes("json"))return Se.CODE;if(n.includes("url")||n.includes("link"))return Se.LINK}if(t["@_url"]&&(e.includes("media")||e.includes("thumbnail")))return Se.IMAGE}if(typeof t=="string"){const n=e.toLowerCase();return(n.includes("image")||n.includes("thumbnail")||n.includes("avatar"))&&(t.startsWith("http")||t.startsWith("/"))?Se.IMAGE:(n.includes("url")||n.includes("link")||n.includes("href")||t.startsWith("http"))&&t.length<250&&!t.includes(" ")?Se.LINK:n.includes("date")||n.includes("time")||n.includes("updated")?Se.DATE:t.includes("<")&&t.includes(">")&&(t.includes("</")||t.includes("/>"))?Se.RICH_TEXT:t.length>100?Se.TEXTAREA:Se.HEADING}return Se.CHIP},Vp=(t,e="")=>{if(Array.isArray(t)&&t.length>0&&typeof t[0]=="object")return{path:e,items:t};if(typeof t=="object"&&t!==null){let n=null,r=0;for(const i of Object.keys(t)){const s=e?`${e}.${i}`:i,o=Vp(t[i],s);o&&o.items.length>=r&&(r=o.items.length,n=o)}return n}return null},Ou=t=>{if(!t||t.length===0)return t;const e=t[0];if(typeof e!="object"||e===null||Array.isArray(e))return t;const n=Object.keys(e);if(n.length!==1)return t;const r=n[0];return t.every(s=>typeof s=="object"&&s!==null&&!Array.isArray(s)&&Object.keys(s).length===1&&Object.keys(s)[0]===r)?t.map(s=>s[r]):t},ki=(t,e="")=>{let n=[];return!t||typeof t!="object"?[{path:e,value:t,type:Mu(t,e.split(".").pop()||"")}]:Array.isArray(t)?(t.length>0&&(n=n.concat(ki(t[0],`${e}[0]`))),n):(Object.keys(t).forEach(r=>{const i=e?`${e}.${r}`:r,s=t[r];if(typeof s=="object"&&s!==null&&!Array.isArray(s)){if(s["#text"]!==void 0){let o=Mu(s,r);n.push({path:`${i}.#text`,value:s["#text"],type:o}),Object.keys(s).forEach(a=>{a!=="#text"&&(n=n.concat(ki(s[a],`${i}.${a}`)))});return}s["@_url"]&&n.push({path:`${i}.@_url`,value:s["@_url"],type:Se.IMAGE}),n=n.concat(ki(s,i))}else n=n.concat(ki(s,i))}),n)},Ai=(t,e)=>{if(e==="root"||e==="")return t;if(!e||!t)return;const n=e.split(".");let r=t;for(const i of n){if(r==null)return;if(i.includes("[")&&i.endsWith("]")){const[s,o]=i.split("["),a=parseInt(o.replace("]",""),10);r=r[s],Array.isArray(r)&&(r=r[a])}else r=r[i]}return r},sb=t=>{const e=ki(t),n=[],r=new Set,i=(u,h)=>r.has(h.path)?!1:(n.push({id:crypto.randomUUID(),targetSlot:u,jsonPath:h.path,uiType:h.type,label:h.path.split(".").pop()}),r.add(h.path),!0),s=e.find(u=>u.type===Se.HEADING&&u.path.toLowerCase().includes("title"))||e.find(u=>u.type===Se.HEADING&&u.path.toLowerCase().includes("name"))||e.find(u=>u.path.toLowerCase().includes("title"));s&&i("title",s);const o=e.find(u=>u.type===Se.RICH_TEXT)||e.find(u=>u.type===Se.TEXTAREA&&(u.path.includes("content")||u.path.includes("description")||u.path.includes("body")))||e.find(u=>u.path.includes("content")||u.path.includes("summary")||u.path.includes("description")||u.path.includes("body"));if(o)i("content",o);else{const u=e.filter(h=>typeof h.value=="string"&&h.path!==(s==null?void 0:s.path)).sort((h,f)=>f.value.length-h.value.length)[0];u&&u.value.length>20&&i("content",u)}const a=e.find(u=>u.type===Se.IMAGE)||e.find(u=>(u.path.includes("thumbnail")||u.path.includes("image"))&&u.path.includes("url"));a&&i("image",a);const l=e.find(u=>u.type===Se.LINK)||e.find(u=>u.path.includes("url")||u.path.includes("link")||u.path.includes("href"));l&&i("link",l);const c=e.find(u=>u.type===Se.DATE)||e.find(u=>u.path.includes("updated")||u.path.includes("published")||u.path.includes("date"));c&&i("date",c);const d=e.find(u=>u.path.includes("author")&&u.path.includes("name"))||e.find(u=>u.path.includes("author"));return d&&i("author",d),n};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=t=>{const e=ab(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=$.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>$.createElement("svg",{ref:l,...lb,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Wp("lucide",i),...!s&&!cb(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,d])=>$.createElement(c,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(t,e)=>{const n=$.forwardRef(({className:r,...i},s)=>$.createElement(db,{ref:s,iconNode:e,className:Wp(`lucide-${ob(ju(t))}`,`lucide-${t}`,r),...i}));return n.displayName=ju(t),n};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],qp=ce("archive",ub);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Bs=ce("arrow-right",fb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],pb=ce("bold",hb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],il=ce("book",mb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=[["path",{d:"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z",key:"oz39mx"}]],yb=ce("bookmark",gb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],xb=ce("bot",bb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]],zu=ce("braces",vb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],kb=ce("brain-circuit",wb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Eb=ce("brain",Sb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M22 13a18.15 18.15 0 0 1-20 0",key:"12hx5q"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],_b=ce("briefcase-business",Cb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],Tb=ce("calendar-clock",Nb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Bo=ce("calendar",Ab);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ii=ce("check",Mb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ad=ce("chevron-down",Ob);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],sl=ce("chevron-left",jb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ei=ce("chevron-right",zb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ss=ce("circle-alert",Ib);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Db=ce("circle-check-big",Rb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],uc=ce("clock",Pb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],rs=ce("code",Lb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=[["path",{d:"M10.5 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v5.5",key:"1g2yzs"}],["path",{d:"m14.3 19.6 1-.4",key:"11sv9r"}],["path",{d:"M15 3v7.5",key:"7lm50a"}],["path",{d:"m15.2 16.9-.9-.3",key:"1t7mvx"}],["path",{d:"m16.6 21.7.3-.9",key:"1j67ps"}],["path",{d:"m16.8 15.3-.4-1",key:"1ei7r6"}],["path",{d:"m19.1 15.2.3-.9",key:"18r7jp"}],["path",{d:"m19.6 21.7-.4-1",key:"z2vh2"}],["path",{d:"m20.7 16.8 1-.4",key:"19m87a"}],["path",{d:"m21.7 19.4-.9-.3",key:"1qgwi9"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}]],$b=ce("columns-3-cog",Bb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Hb=ce("copy",Fb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Vb=ce("cpu",Ub);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],qb=ce("database",Wb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Gb=ce("download",Kb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=[["path",{d:"m12.99 6.74 1.93 3.44",key:"iwagvd"}],["path",{d:"M19.136 12a10 10 0 0 1-14.271 0",key:"ppmlo4"}],["path",{d:"m21 21-2.16-3.84",key:"vylbct"}],["path",{d:"m3 21 8.02-14.26",key:"1ssaw4"}],["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}]],Yb=ce("drafting-compass",Jb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Kp=ce("external-link",Xb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ld=ce("eye",Zb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],ex=ce("file-braces",Qb);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],nx=ce("file-code",tx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],ix=ce("file-down",rx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}]],ox=ce("file-minus",sx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],Gp=ce("file-plus",ax);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Es=ce("file-text",lx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],dx=ce("file",cx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],fx=ce("flask-conical",ux);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],px=ce("folder-kanban",hx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],gx=ce("folder-open",mx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],bx=ce("folder",yx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Iu=ce("funnel",xx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Jp=ce("globe",vx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],kx=ce("grip-vertical",wx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],Ex=ce("heading-1",Sx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],_x=ce("heading-2",Cx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]],Tx=ce("heading-3",Nx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Yp=ce("image",Ax);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Ox=ce("inbox",Mx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],zx=ce("info",jx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Rx=ce("italic",Ix);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Px=ce("layout-dashboard",Dx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],Xp=ce("layout-template",Lx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],$x=ce("lightbulb",Bx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Hx=ce("link-2",Fx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],is=ce("link",Ux);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=[["path",{d:"M2 5h20",key:"1fs1ex"}],["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M9 19h6",key:"456am0"}]],Wx=ce("list-filter",Vx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],Kx=ce("list-ordered",qx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],Jx=ce("list-todo",Gx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Xx=ce("list",Yx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],yt=ce("loader-circle",Zx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],e1=ce("lock-open",Qx);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Xr=ce("lock",t1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]],r1=ce("merge",n1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],s1=ce("message-square",i1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=[["path",{d:"M5 12h14",key:"1ays0h"}]],a1=ce("minus",o1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["path",{d:"M15.033 9.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56V7.648a.645.645 0 0 1 .967-.56z",key:"vbtd3f"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]],c1=ce("monitor-play",l1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],u1=ce("monitor",d1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],h1=ce("mouse-pointer-click",f1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],m1=ce("network",p1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],y1=ce("newspaper",g1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],x1=ce("palette",b1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 15h18",key:"5xshup"}]],w1=ce("panel-bottom",v1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],S1=ce("panel-left",k1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],C1=ce("panel-right",E1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}]],N1=ce("panel-top",_1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Zp=ce("paperclip",T1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],M1=ce("panels-top-left",A1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],j1=ce("pencil",O1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],I1=ce("plane",z1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ss=ce("plus",R1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],P1=ce("printer",D1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],B1=ce("quote",L1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],F1=ce("redo",$1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],fc=ce("refresh-cw",H1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],V1=ce("rotate-ccw",U1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 7.5H3",key:"1hm9pq"}],["path",{d:"M21 12H3",key:"2avoz0"}],["path",{d:"M21 16.5H3",key:"n7jzkj"}]],q1=ce("rows-4",W1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"M4 11a9 9 0 0 1 9 9",key:"pv89mb"}],["path",{d:"M4 4a16 16 0 0 1 16 16",key:"k0647b"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]],G1=ce("rss",K1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],cd=ce("save",J1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Qp=ce("settings",Y1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Z1=ce("share-2",X1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ev=ce("shield-check",Q1);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],nv=ce("sparkles",tv);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],iv=ce("split",rv);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ru=ce("square-check-big",sv);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=[["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M21 19a2 2 0 0 1-2 2",key:"1j7049"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"M3 9v1",key:"1r0deq"}],["path",{d:"M21 9v1",key:"mxsmne"}],["path",{d:"M3 14v1",key:"vnatye"}],["path",{d:"M21 14v1",key:"169vum"}]],av=ce("square-dashed",ov);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Du=ce("square",lv);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],dv=ce("strikethrough",cv);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],fv=ce("table",uv);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],dd=ce("tag",hv);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],mv=ce("terminal",pv);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ci=ce("trash-2",gv);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ja=ce("triangle-alert",yv);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],xv=ce("type",bv);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],wv=ce("undo",vv);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Sv=ce("upload",kv);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],sr=ce("x",Ev),Cv=({onClose:t})=>{const[e,n]=$.useState(1),[r,i]=$.useState("provider"),s=async()=>{const o={hasCompletedOnboarding:!0,theme:"dark",isEditorEnabled:!0,libraryMode:!1,codeLanguages:["javascript","typescript","python","html","css","bash","json","sql"],aiConfig:{enabled:!1,baseUrl:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o",systemPrompt:`You are the Agentic Research Lab. Your mission is to help the user achieve their User Intent by analyzing the Live Content.

Execution Rules:
1. Start every response by explaining how the content relates to the Intent.
2. Connect the Dots: Don't just list items. Explain why specific content is useful for specific parts of the Intent.
3. Filter Noise: Ignore technical metadata like userId or id unless requested.
4. Structural Analysis: If content is placeholder, analyze its length, structure, and hierarchy from a UI UX perspective.
5. Action Oriented: Provide bold, technical, and actionable next steps.`,intentPolishPrompt:`Intent Polish Instruction:

1. ACTION: Rewrite the user's intent shorthand.
2. LIMIT: Maximum 250 characters.
3. FORMAT: Plain text only. No Markdown, no quotes, no brackets.
4. CONTENT: Focus on technical keywords and the "Why" behind the note.
5. REDUNDANCY: If the input already contains "Optimized for...", do not repeat it. Use it to inform a better sentence.`,agenticSource:r,webLlmModel:"smol"},syncConfig:{enabled:!1,provider:"github",hostUrl:"",personalAccessToken:"",lastGistId:""},webhooks:[],storageConfigs:[],graphConfig:{enableAutoRotate:!1,autoRotateSpeed:.5,showLabels:!1,linkStrength:1,usePreview:!1,showOrphans:!0}};await Ke.saveSettings(o),t()};return m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:m.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl w-full max-w-md p-6 shadow-2xl relative",children:[m.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-zinc-500 hover:text-white",children:m.jsx(sr,{size:20})}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Welcome to NotesDB"}),m.jsx("p",{className:"text-zinc-400 text-sm",children:"Your secure, offline-first bridge for structured data."})]}),m.jsxs("div",{className:"space-y-6 min-h-[180px]",children:[e===1&&m.jsx("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4 duration-300",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"p-3 bg-indigo-500/10 text-indigo-400 rounded-lg",children:m.jsx(ex,{size:24})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-zinc-200",children:"1. Import Data"}),m.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Paste an API URL or drag & drop a JSON file generated by your XML converter."})]})]})}),e===2&&m.jsx("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4 duration-300",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"p-3 bg-indigo-500/10 text-indigo-400 rounded-lg",children:m.jsx(Xp,{size:24})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-zinc-200",children:"2. Map Fields"}),m.jsxs("p",{className:"text-xs text-zinc-500 mt-1",children:["Drag JSON keys into UI slots. We'll automatically suggest viewers based on ",m.jsx("code",{children:"@_type"}),"."]})]})]})}),e===3&&m.jsx("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4 duration-300",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"p-3 bg-indigo-500/10 text-indigo-400 rounded-lg",children:m.jsx(qb,{size:24})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-zinc-200",children:"3. Secure Storage"}),m.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Your notes are encrypted and stored locally in IndexedDB. No data leaves your browser."})]})]})}),e===4&&m.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4 duration-300",children:[m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"p-3 bg-emerald-500/10 text-emerald-400 rounded-lg",children:m.jsx(xb,{size:24})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-zinc-200",children:"4. Configure AI (Optional)"}),m.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"You can enable the Research Agent later in settings."})]})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[m.jsxs("button",{onClick:()=>i("browser"),className:`p-2 rounded-xl border flex flex-col items-center gap-2 transition-all ${r==="browser"?"bg-emerald-500/10 border-emerald-500 text-emerald-400":"bg-zinc-800 border-zinc-700 text-zinc-500 hover:bg-zinc-700"}`,children:[m.jsx(u1,{size:18}),m.jsx("div",{className:"text-[10px] font-bold",children:"Browser"})]}),m.jsxs("button",{onClick:()=>i("webllm"),className:`p-2 rounded-xl border flex flex-col items-center gap-2 transition-all ${r==="webllm"?"bg-emerald-500/10 border-emerald-500 text-emerald-400":"bg-zinc-800 border-zinc-700 text-zinc-500 hover:bg-zinc-700"}`,children:[m.jsx(Vb,{size:18}),m.jsx("div",{className:"text-[10px] font-bold",children:"Local GPU"})]}),m.jsxs("button",{onClick:()=>i("provider"),className:`p-2 rounded-xl border flex flex-col items-center gap-2 transition-all ${r==="provider"?"bg-emerald-500/10 border-emerald-500 text-emerald-400":"bg-zinc-800 border-zinc-700 text-zinc-500 hover:bg-zinc-700"}`,children:[m.jsx(is,{size:18}),m.jsx("div",{className:"text-[10px] font-bold",children:"Cloud API"})]})]}),m.jsxs("p",{className:"text-[10px] text-zinc-500 text-center italic",children:[r==="browser"&&"Uses built-in Gemini Nano (Zero Data).",r==="webllm"&&"Downloads ~100MB model to run in-browser.",r==="provider"&&"Connects to OpenAI or compatible APIs."]})]})]}),m.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[m.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:4}).map((o,a)=>m.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${e===a+1?"w-6 bg-indigo-500":"w-1.5 bg-zinc-800"}`},a))}),m.jsxs("div",{className:"flex gap-2",children:[e>1&&m.jsx("button",{onClick:()=>n(o=>o-1),className:"px-4 py-2 rounded-lg text-xs font-medium text-zinc-400 hover:text-white transition-colors",children:"Back"}),m.jsxs("button",{onClick:()=>e<4?n(o=>o+1):s(),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-xs font-medium transition-colors shadow-lg shadow-indigo-900/20",children:[e<4?"Next":"Finish",m.jsx(Bs,{size:14})]})]})]})]})})},_v=({isRegistration:t,onSuccess:e})=>{const[n,r]=$.useState(""),[i,s]=$.useState(""),[o,a]=$.useState(!1),[l,c]=$.useState(!1),d=async h=>{h.preventDefault(),s(""),a(!0);try{const f=await _n.initSession(n);t?(await Ke.registerUser(f),e()):await Ke.verifyUser(f)?e():(s("Incorrect password"),_n.clearSession(),c(!0))}catch(f){console.error(f),s("Authentication failed"),_n.clearSession()}finally{a(!1)}},u=async()=>{if(confirm("DANGER: This will delete ALL local notes, settings, and attachments. You cannot undo this. Are you sure you want to reset the database?"))try{const h=indexedDB.deleteDatabase("NotesDB_v1");h.onsuccess=()=>window.location.reload(),h.onerror=()=>{alert("Could not delete database. Please clear site data in browser settings.")},h.onblocked=()=>{alert("Database deletion blocked. Please close other tabs and try again.")}}catch{window.location.reload()}};return m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black",children:m.jsxs("div",{className:"w-full max-w-sm p-8 bg-zinc-900 border border-zinc-800 rounded-2xl shadow-2xl relative overflow-hidden",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("div",{className:"p-4 bg-zinc-800 rounded-full text-indigo-500",children:t?m.jsx(ev,{size:32}):m.jsx(Xr,{size:32})})}),m.jsx("h2",{className:"text-center text-xl font-bold text-white mb-2",children:t?"Create Safe Vault":"Unlock NotesDB"}),m.jsx("p",{className:"text-center text-zinc-500 text-xs mb-8",children:t?"Set a master password. This will encrypt your local database.":"Enter your master password to decrypt your notes."}),m.jsxs("form",{onSubmit:d,className:"space-y-4",children:[m.jsx("div",{children:m.jsx("input",{type:"password",value:n,onChange:h=>r(h.target.value),placeholder:"Master Password",className:"w-full bg-black border border-zinc-700 rounded-lg px-4 py-3 text-sm text-white focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none transition-all",autoFocus:!0})}),i&&m.jsxs("div",{className:"flex items-center justify-center gap-2 text-red-400 text-xs bg-red-500/10 p-2 rounded border border-red-500/20",children:[m.jsx(ja,{size:12}),i]}),m.jsxs("button",{type:"submit",disabled:!n||o,className:"w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-500 text-white font-medium py-3 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[o?"Processing...":t?"Create Database":"Unlock",!o&&m.jsx(Bs,{size:16})]})]}),!t&&l&&m.jsxs("div",{className:"mt-6 pt-6 border-t border-zinc-800 text-center animate-in fade-in slide-in-from-bottom-2",children:[m.jsx("p",{className:"text-[10px] text-zinc-500 mb-2",children:"Forgot your password?"}),m.jsxs("button",{onClick:u,className:"text-xs text-red-400 hover:text-red-300 hover:underline flex items-center justify-center gap-1 mx-auto",children:[m.jsx(fc,{size:10})," Reset Database"]})]})]})})},Nv=(t,e)=>!e||e.length===0?t:t.filter(n=>e.every(r=>{const i=Ai(n,r.field),s=r.value;if(i==null)return r.operator==="notEquals";const o=String(i).toLowerCase(),a=s.toLowerCase();switch(r.operator){case"equals":return o===a;case"notEquals":return o!==a;case"contains":return o.includes(a);case"startsWith":return o.startsWith(a);case"endsWith":return o.endsWith(a);case"exists":return i!=null&&i!=="";case"greaterThan":return Number(i)>Number(s);default:return!0}})),Tv=Q.lazy(()=>Xe(()=>import("./PluginManagerModal-DMO7ehbr.js"),__vite__mapDeps([0,1,2,3]))),Av=({rawJson:t,initialCollection:e,onNext:n,onBack:r,onCancel:i})=>{const[s,o]=$.useState([]),[a,l]=$.useState("auto"),[c,d]=$.useState(!1),[u,h]=$.useState(e),[f,p]=$.useState(new Set);$.useEffect(()=>{g()},[]);const g=async()=>{const w=await Ke.getSourcePlugins();o(w)};$.useEffect(()=>{if(a==="auto")h({...e,items:Ou(e.items)});else{const w=s.find(v=>v.id===a);if(w){let v=w.collectionPath;v==="<<auto>>"&&(v=e.path);const E=Ai(t,v);let C=Array.isArray(E)?E:E?[E]:[];if(C=Ou(C),C.length>0){const N=Nv(C,w.rules);h({path:v,items:N})}else h({path:v,items:[]})}}p(new Set)},[a,t,e,s]);const y=()=>{f.size===u.items.length?p(new Set):p(new Set(u.items.map((w,v)=>v)))},b=w=>{const v=new Set(f);v.has(w)?v.delete(w):v.add(w),p(v)},x=w=>{g().then(()=>{l(w.id),d(!1)})};return m.jsxs("div",{className:"flex flex-col h-full bg-zinc-950",children:[m.jsx($.Suspense,{fallback:m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80",children:m.jsx(yt,{className:"animate-spin text-indigo-500"})}),children:c&&m.jsx(Tv,{onClose:()=>d(!1),onSelect:x,initialRawJson:t,initialAutoPath:e.path})}),m.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-zinc-800 bg-zinc-900/50 backdrop-blur",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"p-2 bg-indigo-500/10 text-indigo-400 rounded-lg",children:m.jsx(Iu,{size:18})}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-wider mb-1",children:"Source Filter"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("select",{value:a,onChange:w=>l(w.target.value),className:"bg-black border border-zinc-700 rounded-l text-xs text-white px-2 py-1.5 outline-none focus:border-indigo-500 min-w-[200px]",children:[m.jsx("option",{value:"auto",children:" Auto-Detect (Default)"}),s.length>0&&m.jsx("optgroup",{label:"My Saved Plugins",children:s.map(w=>m.jsx("option",{value:w.id,children:w.name},w.id))})]}),m.jsxs("button",{onClick:()=>d(!0),className:"bg-zinc-800 border border-l-0 border-zinc-700 hover:bg-zinc-700 text-zinc-300 px-3 py-1.5 rounded-r text-xs font-bold flex items-center gap-1 transition-colors",title:"Create or Edit Plugins",children:[m.jsx(Wx,{size:14}),"Manage Rules"]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{onClick:r,className:"px-4 py-2 text-zinc-400 hover:text-white text-xs font-medium transition-colors",children:"Back"}),m.jsxs("button",{onClick:()=>n(Array.from(f).map(w=>u.items[w])),disabled:f.size===0,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg text-xs font-medium transition-all shadow-lg shadow-indigo-900/20",children:["Next Step",m.jsx(Bs,{size:14})]}),m.jsx("div",{className:"w-px h-6 bg-zinc-800 mx-2"}),m.jsx("button",{onClick:i,className:"text-zinc-500 hover:text-white transition-colors",title:"Cancel Import",children:m.jsx(sr,{size:20})})]})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[m.jsxs("button",{onClick:y,className:"flex items-center gap-2 text-xs font-medium text-zinc-400 hover:text-white transition-colors",children:[f.size===u.items.length?m.jsx(Ru,{size:14}):m.jsx(Du,{size:14}),f.size===u.items.length?"Deselect All":"Select All"]}),m.jsxs("span",{className:"text-xs text-zinc-600",children:["Viewing ",u.items.length," items ",a!=="auto"&&"(Filtered)","  ",f.size," selected"]})]}),u.items.length===0&&m.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-zinc-500 border-2 border-dashed border-zinc-800 rounded-xl",children:[m.jsx(Iu,{size:32,className:"opacity-20 mb-2"}),m.jsx("p",{className:"text-sm",children:"No items match the current filter."}),m.jsx("button",{onClick:()=>l("auto"),className:"text-xs text-indigo-400 hover:underline mt-2",children:"Reset to Auto-Detect"})]}),m.jsx("div",{className:"grid grid-cols-1 gap-2",children:u.items.map((w,v)=>{const E=f.has(v),C=typeof w=="object"?w.title||w.name||w.id||JSON.stringify(w).slice(0,50):String(w);return m.jsxs("div",{onClick:()=>b(v),className:`flex items-center gap-4 p-3 rounded-xl border cursor-pointer transition-all ${E?"bg-indigo-500/5 border-indigo-500/30":"bg-zinc-900/50 border-zinc-800 hover:border-zinc-700"}`,children:[m.jsx("div",{className:`text-zinc-500 ${E?"text-indigo-400":""}`,children:E?m.jsx(Ru,{size:18}):m.jsx(Du,{size:18})}),m.jsx("div",{className:"flex-1 min-w-0",children:m.jsx("h4",{className:`text-sm font-medium truncate ${E?"text-zinc-200":"text-zinc-500"}`,children:typeof C=="object"?JSON.stringify(C):C})}),m.jsx(Ei,{size:14,className:"text-zinc-700"})]},v)})})]})]})},ol=(t,e)=>{if(t===e)return!0;if(e===Se.IMAGE||t===Se.IMAGE)return!1;const n=[Se.RICH_TEXT,Se.TEXTAREA,Se.HEADING,Se.CODE,Se.DATE,Se.CHIP,Se.LINK];return!!(n.includes(t)&&n.includes(e))},Mv=({selectedItems:t,mappings:e,onMappingsChange:n})=>{const[r,i]=$.useState(0),[s,o]=$.useState(null),a=t[r]||{},l=$.useMemo(()=>ki(a),[a]),c=(w,v)=>{o(v);const E={path:v.path,type:v.type};try{w.dataTransfer.setData("application/json",JSON.stringify(E)),w.dataTransfer.effectAllowed="copy"}catch(C){console.warn("Drag start failed to serialize",C)}},d=()=>{o(null)},u=(w,v)=>{if(w.preventDefault(),s&&!ol(s.type,v.uiType))return;const E=w.dataTransfer.getData("application/json");if(E){try{const C=JSON.parse(E),N=e.map(j=>j.id===v.id?{...j,jsonPath:C.path,label:C.path.split(".").pop()}:j);n(N)}catch(C){console.error("Drop failed",C)}o(null)}},h=(w,v)=>{if(s&&!ol(s.type,v.uiType)){w.dataTransfer.dropEffect="none";return}w.preventDefault(),w.dataTransfer.dropEffect="copy"},f=w=>{const v={id:crypto.randomUUID(),jsonPath:"",uiType:w,label:"New Block"};n([...e,v])},p=(w,v)=>{n(e.map(E=>E.id===w?{...E,uiType:v}:E))},g=w=>{n(e.filter(v=>v.id!==w))},y=(w,v)=>{const E=[...e];if(w+v<0||w+v>=E.length)return;const C=E[w];E[w]=E[w+v],E[w+v]=C,n(E)},b=w=>{switch(w){case Se.IMAGE:return m.jsx(Yp,{size:14});case Se.RICH_TEXT:return m.jsx(Es,{size:14});case Se.TEXTAREA:return m.jsx(Es,{size:14});case Se.HEADING:return m.jsx(xv,{size:14});case Se.DATE:return m.jsx(Bo,{size:14});case Se.CODE:return m.jsx(rs,{size:14});case Se.CHIP:return m.jsx(av,{size:14});case Se.LINK:return m.jsx(is,{size:14});default:return m.jsx(rs,{size:14})}},x=(w,v)=>{const E=Ai(a,w.jsonPath);if(E==null||E==="")return m.jsxs("div",{className:"p-2 mb-2 border border-dashed border-zinc-800 rounded text-[10px] text-zinc-600 text-center",children:["Empty: ",w.jsonPath||"Unmapped"]},w.id);const C=String(E);switch(w.uiType){case Se.HEADING:return m.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:C},w.id);case Se.RICH_TEXT:case Se.TEXTAREA:return m.jsx("div",{className:"mb-4 text-zinc-300 leading-relaxed text-sm whitespace-pre-wrap",children:C.includes("<")?m.jsx("div",{dangerouslySetInnerHTML:{__html:C}}):C},w.id);case Se.IMAGE:return m.jsx("img",{src:C,alt:"Preview",className:"w-full max-h-64 object-cover rounded-lg mb-4 bg-zinc-900 border border-zinc-800",onError:N=>N.currentTarget.style.display="none"},w.id);case Se.CODE:return m.jsx("pre",{className:"bg-zinc-900 p-3 rounded text-xs overflow-x-auto text-zinc-300 mb-4 font-mono border border-zinc-800",children:m.jsx("code",{children:C})},w.id);case Se.DATE:return m.jsxs("div",{className:"text-xs text-zinc-500 mb-2 font-mono flex items-center gap-2",children:[m.jsx(Bo,{size:12}),C]},w.id);case Se.CHIP:return m.jsx("span",{className:"inline-block bg-indigo-500/20 text-indigo-300 px-2 py-1 rounded text-xs border border-indigo-500/30 mr-2 mb-2",children:C},w.id);case Se.LINK:return m.jsxs("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-indigo-400 hover:text-indigo-300 hover:underline mb-2 break-all p-2 rounded bg-zinc-900/50 border border-zinc-800/50 w-full",children:[m.jsx(is,{size:14,className:"shrink-0"}),m.jsx("span",{className:"truncate",children:C})]},w.id);default:return m.jsx("div",{className:"mb-2 text-zinc-400",children:C},w.id)}};return m.jsxs("div",{className:"flex h-full gap-6",children:[m.jsxs("div",{className:"w-1/3 flex flex-col border-r border-zinc-800 pr-6",children:[m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsxs("h3",{className:"text-sm font-semibold text-zinc-200 flex items-center gap-2",children:[m.jsx(rs,{size:16,className:"text-indigo-500"}),"JSON Source"]}),m.jsxs("div",{className:"flex items-center gap-1 bg-zinc-900 rounded-lg p-1 border border-zinc-800",children:[m.jsx("button",{onClick:()=>i(Math.max(0,r-1)),disabled:r===0,className:"p-1 hover:text-white text-zinc-500 disabled:opacity-30",children:m.jsx(sl,{size:14})}),m.jsxs("span",{className:"text-[10px] font-mono w-16 text-center text-zinc-400",children:[r+1," of ",t.length]}),m.jsx("button",{onClick:()=>i(Math.min(t.length-1,r+1)),disabled:r===t.length-1,className:"p-1 hover:text-white text-zinc-500 disabled:opacity-30",children:m.jsx(Ei,{size:14})})]})]}),m.jsx("p",{className:"text-[10px] text-zinc-500",children:"Drag keys from here to the Layout on the right."})]}),m.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 pr-2 custom-scrollbar",children:l.map(w=>m.jsxs("div",{draggable:!0,onDragStart:v=>c(v,w),onDragEnd:d,className:"group flex items-center gap-3 p-2 rounded hover:bg-zinc-800 cursor-grab active:cursor-grabbing border border-transparent hover:border-zinc-700 transition-all",children:[m.jsx(kx,{size:14,className:"text-zinc-600 group-hover:text-zinc-400"}),m.jsxs("div",{className:"flex flex-col min-w-0",children:[m.jsx("span",{className:"text-xs font-mono text-zinc-300 truncate",children:w.path}),m.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[m.jsxs("span",{className:`text-[10px] px-1 rounded flex items-center gap-1 ${w.type===Se.IMAGE?"bg-pink-500/10 text-pink-400":w.type===Se.LINK?"bg-blue-500/10 text-blue-400":"bg-indigo-400/10 text-indigo-400"}`,children:[w.type===Se.LINK&&m.jsx(is,{size:8}),w.type]}),m.jsxs("span",{className:"text-[10px] text-zinc-500 truncate max-w-[150px]",children:[String(w.value).substring(0,20),"..."]})]})]})]},w.path))})]}),m.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[m.jsxs("div",{className:"flex flex-col h-3/5 pb-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3 shrink-0",children:[m.jsxs("div",{children:[m.jsxs("h3",{className:"text-sm font-semibold text-zinc-200 flex items-center gap-2",children:[m.jsx(M1,{size:16,className:"text-indigo-500"}),"Note Layout"]}),m.jsx("p",{className:"text-[10px] text-zinc-500 mt-1",children:"Define the structure for each selected item."})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("button",{onClick:()=>f(Se.HEADING),className:"flex items-center gap-1 px-2 py-1 bg-zinc-800 hover:bg-zinc-700 rounded text-[10px] text-zinc-300 transition-colors border border-zinc-700",children:[m.jsx(ss,{size:10})," Heading"]}),m.jsxs("button",{onClick:()=>f(Se.RICH_TEXT),className:"flex items-center gap-1 px-2 py-1 bg-zinc-800 hover:bg-zinc-700 rounded text-[10px] text-zinc-300 transition-colors border border-zinc-700",children:[m.jsx(ss,{size:10})," Text"]}),m.jsxs("button",{onClick:()=>f(Se.IMAGE),className:"flex items-center gap-1 px-2 py-1 bg-zinc-800 hover:bg-zinc-700 rounded text-[10px] text-zinc-300 transition-colors border border-zinc-700",children:[m.jsx(ss,{size:10})," Image"]})]})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2 custom-scrollbar bg-zinc-900/30 rounded-lg p-2 border border-zinc-800/50",children:[e.length===0&&m.jsx("div",{className:"h-32 border-2 border-dashed border-zinc-800 rounded-xl flex items-center justify-center text-zinc-600 text-xs",children:'Add blocks above or use "Smart Map" from template.'}),e.map((w,v)=>{const E=s?ol(s.type,w.uiType):!0;return m.jsx("div",{onDragOver:C=>h(C,w),onDrop:C=>u(C,w),className:`relative p-3 rounded-lg border transition-all duration-200 group ${w.jsonPath?"bg-zinc-900 border-zinc-800":s?E?"bg-zinc-800/50 border-indigo-500/50 border-dashed scale-[1.01]":"bg-zinc-950 border-red-900/30 border-dashed opacity-50 cursor-not-allowed":"bg-zinc-900/30 border-zinc-800 border-dashed"}`,children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[m.jsx("button",{onClick:()=>y(v,-1),className:"text-zinc-600 hover:text-white",children:m.jsx(sl,{size:10,className:"rotate-90"})}),m.jsx("button",{onClick:()=>y(v,1),className:"text-zinc-600 hover:text-white",children:m.jsx(sl,{size:10,className:"-rotate-90"})})]}),m.jsx("div",{className:`w-8 h-8 rounded bg-zinc-950 border flex items-center justify-center shrink-0 ${!E&&s?"border-red-900 text-red-800":"border-zinc-800 text-zinc-400"}`,children:b(w.uiType)}),m.jsx("div",{className:"flex-1 min-w-0",children:w.jsonPath?m.jsxs("div",{children:[m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("span",{className:"text-indigo-400 font-mono text-xs font-bold",children:w.jsonPath})}),m.jsx("p",{className:"text-[10px] text-zinc-500 mt-0.5 truncate",children:String(Ai(a,w.jsonPath)||"No Data").substring(0,40)})]}):m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:`text-xs italic ${!E&&s?"text-red-700":"text-zinc-500"}`,children:!E&&s?"Incompatible Type":"Drop data key here..."}),!E&&s&&m.jsx(Ss,{size:10,className:"text-red-800"})]})}),m.jsxs("div",{className:"relative shrink-0",children:[m.jsxs("select",{value:w.uiType,onChange:C=>p(w.id,C.target.value),className:"bg-black border border-zinc-700 text-zinc-300 text-[10px] rounded px-2 py-1 appearance-none hover:border-zinc-500 focus:border-indigo-500 outline-none pr-6 cursor-pointer",children:[m.jsx("option",{value:Se.HEADING,children:"Heading"}),m.jsx("option",{value:Se.RICH_TEXT,children:"Rich Text"}),m.jsx("option",{value:Se.TEXTAREA,children:"Raw Text"}),m.jsx("option",{value:Se.IMAGE,children:"Image"}),m.jsx("option",{value:Se.LINK,children:"Link"}),m.jsx("option",{value:Se.CODE,children:"Code"}),m.jsx("option",{value:Se.DATE,children:"Date"}),m.jsx("option",{value:Se.CHIP,children:"Chip"})]}),m.jsx("div",{className:"absolute right-2 top-1.5 pointer-events-none text-zinc-500",children:""})]}),m.jsx("button",{onClick:()=>g(w.id),className:"p-1.5 text-zinc-600 hover:text-red-400 transition-colors opacity-0 group-hover:opacity-100 hover:bg-zinc-800 rounded",title:"Remove Block",children:m.jsx(Ci,{size:14})})]})},w.id)})]})]}),m.jsxs("div",{className:"flex-1 flex flex-col min-h-0 bg-black border-t border-zinc-800",children:[m.jsxs("div",{className:"px-4 py-2 border-b border-zinc-800 flex items-center justify-between shrink-0 bg-zinc-950/50",children:[m.jsxs("h3",{className:"text-xs font-bold text-zinc-400 uppercase tracking-wider flex items-center gap-2",children:[m.jsx(ld,{size:12,className:"text-emerald-500"})," Live Preview"]}),m.jsxs("span",{className:"text-[10px] text-zinc-600",children:["Rendering Item #",r+1]})]}),m.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:m.jsx("div",{className:"max-w-3xl mx-auto space-y-1",children:e.length===0?m.jsx("div",{className:"text-center text-zinc-600 py-10 text-xs",children:"Preview will appear here once you add blocks."}):e.map((w,v)=>x(w))})})]})]})]})},hc={FolderKanban:px,BriefcaseBusiness:_b,DraftingCompass:Yb,Rss:G1,Archive:qp,FileText:Es,Inbox:Ox,Newspaper:y1,Lightbulb:$x,ListTodo:Jx,Plane:I1,Lock:Xr},Zj=["slate","gray","zinc","neutral","stone","red","orange","amber","yellow","lime","green","emerald","teal","cyan","sky","blue","indigo","violet","purple","fuchsia","pink","rose"],pc={slate:"text-slate-500 bg-slate-500/20 border-slate-500/20",gray:"text-gray-500 bg-gray-500/20 border-gray-500/20",zinc:"text-zinc-500 bg-zinc-500/20 border-zinc-500/20",neutral:"text-neutral-500 bg-neutral-500/20 border-neutral-500/20",stone:"text-stone-500 bg-stone-500/20 border-stone-500/20",red:"text-red-500 bg-red-500/20 border-red-500/20",orange:"text-orange-500 bg-orange-500/20 border-orange-500/20",amber:"text-amber-500 bg-amber-500/20 border-amber-500/20",yellow:"text-yellow-500 bg-yellow-500/20 border-yellow-500/20",lime:"text-lime-500 bg-lime-500/20 border-lime-500/20",green:"text-green-500 bg-green-500/20 border-green-500/20",emerald:"text-emerald-500 bg-emerald-500/20 border-emerald-500/20",teal:"text-teal-500 bg-teal-500/20 border-teal-500/20",cyan:"text-cyan-500 bg-cyan-500/20 border-cyan-500/20",sky:"text-sky-500 bg-sky-500/20 border-sky-500/20",blue:"text-blue-500 bg-blue-500/20 border-blue-500/20",indigo:"text-indigo-500 bg-indigo-500/20 border-indigo-500/20",violet:"text-violet-500 bg-violet-500/20 border-violet-500/20",purple:"text-purple-500 bg-purple-500/20 border-purple-500/20",fuchsia:"text-fuchsia-500 bg-fuchsia-500/20 border-fuchsia-500/20",pink:"text-pink-500 bg-pink-500/20 border-pink-500/20",rose:"text-rose-500 bg-rose-500/20 border-rose-500/20"},em=({initialIntent:t,onSave:e,onClose:n,mode:r,settings:i})=>{const[s,o]=$.useState(t||""),[a,l]=$.useState(!1),[c,d]=$.useState(!1),[u,h]=$.useState(!1),[f,p]=$.useState(null),y=(()=>{var v;if(!((v=i==null?void 0:i.aiConfig)!=null&&v.enabled))return{status:"disabled",msg:"AI Disabled"};const{agenticSource:w}=i.aiConfig;return w==="browser"&&!window.ai?{status:"error",msg:"Browser AI Not Found"}:{status:"ready",msg:"AI Ready"}})(),b=async()=>{var C,N,j,M,T,P,_,z,k;if(y.status!=="ready")return;l(!0),p(null);let w=s;const E=`${((C=i==null?void 0:i.aiConfig)==null?void 0:C.intentPolishPrompt)||`Intent Polish Instruction:
1. ACTION: Rewrite the user's intent shorthand.
2. LIMIT: Maximum 250 characters.
3. FORMAT: Plain text only.`}

INPUT INTENT TO REWRITE: "${s}"

REWRITTEN OUTPUT:`;try{const L=(N=i==null?void 0:i.aiConfig)==null?void 0:N.agenticSource;if(L==="browser"&&window.ai){const W=await window.ai.createTextSession();w=(await W.prompt(E)).trim(),W.destroy()}else if(L==="provider"){const W={"Content-Type":"application/json"};(j=i==null?void 0:i.aiConfig)!=null&&j.apiKey&&(W.Authorization=`Bearer ${i.aiConfig.apiKey}`);const H=(((M=i==null?void 0:i.aiConfig)==null?void 0:M.baseUrl)||"").replace(/\/$/,""),ie=await fetch(`${H}/chat/completions`,{method:"POST",headers:W,body:JSON.stringify({model:(T=i==null?void 0:i.aiConfig)==null?void 0:T.model,messages:[{role:"system",content:"You are a helpful assistant."},{role:"user",content:E}],max_tokens:300})});if(!ie.ok){const fe=await ie.text();throw new Error(`API Error ${ie.status}: ${fe.substring(0,50)}`)}const q=await ie.json();if((z=(_=(P=q.choices)==null?void 0:P[0])==null?void 0:_.message)!=null&&z.content)w=q.choices[0].message.content.trim();else throw new Error(((k=q.error)==null?void 0:k.message)||"Invalid response format")}else throw L==="webllm"?new Error("WebLLM polish not supported in this modal yet."):new Error("Invalid AI Configuration");w=w.replace(/^["']|["']$/g,""),o(w),h(!0),setTimeout(()=>h(!1),1e3)}catch(L){console.error("Polish failed",L),p(L.message||"Polish Failed")}finally{l(!1)}},x=async()=>{d(!0),await e(s),d(!1)};return m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:m.jsxs("div",{className:"w-full max-w-md bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-800 bg-zinc-900/50",children:[m.jsxs("h3",{className:"text-sm font-bold text-white flex items-center gap-2",children:[m.jsx(Eb,{size:16,className:"text-indigo-400"}),r==="create"?"Define User Intent":"Strategic Intent"]}),m.jsx("button",{onClick:n,className:"text-zinc-500 hover:text-white transition-colors",children:m.jsx(sr,{size:18})})]}),m.jsxs("div",{className:"p-6 space-y-4",children:[m.jsx("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-lg p-3",children:m.jsx("p",{className:"text-xs text-indigo-200 leading-relaxed",children:r==="create"?"Add a goal or annotation. The Agentic Research Lab uses this to prioritize analysis.":"Refine the goal for this note. This metadata guides the Agent's reasoning capabilities."})}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("label",{className:"text-[10px] font-bold text-zinc-500 uppercase flex items-center gap-1.5",children:[m.jsx(s1,{size:12}),"Developer Intent"]}),y.status==="ready"?m.jsxs("button",{onClick:b,disabled:a||!s.trim(),className:"text-[10px] flex items-center gap-1 text-indigo-400 hover:text-indigo-300 disabled:opacity-50 transition-colors font-medium",children:[m.jsx(nv,{size:10,className:a?"animate-spin":""}),a?"Polishing...":"AI Polish"]}):m.jsxs("span",{className:`text-[10px] flex items-center gap-1 font-bold ${y.status==="disabled"?"text-zinc-600":"text-red-500"}`,children:[y.status==="error"&&m.jsx(Ss,{size:10}),y.msg]})]}),m.jsx("textarea",{autoFocus:!0,value:s,onChange:w=>{o(w.target.value),f&&p(null)},placeholder:"e.g. 'Analyze this data for Q3 revenue trends' or 'Find all bugs related to the login flow'",className:`w-full h-32 bg-black border rounded-lg p-3 text-sm outline-none resize-none placeholder:text-zinc-600 transition-all duration-500 ${f?"border-red-500/50 focus:border-red-500 text-red-200":u?"text-amber-400 border-amber-500/50 shadow-[0_0_15px_rgba(245,158,11,0.1)]":"text-white border-zinc-700 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"}`}),f&&m.jsx("p",{className:"text-[10px] text-red-500 font-medium text-right",children:f})]})]}),m.jsxs("div",{className:"p-4 bg-zinc-950 border-t border-zinc-800 flex justify-end gap-3",children:[m.jsx("button",{onClick:n,className:"px-4 py-2 text-zinc-400 hover:text-white text-xs font-medium transition-colors",children:r==="create"?"Skip":"Cancel"}),m.jsxs("button",{onClick:x,disabled:c||r==="edit"&&!s.trim(),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg text-xs font-bold transition-all shadow-lg shadow-indigo-900/20",children:[c?"Saving...":r==="create"?"Create Note":"Save Intent",r==="create"?m.jsx(Bs,{size:14}):m.jsx(cd,{size:14})]})]})]})})};var tn="top",vn="bottom",wn="right",nn="left",ud="auto",$s=[tn,vn,wn,nn],Mi="start",Cs="end",Ov="clippingParents",tm="viewport",qi="popper",jv="reference",Pu=$s.reduce(function(t,e){return t.concat([e+"-"+Mi,e+"-"+Cs])},[]),nm=[].concat($s,[ud]).reduce(function(t,e){return t.concat([e,e+"-"+Mi,e+"-"+Cs])},[]),zv="beforeRead",Iv="read",Rv="afterRead",Dv="beforeMain",Pv="main",Lv="afterMain",Bv="beforeWrite",$v="write",Fv="afterWrite",Hv=[zv,Iv,Rv,Dv,Pv,Lv,Bv,$v,Fv];function Pn(t){return t?(t.nodeName||"").toLowerCase():null}function dn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function si(t){var e=dn(t).Element;return t instanceof e||t instanceof Element}function yn(t){var e=dn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function fd(t){if(typeof ShadowRoot>"u")return!1;var e=dn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Uv(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!yn(s)||!Pn(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function Vv(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!yn(i)||!Pn(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const rm={name:"applyStyles",enabled:!0,phase:"write",fn:Uv,effect:Vv,requires:["computeStyles"]};function Dn(t){return t.split("-")[0]}var Zr=Math.max,$o=Math.min,Oi=Math.round;function mc(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function im(){return!/^((?!chrome|android).)*safari/i.test(mc())}function ji(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&yn(t)&&(i=t.offsetWidth>0&&Oi(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Oi(r.height)/t.offsetHeight||1);var o=si(t)?dn(t):window,a=o.visualViewport,l=!im()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,d=(r.top+(l&&a?a.offsetTop:0))/s,u=r.width/i,h=r.height/s;return{width:u,height:h,top:d,right:c+u,bottom:d+h,left:c,x:c,y:d}}function hd(t){var e=ji(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function sm(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&fd(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function or(t){return dn(t).getComputedStyle(t)}function Wv(t){return["table","td","th"].indexOf(Pn(t))>=0}function Or(t){return((si(t)?t.ownerDocument:t.document)||window.document).documentElement}function za(t){return Pn(t)==="html"?t:t.assignedSlot||t.parentNode||(fd(t)?t.host:null)||Or(t)}function Lu(t){return!yn(t)||or(t).position==="fixed"?null:t.offsetParent}function qv(t){var e=/firefox/i.test(mc()),n=/Trident/i.test(mc());if(n&&yn(t)){var r=or(t);if(r.position==="fixed")return null}var i=za(t);for(fd(i)&&(i=i.host);yn(i)&&["html","body"].indexOf(Pn(i))<0;){var s=or(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Fs(t){for(var e=dn(t),n=Lu(t);n&&Wv(n)&&or(n).position==="static";)n=Lu(n);return n&&(Pn(n)==="html"||Pn(n)==="body"&&or(n).position==="static")?e:n||qv(t)||e}function pd(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function as(t,e,n){return Zr(t,$o(e,n))}function Kv(t,e,n){var r=as(t,e,n);return r>n?n:r}function om(){return{top:0,right:0,bottom:0,left:0}}function am(t){return Object.assign({},om(),t)}function lm(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Gv=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,am(typeof e!="number"?e:lm(e,$s))};function Jv(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Dn(n.placement),l=pd(a),c=[nn,wn].indexOf(a)>=0,d=c?"height":"width";if(!(!s||!o)){var u=Gv(i.padding,n),h=hd(s),f=l==="y"?tn:nn,p=l==="y"?vn:wn,g=n.rects.reference[d]+n.rects.reference[l]-o[l]-n.rects.popper[d],y=o[l]-n.rects.reference[l],b=Fs(s),x=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,w=g/2-y/2,v=u[f],E=x-h[d]-u[p],C=x/2-h[d]/2+w,N=as(v,C,E),j=l;n.modifiersData[r]=(e={},e[j]=N,e.centerOffset=N-C,e)}}function Yv(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||sm(e.elements.popper,i)&&(e.elements.arrow=i))}const Xv={name:"arrow",enabled:!0,phase:"main",fn:Jv,effect:Yv,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function zi(t){return t.split("-")[1]}var Zv={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qv(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Oi(n*i)/i||0,y:Oi(r*i)/i||0}}function Bu(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,d=t.roundOffsets,u=t.isFixed,h=o.x,f=h===void 0?0:h,p=o.y,g=p===void 0?0:p,y=typeof d=="function"?d({x:f,y:g}):{x:f,y:g};f=y.x,g=y.y;var b=o.hasOwnProperty("x"),x=o.hasOwnProperty("y"),w=nn,v=tn,E=window;if(c){var C=Fs(n),N="clientHeight",j="clientWidth";if(C===dn(n)&&(C=Or(n),or(C).position!=="static"&&a==="absolute"&&(N="scrollHeight",j="scrollWidth")),C=C,i===tn||(i===nn||i===wn)&&s===Cs){v=vn;var M=u&&C===E&&E.visualViewport?E.visualViewport.height:C[N];g-=M-r.height,g*=l?1:-1}if(i===nn||(i===tn||i===vn)&&s===Cs){w=wn;var T=u&&C===E&&E.visualViewport?E.visualViewport.width:C[j];f-=T-r.width,f*=l?1:-1}}var P=Object.assign({position:a},c&&Zv),_=d===!0?Qv({x:f,y:g},dn(n)):{x:f,y:g};if(f=_.x,g=_.y,l){var z;return Object.assign({},P,(z={},z[v]=x?"0":"",z[w]=b?"0":"",z.transform=(E.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",z))}return Object.assign({},P,(e={},e[v]=x?g+"px":"",e[w]=b?f+"px":"",e.transform="",e))}function ew(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Dn(e.placement),variation:zi(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Bu(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Bu(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const tw={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ew,data:{}};var to={passive:!0};function nw(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=dn(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(d){d.addEventListener("scroll",n.update,to)}),a&&l.addEventListener("resize",n.update,to),function(){s&&c.forEach(function(d){d.removeEventListener("scroll",n.update,to)}),a&&l.removeEventListener("resize",n.update,to)}}const rw={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:nw,data:{}};var iw={left:"right",right:"left",bottom:"top",top:"bottom"};function Mo(t){return t.replace(/left|right|bottom|top/g,function(e){return iw[e]})}var sw={start:"end",end:"start"};function $u(t){return t.replace(/start|end/g,function(e){return sw[e]})}function md(t){var e=dn(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function gd(t){return ji(Or(t)).left+md(t).scrollLeft}function ow(t,e){var n=dn(t),r=Or(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=im();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+gd(t),y:l}}function aw(t){var e,n=Or(t),r=md(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Zr(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Zr(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+gd(t),l=-r.scrollTop;return or(i||n).direction==="rtl"&&(a+=Zr(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function yd(t){var e=or(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function cm(t){return["html","body","#document"].indexOf(Pn(t))>=0?t.ownerDocument.body:yn(t)&&yd(t)?t:cm(za(t))}function ls(t,e){var n;e===void 0&&(e=[]);var r=cm(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=dn(r),o=i?[s].concat(s.visualViewport||[],yd(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(ls(za(o)))}function gc(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function lw(t,e){var n=ji(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Fu(t,e,n){return e===tm?gc(ow(t,n)):si(e)?lw(e,n):gc(aw(Or(t)))}function cw(t){var e=ls(za(t)),n=["absolute","fixed"].indexOf(or(t).position)>=0,r=n&&yn(t)?Fs(t):t;return si(r)?e.filter(function(i){return si(i)&&sm(i,r)&&Pn(i)!=="body"}):[]}function dw(t,e,n,r){var i=e==="clippingParents"?cw(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var d=Fu(t,c,r);return l.top=Zr(d.top,l.top),l.right=$o(d.right,l.right),l.bottom=$o(d.bottom,l.bottom),l.left=Zr(d.left,l.left),l},Fu(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function dm(t){var e=t.reference,n=t.element,r=t.placement,i=r?Dn(r):null,s=r?zi(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case tn:l={x:o,y:e.y-n.height};break;case vn:l={x:o,y:e.y+e.height};break;case wn:l={x:e.x+e.width,y:a};break;case nn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?pd(i):null;if(c!=null){var d=c==="y"?"height":"width";switch(s){case Mi:l[c]=l[c]-(e[d]/2-n[d]/2);break;case Cs:l[c]=l[c]+(e[d]/2-n[d]/2);break}}return l}function _s(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?Ov:a,c=n.rootBoundary,d=c===void 0?tm:c,u=n.elementContext,h=u===void 0?qi:u,f=n.altBoundary,p=f===void 0?!1:f,g=n.padding,y=g===void 0?0:g,b=am(typeof y!="number"?y:lm(y,$s)),x=h===qi?jv:qi,w=t.rects.popper,v=t.elements[p?x:h],E=dw(si(v)?v:v.contextElement||Or(t.elements.popper),l,d,o),C=ji(t.elements.reference),N=dm({reference:C,element:w,placement:i}),j=gc(Object.assign({},w,N)),M=h===qi?j:C,T={top:E.top-M.top+b.top,bottom:M.bottom-E.bottom+b.bottom,left:E.left-M.left+b.left,right:M.right-E.right+b.right},P=t.modifiersData.offset;if(h===qi&&P){var _=P[i];Object.keys(T).forEach(function(z){var k=[wn,vn].indexOf(z)>=0?1:-1,L=[tn,vn].indexOf(z)>=0?"y":"x";T[z]+=_[L]*k})}return T}function uw(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?nm:l,d=zi(r),u=d?a?Pu:Pu.filter(function(p){return zi(p)===d}):$s,h=u.filter(function(p){return c.indexOf(p)>=0});h.length===0&&(h=u);var f=h.reduce(function(p,g){return p[g]=_s(t,{placement:g,boundary:i,rootBoundary:s,padding:o})[Dn(g)],p},{});return Object.keys(f).sort(function(p,g){return f[p]-f[g]})}function fw(t){if(Dn(t)===ud)return[];var e=Mo(t);return[$u(t),e,$u(e)]}function hw(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,d=n.boundary,u=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=f===void 0?!0:f,g=n.allowedAutoPlacements,y=e.options.placement,b=Dn(y),x=b===y,w=l||(x||!p?[Mo(y)]:fw(y)),v=[y].concat(w).reduce(function(Z,J){return Z.concat(Dn(J)===ud?uw(e,{placement:J,boundary:d,rootBoundary:u,padding:c,flipVariations:p,allowedAutoPlacements:g}):J)},[]),E=e.rects.reference,C=e.rects.popper,N=new Map,j=!0,M=v[0],T=0;T<v.length;T++){var P=v[T],_=Dn(P),z=zi(P)===Mi,k=[tn,vn].indexOf(_)>=0,L=k?"width":"height",W=_s(e,{placement:P,boundary:d,rootBoundary:u,altBoundary:h,padding:c}),H=k?z?wn:nn:z?vn:tn;E[L]>C[L]&&(H=Mo(H));var ie=Mo(H),q=[];if(s&&q.push(W[_]<=0),a&&q.push(W[H]<=0,W[ie]<=0),q.every(function(Z){return Z})){M=P,j=!1;break}N.set(P,q)}if(j)for(var fe=p?3:1,I=function(J){var _e=v.find(function(Pe){var ne=N.get(Pe);if(ne)return ne.slice(0,J).every(function(ge){return ge})});if(_e)return M=_e,"break"},D=fe;D>0;D--){var ae=I(D);if(ae==="break")break}e.placement!==M&&(e.modifiersData[r]._skip=!0,e.placement=M,e.reset=!0)}}const pw={name:"flip",enabled:!0,phase:"main",fn:hw,requiresIfExists:["offset"],data:{_skip:!1}};function Hu(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Uu(t){return[tn,wn,vn,nn].some(function(e){return t[e]>=0})}function mw(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=_s(e,{elementContext:"reference"}),a=_s(e,{altBoundary:!0}),l=Hu(o,r),c=Hu(a,i,s),d=Uu(l),u=Uu(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}const gw={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:mw};function yw(t,e,n){var r=Dn(t),i=[nn,tn].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[nn,wn].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function bw(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=nm.reduce(function(d,u){return d[u]=yw(u,e.rects,s),d},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const xw={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:bw};function vw(t){var e=t.state,n=t.name;e.modifiersData[n]=dm({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const ww={name:"popperOffsets",enabled:!0,phase:"read",fn:vw,data:{}};function kw(t){return t==="x"?"y":"x"}function Sw(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,u=n.padding,h=n.tether,f=h===void 0?!0:h,p=n.tetherOffset,g=p===void 0?0:p,y=_s(e,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),b=Dn(e.placement),x=zi(e.placement),w=!x,v=pd(b),E=kw(v),C=e.modifiersData.popperOffsets,N=e.rects.reference,j=e.rects.popper,M=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,T=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),P=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,_={x:0,y:0};if(C){if(s){var z,k=v==="y"?tn:nn,L=v==="y"?vn:wn,W=v==="y"?"height":"width",H=C[v],ie=H+y[k],q=H-y[L],fe=f?-j[W]/2:0,I=x===Mi?N[W]:j[W],D=x===Mi?-j[W]:-N[W],ae=e.elements.arrow,Z=f&&ae?hd(ae):{width:0,height:0},J=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:om(),_e=J[k],Pe=J[L],ne=as(0,N[W],Z[W]),ge=w?N[W]/2-fe-ne-_e-T.mainAxis:I-ne-_e-T.mainAxis,Ce=w?-N[W]/2+fe+ne+Pe+T.mainAxis:D+ne+Pe+T.mainAxis,Le=e.elements.arrow&&Fs(e.elements.arrow),Re=Le?v==="y"?Le.clientTop||0:Le.clientLeft||0:0,Ge=(z=P==null?void 0:P[v])!=null?z:0,S=H+ge-Ge-Re,K=H+Ce-Ge,V=as(f?$o(ie,S):ie,H,f?Zr(q,K):q);C[v]=V,_[v]=V-H}if(a){var O,A=v==="x"?tn:nn,B=v==="x"?vn:wn,Y=C[E],te=E==="y"?"height":"width",F=Y+y[A],re=Y-y[B],he=[tn,nn].indexOf(b)!==-1,le=(O=P==null?void 0:P[E])!=null?O:0,Ee=he?F:Y-N[te]-j[te]-le+T.altAxis,Fe=he?Y+N[te]+j[te]-le-T.altAxis:re,Be=f&&he?Kv(Ee,Y,Fe):as(f?Ee:F,Y,f?Fe:re);C[E]=Be,_[E]=Be-Y}e.modifiersData[r]=_}}const Ew={name:"preventOverflow",enabled:!0,phase:"main",fn:Sw,requiresIfExists:["offset"]};function Cw(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function _w(t){return t===dn(t)||!yn(t)?md(t):Cw(t)}function Nw(t){var e=t.getBoundingClientRect(),n=Oi(e.width)/t.offsetWidth||1,r=Oi(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Tw(t,e,n){n===void 0&&(n=!1);var r=yn(e),i=yn(e)&&Nw(e),s=Or(e),o=ji(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Pn(e)!=="body"||yd(s))&&(a=_w(e)),yn(e)?(l=ji(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=gd(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Aw(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function Mw(t){var e=Aw(t);return Hv.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function Ow(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function jw(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Vu={placement:"bottom",modifiers:[],strategy:"absolute"};function Wu(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function zw(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?Vu:i;return function(a,l,c){c===void 0&&(c=s);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Vu,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},u=[],h=!1,f={state:d,setOptions:function(b){var x=typeof b=="function"?b(d.options):b;g(),d.options=Object.assign({},s,d.options,x),d.scrollParents={reference:si(a)?ls(a):a.contextElement?ls(a.contextElement):[],popper:ls(l)};var w=Mw(jw([].concat(r,d.options.modifiers)));return d.orderedModifiers=w.filter(function(v){return v.enabled}),p(),f.update()},forceUpdate:function(){if(!h){var b=d.elements,x=b.reference,w=b.popper;if(Wu(x,w)){d.rects={reference:Tw(x,Fs(w),d.options.strategy==="fixed"),popper:hd(w)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(T){return d.modifiersData[T.name]=Object.assign({},T.data)});for(var v=0;v<d.orderedModifiers.length;v++){if(d.reset===!0){d.reset=!1,v=-1;continue}var E=d.orderedModifiers[v],C=E.fn,N=E.options,j=N===void 0?{}:N,M=E.name;typeof C=="function"&&(d=C({state:d,options:j,name:M,instance:f})||d)}}}},update:Ow(function(){return new Promise(function(y){f.forceUpdate(),y(d)})}),destroy:function(){g(),h=!0}};if(!Wu(a,l))return f;f.setOptions(c).then(function(y){!h&&c.onFirstUpdate&&c.onFirstUpdate(y)});function p(){d.orderedModifiers.forEach(function(y){var b=y.name,x=y.options,w=x===void 0?{}:x,v=y.effect;if(typeof v=="function"){var E=v({state:d,name:b,instance:f,options:w}),C=function(){};u.push(E||C)}})}function g(){u.forEach(function(y){return y()}),u=[]}return f}}var Iw=[rw,ww,tw,rm,xw,pw,Ew,Xv,gw],Rw=zw({defaultModifiers:Iw}),Dw="tippy-box",um="tippy-content",Pw="tippy-backdrop",fm="tippy-arrow",hm="tippy-svg-arrow",Wr={passive:!0,capture:!0},pm=function(){return document.body};function al(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function bd(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function mm(t,e){return typeof t=="function"?t.apply(void 0,e):t}function qu(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function Lw(t){return t.split(/\s+/).filter(Boolean)}function bi(t){return[].concat(t)}function Ku(t,e){t.indexOf(e)===-1&&t.push(e)}function Bw(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function $w(t){return t.split("-")[0]}function Fo(t){return[].slice.call(t)}function Gu(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function cs(){return document.createElement("div")}function Ia(t){return["Element","Fragment"].some(function(e){return bd(t,e)})}function Fw(t){return bd(t,"NodeList")}function Hw(t){return bd(t,"MouseEvent")}function Uw(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function Vw(t){return Ia(t)?[t]:Fw(t)?Fo(t):Array.isArray(t)?t:Fo(document.querySelectorAll(t))}function ll(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function Ju(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function Ww(t){var e,n=bi(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function qw(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var s=i.popperRect,o=i.popperState,a=i.props,l=a.interactiveBorder,c=$w(o.placement),d=o.modifiersData.offset;if(!d)return!0;var u=c==="bottom"?d.top.y:0,h=c==="top"?d.bottom.y:0,f=c==="right"?d.left.x:0,p=c==="left"?d.right.x:0,g=s.top-r+u>l,y=r-s.bottom-h>l,b=s.left-n+f>l,x=n-s.right-p>l;return g||y||b||x})}function cl(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function Yu(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Rn={isTouch:!1},Xu=0;function Kw(){Rn.isTouch||(Rn.isTouch=!0,window.performance&&document.addEventListener("mousemove",gm))}function gm(){var t=performance.now();t-Xu<20&&(Rn.isTouch=!1,document.removeEventListener("mousemove",gm)),Xu=t}function Gw(){var t=document.activeElement;if(Uw(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function Jw(){document.addEventListener("touchstart",Kw,Wr),window.addEventListener("blur",Gw)}var Yw=typeof window<"u"&&typeof document<"u",Xw=Yw?!!window.msCrypto:!1,Zw={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Qw={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Nn=Object.assign({appendTo:pm,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Zw,Qw),ek=Object.keys(Nn),tk=function(e){var n=Object.keys(e);n.forEach(function(r){Nn[r]=e[r]})};function ym(t){var e=t.plugins||[],n=e.reduce(function(r,i){var s=i.name,o=i.defaultValue;if(s){var a;r[s]=t[s]!==void 0?t[s]:(a=Nn[s])!=null?a:o}return r},{});return Object.assign({},t,n)}function nk(t,e){var n=e?Object.keys(ym(Object.assign({},Nn,{plugins:e}))):ek,r=n.reduce(function(i,s){var o=(t.getAttribute("data-tippy-"+s)||"").trim();if(!o)return i;if(s==="content")i[s]=o;else try{i[s]=JSON.parse(o)}catch{i[s]=o}return i},{});return r}function Zu(t,e){var n=Object.assign({},e,{content:mm(e.content,[t])},e.ignoreAttributes?{}:nk(t,e.plugins));return n.aria=Object.assign({},Nn.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var rk=function(){return"innerHTML"};function yc(t,e){t[rk()]=e}function Qu(t){var e=cs();return t===!0?e.className=fm:(e.className=hm,Ia(t)?e.appendChild(t):yc(e,t)),e}function ef(t,e){Ia(e.content)?(yc(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?yc(t,e.content):t.textContent=e.content)}function bc(t){var e=t.firstElementChild,n=Fo(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(um)}),arrow:n.find(function(r){return r.classList.contains(fm)||r.classList.contains(hm)}),backdrop:n.find(function(r){return r.classList.contains(Pw)})}}function bm(t){var e=cs(),n=cs();n.className=Dw,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=cs();r.className=um,r.setAttribute("data-state","hidden"),ef(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(s,o){var a=bc(e),l=a.box,c=a.content,d=a.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(s.content!==o.content||s.allowHTML!==o.allowHTML)&&ef(c,t.props),o.arrow?d?s.arrow!==o.arrow&&(l.removeChild(d),l.appendChild(Qu(o.arrow))):l.appendChild(Qu(o.arrow)):d&&l.removeChild(d)}return{popper:e,onUpdate:i}}bm.$$tippy=!0;var ik=1,no=[],dl=[];function sk(t,e){var n=Zu(t,Object.assign({},Nn,ym(Gu(e)))),r,i,s,o=!1,a=!1,l=!1,c=!1,d,u,h,f=[],p=qu(S,n.interactiveDebounce),g,y=ik++,b=null,x=Bw(n.plugins),w={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},v={id:y,reference:t,popper:cs(),popperInstance:b,props:n,state:w,plugins:x,clearDelayTimeouts:Ee,setProps:Fe,setContent:Be,show:lt,hide:sn,hideWithInteractivity:Et,enable:he,disable:le,unmount:Zt,destroy:G};if(!n.render)return v;var E=n.render(v),C=E.popper,N=E.onUpdate;C.setAttribute("data-tippy-root",""),C.id="tippy-"+v.id,v.popper=C,t._tippy=v,C._tippy=v;var j=x.map(function(U){return U.fn(v)}),M=t.hasAttribute("aria-expanded");return Le(),fe(),H(),ie("onCreate",[v]),n.showOnCreate&&F(),C.addEventListener("mouseenter",function(){v.props.interactive&&v.state.isVisible&&v.clearDelayTimeouts()}),C.addEventListener("mouseleave",function(){v.props.interactive&&v.props.trigger.indexOf("mouseenter")>=0&&k().addEventListener("mousemove",p)}),v;function T(){var U=v.props.touch;return Array.isArray(U)?U:[U,0]}function P(){return T()[0]==="hold"}function _(){var U;return!!((U=v.props.render)!=null&&U.$$tippy)}function z(){return g||t}function k(){var U=z().parentNode;return U?Ww(U):document}function L(){return bc(C)}function W(U){return v.state.isMounted&&!v.state.isVisible||Rn.isTouch||d&&d.type==="focus"?0:al(v.props.delay,U?0:1,Nn.delay)}function H(U){U===void 0&&(U=!1),C.style.pointerEvents=v.props.interactive&&!U?"":"none",C.style.zIndex=""+v.props.zIndex}function ie(U,ye,ke){if(ke===void 0&&(ke=!0),j.forEach(function(Te){Te[U]&&Te[U].apply(Te,ye)}),ke){var $e;($e=v.props)[U].apply($e,ye)}}function q(){var U=v.props.aria;if(U.content){var ye="aria-"+U.content,ke=C.id,$e=bi(v.props.triggerTarget||t);$e.forEach(function(Te){var et=Te.getAttribute(ye);if(v.state.isVisible)Te.setAttribute(ye,et?et+" "+ke:ke);else{var Ze=et&&et.replace(ke,"").trim();Ze?Te.setAttribute(ye,Ze):Te.removeAttribute(ye)}})}}function fe(){if(!(M||!v.props.aria.expanded)){var U=bi(v.props.triggerTarget||t);U.forEach(function(ye){v.props.interactive?ye.setAttribute("aria-expanded",v.state.isVisible&&ye===z()?"true":"false"):ye.removeAttribute("aria-expanded")})}}function I(){k().removeEventListener("mousemove",p),no=no.filter(function(U){return U!==p})}function D(U){if(!(Rn.isTouch&&(l||U.type==="mousedown"))){var ye=U.composedPath&&U.composedPath()[0]||U.target;if(!(v.props.interactive&&Yu(C,ye))){if(bi(v.props.triggerTarget||t).some(function(ke){return Yu(ke,ye)})){if(Rn.isTouch||v.state.isVisible&&v.props.trigger.indexOf("click")>=0)return}else ie("onClickOutside",[v,U]);v.props.hideOnClick===!0&&(v.clearDelayTimeouts(),v.hide(),a=!0,setTimeout(function(){a=!1}),v.state.isMounted||_e())}}}function ae(){l=!0}function Z(){l=!1}function J(){var U=k();U.addEventListener("mousedown",D,!0),U.addEventListener("touchend",D,Wr),U.addEventListener("touchstart",Z,Wr),U.addEventListener("touchmove",ae,Wr)}function _e(){var U=k();U.removeEventListener("mousedown",D,!0),U.removeEventListener("touchend",D,Wr),U.removeEventListener("touchstart",Z,Wr),U.removeEventListener("touchmove",ae,Wr)}function Pe(U,ye){ge(U,function(){!v.state.isVisible&&C.parentNode&&C.parentNode.contains(C)&&ye()})}function ne(U,ye){ge(U,ye)}function ge(U,ye){var ke=L().box;function $e(Te){Te.target===ke&&(cl(ke,"remove",$e),ye())}if(U===0)return ye();cl(ke,"remove",u),cl(ke,"add",$e),u=$e}function Ce(U,ye,ke){ke===void 0&&(ke=!1);var $e=bi(v.props.triggerTarget||t);$e.forEach(function(Te){Te.addEventListener(U,ye,ke),f.push({node:Te,eventType:U,handler:ye,options:ke})})}function Le(){P()&&(Ce("touchstart",Ge,{passive:!0}),Ce("touchend",K,{passive:!0})),Lw(v.props.trigger).forEach(function(U){if(U!=="manual")switch(Ce(U,Ge),U){case"mouseenter":Ce("mouseleave",K);break;case"focus":Ce(Xw?"focusout":"blur",V);break;case"focusin":Ce("focusout",V);break}})}function Re(){f.forEach(function(U){var ye=U.node,ke=U.eventType,$e=U.handler,Te=U.options;ye.removeEventListener(ke,$e,Te)}),f=[]}function Ge(U){var ye,ke=!1;if(!(!v.state.isEnabled||O(U)||a)){var $e=((ye=d)==null?void 0:ye.type)==="focus";d=U,g=U.currentTarget,fe(),!v.state.isVisible&&Hw(U)&&no.forEach(function(Te){return Te(U)}),U.type==="click"&&(v.props.trigger.indexOf("mouseenter")<0||o)&&v.props.hideOnClick!==!1&&v.state.isVisible?ke=!0:F(U),U.type==="click"&&(o=!ke),ke&&!$e&&re(U)}}function S(U){var ye=U.target,ke=z().contains(ye)||C.contains(ye);if(!(U.type==="mousemove"&&ke)){var $e=te().concat(C).map(function(Te){var et,Ze=Te._tippy,Mt=(et=Ze.popperInstance)==null?void 0:et.state;return Mt?{popperRect:Te.getBoundingClientRect(),popperState:Mt,props:n}:null}).filter(Boolean);qw($e,U)&&(I(),re(U))}}function K(U){var ye=O(U)||v.props.trigger.indexOf("click")>=0&&o;if(!ye){if(v.props.interactive){v.hideWithInteractivity(U);return}re(U)}}function V(U){v.props.trigger.indexOf("focusin")<0&&U.target!==z()||v.props.interactive&&U.relatedTarget&&C.contains(U.relatedTarget)||re(U)}function O(U){return Rn.isTouch?P()!==U.type.indexOf("touch")>=0:!1}function A(){B();var U=v.props,ye=U.popperOptions,ke=U.placement,$e=U.offset,Te=U.getReferenceClientRect,et=U.moveTransition,Ze=_()?bc(C).arrow:null,Mt=Te?{getBoundingClientRect:Te,contextElement:Te.contextElement||z()}:t,Ot={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(X){var me=X.state;if(_()){var Ae=L(),ee=Ae.box;["placement","reference-hidden","escaped"].forEach(function(xe){xe==="placement"?ee.setAttribute("data-placement",me.placement):me.attributes.popper["data-popper-"+xe]?ee.setAttribute("data-"+xe,""):ee.removeAttribute("data-"+xe)}),me.attributes.popper={}}}},it=[{name:"offset",options:{offset:$e}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!et}},Ot];_()&&Ze&&it.push({name:"arrow",options:{element:Ze,padding:3}}),it.push.apply(it,(ye==null?void 0:ye.modifiers)||[]),v.popperInstance=Rw(Mt,C,Object.assign({},ye,{placement:ke,onFirstUpdate:h,modifiers:it}))}function B(){v.popperInstance&&(v.popperInstance.destroy(),v.popperInstance=null)}function Y(){var U=v.props.appendTo,ye,ke=z();v.props.interactive&&U===pm||U==="parent"?ye=ke.parentNode:ye=mm(U,[ke]),ye.contains(C)||ye.appendChild(C),v.state.isMounted=!0,A()}function te(){return Fo(C.querySelectorAll("[data-tippy-root]"))}function F(U){v.clearDelayTimeouts(),U&&ie("onTrigger",[v,U]),J();var ye=W(!0),ke=T(),$e=ke[0],Te=ke[1];Rn.isTouch&&$e==="hold"&&Te&&(ye=Te),ye?r=setTimeout(function(){v.show()},ye):v.show()}function re(U){if(v.clearDelayTimeouts(),ie("onUntrigger",[v,U]),!v.state.isVisible){_e();return}if(!(v.props.trigger.indexOf("mouseenter")>=0&&v.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(U.type)>=0&&o)){var ye=W(!1);ye?i=setTimeout(function(){v.state.isVisible&&v.hide()},ye):s=requestAnimationFrame(function(){v.hide()})}}function he(){v.state.isEnabled=!0}function le(){v.hide(),v.state.isEnabled=!1}function Ee(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(s)}function Fe(U){if(!v.state.isDestroyed){ie("onBeforeUpdate",[v,U]),Re();var ye=v.props,ke=Zu(t,Object.assign({},ye,Gu(U),{ignoreAttributes:!0}));v.props=ke,Le(),ye.interactiveDebounce!==ke.interactiveDebounce&&(I(),p=qu(S,ke.interactiveDebounce)),ye.triggerTarget&&!ke.triggerTarget?bi(ye.triggerTarget).forEach(function($e){$e.removeAttribute("aria-expanded")}):ke.triggerTarget&&t.removeAttribute("aria-expanded"),fe(),H(),N&&N(ye,ke),v.popperInstance&&(A(),te().forEach(function($e){requestAnimationFrame($e._tippy.popperInstance.forceUpdate)})),ie("onAfterUpdate",[v,U])}}function Be(U){v.setProps({content:U})}function lt(){var U=v.state.isVisible,ye=v.state.isDestroyed,ke=!v.state.isEnabled,$e=Rn.isTouch&&!v.props.touch,Te=al(v.props.duration,0,Nn.duration);if(!(U||ye||ke||$e)&&!z().hasAttribute("disabled")&&(ie("onShow",[v],!1),v.props.onShow(v)!==!1)){if(v.state.isVisible=!0,_()&&(C.style.visibility="visible"),H(),J(),v.state.isMounted||(C.style.transition="none"),_()){var et=L(),Ze=et.box,Mt=et.content;ll([Ze,Mt],0)}h=function(){var it;if(!(!v.state.isVisible||c)){if(c=!0,C.offsetHeight,C.style.transition=v.props.moveTransition,_()&&v.props.animation){var R=L(),X=R.box,me=R.content;ll([X,me],Te),Ju([X,me],"visible")}q(),fe(),Ku(dl,v),(it=v.popperInstance)==null||it.forceUpdate(),ie("onMount",[v]),v.props.animation&&_()&&ne(Te,function(){v.state.isShown=!0,ie("onShown",[v])})}},Y()}}function sn(){var U=!v.state.isVisible,ye=v.state.isDestroyed,ke=!v.state.isEnabled,$e=al(v.props.duration,1,Nn.duration);if(!(U||ye||ke)&&(ie("onHide",[v],!1),v.props.onHide(v)!==!1)){if(v.state.isVisible=!1,v.state.isShown=!1,c=!1,o=!1,_()&&(C.style.visibility="hidden"),I(),_e(),H(!0),_()){var Te=L(),et=Te.box,Ze=Te.content;v.props.animation&&(ll([et,Ze],$e),Ju([et,Ze],"hidden"))}q(),fe(),v.props.animation?_()&&Pe($e,v.unmount):v.unmount()}}function Et(U){k().addEventListener("mousemove",p),Ku(no,p),p(U)}function Zt(){v.state.isVisible&&v.hide(),v.state.isMounted&&(B(),te().forEach(function(U){U._tippy.unmount()}),C.parentNode&&C.parentNode.removeChild(C),dl=dl.filter(function(U){return U!==v}),v.state.isMounted=!1,ie("onHidden",[v]))}function G(){v.state.isDestroyed||(v.clearDelayTimeouts(),v.unmount(),Re(),delete t._tippy,v.state.isDestroyed=!0,ie("onDestroy",[v]))}}function Hi(t,e){e===void 0&&(e={});var n=Nn.plugins.concat(e.plugins||[]);Jw();var r=Object.assign({},e,{plugins:n}),i=Vw(t),s=i.reduce(function(o,a){var l=a&&sk(a,r);return l&&o.push(l),o},[]);return Ia(t)?s[0]:s}Hi.defaultProps=Nn;Hi.setDefaultProps=tk;Hi.currentInput=Rn;Object.assign({},rm,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});Hi.setDefaultProps({render:bm});const Pt=({content:t,children:e,placement:n="top",delay:r=[300,0]})=>{const i=$.useRef(null),s=$.useRef(null);return $.useEffect(()=>(i.current&&(s.current=Hi(i.current,{content:t,placement:n,theme:"zinc",animation:"shift-away",arrow:!1,delay:r,touch:!1})),()=>{var o;(o=s.current)==null||o.destroy(),s.current=null}),[]),$.useEffect(()=>{var o;(o=s.current)==null||o.setContent(t)},[t]),Q.cloneElement(e,{ref:i})},ok=Q.lazy(()=>Xe(()=>import("./CategoryManagerModal-ByWPupyB.js"),__vite__mapDeps([4,1,3]))),ak=Q.lazy(()=>Xe(()=>import("./TagManagerModal-B-MA6qjC.js"),__vite__mapDeps([5,3]))),lk=Q.lazy(()=>Xe(()=>import("./TemplateManagerModal-DXPbqgyx.js"),__vite__mapDeps([6,1,3]))),ck=({sampleItem:t,selectedItems:e,selectedItemsCount:n,onBack:r,onCreate:i,onCancel:s})=>{const[o,a]=$.useState([]),[l,c]=$.useState("smart"),[d,u]=$.useState([]),[h,f]=$.useState(""),[p,g]=$.useState(null),[y,b]=$.useState([]),[x,w]=$.useState([]),[v,E]=$.useState(""),[C,N]=$.useState(new Set),[j,M]=$.useState(!1),[T,P]=$.useState(!1),[_,z]=$.useState(!1),[k,L]=$.useState(!1),[W,H]=$.useState(!1),[ie,q]=$.useState({});$.useEffect(()=>{fe()},[]);const fe=async()=>{a(await Ke.getTemplates());const ne=await Ke.getCategories();if(b(ne),!v){const ge=ne.find(Ce=>Ce.name==="General")||ne[0];ge&&E(ge.id)}w(await Ke.getTags()),g(await Ke.getSettings())};$.useEffect(()=>{I()},[l,t]);const I=()=>{if(l==="smart"){const ge=sb(t).map(Ce=>({...Ce,id:crypto.randomUUID()}));u(ge)}else{const ne=o.find(ge=>ge.id===l);ne&&u(ne.rules.map(ge=>({...ge,id:crypto.randomUUID()})))}},D=()=>{I()},ae=()=>{q(l!=="smart"?{initialMappings:d,targetId:l}:{initialMappings:d,targetId:void 0}),H(!0)},Z=()=>{q({}),H(!0)},J=ne=>{fe().then(()=>{c(ne.id),H(!1)})},_e=(ne,ge)=>{ne.preventDefault(),ne.stopPropagation();const Ce=new Set(C);Ce.has(ge)?Ce.delete(ge):Ce.add(ge),N(Ce)},Pe=ne=>{i(d,h,v,Array.from(C),ne),L(!1)};return m.jsxs("div",{className:"flex flex-col h-full bg-zinc-950",children:[m.jsxs($.Suspense,{fallback:m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:m.jsx(yt,{className:"animate-spin text-indigo-500",size:24})}),children:[j&&m.jsx(ok,{onClose:()=>M(!1),onUpdate:fe}),T&&m.jsx(ak,{onClose:()=>P(!1),onUpdate:fe}),W&&m.jsx(lk,{onClose:()=>H(!1),onSelect:J,sampleItem:t,initialMappings:ie.initialMappings,targetTemplateId:ie.targetId})]}),k&&m.jsx(em,{mode:"create",initialIntent:"",settings:p,onSave:ne=>Pe(ne),onClose:()=>Pe(void 0)}),m.jsxs("header",{className:`h-20 border-b border-zinc-800 flex items-center px-6 justify-between bg-zinc-900/50 backdrop-blur gap-6 transition-all ${_?"z-50 relative":"z-10 relative"}`,children:[m.jsxs("div",{className:"flex flex-col justify-center min-w-[200px]",children:[m.jsx("div",{className:"flex items-center justify-between mb-1",children:m.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-wider",children:"Layout Strategy"})}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("select",{value:l,onChange:ne=>c(ne.target.value),className:"bg-black border border-zinc-700 rounded text-xs text-white px-2 py-1.5 outline-none focus:border-indigo-500 w-32",children:[m.jsx("option",{value:"smart",children:" Smart Map"}),o.map(ne=>m.jsx("option",{value:ne.id,children:ne.name},ne.id))]}),m.jsx(Pt,{content:"Reset mapping",children:m.jsx("button",{onClick:D,className:"p-1.5 text-zinc-500 hover:text-white bg-zinc-800 hover:bg-zinc-700 rounded border border-zinc-700 transition-colors",children:m.jsx(V1,{size:14})})}),m.jsx(Pt,{content:l==="smart"?"Save as New Template":"Update this Template",children:m.jsx("button",{onClick:ae,disabled:d.length===0,className:"p-1.5 text-zinc-500 hover:text-white bg-zinc-800 hover:bg-zinc-700 rounded border border-zinc-700 transition-colors disabled:opacity-50",children:m.jsx(cd,{size:14})})}),m.jsx(Pt,{content:"Manage Templates",children:m.jsx("button",{onClick:Z,className:"p-1.5 text-zinc-500 hover:text-indigo-400 bg-zinc-800 hover:bg-zinc-700 rounded border border-zinc-700 transition-colors",children:m.jsx(Xp,{size:14})})})]}),m.jsx("p",{className:"text-[9px] text-zinc-500 mt-1 leading-tight max-w-[250px]",children:"Smart Map detects titles & content. Save custom layouts for future imports."})]}),m.jsx("div",{className:"w-px h-10 bg-zinc-800"}),m.jsxs("div",{className:"flex items-center gap-4 flex-1 justify-start",children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1",children:[m.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-wider",children:"Category"}),m.jsx("button",{onClick:()=>M(!0),className:"text-[10px] text-indigo-400 hover:text-indigo-300",children:"Manage"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("select",{value:v,onChange:ne=>E(ne.target.value),className:"appearance-none bg-black border border-zinc-700 rounded text-xs text-white pl-8 pr-4 py-1.5 outline-none focus:border-indigo-500 w-40",children:y.map(ne=>m.jsx("option",{value:ne.id,children:ne.name},ne.id))}),m.jsx(bx,{size:12,className:"absolute left-2 top-2 text-zinc-500"})]})]}),m.jsxs("div",{className:"flex flex-col relative",children:[m.jsxs("div",{className:"flex items-center justify-between mb-1",children:[m.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-wider",children:"Tags"}),m.jsx("button",{onClick:()=>P(!0),className:"text-[10px] text-indigo-400 hover:text-indigo-300",children:"Manage"})]}),m.jsxs("button",{onClick:()=>z(!_),className:"flex items-center gap-2 bg-black border border-zinc-700 rounded px-2 py-1.5 text-xs text-zinc-300 hover:border-zinc-500 w-40 justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[m.jsx(dd,{size:12,className:"text-zinc-500 shrink-0"}),m.jsx("span",{className:"truncate",children:C.size>0?`${C.size} selected`:"Select Tags"})]}),m.jsx(ad,{size:12})]}),_&&m.jsxs("div",{className:"absolute top-full left-0 mt-1 w-56 bg-zinc-900 border border-zinc-800 rounded-lg shadow-xl p-2 z-50 max-h-60 overflow-y-auto",onClick:ne=>ne.stopPropagation(),children:[x.map(ne=>m.jsxs("div",{onClick:ge=>_e(ge,ne.id),className:"flex items-center gap-2 p-1.5 hover:bg-zinc-800 rounded cursor-pointer select-none",children:[m.jsx("div",{className:`w-4 h-4 shrink-0 rounded-sm border flex items-center justify-center ${C.has(ne.id)?"bg-indigo-500 border-indigo-500":"border-zinc-600"}`,children:C.has(ne.id)&&m.jsx(ii,{size:10,className:"text-white"})}),m.jsx("span",{className:`text-xs px-1.5 rounded ${pc[ne.color]}`,children:ne.name})]},ne.id)),x.length===0&&m.jsx("div",{className:"text-xs text-zinc-500 p-2 text-center",children:"No tags. Click Manage."})]})]})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("div",{className:"flex flex-col items-end",children:[m.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-wider mb-1",children:"Optional Title"}),m.jsx("input",{type:"text",placeholder:"Collection Name...",value:h,onChange:ne=>f(ne.target.value),className:"bg-black border border-zinc-700 rounded px-2 py-1.5 text-xs text-white focus:border-indigo-500 outline-none w-48 text-right"})]}),m.jsx("div",{className:"h-8 w-px bg-zinc-800"}),m.jsx("button",{onClick:r,className:"text-zinc-400 hover:text-white text-xs font-medium",children:"Back"}),m.jsxs("button",{onClick:()=>L(!0),disabled:d.length===0,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-xs font-bold transition-colors flex items-center gap-2 shadow-lg shadow-indigo-900/20",children:[m.jsx(ii,{size:14}),"Create Note"]}),m.jsx("div",{className:"w-px h-6 bg-zinc-800"}),m.jsx("button",{onClick:s,className:"text-zinc-500 hover:text-white transition-colors",title:"Cancel Wizard",children:m.jsx(sr,{size:20})})]})]}),m.jsx("div",{className:"flex-1 overflow-hidden p-6",children:m.jsx(Mv,{selectedItems:e,mappings:d,onMappingsChange:u})}),_&&m.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>z(!1)})]})},dk=({onComplete:t,onCancel:e})=>{const[n,r]=$.useState(1),[i,s]=$.useState(!1),[o,a]=$.useState(!1),[l,c]=$.useState(null),[d,u]=$.useState(""),[h,f]=$.useState(null),[p,g]=$.useState(null),[y,b]=$.useState([]),x=P=>{try{let _=Vp(P);_||(_={path:"root",items:[P]}),f(P),g(_),r(2)}catch(_){console.error("Analysis Error",_),c("Failed to analyze JSON structure.")}},w=async P=>{a(!0),c(null);try{const _=await fetch(P);if(!_.ok)throw new Error(`HTTP ${_.status}: ${_.statusText}`);const z=_.headers.get("content-type");if(z&&z.includes("text/html"))throw new Error("URL returned HTML. Please use a JSON API or paste the content directly.");const k=await _.json();x(k)}catch(_){c(_.message||"Failed to fetch URL")}finally{a(!1)}},v=()=>{t({data:{items:[],mappings:[]},isBlank:!0})},E=$.useCallback(P=>{P.preventDefault(),s(!0)},[]),C=$.useCallback(P=>{P.preventDefault(),s(!1)},[]),N=$.useCallback(P=>{P.preventDefault(),s(!1),c(null);const _=Array.from(P.dataTransfer.files);if(_.length>0){const z=_[0];if(z.type==="application/json"||z.name.endsWith(".json")){a(!0);const k=new FileReader;k.onload=L=>{var W;try{const H=JSON.parse((W=L.target)==null?void 0:W.result);x(H)}catch{c("Invalid JSON file.")}finally{a(!1)}},k.readAsText(z)}else c("Please drop a valid .json file.")}},[]),j=$.useCallback(P=>{if(P.target.tagName==="INPUT")return;const _=P.clipboardData.getData("text");if(_){if(c(null),_.trim().startsWith("http")){u(_.trim()),w(_.trim());return}if(_.trim().startsWith("{")||_.trim().startsWith("[")){a(!0);try{const z=JSON.parse(_);x(z)}catch{c("Pasted text is not valid JSON.")}finally{a(!1)}}}},[]),M=P=>{b(P),r(3)},T=(P,_,z,k,L)=>{t({data:{items:y,mappings:P,title:_},catId:z,tagIds:k,intent:L})};return m.jsxs("div",{className:"flex-1 flex flex-col h-full bg-black relative",children:[m.jsx("div",{className:"h-1 bg-zinc-900 w-full flex",children:m.jsx("div",{className:`h-full bg-indigo-600 transition-all duration-500 ${n===1?"w-1/3":n===2?"w-2/3":"w-full"}`})}),m.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[n===1&&m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 outline-none relative",onPaste:j,tabIndex:0,children:[m.jsx("button",{onClick:e,className:"absolute top-4 right-4 z-10 text-zinc-500 hover:text-white p-2 rounded-full hover:bg-zinc-900 transition-colors",children:m.jsx(sr,{size:20})}),m.jsxs("div",{className:"w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[m.jsxs("button",{onClick:v,className:"group relative flex flex-col items-center justify-center p-8 bg-zinc-900 border border-zinc-800 hover:border-zinc-600 hover:bg-zinc-800/50 rounded-2xl transition-all duration-300 text-center space-y-4",children:[m.jsx("div",{className:"p-4 rounded-full bg-zinc-800 group-hover:bg-indigo-600 group-hover:text-white text-zinc-400 transition-colors",children:m.jsx(Gp,{size:32})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Create Blank Note"}),m.jsx("p",{className:"text-xs text-zinc-500 group-hover:text-zinc-400",children:"Start from scratch with the rich text editor."})]})]}),m.jsx("div",{onDragOver:E,onDragLeave:C,onDrop:N,className:`
                            relative flex flex-col items-center justify-center p-8 rounded-2xl border-2 border-dashed transition-all duration-300 space-y-4 text-center
                            ${i?"border-indigo-500 bg-indigo-500/10 scale-[1.02]":"border-zinc-800 bg-zinc-900/30 hover:border-zinc-700 hover:bg-zinc-900/50"}
                        `,children:o?m.jsxs("div",{className:"flex flex-col items-center animate-pulse",children:[m.jsx(yt,{size:32,className:"text-indigo-500 animate-spin mb-4"}),m.jsx("p",{className:"text-sm text-zinc-400 font-bold",children:"Analyzing Structure..."})]}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:`p-4 rounded-full transition-colors ${i?"bg-indigo-500 text-white":"bg-zinc-800 text-indigo-400"}`,children:m.jsx(Sv,{size:32})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Import Data"}),m.jsxs("p",{className:"text-xs text-zinc-500 max-w-[200px] mx-auto leading-relaxed",children:["Drag & drop ",m.jsx("strong",{className:"text-zinc-400",children:".json"}),", paste text, or enter a URL below."]})]}),m.jsxs("div",{className:"w-full max-w-xs relative mt-2 group/input",children:[m.jsx(is,{size:12,className:"absolute left-3 top-3 text-zinc-500 group-focus-within/input:text-indigo-400 transition-colors"}),m.jsx("input",{type:"text",value:d,onChange:P=>u(P.target.value),onKeyDown:P=>P.key==="Enter"&&w(d),placeholder:"https://api.example.com/data.json",className:"w-full bg-black border border-zinc-700 rounded-lg py-2 pl-8 pr-8 text-xs text-white focus:border-indigo-500 outline-none transition-colors",onClick:P=>P.stopPropagation()}),d&&m.jsx("button",{onClick:()=>w(d),className:"absolute right-2 top-2 text-indigo-400 hover:text-white",children:m.jsx(Bs,{size:12})})]}),l&&m.jsxs("div",{className:"absolute bottom-4 left-4 right-4 flex items-center gap-2 p-2 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 animate-in slide-in-from-bottom-2",children:[m.jsx(Ss,{size:14,className:"shrink-0"}),m.jsx("p",{className:"text-[10px] font-bold flex-1 text-left",children:l})]})]})})]}),m.jsxs("p",{className:"mt-8 text-md text-zinc-500 flex items-center gap-2 opacity-780",children:[m.jsx(h1,{size:16}),"Tip: You can paste JSON directly from your clipboard anywhere on this screen."]})]}),n===2&&p&&m.jsx(Av,{rawJson:h,initialCollection:p,onNext:M,onBack:()=>r(1),onCancel:e}),n===3&&y.length>0&&m.jsx(ck,{sampleItem:y[0],selectedItems:y,selectedItemsCount:y.length,onBack:()=>r(2),onCreate:T,onCancel:e})]})]})};var xm=Hp();const uk=Mr(xm);var ul={exports:{}},fl={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tf;function fk(){if(tf)return fl;tf=1;var t=Bt();function e(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(u,h){var f=h(),p=r({inst:{value:f,getSnapshot:h}}),g=p[0].inst,y=p[1];return s(function(){g.value=f,g.getSnapshot=h,l(g)&&y({inst:g})},[u,f,h]),i(function(){return l(g)&&y({inst:g}),u(function(){l(g)&&y({inst:g})})},[u]),o(f),f}function l(u){var h=u.getSnapshot;u=u.value;try{var f=h();return!n(u,f)}catch{return!0}}function c(u,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return fl.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,fl}var nf;function vm(){return nf||(nf=1,ul.exports=fk()),ul.exports}var wm=vm();function It(t){this.content=t}It.prototype={constructor:It,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new It(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new It(n)},addToStart:function(t,e){return new It([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new It(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new It(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=It.from(t),t.size?new It(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=It.from(t),t.size?new It(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=It.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};It.from=function(t){if(t instanceof It)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new It(e)};function km(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=km(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function Sm(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,d=Math.min(o.text.length,a.text.length);for(;c<d&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=Sm(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class oe{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,n-d),r,i+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new oe(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new oe(r,i)}cutByIndex(e,n){return e==n?oe.empty:e==0&&n==this.content.length?this:new oe(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new oe(i,s)}addToStart(e){return new oe([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new oe(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return km(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Sm(this,e,n,r)}findIndex(e){if(e==0)return ro(0,e);if(e==this.size)return ro(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?ro(n+1,s):ro(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return oe.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new oe(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return oe.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new oe(n||e,r)}static from(e){if(!e)return oe.empty;if(e instanceof oe)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new oe([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}oe.empty=new oe([],0);const hl={index:0,offset:0};function ro(t,e){return hl.index=t,hl.offset=e,hl}function Ho(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Ho(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Ho(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let st=class xc{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ho(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return xc.none;if(e instanceof xc)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};st.none=[];class Uo extends Error{}class ve{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Cm(this.content,e+this.openStart,n);return r&&new ve(r,this.openStart,this.openEnd)}removeBetween(e,n){return new ve(Em(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ve.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ve(oe.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new ve(e,r,i)}}ve.empty=new ve(oe.empty,0,0);function Em(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(Em(s.content,e-i-1,n-i-1)))}function Cm(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=Cm(o.content,e-s-1,n,o);return a&&t.replaceChild(i,o.copy(a))}function hk(t,e,n){if(n.openStart>t.depth)throw new Uo("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Uo("Inconsistent open depths");return _m(t,e,n,0)}function _m(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=_m(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return ei(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=pk(n,t);return ei(s,Tm(t,o,a,e,r))}else return ei(s,Vo(t,e,r))}function Nm(t,e){if(!e.type.compatibleContent(t.type))throw new Uo("Cannot join "+e.type.name+" onto "+t.type.name)}function vc(t,e,n){let r=t.node(n);return Nm(r,e.node(n)),r}function Qr(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function ds(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Qr(t.nodeAfter,r),s++));for(let a=s;a<o;a++)Qr(i.child(a),r);e&&e.depth==n&&e.textOffset&&Qr(e.nodeBefore,r)}function ei(t,e){return t.type.checkContent(e),t.copy(e)}function Tm(t,e,n,r,i){let s=t.depth>i&&vc(t,e,i+1),o=r.depth>i&&vc(n,r,i+1),a=[];return ds(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(Nm(s,o),Qr(ei(s,Tm(t,e,n,r,i+1)),a)):(s&&Qr(ei(s,Vo(t,e,i+1)),a),ds(e,n,i,a),o&&Qr(ei(o,Vo(n,r,i+1)),a)),ds(r,null,i,a),new oe(a)}function Vo(t,e,n){let r=[];if(ds(null,t,n,r),t.depth>n){let i=vc(t,e,n+1);Qr(ei(i,Vo(t,e,n+1)),r)}return ds(e,null,n,r),new oe(r)}function pk(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(oe.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Ns{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return st.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Wo(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new Ns(n,r,s)}static resolveCached(e,n){let r=rf.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else rf.set(e,r=new mk);let i=r.elts[r.i]=Ns.resolve(e,n);return r.i=(r.i+1)%gk,i}}class mk{constructor(){this.elts=[],this.i=0}}const gk=12,rf=new WeakMap;class Wo{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const yk=Object.create(null);let Er=class wc{constructor(e,n,r,i=st.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||oe.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Ho(this.attrs,n||e.defaultAttrs||yk)&&st.sameSet(this.marks,r||st.none)}copy(e=null){return e==this.content?this:new wc(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new wc(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return ve.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new ve(c,i.depth-o,s.depth-o)}replace(e,n,r){return hk(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Ns.resolveCached(this,e)}resolveNoCache(e){return Ns.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Am(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=oe.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=st.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!st.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=oe.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Er.prototype.text=void 0;class qo extends Er{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Am(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new qo(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new qo(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Am(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class oi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new bk(e,n);if(r.next==null)return oi.empty;let i=Mm(r);r.next&&r.err("Unexpected trailing text");let s=Ck(Ek(i));return _k(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return oe.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:d,next:u}=o.next[c];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(u)==-1){i.push(u);let h=s(u,a.concat(d));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}oi.empty=new oi(!0);class bk{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Mm(t){let e=[];do e.push(xk(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function xk(t){let e=[];do e.push(vk(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function vk(t){let e=Sk(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=wk(t,e);else break;return e}function sf(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function wk(t,e){let n=sf(t),r=n;return t.eat(",")&&(t.next!="}"?r=sf(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function kk(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Sk(t){if(t.eat("(")){let e=Mm(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=kk(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Ek(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let d=n();i(s(o.expr,l),d),l=d}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let d=n();r(l,d),i(s(o.expr,l),d),l=d}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Om(t,e){return e-t}function of(t,e){let n=[];return r(e),n.sort(Om);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function Ck(t){let e=Object.create(null);return n(of(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<i.length;d++)i[d][0]==a&&(c=i[d][1]);of(t,l).forEach(d=>{c||i.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let s=e[r.join(",")]=new oi(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(Om);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function _k(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function jm(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function zm(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Im(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function Rm(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new Tk(t,r,e[r]);return n}let af=class Dm{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Rm(e,r.attrs),this.defaultAttrs=jm(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==oi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:zm(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Er(this,this.computeAttrs(e),oe.from(n),st.setFrom(r))}createChecked(e=null,n,r){return n=oe.from(n),this.checkContent(n),new Er(this,this.computeAttrs(e),n,st.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=oe.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(oe.empty,!0);return s?new Er(this,e,n.append(s),st.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Im(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:st.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new Dm(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Nk(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class Tk{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Nk(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Ra{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=Rm(e,i.attrs),this.excluded=null;let s=jm(this.attrs);this.instance=s?new st(this,s):null}create(e=null){return!e&&this.instance?this.instance:new st(this,zm(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Ra(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Im(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Pm{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=It.from(e.nodes),n.marks=It.from(e.marks||{}),this.nodes=af.compile(this.spec.nodes,this),this.marks=Ra.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=oi.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?lf(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:lf(this,o.split(" "))}this.nodeFromJSON=i=>Er.fromJSON(this,i),this.markFromJSON=i=>st.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof af){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new qo(r,r.defaultAttrs,e,st.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function lf(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function Ak(t){return t.tag!=null}function Mk(t){return t.style!=null}let us=class kc{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(Ak(i))this.tags.push(i);else if(Mk(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new df(this,n,!1);return r.addAll(e,st.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new df(this,n,!0);return r.addAll(e,st.none,n.from,n.to),ve.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(zk(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=uf(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=uf(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new kc(e,kc.schemaRules(e)))}};const Lm={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ok={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Bm={ol:!0,ul:!0},Ts=1,Sc=2,fs=4;function cf(t,e,n){return e!=null?(e?Ts:0)|(e==="full"?Sc:0):t&&t.whitespace=="pre"?Ts|Sc:n&~fs}class io{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=st.none,this.match=s||(o&fs?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(oe.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ts)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=oe.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(oe.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Lm.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class df{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=cf(null,n.preserveWhitespace,0)|(r?fs:0);i?s=new io(i.type,i.attrs,st.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new io(null,null,st.none,!0,null,o):s=new io(e.schema.topNodeType,null,st.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&Sc?"full":this.localPreserveWS||(i.options&Ts)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(o.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=i.content[i.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;Bm.hasOwnProperty(o)&&this.parser.normalizeLists&&jk(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:Ok.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,d=this.needsBlock;if(Lm.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let u=l&&l.skip?n:this.readStyles(e,n);u&&this.addAll(e,u),c&&this.sync(s),this.needsBlock=d}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=st.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):ff(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=cf(e,s,o.options);o.options&fs&&o.content.length==0&&(a|=fs);let l=st.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):ff(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new io(e,n,l,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Ts)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let d=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function jk(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Bm.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function zk(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function uf(t){let e={};for(let n in t)e[n]=t[n];return e}function ff(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||s.indexOf(d)<0&&o(d))return!0}};if(o(i.contentMatch))return!0}}class hi{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=pl(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],d=this.serializeMark(c,o.isInline,n);d&&(s.push([c,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Oo(pl(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Oo(pl(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Oo(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new hi(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=hf(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return hf(e.marks)}}function hf(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function pl(t){return t.document||window.document}const pf=new WeakMap;function Ik(t){let e=pf.get(t);return e===void 0&&pf.set(t,e=Rk(t)),e}function Rk(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Oo(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=Ik(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let u in c)if(c[u]!=null){let h=u.indexOf(" ");h>0?l.setAttributeNS(u.slice(0,h),u.slice(h+1),c[u]):u=="style"&&l.style?l.style.cssText=c[u]:l.setAttribute(u,c[u])}}for(let u=d;u<e.length;u++){let h=e[u];if(h===0){if(u<e.length-1||u>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:p}=Oo(t,h,n,r);if(l.appendChild(f),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const $m=65535,Fm=Math.pow(2,16);function Dk(t,e){return t+e*Fm}function mf(t){return t&$m}function Pk(t){return(t-(t&$m))/Fm}const Hm=1,Um=2,jo=4,Vm=8;class Ec{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Vm)>0}get deletedBefore(){return(this.delInfo&(Hm|jo))>0}get deletedAfter(){return(this.delInfo&(Um|jo))>0}get deletedAcross(){return(this.delInfo&jo)>0}}class an{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&an.empty)return an.empty}recover(e){let n=0,r=mf(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+Pk(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],d=this.ranges[a+o],u=l+c;if(e<=u){let h=c?e==l?-1:e==u?1:n:n,f=l+i+(h<0?0:d);if(r)return f;let p=e==(n<0?l:u)?null:Dk(a/3,e-l),g=e==l?Um:e==u?Hm:jo;return(n<0?e!=l:e!=u)&&(g|=Vm),new Ec(f,g,p)}i+=d-c}return r?e+i:new Ec(e+i,0,null)}touches(e,n){let r=0,i=mf(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],d=l+c;if(e<=d&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],d=this.ranges[i+r];e(a,a+c,l,l+d),s+=d-c}}invert(){return new an(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?an.empty:new an(e<0?[0,-e,0]:[0,0,e])}}an.empty=new an([]);class As{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new As(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new As;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Ec(e,i,null)}}const ml=Object.create(null);class Vt{getMap(){return an.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ml[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in ml)throw new RangeError("Duplicate use of step JSON ID "+e);return ml[e]=n,n.prototype.jsonID=e,n}}class wt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new wt(e,null)}static fail(e){return new wt(null,e)}static fromReplace(e,n,r,i){try{return wt.ok(e.replace(n,r,i))}catch(s){if(s instanceof Uo)return wt.fail(s.message);throw s}}}function xd(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(xd(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return oe.fromArray(r)}class wr extends Vt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new ve(xd(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return wt.fromReplace(e,this.from,this.to,s)}invert(){return new Tn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new wr(n.pos,r.pos,this.mark)}merge(e){return e instanceof wr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new wr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new wr(n.from,n.to,e.markFromJSON(n.mark))}}Vt.jsonID("addMark",wr);class Tn extends Vt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new ve(xd(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return wt.fromReplace(e,this.from,this.to,r)}invert(){return new wr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Tn(n.pos,r.pos,this.mark)}merge(e){return e instanceof Tn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Tn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Tn(n.from,n.to,e.markFromJSON(n.mark))}}Vt.jsonID("removeMark",Tn);class kr extends Vt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return wt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return wt.fromReplace(e,this.pos,this.pos+1,new ve(oe.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new kr(this.pos,n.marks[i]);return new kr(this.pos,this.mark)}}return new ai(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new kr(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new kr(n.pos,e.markFromJSON(n.mark))}}Vt.jsonID("addNodeMark",kr);class ai extends Vt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return wt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return wt.fromReplace(e,this.pos,this.pos+1,new ve(oe.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new kr(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ai(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ai(n.pos,e.markFromJSON(n.mark))}}Vt.jsonID("removeNodeMark",ai);class Nt extends Vt{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Cc(e,this.from,this.to)?wt.fail("Structure replace would overwrite content"):wt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new an([this.from,this.to-this.from,this.slice.size])}invert(e){return new Nt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Nt(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Nt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ve.empty:new ve(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Nt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ve.empty:new ve(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Nt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Nt(n.from,n.to,ve.fromJSON(e,n.slice),!!n.structure)}}Vt.jsonID("replace",Nt);class Tt extends Vt{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Cc(e,this.from,this.gapFrom)||Cc(e,this.gapTo,this.to)))return wt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return wt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?wt.fromReplace(e,this.from,this.to,r):wt.fail("Content does not fit in gap")}getMap(){return new an([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Tt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Tt(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Tt(n.from,n.to,n.gapFrom,n.gapTo,ve.fromJSON(e,n.slice),n.insert,!!n.structure)}}Vt.jsonID("replaceAround",Tt);function Cc(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Lk(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,d)=>{if(!l.isInline)return;let u=l.marks;if(!r.isInSet(u)&&d.type.allowsMarkType(r.type)){let h=Math.max(c,e),f=Math.min(c+l.nodeSize,n),p=r.addToSet(u);for(let g=0;g<u.length;g++)u[g].isInSet(p)||(o&&o.to==h&&o.mark.eq(u[g])?o.to=f:i.push(o=new Tn(h,f,u[g])));a&&a.to==h?a.to=f:s.push(a=new wr(h,f,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function Bk(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof Ra){let c=o.marks,d;for(;d=r.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let d=0;d<l.length;d++){let u=l[d],h;for(let f=0;f<i.length;f++){let p=i[f];p.step==s-1&&u.eq(i[f].style)&&(h=p)}h?(h.to=c,h.step=s):i.push({style:u,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new Tn(o.from,o.to,o.style)))}function vd(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),d=a+c.nodeSize,u=r.matchType(c.type);if(!u)o.push(new Nt(a,d,ve.empty));else{r=u;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new Tn(a,d,c.marks[h]));if(i&&c.isText&&n.whitespace!="pre"){let h,f=/\r?\n|\r/g,p;for(;h=f.exec(c.text);)p||(p=new ve(oe.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new Nt(a+h.index,a+h.index+h[0].length,p))}}a=d}if(!r.validEnd){let l=r.fillBefore(oe.empty,!0);t.replace(a,a,new ve(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function $k(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ui(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,s=0;;--r){let o=t.$from.node(r),a=t.$from.index(r)+i,l=t.$to.indexAfter(r)-s;if(r<t.depth&&o.canReplace(a,l,n))return r;if(r==0||o.type.spec.isolating||!$k(o,a,l))break;a&&(i=1),l<o.childCount&&(s=1)}return null}function Fk(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,d=oe.empty,u=0;for(let p=s,g=!1;p>n;p--)g||r.index(p)>0?(g=!0,d=oe.from(r.node(p).copy(d)),u++):l--;let h=oe.empty,f=0;for(let p=s,g=!1;p>n;p--)g||i.after(p+1)<i.end(p)?(g=!0,h=oe.from(i.node(p).copy(h)),f++):c++;t.step(new Tt(l,c,o,a,new ve(d.append(h),u,f),d.size-u,!0))}function wd(t,e,n=null,r=t){let i=Hk(t,e),s=i&&Uk(r,e);return s?i.map(gf).concat({type:e,attrs:n}).concat(s.map(gf)):null}function gf(t){return{type:t,attrs:null}}function Hk(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function Uk(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function Vk(t,e,n){let r=oe.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=oe.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new Tt(i,s,i,s,new ve(r,0,0),n.length,!0))}function Wk(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&qk(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!p?c=!1:!f&&p&&(c=!0)}c===!1&&qm(t,o,a,s),vd(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let d=t.mapping.slice(s),u=d.map(a,1),h=d.map(a+o.nodeSize,1);return t.step(new Tt(u,h,u+1,h-1,new ve(oe.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&Wm(t,o,a,s),!1}})}function Wm(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function qm(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function qk(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Kk(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Tt(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new ve(oe.from(o),0,0),1,!0))}function rr(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,d=n-2;c>s;c--,d--){let u=i.node(c),h=i.index(c);if(u.type.spec.isolating)return!1;let f=u.content.cutByIndex(h,u.childCount),p=r&&r[d+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[d]||u;if(!u.canReplace(h+1,u.childCount)||!g.type.validContent(f))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function Gk(t,e,n=1,r){let i=t.doc.resolve(e),s=oe.empty,o=oe.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=oe.from(i.node(a).copy(s));let d=r&&r[c];o=oe.from(d?d.type.create(d.attrs,o):i.node(a).copy(o))}t.step(new Nt(e,e,new ve(s.append(o),n,n),!0))}function jr(t,e){let n=t.resolve(e),r=n.index();return Km(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Jk(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function Km(t,e){return!!(t&&e&&!t.isLeaf&&Jk(t,e))}function Da(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&Km(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Yk(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let d=o.whitespace=="pre",u=!!o.contentMatch.matchType(i);d&&!u?r=!1:!d&&u&&(r=!0)}let a=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);qm(t,d.node(),d.before(),a)}o.inlineContent&&vd(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new Nt(c,l.map(e+n,-1),ve.empty,!0)),r===!0){let d=t.doc.resolve(c);Wm(t,d.node(),d.before(),t.steps.length)}return t}function Xk(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function Gm(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),d=!1;if(s==1)d=c.canReplace(l,l,i);else{let u=c.contentMatchAt(l).findWrapping(i.firstChild.type);d=u&&c.canReplaceWith(l,l,u[0])}if(d)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Pa(t,e,n=e,r=ve.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return Jm(i,s,r)?new Nt(e,n,r):new Zk(i,s,r).fit()}function Jm(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Zk{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=oe.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=oe.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new ve(s,o,a);return e>-1?new Tt(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Nt(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=gl(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,u=null;if(n==1&&(o?c.matchType(o.type)||(u=c.fillBefore(oe.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:u};if(n==2&&o&&(d=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:d};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=gl(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ve(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=gl(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new ve(Zi(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new ve(Zi(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,d=[],{match:u,type:h}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));u=u.matchFragment(i)}let f=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),y=u.matchType(g.type);if(!y)break;c++,(c>1||l==0||g.content.size)&&(u=y,d.push(Ym(g.mark(h.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=Qi(this.placed,n,oe.from(d)),this.frontier[n].match=u,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,y=a;g<f;g++){let b=y.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),y=b.content}this.unplaced=p?e==0?ve.empty:new ve(Zi(o.content,e-1,1),e-1,f<0?o.openEnd:e-1):new ve(Zi(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!yl(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=yl(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=yl(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Qi(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Qi(this.placed,this.depth,oe.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(oe.empty,!0);n.childCount&&(this.placed=Qi(this.placed,this.frontier.length,n))}}function Zi(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Zi(t.firstChild.content,e-1,n)))}function Qi(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Qi(t.lastChild.content,e-1,n)))}function gl(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Ym(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Ym(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(oe.empty,!0)))),t.copy(r)}function yl(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!Qk(n,s.content,o)?a:null}function Qk(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function eS(t){return t.spec.defining||t.spec.definingForContent}function tS(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(Jm(i,s,r))return t.step(new Nt(e,n,r));let o=Zm(i,s);o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let h=i.depth,f=i.pos-1;h>0;h--,f--){let p=i.node(h).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(h)>-1?a=h:i.before(h)==f&&o.splice(1,0,-h)}let l=o.indexOf(a),c=[],d=r.openStart;for(let h=r.content,f=0;;f++){let p=h.firstChild;if(c.push(p),f==r.openStart)break;h=p.content}for(let h=d-1;h>=0;h--){let f=c[h],p=eS(f.type);if(p&&!f.sameMarkup(i.node(Math.abs(a)-1)))d=h;else if(p||!f.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let f=(h+d+1)%(r.openStart+1),p=c[f];if(p)for(let g=0;g<o.length;g++){let y=o[(g+l)%o.length],b=!0;y<0&&(b=!1,y=-y);let x=i.node(y-1),w=i.index(y-1);if(x.canReplaceWith(w,w,p.type,p.marks))return t.replace(i.before(y),b?s.after(y):n,new ve(Xm(r.content,0,r.openStart,f),f,r.openEnd))}}let u=t.steps.length;for(let h=o.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>u));h--){let f=o[h];f<0||(e=i.before(f),n=s.after(f))}}function Xm(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(Xm(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(oe.empty,!0))}return t}function nS(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Xk(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new ve(oe.from(r),0,0))}function rS(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=Zm(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function Zm(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class _i extends Vt{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return wt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return wt.fromReplace(e,this.pos,this.pos+1,new ve(oe.from(i),0,n.isLeaf?0:1))}getMap(){return an.empty}invert(e){return new _i(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new _i(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new _i(n.pos,n.attr,n.value)}}Vt.jsonID("attr",_i);class Ms extends Vt{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return wt.ok(r)}getMap(){return an.empty}invert(e){return new Ms(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ms(n.attr,n.value)}}Vt.jsonID("docAttr",Ms);let Ii=class extends Error{};Ii=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Ii.prototype=Object.create(Error.prototype);Ii.prototype.constructor=Ii;Ii.prototype.name="TransformError";class kd{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new As}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Ii(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(e=i.map(e,1),n=i.map(n,-1)),i.forEach((s,o,a,l)=>{e=Math.min(e,a),n=Math.max(n,l)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=ve.empty){let i=Pa(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new ve(oe.from(r),0,0))}delete(e,n){return this.replace(e,n,ve.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return tS(this,e,n,r),this}replaceRangeWith(e,n,r){return nS(this,e,n,r),this}deleteRange(e,n){return rS(this,e,n),this}lift(e,n){return Fk(this,e,n),this}join(e,n=1){return Yk(this,e,n),this}wrap(e,n){return Vk(this,e,n),this}setBlockType(e,n=e,r,i=null){return Wk(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return Kk(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new _i(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ms(e,n)),this}addNodeMark(e,n){return this.step(new kr(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof st)n.isInSet(r.marks)&&this.step(new ai(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new ai(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,n=1,r){return Gk(this,e,n,r),this}addMark(e,n,r){return Lk(this,e,n,r),this}removeMark(e,n,r){return Bk(this,e,n,r),this}clearIncompatible(e,n,r){return vd(this,e,n,r),this}}const bl=Object.create(null);class De{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Qm(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ve.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(c.pos),a?ve.empty:n),a==0&&xf(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),d=l.map(a.pos);s?e.deleteRange(c,d):(e.replaceRangeWith(c,d,n),xf(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Ie(e):xi(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?xi(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):xi(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new cn(e.node(0))}static atStart(e){return xi(e,e,0,0,1)||new cn(e)}static atEnd(e){return xi(e,e,e.content.size,e.childCount,-1)||new cn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=bl[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in bl)throw new RangeError("Duplicate use of selection JSON ID "+e);return bl[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Ie.between(this.$anchor,this.$head).getBookmark()}}De.prototype.visible=!0;class Qm{constructor(e,n){this.$from=e,this.$to=n}}let yf=!1;function bf(t){!yf&&!t.parent.inlineContent&&(yf=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Ie extends De{constructor(e,n=e){bf(e),bf(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return De.near(r);let i=e.resolve(n.map(this.anchor));return new Ie(i.parent.inlineContent?i:r,r)}replace(e,n=ve.empty){if(super.replace(e,n),n==ve.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ie&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new La(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ie(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=De.findFrom(n,r,!0)||De.findFrom(n,-r,!0);if(s)n=s.$head;else return De.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(De.findFrom(e,-r,!0)||De.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Ie(e,n)}}De.jsonID("text",Ie);class La{constructor(e,n){this.anchor=e,this.head=n}map(e){return new La(e.map(this.anchor),e.map(this.head))}resolve(e){return Ie.between(e.resolve(this.anchor),e.resolve(this.head))}}class je extends De{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?De.near(s):new je(s)}content(){return new ve(oe.from(this.node),0,0)}eq(e){return e instanceof je&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Sd(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new je(e.resolve(n.anchor))}static create(e,n){return new je(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}je.prototype.visible=!1;De.jsonID("node",je);class Sd{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new La(r,r):new Sd(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&je.isSelectable(r)?new je(n):De.near(n)}}class cn extends De{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ve.empty){if(n==ve.empty){e.delete(0,e.doc.content.size);let r=De.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new cn(e)}map(e){return new cn(e)}eq(e){return e instanceof cn}getBookmark(){return iS}}De.jsonID("all",cn);const iS={map(){return this},resolve(t){return new cn(t)}};function xi(t,e,n,r,i,s=!1){if(e.inlineContent)return Ie.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&je.isSelectable(a))return je.create(t,n-(i<0?a.nodeSize:0))}else{let l=xi(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function xf(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Nt||i instanceof Tt))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,d)=>{o==null&&(o=d)}),t.setSelection(De.near(t.doc.resolve(o),n))}const vf=1,so=2,wf=4;class sS extends kd{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|vf)&~so,this.storedMarks=null,this}get selectionSet(){return(this.updated&vf)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=so,this}ensureMarks(e){return st.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&so)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~so,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||st.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(De.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=wf,this}get scrolledIntoView(){return(this.updated&wf)>0}}function kf(t,e){return!e||!t?t:t.bind(e)}class es{constructor(e,n,r){this.name=e,this.init=kf(n.init,r),this.apply=kf(n.apply,r)}}const oS=[new es("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new es("selection",{init(t,e){return t.selection||De.atStart(e.doc)},apply(t){return t.selection}}),new es("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new es("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class xl{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=oS.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new es(r.key,r.spec.state,r))})}}class Si{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,d=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(d&&r.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let u=0;u<this.config.plugins.length;u++)i.push(u<o?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Si(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new sS(this)}static create(e){let n=new xl(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Si(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new xl(this.schema,e.plugins),r=n.fields,i=new Si(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new xl(e.schema,e.plugins),s=new Si(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Er.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=De.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function eg(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=eg(i,e,{})),n[r]=i}return n}class rt{constructor(e){this.spec=e,this.props={},e.props&&eg(e.props,this,this.props),this.key=e.key?e.key.key:tg("plugin")}getState(e){return e[this.key]}}const vl=Object.create(null);function tg(t){return t in vl?t+"$"+ ++vl[t]:(vl[t]=0,t+"$")}class pt{constructor(e="key"){this.key=tg(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ed=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function ng(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const rg=(t,e,n)=>{let r=ng(t,n);if(!r)return!1;let i=Cd(r);if(!i){let o=r.blockRange(),a=o&&Ui(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(fg(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Ri(s,"end")||je.isSelectable(s)))for(let o=r.depth;;o--){let a=Pa(t.doc,r.before(o),r.after(o),ve.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Ri(s,"end")?De.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):je.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},aS=(t,e,n)=>{let r=ng(t,n);if(!r)return!1;let i=Cd(r);return i?ig(t,i,e):!1},lS=(t,e,n)=>{let r=og(t,n);if(!r)return!1;let i=_d(r);return i?ig(t,i,e):!1};function ig(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=Pa(t.doc,s,l,ve.empty);if(!c||c.from!=s||c instanceof Nt&&c.slice.size>=l-s)return!1;if(n){let d=t.tr.step(c);d.setSelection(Ie.create(d.doc,s)),n(d.scrollIntoView())}return!0}function Ri(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const sg=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=Cd(r)}let o=s&&s.nodeBefore;return!o||!je.isSelectable(o)?!1:(e&&e(t.tr.setSelection(je.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Cd(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function og(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const ag=(t,e,n)=>{let r=og(t,n);if(!r)return!1;let i=_d(r);if(!i)return!1;let s=i.nodeAfter;if(fg(t,i,e,1))return!0;if(r.parent.content.size==0&&(Ri(s,"start")||je.isSelectable(s))){let o=Pa(t.doc,r.before(),r.after(),ve.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Ri(s,"start")?De.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):je.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},lg=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=_d(r)}let o=s&&s.nodeAfter;return!o||!je.isSelectable(o)?!1:(e&&e(t.tr.setSelection(je.create(t.doc,s.pos)).scrollIntoView()),!0)};function _d(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const cS=(t,e)=>{let n=t.selection,r=n instanceof je,i;if(r){if(n.node.isTextblock||!jr(t.doc,n.from))return!1;i=n.from}else if(i=Da(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(je.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},dS=(t,e)=>{let n=t.selection,r;if(n instanceof je){if(n.node.isTextblock||!jr(t.doc,n.to))return!1;r=n.to}else if(r=Da(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},uS=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&Ui(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},cg=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Nd(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const fS=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=Nd(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(De.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},dg=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof cn||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Nd(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Ie.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},ug=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(rr(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Ui(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function hS(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof je&&e.selection.node.isBlock)return!r.parentOffset||!rr(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let f=r.depth;;f--)if(r.node(f).isBlock){l=r.end(f)==r.pos+(r.depth-f),c=r.start(f)==r.pos-(r.depth-f),a=Nd(r.node(f-1).contentMatchAt(r.indexAfter(f-1))),s.unshift(l&&a?{type:a}:null),o=f;break}else{if(f==1)return!1;s.unshift(null)}let d=e.tr;(e.selection instanceof Ie||e.selection instanceof cn)&&d.deleteSelection();let u=d.mapping.map(r.pos),h=rr(d.doc,u,s.length,s);if(h||(s[0]=a?{type:a}:null,h=rr(d.doc,u,s.length,s)),!h)return!1;if(d.split(u,s.length,s),!l&&c&&r.node(o).type!=a){let f=d.mapping.map(r.before(o)),p=d.doc.resolve(f);a&&r.node(o-1).canReplaceWith(p.index(),p.index()+1,a)&&d.setNodeMarkup(d.mapping.map(r.before(o)),a)}return n&&n(d.scrollIntoView()),!0}}const pS=hS(),mS=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(je.create(t.doc,i))),!0)};function gS(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||jr(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function fg(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&gS(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let f=e.pos+s.nodeSize,p=oe.empty;for(let b=o.length-1;b>=0;b--)p=oe.from(o[b].create(null,p));p=oe.from(i.copy(p));let g=t.tr.step(new Tt(e.pos-1,f,e.pos,f,new ve(p,1,0),o.length,!0)),y=g.doc.resolve(f+2*o.length);y.nodeAfter&&y.nodeAfter.type==i.type&&jr(g.doc,y.pos)&&g.join(y.pos),n(g.scrollIntoView())}return!0}let d=s.type.spec.isolating||r>0&&l?null:De.findFrom(e,1),u=d&&d.$from.blockRange(d.$to),h=u&&Ui(u);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(u,h).scrollIntoView()),!0;if(c&&Ri(s,"start",!0)&&Ri(i,"end")){let f=i,p=[];for(;p.push(f),!f.isTextblock;)f=f.lastChild;let g=s,y=1;for(;!g.isTextblock;g=g.firstChild)y++;if(f.canReplace(f.childCount,f.childCount,g.content)){if(n){let b=oe.empty;for(let w=p.length-1;w>=0;w--)b=oe.from(p[w].copy(b));let x=t.tr.step(new Tt(e.pos-p.length,e.pos+s.nodeSize,e.pos+y,e.pos+s.nodeSize-y,new ve(b,p.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function hg(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Ie.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const yS=hg(-1),bS=hg(1);function xS(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&wd(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Sf(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let d=n.doc.resolve(c),u=d.index();i=d.parent.canReplaceWith(u,u+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}function Td(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}Td(Ed,rg,sg);Td(Ed,ag,lg);Td(cg,dg,ug,pS);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function vS(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let a=r?n.tr:null;return wS(a,o,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function wS(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new Wo(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Wo(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=wd(s,n,r,e);return a?(t&&kS(t,e,a,i,n),!0):!1}function kS(t,e,n,r,i){let s=oe.empty;for(let d=n.length-1;d>=0;d--)s=oe.from(n[d].type.create(n[d].attrs,s));t.step(new Tt(e.start-(r?2:0),e.end,e.start,e.end,new ve(s,0,0),n.length,!0));let o=0;for(let d=0;d<n.length;d++)n[d].type==i&&(o=d+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let d=e.startIndex,u=e.endIndex,h=!0;d<u;d++,h=!1)!h&&rr(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return t}function SS(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?ES(e,n,t,s):CS(e,n,s):!0:!1}}function ES(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Tt(s-1,o,s,o,new ve(oe.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Wo(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=Ui(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return jr(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function CS(t,e,n){let r=t.tr,i=n.parent;for(let f=n.end,p=n.endIndex-1,g=n.startIndex;p>g;p--)f-=i.child(p).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),d=s.index(-1);if(!c.canReplace(d+(a?0:1),d+1,o.content.append(l?oe.empty:oe.from(i))))return!1;let u=s.pos,h=u+o.nodeSize;return r.step(new Tt(u-(a?1:0),h+(l?1:0),u+1,h-1,new ve((a?oe.empty:oe.from(i.copy(oe.empty))).append(l?oe.empty:oe.from(i.copy(oe.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function _S(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,d=oe.from(c?t.create():null),u=new ve(oe.from(t.create(null,oe.from(a.type.create(null,d)))),c?3:1,0),h=s.start,f=s.end;n(e.tr.step(new Tt(h-(c?3:1),f,h,f,u,1,!0)).scrollIntoView())}return!0}}const Rt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Di=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let _c=null;const tr=function(t,e,n){let r=_c||(_c=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},NS=function(){_c=null},li=function(t,e,n,r){return n&&(Ef(t,e,n,r,-1)||Ef(t,e,n,r,1))},TS=/^(img|br|input|textarea|hr)$/i;function Ef(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:gn(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Hs(t)||TS.test(t.nodeName)||t.contentEditable=="false")return!1;e=Rt(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?gn(t):0}else return!1}}function gn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function AS(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=gn(t)}else if(t.parentNode&&!Hs(t))e=Rt(t),t=t.parentNode;else return null}}function MS(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Hs(t))e=Rt(t)+1,t=t.parentNode;else return null}}function OS(t,e,n){for(let r=e==0,i=e==gn(t);r||i;){if(t==n)return!0;let s=Rt(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==gn(t)}}function Hs(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Ba=function(t){return t.focusNode&&li(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function qr(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function jS(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function zS(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(gn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(gn(r.startContainer),r.startOffset)}}}const Ln=typeof navigator<"u"?navigator:null,Cf=typeof document<"u"?document:null,zr=Ln&&Ln.userAgent||"",Nc=/Edge\/(\d+)/.exec(zr),pg=/MSIE \d/.exec(zr),Tc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(zr),rn=!!(pg||Tc||Nc),Cr=pg?document.documentMode:Tc?+Tc[1]:Nc?+Nc[1]:0,bn=!rn&&/gecko\/(\d+)/i.test(zr);bn&&+(/Firefox\/(\d+)/.exec(zr)||[0,0])[1];const Ac=!rn&&/Chrome\/(\d+)/.exec(zr),Lt=!!Ac,mg=Ac?+Ac[1]:0,Ht=!rn&&!!Ln&&/Apple Computer/.test(Ln.vendor),Pi=Ht&&(/Mobile\/\w+/.test(zr)||!!Ln&&Ln.maxTouchPoints>2),mn=Pi||(Ln?/Mac/.test(Ln.platform):!1),gg=Ln?/Win/.test(Ln.platform):!1,nr=/Android \d/.test(zr),Us=!!Cf&&"webkitFontSmoothing"in Cf.documentElement.style,IS=Us?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function RS(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Vn(t,e){return typeof t=="number"?t:t[e]}function DS(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function _f(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=Di(o);continue}let a=o,l=a==s.body,c=l?RS(s):DS(a),d=0,u=0;if(e.top<c.top+Vn(r,"top")?u=-(c.top-e.top+Vn(i,"top")):e.bottom>c.bottom-Vn(r,"bottom")&&(u=e.bottom-e.top>c.bottom-c.top?e.top+Vn(i,"top")-c.top:e.bottom-c.bottom+Vn(i,"bottom")),e.left<c.left+Vn(r,"left")?d=-(c.left-e.left+Vn(i,"left")):e.right>c.right-Vn(r,"right")&&(d=e.right-c.right+Vn(i,"right")),d||u)if(l)s.defaultView.scrollBy(d,u);else{let f=a.scrollLeft,p=a.scrollTop;u&&(a.scrollTop+=u),d&&(a.scrollLeft+=d);let g=a.scrollLeft-f,y=a.scrollTop-p;e={left:e.left-g,top:e.top-y,right:e.right-g,bottom:e.bottom-y}}let h=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(h))break;o=h=="absolute"?o.offsetParent:Di(o)}}function PS(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:yg(t.dom)}}function yg(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Di(r));return e}function LS({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;bg(n,r==0?0:r-e)}function bg(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let gi=null;function BS(t){if(t.setActive)return t.setActive();if(gi)return t.focus(gi);let e=yg(t);t.focus(gi==null?{get preventScroll(){return gi={preventScroll:!0},!0}}:void 0),gi||(gi=!1,bg(e,0))}function xg(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let d=t.firstChild,u=0;d;d=d.nextSibling,u++){let h;if(d.nodeType==1)h=d.getClientRects();else if(d.nodeType==3)h=tr(d).getClientRects();else continue;for(let f=0;f<h.length;f++){let p=h[f];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<r){n=d,r=g,i=g&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,d.nodeType==1&&g&&(s=u+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=d,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=u+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?$S(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:xg(n,i)}function $S(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let o=pr(r,1);if(o.top!=o.bottom&&Ad(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function Ad(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function FS(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function HS(t,e,n){let{node:r,offset:i}=xg(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function US(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function vg(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Ad(e,c))return vg(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function VS(t,e){let n=t.dom.ownerDocument,r,i=0,s=zS(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!Ad(e,c)||(o=vg(t.dom,e,c),!o))return null}if(Ht)for(let c=o;r&&c;c=Di(c))c.draggable&&(r=void 0);if(o=FS(o,e),r){if(bn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let d=r.childNodes[i],u;d.nodeName=="IMG"&&(u=d.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&i++}let c;Us&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=US(t,r,i,e))}a==null&&(a=HS(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Nf(t){return t.top<t.bottom||t.left<t.right}function pr(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Nf(r))return r}return Array.prototype.find.call(n,Nf)||t.getBoundingClientRect()}const WS=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function wg(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Us||bn;if(r.nodeType==3)if(o&&(WS.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=pr(tr(r,i,i),n);if(bn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=pr(tr(r,i-1,i-1),-1);if(c.top==l.top){let d=pr(tr(r,i,i+1),-1);if(d.top!=l.top)return Ki(d,d.left<c.left)}}return l}else{let l=i,c=i,d=n<0?1:-1;return n<0&&!i?(c++,d=-1):n>=0&&i==r.nodeValue.length?(l--,d=1):n<0?l--:c++,Ki(pr(tr(r,l,c),d),d<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==gn(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return wl(l.getBoundingClientRect(),!1)}if(s==null&&i<gn(r)){let l=r.childNodes[i];if(l.nodeType==1)return wl(l.getBoundingClientRect(),!0)}return wl(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==gn(r))){let l=r.childNodes[i-1],c=l.nodeType==3?tr(l,gn(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Ki(pr(c,1),!1)}if(s==null&&i<gn(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?tr(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return Ki(pr(c,-1),!0)}return Ki(pr(r.nodeType==3?tr(r):r,-n),n>=0)}function Ki(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function wl(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function kg(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function qS(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return kg(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=wg(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=tr(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(n=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return!1}}return!0})}const KS=/[\u0590-\u08ac]/;function GS(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return a?!KS.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:kg(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:u}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:g}=t.domSelectionRange(),y=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==g;try{a.collapse(d,u),l&&(l!=d||c!=u)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),y}):r.pos==r.start()||r.pos==r.end()}let Tf=null,Af=null,Mf=!1;function JS(t,e,n){return Tf==e&&Af==n?Mf:(Tf=e,Af=n,Mf=n=="up"||n=="down"?qS(t,e,n):GS(t,e,n))}const xn=0,Of=1,Kr=2,Bn=3;class Vs{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=xn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Rt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof Eg){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Sg&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Rt(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Rt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let d=o+l.border;if(e>=d&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,d);e=o;for(let u=a;u>0;u--){let h=this.children[u-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=Rt(h.dom)+1;break}e-=h.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let d=a+1;d<this.children.length;d++){let u=this.children[d];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){s=Rt(u.dom);break}n+=u.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let f=0,p=0;f<this.children.length;f++){let g=this.children[f],y=p+g.size;if(s>p&&o<y)return g.setSelection(e-p-g.border,n-p-g.border,r,i);p=y}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),d=r.domSelectionRange(),u=!1;if((bn||Ht)&&e==n){let{node:f,offset:p}=a;if(f.nodeType==3){if(u=!!(p&&f.nodeValue[p-1]==`
`),u&&p==f.nodeValue.length)for(let g=f,y;g;g=g.parentNode){if(y=g.nextSibling){y.nodeName=="BR"&&(a=l={node:y.parentNode,offset:Rt(y)+1});break}let b=g.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let g=f.childNodes[p-1];u=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(bn&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let f=d.focusNode.childNodes[d.focusOffset];f&&f.contentEditable=="false"&&(i=!0)}if(!(i||u&&Ht)&&li(a.node,a.offset,d.anchorNode,d.anchorOffset)&&li(l.node,l.offset,d.focusNode,d.focusOffset))return;let h=!1;if((c.extend||e==n)&&!(u&&bn)){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let p=a;a=l,l=p}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?Kr:Of,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Bn:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Kr:Bn}r=o}this.dirty=Kr}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Kr:Of;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Sg extends Vs{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==xn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class YS extends Vs{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ci extends Vs{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=hi.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new ci(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Bn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Bn&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=xn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=xn}}slice(e,n,r){let i=ci.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=Oc(s,n,o,r)),e>0&&(s=Oc(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class _r extends Vs{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),d=c&&c.dom,u=c&&c.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:u}=hi.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!u&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let h=d;return d=Ng(d,r,n),c?l=new XS(e,n,r,i,d,u||null,h,c,s,o+1):n.isText?new $a(e,n,r,i,d,h,s):new _r(e,n,r,i,d,u||null,h,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>oe.empty)}return e}matchesNode(e,n,r){return this.dirty==xn&&e.eq(this.node)&&Ko(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new QS(this,o&&o.node,e);n2(this.node,this.innerDeco,(c,d,u)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e,d):c.type.side>=0&&!u&&l.syncToMarks(d==this.node.childCount?st.none:this.node.child(d).marks,r,e,d),l.placeWidget(c,e,i)},(c,d,u,h)=>{l.syncToMarks(c.marks,r,e,h);let f;l.findNodeMatch(c,d,u,h)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,d,u,f,e)||l.updateNextNode(c,d,u,e,h,i)||l.addNode(c,d,u,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e,0),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Kr)&&(o&&this.protectLocalComposition(e,o),Cg(this.contentDOM,this.children,e),Pi&&r2(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Ie)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=i2(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new YS(this,s,n,i);e.input.compositionNodes.push(o),this.children=Oc(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==Bn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=xn}updateOuterDeco(e){if(Ko(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=_g(this.dom,this.nodeDOM,Mc(this.outerDeco,this.node,n),Mc(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function jf(t,e,n,r,i){Ng(r,e,t);let s=new _r(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class $a extends _r{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Bn||this.dirty!=xn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=xn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=xn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new $a(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Bn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Eg extends Vs{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==xn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class XS extends _r{constructor(e,n,r,i,s,o,a,l,c,d){super(e,n,r,i,s,o,a,c,d),this.spec=l}update(e,n,r,i){if(this.dirty==Bn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Cg(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=zf(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof ci){let l=r?r.previousSibling:t.lastChild;Cg(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=zf(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const hs=function(t){t&&(this.nodeName=t)};hs.prototype=Object.create(null);const Gr=[new hs];function Mc(t,e,n){if(t.length==0)return Gr;let r=n?Gr[0]:new hs,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new hs(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new hs(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function _g(t,e,n,r){if(n==Gr&&r==Gr)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Gr[0]),i=l}ZS(i,a||Gr[0],o)}return i}function ZS(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function Ng(t,e,n){return _g(t,t,Gr,Mc(e,n,t.nodeType!=1))}function Ko(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function zf(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class QS{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=e2(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,i){let s=0,o=this.stack.length>>1,a=Math.min(o,e.length);for(;s<a&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=xn,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1,c=this.top.children.length;i<this.preMatch.index&&(c=Math.min(this.index+3,c));for(let d=this.index;d<c;d++){let u=this.top.children[d];if(u.matchesMark(e[o])&&!this.isLocked(u.dom)){l=d;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let d=ci.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==Bn&&o.dom==o.contentDOM&&(o.dirty=Kr),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof _r){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let d=l.dom,u,h=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Bn&&Ko(n,l.outerDeco));if(!h&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!h&&(u=this.recreateWrapper(l,e,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=Kr,u.updateChildren(i,o+1),u.dirty=xn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Ko(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=_r.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=_r.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Sg(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ci;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof $a)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ht||Lt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Eg(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function e2(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof ci)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function t2(t,e){return t.type.side-e.type.side}function n2(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);r(d,i,e.forChild(s,d),c),s+=d.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let d,u;for(;o<i.length&&i[o].to==s;){let y=i[o++];y.widget&&(d?(u||(u=[d])).push(y):d=y)}if(d)if(u){u.sort(t2);for(let y=0;y<u.length;y++)n(u[y],c,!!l)}else n(d,c,!!l);let h,f;if(l)f=-1,h=l,l=null;else if(c<t.childCount)f=c,h=t.child(c++);else break;for(let y=0;y<a.length;y++)a[y].to<=s&&a.splice(y--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+h.nodeSize;if(h.isText){let y=p;o<i.length&&i[o].from<y&&(y=i[o].from);for(let b=0;b<a.length;b++)a[b].to<y&&(y=a[b].to);y<p&&(l=h.cut(y-s),h=h.cut(0,y-s),p=y,f=-1)}else for(;o<i.length&&i[o].to<p;)o++;let g=h.isInline&&!h.isLeaf?a.filter(y=>!y.inline):a.slice();r(h,g,e.forChild(s,h),f),s=p}}function r2(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function i2(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function Oc(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,d=a+=l.size;c>=n||d<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),d>n&&s.push(l.slice(n-c,l.size,r)))}return s}function Md(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(Ba(n)){for(l=o;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&je.isSelectable(u)&&i.parent&&!(u.isInline&&OS(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;c=new je(o==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let u=o,h=o;for(let f=0;f<n.rangeCount;f++){let p=n.getRangeAt(f);u=Math.min(u,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(u<0)return null;[l,o]=h==t.state.selection.anchor?[h,u]:[u,h],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let d=r.resolve(l);if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=Od(t,d,a,u)}return c}function Tg(t){return t.editable?t.hasFocus():Mg(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function ir(t,e=!1){let n=t.state.selection;if(Ag(t,n),!!Tg(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Lt){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&li(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)o2(t);else{let{anchor:r,head:i}=n,s,o;If&&!(n instanceof Ie)&&(n.$from.parent.inlineContent||(s=Rf(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=Rf(t,n.to))),t.docView.setSelection(r,i,t,e),If&&(s&&Df(s),o&&Df(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&s2(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const If=Ht||Lt&&mg<63;function Rf(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Ht&&i&&i.contentEditable=="false")return kl(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return kl(i);if(s)return kl(s)}}function kl(t){return t.contentEditable="true",Ht&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Df(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function s2(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Tg(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function o2(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Rt(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&rn&&Cr<=11&&(n.disabled=!0,n.disabled=!1)}function Ag(t,e){if(e instanceof je){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Pf(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Pf(t)}function Pf(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Od(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Ie.between(e,n,r)}function Lf(t){return t.editable&&!t.hasFocus()?!1:Mg(t)}function Mg(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function a2(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return li(e.node,e.offset,n.anchorNode,n.anchorOffset)}function jc(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&De.findFrom(s,e)}function mr(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Bf(t,e,n){let r=t.state.selection;if(r instanceof Ie)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return mr(t,new Ie(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=jc(t.state,e);return i&&i instanceof je?mr(t,i):!1}else if(!(mn&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?je.isSelectable(s)?mr(t,new je(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Us?mr(t,new Ie(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof je&&r.node.isInline)return mr(t,new Ie(e>0?r.$to:r.$from));{let i=jc(t.state,e);return i?mr(t,i):!1}}}function Go(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ps(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function yi(t,e){return e<0?l2(t):c2(t)}function l2(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(bn&&n.nodeType==1&&r<Go(n)&&ps(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(ps(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(Og(n))break;{let a=n.previousSibling;for(;a&&ps(a,-1);)i=n.parentNode,s=Rt(a),a=a.previousSibling;if(a)n=a,r=Go(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?zc(t,n,r):i&&zc(t,i,s)}function c2(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Go(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(ps(a,1))s=n,o=++r;else break}else{if(Og(n))break;{let a=n.nextSibling;for(;a&&ps(a,1);)s=a.parentNode,o=Rt(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=Go(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&zc(t,s,o)}function Og(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function d2(t,e){for(;t&&e==t.childNodes.length&&!Hs(t);)e=Rt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function u2(t,e){for(;t&&!e&&!Hs(t);)e=Rt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function zc(t,e,n){if(e.nodeType!=3){let s,o;(o=d2(e,n))?(e=o,n=0):(s=u2(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Ba(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&ir(t)},50)}function $f(t,e){let n=t.state.doc.resolve(e);if(!(Lt||gg)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Ff(t,e,n){let r=t.state.selection;if(r instanceof Ie&&!r.empty||n.indexOf("s")>-1||mn&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=jc(t.state,e);if(o&&o instanceof je)return mr(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof cn?De.near(o,e):De.findFrom(o,e);return a?mr(t,a):!1}return!1}function Hf(t,e){if(!(t.state.selection instanceof Ie))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function Uf(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function f2(t){if(!Ht||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Uf(t,r,"true"),setTimeout(()=>Uf(t,r,"false"),20)}return!1}function h2(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function p2(t,e){let n=e.keyCode,r=h2(e);if(n==8||mn&&n==72&&r=="c")return Hf(t,-1)||yi(t,-1);if(n==46&&!e.shiftKey||mn&&n==68&&r=="c")return Hf(t,1)||yi(t,1);if(n==13||n==27)return!0;if(n==37||mn&&n==66&&r=="c"){let i=n==37?$f(t,t.state.selection.from)=="ltr"?-1:1:-1;return Bf(t,i,r)||yi(t,i)}else if(n==39||mn&&n==70&&r=="c"){let i=n==39?$f(t,t.state.selection.from)=="ltr"?1:-1:1;return Bf(t,i,r)||yi(t,i)}else{if(n==38||mn&&n==80&&r=="c")return Ff(t,-1,r)||yi(t,-1);if(n==40||mn&&n==78&&r=="c")return f2(t)||Ff(t,1,r)||yi(t,1);if(r==(mn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function jd(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let o=t.someProp("clipboardSerializer")||hi.fromSchema(t.state.schema),a=Pg(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,d,u=0;for(;c&&c.nodeType==1&&(d=Dg[c.nodeName.toLowerCase()]);){for(let f=d.length-1;f>=0;f--){let p=a.createElement(d[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),u++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${u?` -${u}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function jg(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=!!e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||r,t)}),s)return a=new ve(oe.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",h=>{a=h(a,t,!0)}),a;let u=t.someProp("clipboardTextParser",h=>h(e,i,r,t));if(u)a=u;else{let h=i.marks(),{schema:f}=t.state,p=hi.fromSchema(f);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let y=o.appendChild(document.createElement("p"));g&&y.appendChild(p.serializeNode(f.text(g,h)))})}}else t.someProp("transformPastedHTML",u=>{n=u(n,t)}),o=b2(n),Us&&x2(o);let c=o&&o.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let u=+d[3];u>0;u--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||us.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||d),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!m2.test(h.parentNode.nodeName)?{ignore:!0}:null}})),d)a=v2(Vf(a,+d[1],+d[2]),d[4]);else if(a=ve.maxOpen(g2(a.content,i),!0),a.openStart||a.openEnd){let u=0,h=0;for(let f=a.content.firstChild;u<a.openStart&&!f.type.spec.isolating;u++,f=f.firstChild);for(let f=a.content.lastChild;h<a.openEnd&&!f.type.spec.isolating;h++,f=f.lastChild);a=Vf(a,u,h)}return t.someProp("transformPasted",u=>{a=u(a,t,l)}),a}const m2=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function g2(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&Ig(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=Rg(o[o.length-1],s.length));let d=zg(a,l);o.push(d),i=i.matchType(d.type),s=l}}),o)return oe.from(o)}return t}function zg(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,oe.from(t));return t}function Ig(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=Ig(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(oe.from(zg(n,t,i+1))))}}function Rg(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Rg(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(oe.empty,!0);return t.copy(n.append(r))}function Ic(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=Ic(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(oe.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function Vf(t,e,n){return e<t.openStart&&(t=new ve(Ic(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ve(Ic(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const Dg={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Wf=null;function Pg(){return Wf||(Wf=document.implementation.createHTMLDocument("title"))}let Sl=null;function y2(t){let e=window.trustedTypes;return e?(Sl||(Sl=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Sl.createHTML(t)):t}function b2(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Pg().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&Dg[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=y2(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function x2(t){let e=t.querySelectorAll(Lt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function v2(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=oe.from(l.create(r[a+1],i)),s++,o++}return new ve(i,s,o)}const Yt={},Xt={},w2={touchstart:!0,touchmove:!0};class k2{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function S2(t){for(let e in Yt){let n=Yt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{C2(t,r)&&!zd(t,r)&&(t.editable||!(r.type in Xt))&&n(t,r)},w2[e]?{passive:!0}:void 0)}Ht&&t.dom.addEventListener("input",()=>null),Rc(t)}function Sr(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function E2(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Rc(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>zd(t,r))})}function zd(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function C2(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function _2(t,e){!zd(t,e)&&Yt[e.type]&&(t.editable||!(e.type in Xt))&&Yt[e.type](t,e)}Xt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Bg(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(nr&&Lt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Pi&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,qr(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||p2(t,n)?n.preventDefault():Sr(t,"key")};Xt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Xt.keypress=(t,e)=>{let n=e;if(Bg(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||mn&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Ie)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function Fa(t){return{left:t.clientX,top:t.clientY}}function N2(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Id(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Ni(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function T2(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&je.isSelectable(r)?(Ni(t,new je(n)),!0):!1}function A2(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof je&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(je.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Ni(t,je.create(t.state.doc,i)),!0):!1}function M2(t,e,n,r,i){return Id(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?A2(t,n):T2(t,n))}function O2(t,e,n,r){return Id(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function j2(t,e,n,r){return Id(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||z2(t,n,r)}function z2(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Ni(t,Ie.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Ni(t,Ie.create(r,a+1,a+1+o.content.size));else if(je.isSelectable(o))Ni(t,je.create(r,a));else continue;return!0}}function Rd(t){return Jo(t)}const Lg=mn?"metaKey":"ctrlKey";Yt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Rd(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&N2(n,t.input.lastClick)&&!n[Lg]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(Fa(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new I2(t,o,n,!!r)):(s=="doubleClick"?O2:j2)(t,o.pos,o.inside,n)?n.preventDefault():Sr(t,"pointer"))};class I2{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Lg],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let d=e.state.doc.resolve(n.pos);s=d.parent,o=d.depth?d.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof je&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&bn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Sr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ir(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Fa(e))),this.updateAllowDefault(e),this.allowDefault||!n?Sr(this.view,"pointer"):M2(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ht&&this.mightDrag&&!this.mightDrag.node.isAtom||Lt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ni(this.view,De.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Sr(this.view,"pointer")}move(e){this.updateAllowDefault(e),Sr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Yt.touchstart=t=>{t.input.lastTouch=Date.now(),Rd(t),Sr(t,"pointer")};Yt.touchmove=t=>{t.input.lastTouch=Date.now(),Sr(t,"pointer")};Yt.contextmenu=t=>Rd(t);function Bg(t,e){return t.composing?!0:Ht&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const R2=nr?5e3:-1;Xt.compositionstart=Xt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Ie&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Lt&&gg&&D2(t)))t.markCursor=t.state.storedMarks||n.marks(),Jo(t,!0),t.markCursor=null;else if(Jo(t,!e.selection.empty),bn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}$g(t,R2)};function D2(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}Xt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,$g(t,20))};function $g(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Jo(t),e))}function Fg(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=L2());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function P2(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=AS(e.focusNode,e.focusOffset),r=MS(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function L2(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Jo(t,e=!1){if(!(nr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Fg(t),e||t.docView&&t.docView.dirty){let n=Md(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function B2(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Os=rn&&Cr<15||Pi&&IS<604;Yt.copy=Xt.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Os?null:n.clipboardData,o=r.content(),{dom:a,text:l}=jd(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):B2(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function $2(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function F2(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?js(t,r.value,null,i,e):js(t,r.textContent,r.innerHTML,i,e)},50)}function js(t,e,n,r,i){let s=jg(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||ve.empty)))return!0;if(!s)return!1;let o=$2(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Hg(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Xt.paste=(t,e)=>{let n=e;if(t.composing&&!nr)return;let r=Os?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&js(t,Hg(r),r.getData("text/html"),i,n)?n.preventDefault():F2(t,n)};class Ug{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const H2=mn?"altKey":"ctrlKey";function Vg(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[H2]}Yt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(Fa(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof je?i.to-1:i.to))){if(r&&r.mightDrag)o=je.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let u=t.docView.nearestDesc(n.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&(o=je.create(t.state.doc,u.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:d}=jd(t,a);(!n.dataTransfer.files.length||!Lt||mg>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Os?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Os||n.dataTransfer.setData("text/plain",c),t.dragging=new Ug(d,Vg(t,n),o)};Yt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Xt.dragover=Xt.dragenter=(t,e)=>e.preventDefault();Xt.drop=(t,e)=>{try{U2(t,e,t.dragging)}finally{t.dragging=null}};function U2(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(Fa(e));if(!r)return;let i=t.state.doc.resolve(r.pos),s=n&&n.slice;s?t.someProp("transformPasted",f=>{s=f(s,t,!1)}):s=jg(t,Hg(e.dataTransfer),Os?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(n&&Vg(t,e));if(t.someProp("handleDrop",f=>f(t,e,s||ve.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let a=s?Gm(t.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let l=t.state.tr;if(o){let{node:f}=n;f?f.replace(l):l.deleteSelection()}let c=l.mapping.map(a),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,u=l.doc;if(d?l.replaceRangeWith(c,c,s.content.firstChild):l.replaceRange(c,c,s),l.doc.eq(u))return;let h=l.doc.resolve(c);if(d&&je.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new je(h));else{let f=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((p,g,y,b)=>f=b),l.setSelection(Od(t,h,l.doc.resolve(f)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}Yt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&ir(t)},20))};Yt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Yt.beforeinput=(t,e)=>{if(Lt&&nr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,qr(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Xt)Yt[t]=Xt[t];function zs(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Yo{constructor(e,n){this.toDOM=e,this.spec=n||ti,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new kt(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Yo&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&zs(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Nr{constructor(e,n){this.attrs=e,this.spec=n||ti}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new kt(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Nr&&zs(this.attrs,e.attrs)&&zs(this.spec,e.spec)}static is(e){return e.type instanceof Nr}destroy(){}}class Dd{constructor(e,n){this.attrs=e,this.spec=n||ti}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new kt(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof Dd&&zs(this.attrs,e.attrs)&&zs(this.spec,e.spec)}destroy(){}}class kt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new kt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new kt(e,e,new Yo(n,r))}static inline(e,n,r,i){return new kt(e,n,new Nr(r,i))}static node(e,n,r,i){return new kt(e,n,new Dd(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Nr}get widget(){return this.type instanceof Yo}}const vi=[],ti={};class nt{constructor(e,n){this.local=e.length?e:vi,this.children=n.length?n:vi}static create(e,n){return n.length?Xo(n,e,0,ti):Ft}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==Ft||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ti)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?V2(this.children,o||[],e,n,r,i,s):o?new nt(o.sort(ni),vi):Ft}add(e,n){return n.length?this==Ft?nt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,d;if(d=qg(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,d,c+1):i.splice(s,0,l,l+a.nodeSize,Xo(d,a,c+1,ti)),s+=3}});let o=Wg(s?Kg(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new nt(o.length?this.local.concat(o).sort(ni):this.local,i||this.children)}remove(e){return e.length==0||this==Ft?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let d=0,u;d<e.length;d++)(u=e[d])&&u.from>a&&u.to<l&&(e[d]=null,(o||(o=[])).push(u));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=Ft?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new nt(i,r):Ft}forChild(e,n){if(this==Ft)return this;if(n.isLeaf)return nt.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Nr){let c=Math.max(s,l.from)-s,d=Math.min(o,l.to)-s;c<d&&(i||(i=[])).push(l.copy(c,d))}}if(i){let a=new nt(i.sort(ni),vi);return r?new br([a,r]):a}return r||Ft}eq(e){if(this==e)return!0;if(!(e instanceof nt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Pd(this.localsInner(e))}localsInner(e){if(this==Ft)return vi;if(e.inlineContent||!this.local.some(Nr.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Nr||n.push(this.local[r]);return n}forEachSet(e){e(this)}}nt.empty=new nt([],[]);nt.removeOverlap=Pd;const Ft=nt.empty;class br{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,ti));return br.from(r)}forChild(e,n){if(n.isLeaf)return nt.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=Ft&&(s instanceof br?r=r.concat(s.members):r.push(s))}return br.from(r)}eq(e){if(!(e instanceof br)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?Pd(r?n:n.sort(ni)):vi}static from(e){switch(e.length){case 0:return Ft;case 1:return e[0];default:return new br(e.every(n=>n instanceof nt)?e:e.reduce((n,r)=>n.concat(r instanceof nt?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function V2(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,d=s;c<n.maps.length;c++){let u=0;n.maps[c].forEach((h,f,p,g)=>{let y=g-p-(f-h);for(let b=0;b<a.length;b+=3){let x=a[b+1];if(x<0||h>x+d-u)continue;let w=a[b]+d-u;f>=w?a[b+1]=h<=w?-2:-1:h>=d&&y&&(a[b]+=y,a[b+1]+=y)}u+=y}),d=n.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=n.map(t[c]+s),u=d-i;if(u<0||u>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+s,-1),f=h-i,{index:p,offset:g}=r.content.findIndex(u),y=r.maybeChild(p);if(y&&g==u&&g+y.nodeSize==f){let b=a[c+2].mapInner(n,y,d+1,t[c]+s+1,o);b!=Ft?(a[c]=u,a[c+1]=f,a[c+2]=b):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=W2(a,t,e,n,i,s,o),d=Xo(c,r,0,o);e=d.local;for(let u=0;u<a.length;u+=3)a[u+1]<0&&(a.splice(u,3),u-=3);for(let u=0,h=0;u<d.children.length;u+=3){let f=d.children[u];for(;h<a.length&&a[h]<f;)h+=3;a.splice(h,0,d.children[u],d.children[u+1],d.children[u+2])}}return new nt(e.sort(ni),a)}function Wg(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new kt(i.from+e,i.to+e,i.type))}return n}function W2(t,e,n,r,i,s,o){function a(l,c){for(let d=0;d<l.local.length;d++){let u=l.local[d].map(r,i,c);u?n.push(u):o.onRemove&&o.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function qg(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function Kg(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Xo(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=qg(t,a,l+n);if(c){s=!0;let d=Xo(c,a,n+l+1,r);d!=Ft&&i.push(l,l+a.nodeSize,d)}});let o=Wg(s?Kg(t):t,-n).sort(ni);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new nt(o,i):Ft}function ni(t,e){return t.from-e.from||t.to-e.to}function Pd(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),qf(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),qf(e,i,r.copy(s.from,r.to)));break}}}return e}function qf(t,e,n){for(;e<t.length&&ni(n,t[e])>0;)e++;t.splice(e,0,n)}function El(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Ft&&e.push(r)}),t.cursorWrapper&&e.push(nt.create(t.state.doc,[t.cursorWrapper.deco])),br.from(e)}const q2={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},K2=rn&&Cr<=11;class G2{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class J2{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new G2,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);rn&&Cr<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():Ht&&e.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),K2&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,q2)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Lf(this.view)){if(this.suppressingSelectionUpdates)return ir(this.view);if(rn&&Cr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&li(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Di(s))n.add(s);for(let s=e.anchorNode;s;s=Di(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Lf(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let d=0;d<n.length;d++){let u=this.registerMutation(n[d],l);u&&(s=s<0?u.from:Math.min(u.from,s),o=o<0?u.to:Math.max(u.to,o),u.typeOver&&(a=!0))}if(l.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of l)if(d.nodeName=="BR"&&d.parentNode){let u=d.nextSibling;u&&u.nodeType==1&&u.contentEditable=="false"&&d.parentNode.removeChild(d)}}else if(bn&&l.length){let d=l.filter(u=>u.nodeName=="BR");if(d.length==2){let[u,h]=d;u.parentNode&&u.parentNode.parentNode==h.parentNode?h.remove():u.remove()}else{let{focusNode:u}=this.currentSelection;for(let h of d){let f=h.parentNode;f&&f.nodeName=="LI"&&(!u||Z2(e,u)!=f)&&h.remove()}}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ba(r)&&(c=Md(e))&&c.eq(De.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ir(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),Y2(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,Q2(e,l)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||ir(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let u=e.addedNodes[d];n.push(u),u.nodeType==3&&(this.lastChangedTextNode=u)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(rn&&Cr<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:u,nextSibling:h}=e.addedNodes[d];(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(i=u),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let o=i&&i.parentNode==e.target?Rt(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?Rt(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Kf=new WeakMap,Gf=!1;function Y2(t){if(!Kf.has(t)&&(Kf.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=bn,Gf)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Gf=!0}}function Jf(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return li(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function X2(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Jf(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Jf(t,n):null}function Z2(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function Q2(t,e){var n;let{focusNode:r,focusOffset:i}=t.domSelectionRange();for(let s of e)if(((n=s.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let o=s.nextSibling;for(;o&&o.nodeName!="TD"&&o.nodeName!="TH";)o=o.nextSibling;if(o){let a=o;for(;;){let l=a.firstChild;if(!l||l.nodeType!=1||l.contentEditable=="false"||/^(BR|IMG)$/.test(l.nodeName))break;a=l}a.insertBefore(s,a.firstChild),r==s&&t.domSelection().collapse(s,i)}else s.parentNode.removeChild(s)}}function eE(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],Ba(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Lt&&t.input.lastKeyCode===8)for(let y=s;y>i;y--){let b=r.childNodes[y-1],x=b.pmViewDesc;if(b.nodeName=="BR"&&!x){s=y;break}if(!x||x.size)break}let u=t.state.doc,h=t.someProp("domParser")||us.fromSchema(t.state.schema),f=u.resolve(o),p=null,g=h.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:tE,context:f});if(c&&c[0].pos!=null){let y=c[0].pos,b=c[1]&&c[1].pos;b==null&&(b=y),p={anchor:y+o,head:b+o}}return{doc:g,sel:p,from:o,to:a}}function tE(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Ht&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Ht&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const nE=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function rE(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let N=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,j=Md(t,N);if(j&&!t.state.selection.eq(j)){if(Lt&&nr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",T=>T(t,qr(13,"Enter"))))return;let M=t.state.tr.setSelection(j);N=="pointer"?M.setMeta("pointer",!0):N=="key"&&M.scrollIntoView(),s&&M.setMeta("composition",s),t.dispatch(M)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=eE(t,e,n),d=t.state.doc,u=d.slice(c.from,c.to),h,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,f="end"):(h=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let p=oE(u.content,c.doc.content,c.from,h,f);if(p&&t.input.domChangeCount++,(Pi&&t.input.lastIOSEnter>Date.now()-225||nr)&&i.some(N=>N.nodeType==1&&!nE.test(N.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",N=>N(t,qr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof Ie&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let N=Yf(t,t.state.doc,c.sel);if(N&&!N.eq(t.state.selection)){let j=t.state.tr.setSelection(N);s&&j.setMeta("composition",s),t.dispatch(j)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof Ie&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),rn&&Cr<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let g=c.doc.resolveNoCache(p.start-c.from),y=c.doc.resolveNoCache(p.endB-c.from),b=d.resolve(p.start),x=g.sameParent(y)&&g.parent.inlineContent&&b.end()>=p.endA;if((Pi&&t.input.lastIOSEnter>Date.now()-225&&(!x||i.some(N=>N.nodeName=="DIV"||N.nodeName=="P"))||!x&&g.pos<c.doc.content.size&&(!g.sameParent(y)||!g.parent.inlineContent)&&g.pos<y.pos&&!/\S/.test(c.doc.textBetween(g.pos,y.pos,"","")))&&t.someProp("handleKeyDown",N=>N(t,qr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&sE(d,p.start,p.endA,g,y)&&t.someProp("handleKeyDown",N=>N(t,qr(8,"Backspace")))){nr&&Lt&&t.domObserver.suppressSelectionUpdates();return}Lt&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),nr&&!x&&g.start()!=y.start()&&y.parentOffset==0&&g.depth==y.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,y=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(N){return N(t,qr(13,"Enter"))})},20));let w=p.start,v=p.endA,E=N=>{let j=N||t.state.tr.replace(w,v,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let M=Yf(t,j.doc,c.sel);M&&!(Lt&&t.composing&&M.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(M.head==w||M.head==j.mapping.map(v)-1)||rn&&M.empty&&M.head==w)&&j.setSelection(M)}return s&&j.setMeta("composition",s),j.scrollIntoView()},C;if(x)if(g.pos==y.pos){rn&&Cr<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>ir(t),20));let N=E(t.state.tr.delete(w,v)),j=d.resolve(p.start).marksAcross(d.resolve(p.endA));j&&N.ensureMarks(j),t.dispatch(N)}else if(p.endA==p.endB&&(C=iE(g.parent.content.cut(g.parentOffset,y.parentOffset),b.parent.content.cut(b.parentOffset,p.endA-b.start())))){let N=E(t.state.tr);C.type=="add"?N.addMark(w,v,C.mark):N.removeMark(w,v,C.mark),t.dispatch(N)}else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let N=g.parent.textBetween(g.parentOffset,y.parentOffset),j=()=>E(t.state.tr.insertText(N,w,v));t.someProp("handleTextInput",M=>M(t,w,v,N,j))||t.dispatch(j())}else t.dispatch(E());else t.dispatch(E())}function Yf(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Od(t,e.resolve(n.anchor),e.resolve(n.head))}function iE(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);for(let d=0;d<n.length;d++)s=n[d].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=d=>d.mark(a.addToSet(d.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(oe.from(c).eq(t))return{mark:a,type:o}}function sE(t,e,n,r,i){if(n-e<=i.pos-r.pos||Cl(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Cl(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Cl(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Cl(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function oE(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&Xf(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&Xf(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function Xf(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class Gg{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new k2,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(nh),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=eh(this),Qf(this),this.nodeViews=th(this),this.docView=jf(this.state.doc,Zf(this),El(this),this.dom,this),this.domObserver=new J2(this,(r,i,s,o)=>rE(this,r,i,s,o)),this.domObserver.start(),S2(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Rc(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(nh),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(Fg(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=th(this);lE(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Rc(this),this.editable=eh(this),Qf(this);let l=El(this),c=Zf(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",u=s||!this.docView.matchesNode(e.doc,c,l);(u||!e.selection.eq(i.selection))&&(o=!0);let h=d=="preserve"&&o&&this.dom.style.overflowAnchor==null&&PS(this);if(o){this.domObserver.stop();let f=u&&(rn||Lt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&aE(i.selection,e.selection);if(u){let p=Lt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=P2(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=jf(e.doc,c,l,this.dom,this)),p&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&a2(this))?ir(this,f):(Ag(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():h&&LS(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof je){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&_f(this,n.getBoundingClientRect(),e)}else _f(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new Ug(e.slice,e.move,i<0?void 0:je.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(rn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&BS(this.dom),ir(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return VS(this,e)}coordsAtPos(e,n=1){return wg(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return JS(this,n||this.state,e)}pasteHTML(e,n){return js(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return js(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return jd(this,e)}destroy(){this.docView&&(E2(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],El(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,NS())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return _2(this,e)}domSelectionRange(){let e=this.domSelection();return e?Ht&&this.root.nodeType===11&&jS(this.dom.ownerDocument)==this.dom&&X2(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Gg.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Zf(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[kt.node(0,t.state.doc.content.size,e)]}function Qf(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:kt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function eh(t){return!t.someProp("editable",e=>e(t.state)===!1)}function aE(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function th(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function lE(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function nh(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Tr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Zo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},cE=typeof navigator<"u"&&/Mac/.test(navigator.platform),dE=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Dt=0;Dt<10;Dt++)Tr[48+Dt]=Tr[96+Dt]=String(Dt);for(var Dt=1;Dt<=24;Dt++)Tr[Dt+111]="F"+Dt;for(var Dt=65;Dt<=90;Dt++)Tr[Dt]=String.fromCharCode(Dt+32),Zo[Dt]=String.fromCharCode(Dt);for(var _l in Tr)Zo.hasOwnProperty(_l)||(Zo[_l]=Tr[_l]);function uE(t){var e=cE&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||dE&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Zo:Tr)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const fE=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),hE=typeof navigator<"u"&&/Win/.test(navigator.platform);function pE(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))fE?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function mE(t){let e=Object.create(null);for(let n in t)e[pE(n)]=t[n];return e}function Nl(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function gE(t){return new rt({props:{handleKeyDown:Ld(t)}})}function Ld(t){let e=mE(t);return function(n,r){let i=uE(r),s,o=e[Nl(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Nl(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(hE&&r.ctrlKey&&r.altKey)&&(s=Tr[r.keyCode])&&s!=i){let a=e[Nl(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var yE=Object.defineProperty,Bd=(t,e)=>{for(var n in e)yE(t,n,{get:e[n],enumerable:!0})};function Ha(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var Ua=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...c)=>{const d=a(...c)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],a=!!t,l=t||i.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),o.every(u=>u===!0)),d={...Object.fromEntries(Object.entries(n).map(([u,h])=>[u,(...p)=>{const g=this.buildProps(l,e),y=h(...p)(g);return o.push(y),d}])),run:c};return d}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:t,editor:r,view:s,state:Ha({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...c)=>l(...c)(o)]))}};return o}},Jg={};Bd(Jg,{blur:()=>bE,clearContent:()=>xE,clearNodes:()=>vE,command:()=>wE,createParagraphNear:()=>kE,cut:()=>SE,deleteCurrentNode:()=>EE,deleteNode:()=>CE,deleteRange:()=>_E,deleteSelection:()=>NE,enter:()=>TE,exitCode:()=>AE,extendMarkRange:()=>ME,first:()=>OE,focus:()=>zE,forEach:()=>IE,insertContent:()=>RE,insertContentAt:()=>LE,joinBackward:()=>FE,joinDown:()=>$E,joinForward:()=>HE,joinItemBackward:()=>UE,joinItemForward:()=>VE,joinTextblockBackward:()=>WE,joinTextblockForward:()=>qE,joinUp:()=>BE,keyboardShortcut:()=>GE,lift:()=>JE,liftEmptyBlock:()=>YE,liftListItem:()=>XE,newlineInCode:()=>ZE,resetAttributes:()=>QE,scrollIntoView:()=>eC,selectAll:()=>tC,selectNodeBackward:()=>nC,selectNodeForward:()=>rC,selectParentNode:()=>iC,selectTextblockEnd:()=>sC,selectTextblockStart:()=>oC,setContent:()=>aC,setMark:()=>_C,setMeta:()=>NC,setNode:()=>TC,setNodeSelection:()=>AC,setTextDirection:()=>MC,setTextSelection:()=>OC,sinkListItem:()=>jC,splitBlock:()=>zC,splitListItem:()=>IC,toggleList:()=>RC,toggleMark:()=>DC,toggleNode:()=>PC,toggleWrap:()=>LC,undoInputRule:()=>BC,unsetAllMarks:()=>$C,unsetMark:()=>FC,unsetTextDirection:()=>HC,updateAttributes:()=>UC,wrapIn:()=>VC,wrapInList:()=>WC});var bE=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),xE=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),vE=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,u=c.resolve(d.map(l)),h=c.resolve(d.map(l+a.nodeSize)),f=u.blockRange(h);if(!f)return;const p=Ui(f);if(a.type.isTextblock){const{defaultType:g}=u.parent.contentMatchAt(u.index());e.setNodeMarkup(f.start,g)}(p||p===0)&&e.lift(f,p)})}),!0},wE=t=>e=>t(e),kE=()=>({state:t,dispatch:e})=>dg(t,e),SE=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Ie(r.doc.resolve(Math.max(o-1,0)))),!0},EE=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1};function St(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var CE=t=>({tr:e,state:n,dispatch:r})=>{const i=St(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},_E=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},NE=()=>({state:t,dispatch:e})=>Ed(t,e),TE=()=>({commands:t})=>t.keyboardShortcut("Enter"),AE=()=>({state:t,dispatch:e})=>fS(t,e);function $d(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Qo(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:$d(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function Yg(t,e,n={}){return t.find(r=>r.type===e&&Qo(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function rh(t,e,n={}){return!!Yg(t,e,n)}function Fd(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!Yg([...i.node.marks],e,n)))return;let o=i.index,a=t.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&rh([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&rh([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function ar(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var ME=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=ar(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:d}=a;if(i){const u=Fd(l,s,e);if(u&&u.from<=c&&u.to>=d){const h=Ie.create(o,u.from,u.to);n.setSelection(h)}}return!0},OE=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function Xg(t){return t instanceof Ie}function Jr(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Zg(t,e=null){if(!e)return null;const n=De.atStart(t),r=De.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Ie.create(t,Jr(0,i,s),Jr(t.content.size,i,s)):Ie.create(t,Jr(e,i,s),Jr(e,i,s))}function Dc(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Is(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function jE(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var zE=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(Is()||Dc())&&r.dom.focus(),jE()&&!Is()&&!Dc()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};try{if(r.hasFocus()&&t===null||t===!1)return!0}catch{return!1}if(s&&t===null&&!Xg(n.state.selection))return o(),!0;const a=Zg(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},IE=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),RE=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Qg=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&Qg(r)}return t};function oo(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return Qg(n)}function Rs(t,e,n){if(t instanceof Er||t instanceof oe)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return oe.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Rs("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,a="";const l=new Pm({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?us.fromSchema(l).parseSlice(oo(t),n.parseOptions):us.fromSchema(l).parse(oo(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=us.fromSchema(e);return n.slice?s.parseSlice(oo(t),n.parseOptions).content:s.parse(oo(t),n.parseOptions)}return Rs("",e,n)}function DE(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Nt||i instanceof Tt))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,d)=>{o===0&&(o=d)}),t.setSelection(De.near(t.doc.resolve(o),n))}var PE=t=>!("type"in t),LE=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=y=>{s.emit("contentError",{editor:s,error:y,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Rs(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(y){l(y)}try{a=Rs(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(y){return l(y),!1}let{from:d,to:u}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,f=!0;if((PE(a)?a:[a]).forEach(y=>{y.check(),h=h?y.isText&&y.marks.length===0:!1,f=f?y.isBlock:!1}),d===u&&f){const{parent:y}=r.doc.resolve(d);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(d-=1,u+=1)}let g;if(h){if(Array.isArray(e))g=e.map(y=>y.text||"").join("");else if(e instanceof oe){let y="";e.forEach(b=>{b.text&&(y+=b.text)}),g=y}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,d,u)}else{g=a;const y=r.doc.resolve(d),b=y.node(),x=y.parentOffset===0,w=b.isText||b.isTextblock,v=b.content.size>0;x&&w&&v&&(d=Math.max(0,d-1)),r.replaceWith(d,u,g)}n.updateSelection&&DE(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:g})}return!0},BE=()=>({state:t,dispatch:e})=>cS(t,e),$E=()=>({state:t,dispatch:e})=>dS(t,e),FE=()=>({state:t,dispatch:e})=>rg(t,e),HE=()=>({state:t,dispatch:e})=>ag(t,e),UE=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Da(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},VE=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Da(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},WE=()=>({state:t,dispatch:e})=>aS(t,e),qE=()=>({state:t,dispatch:e})=>lS(t,e);function e0(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function KE(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Is()||e0()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var GE=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=KE(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const d=c.map(r.mapping);d&&i&&r.maybeStep(d)}),!0};function Ar(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?St(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(u,h)=>{if(u.isText)return;const f=Math.max(r,h),p=Math.min(i,h+u.nodeSize);a.push({node:u,from:f,to:p})});const l=i-r,c=a.filter(u=>o?o.name===u.node.type.name:!0).filter(u=>Qo(u.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((u,h)=>u+h.to-h.from,0)>=l}var JE=(t,e={})=>({state:n,dispatch:r})=>{const i=St(t,n.schema);return Ar(n,i,e)?uS(n,r):!1},YE=()=>({state:t,dispatch:e})=>ug(t,e),XE=t=>({state:e,dispatch:n})=>{const r=St(t,e.schema);return SS(r)(e,n)},ZE=()=>({state:t,dispatch:e})=>cg(t,e);function Va(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function ih(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var QE=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=Va(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(s=St(t,r.schema)),a==="mark"&&(o=ar(t,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(d,u)=>{s&&s===d.type&&(l=!0,i&&n.setNodeMarkup(u,void 0,ih(d.attrs,e))),o&&d.marks.length&&d.marks.forEach(h=>{o===h.type&&(l=!0,i&&n.addMark(u,u+d.nodeSize,o.create(ih(h.attrs,e))))})})}),l},eC=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),tC=()=>({tr:t,dispatch:e})=>{if(e){const n=new cn(t.doc);t.setSelection(n)}return!0},nC=()=>({state:t,dispatch:e})=>sg(t,e),rC=()=>({state:t,dispatch:e})=>lg(t,e),iC=()=>({state:t,dispatch:e})=>mS(t,e),sC=()=>({state:t,dispatch:e})=>bS(t,e),oC=()=>({state:t,dispatch:e})=>yS(t,e);function Pc(t,e,n={},r={}){return Rs(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var aC=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{const{doc:l}=s;if(r.preserveWhitespace!=="full"){const c=Pc(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function t0(t,e){const n=ar(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function n0(t,e){const n=new kd(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function lC(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Lc(t,e){const n=[];return t.descendants((r,i)=>{e(r)&&n.push({node:r,pos:i})}),n}function cC(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function r0(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Wa(t){return e=>r0(e.$from,t)}function Oe(t,e,n){return t.config[e]===void 0&&t.parent?Oe(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Oe(t.parent,e,n):null}):t.config[e]}function Hd(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Oe(e,"addExtensions",n);return r?[e,...Hd(r())]:e}).flat(10)}function Ud(t,e){const n=hi.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function i0(t){return typeof t=="function"}function Qe(t,e=void 0,...n){return i0(t)?e?t.bind(e)(...n):t(...n):t}function dC(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Li(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function s0(t){const e=[],{nodeExtensions:n,markExtensions:r}=Li(t),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=Oe(o,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(u=>{Object.entries(d.attributes).forEach(([h,f])=>{e.push({type:u,name:h,attribute:{...s,...f}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Oe(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,u])=>{const h={...s,...u};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:o.name,name:d,attribute:h})})}),e}function ot(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(d=>!l.includes(d));r[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(d=>d.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[u,h]=d.split(":").map(f=>f.trim());c.set(u,h)}),a.forEach(d=>{const[u,h]=d.split(":").map(f=>f.trim());c.set(u,h)}),r[i]=Array.from(c.entries()).map(([d,u])=>`${d}: ${u}`).join("; ")}else r[i]=s}),r},{})}function Bi(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>ot(n,r),{})}function uC(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function sh(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):uC(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function oh(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&dC(n)?!1:n!=null))}function ah(t){var e,n;const r={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(r.default=t.attribute.default),((n=t==null?void 0:t.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function fC(t,e){var n;const r=s0(t),{nodeExtensions:i,markExtensions:s}=Li(t),o=(n=i.find(c=>Oe(c,"topNode")))==null?void 0:n.name,a=Object.fromEntries(i.map(c=>{const d=r.filter(b=>b.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((b,x)=>{const w=Oe(x,"extendNodeSchema",u);return{...b,...w?w(c):{}}},{}),f=oh({...h,content:Qe(Oe(c,"content",u)),marks:Qe(Oe(c,"marks",u)),group:Qe(Oe(c,"group",u)),inline:Qe(Oe(c,"inline",u)),atom:Qe(Oe(c,"atom",u)),selectable:Qe(Oe(c,"selectable",u)),draggable:Qe(Oe(c,"draggable",u)),code:Qe(Oe(c,"code",u)),whitespace:Qe(Oe(c,"whitespace",u)),linebreakReplacement:Qe(Oe(c,"linebreakReplacement",u)),defining:Qe(Oe(c,"defining",u)),isolating:Qe(Oe(c,"isolating",u)),attrs:Object.fromEntries(d.map(ah))}),p=Qe(Oe(c,"parseHTML",u));p&&(f.parseDOM=p.map(b=>sh(b,d)));const g=Oe(c,"renderHTML",u);g&&(f.toDOM=b=>g({node:b,HTMLAttributes:Bi(b,d)}));const y=Oe(c,"renderText",u);return y&&(f.toText=y),[c.name,f]})),l=Object.fromEntries(s.map(c=>{const d=r.filter(y=>y.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((y,b)=>{const x=Oe(b,"extendMarkSchema",u);return{...y,...x?x(c):{}}},{}),f=oh({...h,inclusive:Qe(Oe(c,"inclusive",u)),excludes:Qe(Oe(c,"excludes",u)),group:Qe(Oe(c,"group",u)),spanning:Qe(Oe(c,"spanning",u)),code:Qe(Oe(c,"code",u)),attrs:Object.fromEntries(d.map(ah))}),p=Qe(Oe(c,"parseHTML",u));p&&(f.parseDOM=p.map(y=>sh(y,d)));const g=Oe(c,"renderHTML",u);return g&&(f.toDOM=y=>g({mark:y,HTMLAttributes:Bi(y,d)})),[c.name,f]}));return new Pm({topNode:o,nodes:a,marks:l})}function hC(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function ea(t){return t.sort((n,r)=>{const i=Oe(n,"priority")||100,s=Oe(r,"priority")||100;return i>s?-1:i<s?1:0})}function o0(t){const e=ea(Hd(t)),n=hC(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function a0(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,i,(l,c,d,u)=>{var h;l.isBlock&&c>r&&(a+=s);const f=o==null?void 0:o[l.type.name];if(f)return d&&(a+=f({node:l,pos:c,parent:d,index:u,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)==null?void 0:h.slice(Math.max(r,c)-c,i-c))}),a}function pC(t,e){const n={from:0,to:t.content.size};return a0(t,n,e)}function l0(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function mC(t,e){const n=St(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function c0(t,e){const n=Va(typeof e=="string"?e:e.name,t.schema);return n==="node"?mC(t,e):n==="mark"?t0(t,e):{}}function gC(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function yC(t){const e=gC(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function d0(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),d=e.slice(s).map(l),u=e.invert().map(c,-1),h=e.invert().map(d);r.push({oldRange:{from:u,to:h},newRange:{from:c,to:d}})})}),yC(r)}function Vd(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=Fd(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var bC=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const a=i.node(s);(a==null?void 0:a.type.name)===e?o=a:s-=1}return[o,s]};function ao(t,e){return e.nodes[t]||e.marks[t]||null}function zo(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var xC=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const d=((c=(l=i.type.spec).toText)==null?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,r-s))}),n};function Bc(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?ar(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(u=>s?s.name===u.type.name:!0).find(u=>Qo(u.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:u,$to:h})=>{const f=u.pos,p=h.pos;t.doc.nodesBetween(f,p,(g,y)=>{if(!g.isText&&!g.marks.length)return;const b=Math.max(f,y),x=Math.min(p,y+g.nodeSize),w=x-b;o+=w,a.push(...g.marks.map(v=>({mark:v,from:b,to:x})))})}),o===0)return!1;const l=a.filter(u=>s?s.name===u.mark.type.name:!0).filter(u=>Qo(u.mark.attrs,n,{strict:!1})).reduce((u,h)=>u+h.to-h.from,0),c=a.filter(u=>s?u.mark.type!==s&&u.mark.type.excludes(s):!0).reduce((u,h)=>u+h.to-h.from,0);return(l>0?l+c:l)>=o}function vC(t,e,n={}){if(!e)return Ar(t,null,n)||Bc(t,null,n);const r=Va(e,t.schema);return r==="node"?Ar(t,e,n):r==="mark"?Bc(t,e,n):!1}var wC=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const s=Wa(a=>a.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},kC=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function lh(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function ch(t,e){const{nodeExtensions:n}=Li(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Qe(Oe(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function qa(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(qa(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function u0(t){return t instanceof je}var f0=class h0{constructor(e){this.position=e}static fromJSON(e){return new h0(e.position)}toJSON(){return{position:this.position}}};function SC(t,e){const n=e.mapping.mapResult(t.position);return{position:new f0(n.pos),mapResult:n}}function EC(t){return new f0(t)}function CC(t,e,n){var r;const{selection:i}=e;let s=null;if(Xg(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(c=>c.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,u,h)=>{if(c)return!1;if(d.isInline){const f=!h||h.type.allowsMarkType(n),p=!!n.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(n));c=f&&p}return!c}),c})}var _C=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=ar(t,r.schema);if(i)if(o){const c=t0(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const d=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(d,u,(h,f)=>{const p=Math.max(f,d),g=Math.min(f+h.nodeSize,u);h.marks.find(b=>b.type===l)?h.marks.forEach(b=>{l===b.type&&n.addMark(p,g,l.create({...b.attrs,...e}))}):n.addMark(p,g,l.create(e))})});return CC(r,n,l)},NC=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),TC=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=St(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>Sf(s,{...o,...e})(n)?!0:a.clearNodes()).command(({state:a})=>Sf(s,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},AC=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Jr(t,0,r.content.size),s=je.create(r,i);e.setSelection(s)}return!0},MC=(t,e)=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=r;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=s.from,a=s.to),i&&n.doc.nodesBetween(o,a,(l,c)=>{l.isText||n.setNodeMarkup(c,void 0,{...l.attrs,dir:t})}),!0},OC=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Ie.atStart(r).from,a=Ie.atEnd(r).to,l=Jr(i,o,a),c=Jr(s,o,a),d=Ie.create(r,l,c);e.setSelection(d)}return!0},jC=t=>({state:e,dispatch:n})=>{const r=St(t,e.schema);return _S(r)(e,n)};function dh(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}var zC=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,d=zo(c,a.node().type.name,a.node().attrs);if(s instanceof je&&s.node.isBlock)return!a.parentOffset||!rr(o,a.pos)?!1:(r&&(t&&dh(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const u=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:lC(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=u&&h?[{type:h,attrs:d}]:void 0,p=rr(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&rr(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(p=!0,f=h?[{type:h,attrs:d}]:void 0),r){if(p&&(s instanceof Ie&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,f),h&&!u&&!a.parentOffset&&a.parent.type!==h)){const g=e.mapping.map(a.before()),y=e.doc.resolve(g);a.node(-1).canReplaceWith(y.index(),y.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&dh(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return p},IC=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const a=St(t,r.schema),{$from:l,$to:c}=r.selection,d=r.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const u=l.node(-1);if(u.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let b=oe.empty;const x=l.index(-1)?1:l.index(-2)?2:3;for(let j=l.depth-x;j>=l.depth-3;j-=1)b=oe.from(l.node(j).copy(b));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,v={...zo(h,l.node().type.name,l.node().attrs),...e},E=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(v))||void 0;b=b.append(oe.from(a.createAndFill(null,E)||void 0));const C=l.before(l.depth-(x-1));n.replace(C,l.after(-w),new ve(b,4-x,0));let N=-1;n.doc.nodesBetween(C,n.doc.content.size,(j,M)=>{if(N>-1)return!1;j.isTextblock&&j.content.size===0&&(N=M+1)}),N>-1&&n.setSelection(Ie.near(n.doc.resolve(N))),n.scrollIntoView()}return!0}const f=c.pos===l.end()?u.contentMatchAt(0).defaultType:null,p={...zo(h,u.type.name,u.attrs),...e},g={...zo(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const y=f?[{type:a,attrs:p},{type:f,attrs:g}]:[{type:a,attrs:p}];if(!rr(n.doc,l.pos,2))return!1;if(i){const{selection:b,storedMarks:x}=r,{splittableMarks:w}=s.extensionManager,v=x||b.$to.parentOffset&&b.$from.marks();if(n.split(l.pos,2,y).scrollIntoView(),!v||!i)return!0;const E=v.filter(C=>w.includes(C.type.name));n.ensureMarks(E)}return!0},Tl=(t,e)=>{const n=Wa(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&jr(t.doc,n.pos)&&t.join(n.pos),!0},Al=(t,e)=>{const n=Wa(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&jr(t.doc,r)&&t.join(r),!0},RC=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:u,splittableMarks:h}=i.extensionManager,f=St(t,o.schema),p=St(e,o.schema),{selection:g,storedMarks:y}=o,{$from:b,$to:x}=g,w=b.blockRange(x),v=y||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const E=Wa(C=>ch(C.type.name,u))(g);if(w.depth>=1&&E&&w.depth-E.depth<=1){if(E.node.type===f)return c.liftListItem(p);if(ch(E.node.type.name,u)&&f.validContent(E.node.content)&&a)return l().command(()=>(s.setNodeMarkup(E.pos,f),!0)).command(()=>Tl(s,f)).command(()=>Al(s,f)).run()}return!n||!v||!a?l().command(()=>d().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>Tl(s,f)).command(()=>Al(s,f)).run():l().command(()=>{const C=d().wrapInList(f,r),N=v.filter(j=>h.includes(j.type.name));return s.ensureMarks(N),C?!0:c.clearNodes()}).wrapInList(f,r).command(()=>Tl(s,f)).command(()=>Al(s,f)).run()},DC=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=ar(t,r.schema);return Bc(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},PC=(t,e,n={})=>({state:r,commands:i})=>{const s=St(t,r.schema),o=St(e,r.schema),a=Ar(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...n})},LC=(t,e={})=>({state:n,commands:r})=>{const i=St(t,n.schema);return Ar(n,i,e)?r.lift(i):r.wrapIn(i,e)},BC=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},$C=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},FC=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=ar(t,r.schema),{$from:c,empty:d,ranges:u}=a;if(!i)return!0;if(d&&o){let{from:h,to:f}=a;const p=(s=c.marks().find(y=>y.type===l))==null?void 0:s.attrs,g=Fd(c,l,p);g&&(h=g.from,f=g.to),n.removeMark(h,f,l)}else u.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},HC=t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=n;let s,o;return typeof t=="number"?(s=t,o=t):t&&"from"in t&&"to"in t?(s=t.from,o=t.to):(s=i.from,o=i.to),r&&e.doc.nodesBetween(s,o,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,e.setNodeMarkup(l,void 0,c)}),!0},UC=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=Va(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(s=St(t,r.schema)),a==="mark"&&(o=ar(t,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{const d=c.$from.pos,u=c.$to.pos;let h,f,p,g;n.selection.empty?r.doc.nodesBetween(d,u,(y,b)=>{s&&s===y.type&&(l=!0,p=Math.max(b,d),g=Math.min(b+y.nodeSize,u),h=b,f=y)}):r.doc.nodesBetween(d,u,(y,b)=>{b<d&&s&&s===y.type&&(l=!0,p=Math.max(b,d),g=Math.min(b+y.nodeSize,u),h=b,f=y),b>=d&&b<=u&&(s&&s===y.type&&(l=!0,i&&n.setNodeMarkup(b,void 0,{...y.attrs,...e})),o&&y.marks.length&&y.marks.forEach(x=>{if(o===x.type&&(l=!0,i)){const w=Math.max(b,d),v=Math.min(b+y.nodeSize,u);n.addMark(w,v,o.create({...x.attrs,...e}))}}))}),f&&(h!==void 0&&i&&n.setNodeMarkup(h,void 0,{...f.attrs,...e}),o&&f.marks.length&&f.marks.forEach(y=>{o===y.type&&i&&n.addMark(p,g,o.create({...y.attrs,...e}))}))}),l},VC=(t,e={})=>({state:n,dispatch:r})=>{const i=St(t,n.schema);return xS(i,e)(n,r)},WC=(t,e={})=>({state:n,dispatch:r})=>{const i=St(t,n.schema);return vS(i,e)(n,r)},qC=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},Ka=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},KC=(t,e)=>{if($d(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function lo(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(h=>h.type.spec.code))return!1;let d=!1;const u=xC(c)+s;return o.forEach(h=>{if(d)return;const f=KC(u,h.find);if(!f)return;const p=l.state.tr,g=Ha({state:l.state,transaction:p}),y={from:r-(f[0].length-s.length),to:i},{commands:b,chain:x,can:w}=new Ua({editor:n,state:g});h.handler({state:g,range:y,match:f,commands:b,chain:x,can:w})===null||!p.steps.length||(h.undoable&&p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),d=!0)}),d}function GC(t){const{editor:e,rules:n}=t,r=new rt({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=Ud(oe.from(d),o.schema);const{from:u}=l,h=u+d.length;lo({editor:e,from:u,to:h,text:d,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return lo({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&lo({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?lo({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function JC(t){return Object.prototype.toString.call(t).slice(8,-1)}function co(t){return JC(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function p0(t,e){const n={...t};return co(t)&&co(e)&&Object.keys(e).forEach(r=>{co(e[r])&&co(t[r])?n[r]=p0(t[r],e[r]):n[r]=e[r]}),n}var Wd=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Qe(Oe(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Qe(Oe(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>p0(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},$n=class m0 extends Wd{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new m0(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function YC(t){return typeof t=="number"}var XC=class{constructor(t){this.find=t.find,this.handler=t.handler}},ZC=(t,e,n)=>{if($d(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function QC(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:d}=new Ua({editor:e,state:n}),u=[];return n.doc.nodesBetween(r,i,(f,p)=>{var g,y,b,x,w;if((y=(g=f.type)==null?void 0:g.spec)!=null&&y.code||!(f.isText||f.isTextblock||f.isInline))return;const v=(w=(x=(b=f.content)==null?void 0:b.size)!=null?x:f.nodeSize)!=null?w:0,E=Math.max(r,p),C=Math.min(i,p+v);if(E>=C)return;const N=f.isText?f.text||"":f.textBetween(E-p,C-p,void 0,"");ZC(N,s.find,o).forEach(M=>{if(M.index===void 0)return;const T=E+M.index+1,P=T+M[0].length,_={from:n.tr.mapping.map(T),to:n.tr.mapping.map(P)},z=s.handler({state:n,range:_,match:M,commands:l,chain:c,can:d,pasteEvent:o,dropEvent:a});u.push(z)})}),u.every(f=>f!==null)}var uo=null,e_=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function t_(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:u,to:h,rule:f,pasteEvt:p})=>{const g=d.tr,y=Ha({state:d,transaction:g});if(!(!QC({editor:e,state:y,from:Math.max(u-1,0),to:h.b-1,rule:f,pasteEvent:p,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(d=>new rt({view(u){const h=p=>{var g;r=(g=u.dom.parentElement)!=null&&g.contains(p.target)?u.dom.parentElement:null,r&&(uo=e)},f=()=>{uo&&(uo=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(u,h)=>{if(s=r===u.dom.parentElement,a=h,!s){const f=uo;f!=null&&f.isEditable&&setTimeout(()=>{const p=f.state.selection;p&&f.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(u,h)=>{var f;const p=(f=h.clipboardData)==null?void 0:f.getData("text/html");return o=h,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(u,h,f)=>{const p=u[0],g=p.getMeta("uiEvent")==="paste"&&!i,y=p.getMeta("uiEvent")==="drop"&&!s,b=p.getMeta("applyPasteRules"),x=!!b;if(!g&&!y&&!x)return;if(x){let{text:E}=b;typeof E=="string"?E=E:E=Ud(oe.from(E),f.schema);const{from:C}=b,N=C+E.length,j=e_(E);return l({rule:d,state:f,from:C,to:{b:N},pasteEvt:j})}const w=h.doc.content.findDiffStart(f.doc.content),v=h.doc.content.findDiffEnd(f.doc.content);if(!(!YC(w)||!v||w===v.b))return l({rule:d,state:f,from:w,to:v,pasteEvt:o})}}))}var Ga=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=o0(t),this.schema=fC(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ao(e.name,this.schema)},r=Oe(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return ea([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:ao(r.name,this.schema)},s=[],o=Oe(r,"addKeyboardShortcuts",i);let a={};if(r.type==="mark"&&Oe(r,"exitable",i)&&(a.ArrowRight=()=>$n.handleExit({editor:t,mark:r})),o){const h=Object.fromEntries(Object.entries(o()).map(([f,p])=>[f,()=>p({editor:t})]));a={...a,...h}}const l=gE(a);s.push(l);const c=Oe(r,"addInputRules",i);if(lh(r,t.options.enableInputRules)&&c){const h=c();if(h&&h.length){const f=GC({editor:t,rules:h}),p=Array.isArray(f)?f:[f];s.push(...p)}}const d=Oe(r,"addPasteRules",i);if(lh(r,t.options.enablePasteRules)&&d){const h=d();if(h&&h.length){const f=t_({editor:t,rules:h});s.push(...f)}}const u=Oe(r,"addProseMirrorPlugins",i);if(u){const h=u();s.push(...h)}return s})}get attributes(){return s0(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Li(this.extensions);return Object.fromEntries(e.filter(n=>!!Oe(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:St(n.name,this.schema)},s=Oe(n,"addNodeView",i);if(!s)return[];const o=s();if(!o)return[];const a=(l,c,d,u,h)=>{const f=Bi(l,r);return o({node:l,view:c,getPos:d,decorations:u,innerDecorations:h,editor:t,extension:n,HTMLAttributes:f})};return[n.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return ea([...this.extensions].reverse()).reduceRight((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:ao(i.name,this.schema)},o=Oe(i,"dispatchTransaction",s);return o?a=>{o.call(s,{transaction:a,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Li(this.extensions);return Object.fromEntries(e.filter(n=>!!Oe(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:ar(n.name,this.schema)},s=Oe(n,"addMarkView",i);if(!s)return[];const o=(a,l,c)=>{const d=Bi(a,r);return s()({mark:a,view:l,inline:c,editor:t,extension:n,HTMLAttributes:d,updateAttributes:u=>{y_(a,t,u)}})};return[n.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ao(e.name,this.schema)};e.type==="mark"&&((n=Qe(Oe(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=Oe(e,"onBeforeCreate",r),s=Oe(e,"onCreate",r),o=Oe(e,"onUpdate",r),a=Oe(e,"onSelectionUpdate",r),l=Oe(e,"onTransaction",r),c=Oe(e,"onFocus",r),d=Oe(e,"onBlur",r),u=Oe(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),u&&this.editor.on("destroy",u)})}};Ga.resolve=o0;Ga.sort=ea;Ga.flatten=Hd;var n_={};Bd(n_,{ClipboardTextSerializer:()=>y0,Commands:()=>b0,Delete:()=>x0,Drop:()=>v0,Editable:()=>w0,FocusEvents:()=>S0,Keymap:()=>E0,Paste:()=>C0,Tabindex:()=>_0,TextDirection:()=>N0,focusEventsPluginKey:()=>k0});var at=class g0 extends Wd{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new g0(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},y0=at.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new rt({key:new pt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),a=Math.max(...s.map(d=>d.$to.pos)),l=l0(n);return a0(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),b0=at.create({name:"commands",addCommands(){return{...Jg}}}),x0=at.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const s=()=>{var o,a,l,c;if((c=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const d=n0(t.before,[t,...e]);d0(d).forEach(f=>{d.mapping.mapResult(f.oldRange.from).deletedAfter&&d.mapping.mapResult(f.oldRange.to).deletedBefore&&d.before.nodesBetween(f.oldRange.from,f.oldRange.to,(p,g)=>{const y=g+p.nodeSize-2,b=f.oldRange.from<=g&&y<=f.oldRange.to;this.editor.emit("delete",{type:"node",node:p,from:g,to:y,newFrom:d.mapping.map(g),newTo:d.mapping.map(y),deletedRange:f.oldRange,newRange:f.newRange,partial:!b,editor:this.editor,transaction:t,combinedTransform:d})})});const h=d.mapping;d.steps.forEach((f,p)=>{var g,y;if(f instanceof Tn){const b=h.slice(p).map(f.from,-1),x=h.slice(p).map(f.to),w=h.invert().map(b,-1),v=h.invert().map(x),E=(g=d.doc.nodeAt(b-1))==null?void 0:g.marks.some(N=>N.eq(f.mark)),C=(y=d.doc.nodeAt(x))==null?void 0:y.marks.some(N=>N.eq(f.mark));this.editor.emit("delete",{type:"mark",mark:f.mark,from:f.from,to:f.to,deletedRange:{from:w,to:v},newRange:{from:b,to:x},partial:!!(C||E),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),v0=at.create({name:"drop",addProseMirrorPlugins(){return[new rt({key:new pt("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),w0=at.create({name:"editable",addProseMirrorPlugins(){return[new rt({key:new pt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),k0=new pt("focusEvents"),S0=at.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new rt({key:k0,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),E0=at.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:u}=l,{pos:h,parent:f}=u,p=u.parent.isTextblock&&h>0?a.doc.resolve(h-1):u,g=p.parent.type.spec.isolating,y=u.pos-u.parentOffset,b=g&&p.parent.childCount===1?y===u.pos:De.atStart(c).from===h;return!d||!f.type.isTextblock||f.textContent.length||!b||b&&u.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Is()||e0()?s:i},addProseMirrorPlugins(){return[new rt({key:new pt("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=e.selection,l=De.atStart(e.doc).from,c=De.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!qa(n.doc))return;const h=n.tr,f=Ha({state:n,transaction:h}),{commands:p}=new Ua({editor:this.editor,state:f});if(p.clearNodes(),!!h.steps.length)return h}})]}}),C0=at.create({name:"paste",addProseMirrorPlugins(){return[new rt({key:new pt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),_0=at.create({name:"tabindex",addProseMirrorPlugins(){return[new rt({key:new pt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),N0=at.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Li(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new rt({key:new pt("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),r_=class ts{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new ts(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ts(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ts(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=n.isInline,a=this.pos+r+(s?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(a);if(!i&&!o&&l.depth<=this.depth)return;const c=new ts(l,this.editor,i,i||o?n:null);i&&(c.actualDepth=this.depth+1),e.push(c)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(l=>n[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},i_=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function s_(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var o_=class extends qC{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:SC,createMappablePosition:EC},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=Zg(e,this.options.autofocus);this.editorState=Si.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=s_(i_,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=i0(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[w0,y0.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),b0,S0,E0,_0,v0,C0,x0,N0.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Ga(r,this)}createCommandManager(){this.commandManager=new Ua({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Pc(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Pc(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new Gg(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(c)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=n.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!n.some(c=>c.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return c0(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return vC(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Ud(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return pC(this.state.doc,{blockSeparator:e,textSerializers:{...l0(this.schema),...n}})}get isEmpty(){return qa(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new r_(e,this)}get $doc(){return this.$pos(0)}};function $i(t){return new Ka({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Qe(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),d=c+o.length;if(Vd(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(g=>g===t.type&&g!==f.mark.type)).filter(f=>f.to>c).length)return null;d<n.to&&s.delete(d,n.to),c>n.from&&s.delete(n.from+l,c);const h=n.from+l+o.length;s.addMark(n.from+l,h,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function T0(t){return new Ka({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Qe(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let d=o+c;d>a?d=a:a=d+r[1].length;const u=r[0][r[0].length-1];s.insertText(u,o+r[0].length-1),s.replaceWith(d,a,l)}else if(r[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()},undoable:t.undoable})}function $c(t){return new Ka({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=Qe(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)},undoable:t.undoable})}function Fi(t){return new Ka({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=Qe(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&wd(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:u,storedMarks:h}=e,{splittableMarks:f}=t.editor.extensionManager,p=h||u.$to.parentOffset&&u.$from.marks();if(p){const g=p.filter(y=>f.includes(y.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const u=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(u,s).run()}const d=o.doc.resolve(n.from-1).nodeBefore;d&&d.type===t.type&&jr(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,d))&&o.join(n.from-1)},undoable:t.undoable})}var a_=t=>"touches"in t,l_=class{constructor(t){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.clientX-this.startX,c=a.clientY-this.startY;this.handleResize(l,c)},this.handleTouchMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.touches[0];if(!l)return;const c=l.clientX-this.startX,d=l.clientY-this.startY;this.handleResize(c,d)},this.handleMouseUp=()=>{if(!this.isResizing)return;const a=this.element.offsetWidth,l=this.element.offsetHeight;this.onCommit(a,l),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!1)};var e,n,r,i,s,o;this.node=t.node,this.editor=t.editor,this.element=t.element,this.contentElement=t.contentElement,this.getPos=t.getPos,this.onResize=t.onResize,this.onCommit=t.onCommit,this.onUpdate=t.onUpdate,(e=t.options)!=null&&e.min&&(this.minSize={...this.minSize,...t.options.min}),(n=t.options)!=null&&n.max&&(this.maxSize=t.options.max),(r=t==null?void 0:t.options)!=null&&r.directions&&(this.directions=t.options.directions),(i=t.options)!=null&&i.preserveAspectRatio&&(this.preserveAspectRatio=t.options.preserveAspectRatio),(s=t.options)!=null&&s.className&&(this.classNames={container:t.options.className.container||"",wrapper:t.options.className.wrapper||"",handle:t.options.className.handle||"",resizing:t.options.className.resizing||""}),(o=t.options)!=null&&o.createCustomHandle&&(this.createCustomHandle=t.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){var t;return(t=this.contentElement)!=null?t:null}handleEditorUpdate(){const t=this.editor.isEditable;t!==this.lastEditableState&&(this.lastEditableState=t,t?t&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(t,e,n){return t.type!==this.node.type?!1:(this.node=t,this.onUpdate?this.onUpdate(t,e,n):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const t=document.createElement("div");return t.dataset.resizeContainer="",t.dataset.node=this.node.type.name,t.style.display="flex",this.classNames.container&&(t.className=this.classNames.container),t.appendChild(this.wrapper),t}createWrapper(){const t=document.createElement("div");return t.style.position="relative",t.style.display="block",t.dataset.resizeWrapper="",this.classNames.wrapper&&(t.className=this.classNames.wrapper),t.appendChild(this.element),t}createHandle(t){const e=document.createElement("div");return e.dataset.resizeHandle=t,e.style.position="absolute",this.classNames.handle&&(e.className=this.classNames.handle),e}positionHandle(t,e){const n=e.includes("top"),r=e.includes("bottom"),i=e.includes("left"),s=e.includes("right");n&&(t.style.top="0"),r&&(t.style.bottom="0"),i&&(t.style.left="0"),s&&(t.style.right="0"),(e==="top"||e==="bottom")&&(t.style.left="0",t.style.right="0"),(e==="left"||e==="right")&&(t.style.top="0",t.style.bottom="0")}attachHandles(){this.directions.forEach(t=>{let e;this.createCustomHandle?e=this.createCustomHandle(t):e=this.createHandle(t),e instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${t}") did not return an HTMLElement. Falling back to default handle.`),e=this.createHandle(t)),this.createCustomHandle||this.positionHandle(e,t),e.addEventListener("mousedown",n=>this.handleResizeStart(n,t)),e.addEventListener("touchstart",n=>this.handleResizeStart(n,t)),this.handleMap.set(t,e),this.wrapper.appendChild(e)})}removeHandles(){this.handleMap.forEach(t=>t.remove()),this.handleMap.clear()}applyInitialSize(){const t=this.node.attrs.width,e=this.node.attrs.height;t?(this.element.style.width=`${t}px`,this.initialWidth=t):this.initialWidth=this.element.offsetWidth,e?(this.element.style.height=`${e}px`,this.initialHeight=e):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(t,e){t.preventDefault(),t.stopPropagation(),this.isResizing=!0,this.activeHandle=e,a_(t)?(this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY):(this.startX=t.clientX,this.startY=t.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(t,e){if(!this.activeHandle)return;const n=this.preserveAspectRatio||this.isShiftKeyPressed,{width:r,height:i}=this.calculateNewDimensions(this.activeHandle,t,e),s=this.applyConstraints(r,i,n);this.element.style.width=`${s.width}px`,this.element.style.height=`${s.height}px`,this.onResize&&this.onResize(s.width,s.height)}calculateNewDimensions(t,e,n){let r=this.startWidth,i=this.startHeight;const s=t.includes("right"),o=t.includes("left"),a=t.includes("bottom"),l=t.includes("top");return s?r=this.startWidth+e:o&&(r=this.startWidth-e),a?i=this.startHeight+n:l&&(i=this.startHeight-n),(t==="right"||t==="left")&&(r=this.startWidth+(s?e:-e)),(t==="top"||t==="bottom")&&(i=this.startHeight+(a?n:-n)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(r,i,t):{width:r,height:i}}applyConstraints(t,e,n){var r,i,s,o;if(!n){let c=Math.max(this.minSize.width,t),d=Math.max(this.minSize.height,e);return(r=this.maxSize)!=null&&r.width&&(c=Math.min(this.maxSize.width,c)),(i=this.maxSize)!=null&&i.height&&(d=Math.min(this.maxSize.height,d)),{width:c,height:d}}let a=t,l=e;return a<this.minSize.width&&(a=this.minSize.width,l=a/this.aspectRatio),l<this.minSize.height&&(l=this.minSize.height,a=l*this.aspectRatio),(s=this.maxSize)!=null&&s.width&&a>this.maxSize.width&&(a=this.maxSize.width,l=a/this.aspectRatio),(o=this.maxSize)!=null&&o.height&&l>this.maxSize.height&&(l=this.maxSize.height,a=l*this.aspectRatio),{width:a,height:l}}applyAspectRatio(t,e,n){const r=n==="left"||n==="right",i=n==="top"||n==="bottom";return r?{width:t,height:t/this.aspectRatio}:i?{width:e*this.aspectRatio,height:e}:{width:t,height:t/this.aspectRatio}}};function c_(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof je){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}function d_(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var u_={};Bd(u_,{createAtomBlockMarkdownSpec:()=>f_,createBlockMarkdownSpec:()=>h_,createInlineMarkdownSpec:()=>g_,parseAttributes:()=>qd,parseIndentedBlocks:()=>Fc,renderNestedMarkdownContent:()=>Gd,serializeAttributes:()=>Kd});function qd(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,c=>(n.push(c),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const c=i.map(d=>d.trim().slice(1));e.class=c.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,c,d])=>{var u;const h=parseInt(((u=d.match(/__QUOTED_(\d+)__/))==null?void 0:u[1])||"0",10),f=n[h];f&&(e[c]=f.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function Kd(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function f_(t){const{nodeName:e,name:n,parseAttributes:r=qd,serializeAttributes:i=Kd,defaultAttributes:s={},requiredAttributes:o=[],allowedAttributes:a}=t,l=n||e,c=d=>{if(!a)return d;const u={};return a.forEach(h=>{h in d&&(u[h]=d[h])}),u};return{parseMarkdown:(d,u)=>{const h={...s,...d.attributes};return u.createNode(e,h,[])},markdownTokenizer:{name:e,level:"block",start(d){var u;const h=new RegExp(`^:::${l}(?:\\s|$)`,"m"),f=(u=d.match(h))==null?void 0:u.index;return f!==void 0?f:-1},tokenize(d,u,h){const f=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),p=d.match(f);if(!p)return;const g=p[1]||"",y=r(g);if(!o.find(x=>!(x in y)))return{type:e,raw:p[0],attributes:y}}},renderMarkdown:d=>{const u=c(d.attrs||{}),h=i(u),f=h?` {${h}}`:"";return`:::${l}${f} :::`}}}function h_(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=qd,serializeAttributes:s=Kd,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,c=n||e,d=u=>{if(!l)return u;const h={};return l.forEach(f=>{f in u&&(h[f]=u[f])}),h};return{parseMarkdown:(u,h)=>{let f;if(r){const g=r(u);f=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?f=h.parseChildren(u.tokens||[]):f=h.parseInline(u.tokens||[]);const p={...o,...u.attributes};return h.createNode(e,p,f)},markdownTokenizer:{name:e,level:"block",start(u){var h;const f=new RegExp(`^:::${c}`,"m"),p=(h=u.match(f))==null?void 0:h.index;return p!==void 0?p:-1},tokenize(u,h,f){var p;const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),y=u.match(g);if(!y)return;const[b,x=""]=y,w=i(x);let v=1;const E=b.length;let C="";const N=/^:::([\w-]*)(\s.*)?/gm,j=u.slice(E);for(N.lastIndex=0;;){const M=N.exec(j);if(M===null)break;const T=M.index,P=M[1];if(!((p=M[2])!=null&&p.endsWith(":::"))){if(P)v+=1;else if(v-=1,v===0){const _=j.slice(0,T);C=_.trim();const z=u.slice(0,E+T+M[0].length);let k=[];if(C)if(a==="block")for(k=f.blockTokens(_),k.forEach(L=>{L.text&&(!L.tokens||L.tokens.length===0)&&(L.tokens=f.inlineTokens(L.text))});k.length>0;){const L=k[k.length-1];if(L.type==="paragraph"&&(!L.text||L.text.trim()===""))k.pop();else break}else k=f.inlineTokens(C);return{type:e,raw:z,attributes:w,content:C,tokens:k}}}}}},renderMarkdown:(u,h)=>{const f=d(u.attrs||{}),p=s(f),g=p?` {${p}}`:"",y=h.renderChildren(u.content||[],`

`);return`:::${c}${g}

${y}

:::`}}}function p_(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,s,o]=r;e[i]=s||o,r=n.exec(t)}return e}function m_(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function g_(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=p_,serializeAttributes:s=m_,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,c=n||e,d=h=>{if(!l)return h;const f={};return l.forEach(p=>{const g=typeof p=="string"?p:p.name,y=typeof p=="string"?void 0:p.skipIfDefault;if(g in h){const b=h[g];if(y!==void 0&&b===y)return;f[g]=b}}),f},u=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(h,f)=>{const p={...o,...h.attributes};if(a)return f.createNode(e,p);const g=r?r(h):h.content||"";return g?f.createNode(e,p,[f.createTextNode(g)]):f.createNode(e,p,[])},markdownTokenizer:{name:e,level:"inline",start(h){const f=a?new RegExp(`\\[${u}\\s*[^\\]]*\\]`):new RegExp(`\\[${u}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${u}\\]`),p=h.match(f),g=p==null?void 0:p.index;return g!==void 0?g:-1},tokenize(h,f,p){const g=a?new RegExp(`^\\[${u}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${u}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${u}\\]`),y=h.match(g);if(!y)return;let b="",x="";if(a){const[,v]=y;x=v}else{const[,v,E]=y;x=v,b=E||""}const w=i(x.trim());return{type:e,raw:y[0],content:b.trim(),attributes:w}}},renderMarkdown:h=>{let f="";r?f=r(h):h.content&&h.content.length>0&&(f=h.content.filter(b=>b.type==="text").map(b=>b.text).join(""));const p=d(h.attrs||{}),g=s(p),y=g?` ${g}`:"";return a?`[${c}${y}]`:`[${c}${y}]${f}[/${c}]`}}}function Fc(t,e,n){var r,i,s,o;const a=t.split(`
`),l=[];let c="",d=0;const u=e.baseIndentSize||2;for(;d<a.length;){const h=a[d],f=h.match(e.itemPattern);if(!f){if(l.length>0)break;if(h.trim()===""){d+=1,c=`${c}${h}
`;continue}else return}const p=e.extractItemData(f),{indentLevel:g,mainContent:y}=p;c=`${c}${h}
`;const b=[y];for(d+=1;d<a.length;){const E=a[d];if(E.trim()===""){const N=a.slice(d+1).findIndex(T=>T.trim()!=="");if(N===-1)break;if((((i=(r=a[d+1+N].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>g){b.push(E),c=`${c}${E}
`,d+=1;continue}else break}if((((o=(s=E.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:o.length)||0)>g)b.push(E),c=`${c}${E}
`,d+=1;else break}let x;const w=b.slice(1);if(w.length>0){const E=w.map(C=>C.slice(g+u)).join(`
`);E.trim()&&(e.customNestedParser?x=e.customNestedParser(E):x=n.blockTokens(E))}const v=e.createToken(p,x);l.push(v)}if(l.length!==0)return{items:l,raw:c}}function Gd(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[s,...o]=t.content,a=e.renderChildren([s]),l=[`${i}${a}`];return o&&o.length>0&&o.forEach(c=>{const d=e.renderChildren([c]);if(d){const u=d.split(`
`).map(h=>h?e.indent(h):"").join(`
`);l.push(u)}}),l.join(`
`)}function y_(t,e,n={}){const{state:r}=e,{doc:i,tr:s}=r,o=t;i.descendants((a,l)=>{const c=s.mapping.map(l),d=s.mapping.map(l)+a.nodeSize;let u=null;if(a.marks.forEach(f=>{if(f!==o)return!1;u=f}),!u)return;let h=!1;if(Object.keys(n).forEach(f=>{n[f]!==u.attrs[f]&&(h=!0)}),h){const f=t.type.create({...t.attrs,...n});s.removeMark(c,d,t.type),s.addMark(c,d,f)}}),s.docChanged&&e.view.dispatch(s)}var _t=class A0 extends Wd{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new A0(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},b_=class{constructor(t,e,n){this.isDragging=!1,this.component=t,this.editor=e.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=e.extension,this.node=e.node,this.decorations=e.decorations,this.innerDecorations=e.innerDecorations,this.view=e.view,this.HTMLAttributes=e.HTMLAttributes,this.getPos=e.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var e,n,r,i,s,o,a;const{view:l}=this.editor,c=t.target,d=c.nodeType===3?(e=c.parentElement)==null?void 0:e.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||(n=this.contentDOM)!=null&&n.contains(c)||!d)return;let u=0,h=0;if(this.dom!==d){const x=this.dom.getBoundingClientRect(),w=d.getBoundingClientRect(),v=(i=t.offsetX)!=null?i:(r=t.nativeEvent)==null?void 0:r.offsetX,E=(o=t.offsetY)!=null?o:(s=t.nativeEvent)==null?void 0:s.offsetY;u=w.x-x.x+v,h=w.y-x.y+E}const f=this.dom.cloneNode(!0);try{const x=this.dom.getBoundingClientRect();f.style.width=`${Math.round(x.width)}px`,f.style.height=`${Math.round(x.height)}px`,f.style.boxSizing="border-box",f.style.pointerEvents="none"}catch{}let p=null;try{p=document.createElement("div"),p.style.position="absolute",p.style.top="-9999px",p.style.left="-9999px",p.style.pointerEvents="none",p.appendChild(f),document.body.appendChild(p),(a=t.dataTransfer)==null||a.setDragImage(f,u,h)}finally{p&&setTimeout(()=>{try{p==null||p.remove()}catch{}},0)}const g=this.getPos();if(typeof g!="number")return;const y=je.create(l.state.doc,g),b=l.state.tr.setSelection(y);l.dispatch(b)}stopEvent(t){var e;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:t});const n=t.target;if(!(this.dom.contains(n)&&!((e=this.contentDOM)!=null&&e.contains(n))))return!1;const i=t.type.startsWith("drag"),s=t.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!s&&!i)return!0;const{isEditable:a}=this.editor,{isDragging:l}=this,c=!!this.node.type.spec.draggable,d=je.isSelectable(this.node),u=t.type==="copy",h=t.type==="paste",f=t.type==="cut",p=t.type==="mousedown";if(!c&&d&&i&&t.target===this.dom&&t.preventDefault(),c&&i&&!l&&t.target===this.dom)return t.preventDefault(),!1;if(c&&a&&!l&&p){const g=n.closest("[data-drag-handle]");g&&(this.dom===g||this.dom.contains(g))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(l||s||u||h||f||p&&d)}ignoreMutation(t){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:t}):this.node.isLeaf||this.node.isAtom?!0:t.type==="selection"||this.dom.contains(t.target)&&t.type==="childList"&&(Is()||Dc())&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(n=>n.isContentEditable)?!1:this.contentDOM===t.target&&t.type==="attributes"?!0:!this.contentDOM.contains(t.target)}updateAttributes(t){this.editor.commands.command(({tr:e})=>{const n=this.getPos();return typeof n!="number"?!1:(e.setNodeMarkup(n,void 0,{...this.node.attrs,...t}),!0)})}deleteNode(){const t=this.getPos();if(typeof t!="number")return;const e=t+this.node.nodeSize;this.editor.commands.deleteRange({from:t,to:e})}};function di(t){return new XC({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=Qe(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const d=l.search(/\S/),u=n.from+l.indexOf(a),h=u+a.length;if(Vd(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(y=>y===t.type&&y!==p.mark.type)).filter(p=>p.to>u).length)return null;h<n.to&&o.delete(h,n.to),u>n.from&&o.delete(n.from+d,u),c=n.from+d+a.length,o.addMark(n.from+d,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:x_,getOwnPropertySymbols:v_}=Object,{hasOwnProperty:w_}=Object.prototype;function Ml(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function fo(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:s}=i,o=s.get(n),a=s.get(r);if(o&&a)return o===r&&a===n;s.set(n,r),s.set(r,n);const l=t(n,r,i);return s.delete(n),s.delete(r),l}}function k_(t){return t!=null?t[Symbol.toStringTag]:void 0}function uh(t){return x_(t).concat(v_(t))}const S_=Object.hasOwn||((t,e)=>w_.call(t,e));function pi(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const E_="__v",C_="__o",__="_owner",{getOwnPropertyDescriptor:fh,keys:hh}=Object;function N_(t,e){return t.byteLength===e.byteLength&&ta(new Uint8Array(t),new Uint8Array(e))}function T_(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function A_(t,e){return t.byteLength===e.byteLength&&ta(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function M_(t,e){return pi(t.getTime(),e.getTime())}function O_(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function j_(t,e){return t===e}function ph(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.entries();let o,a,l=0;for(;(o=s.next())&&!o.done;){const c=e.entries();let d=!1,u=0;for(;(a=c.next())&&!a.done;){if(i[u]){u++;continue}const h=o.value,f=a.value;if(n.equals(h[0],f[0],l,u,t,e,n)&&n.equals(h[1],f[1],h[0],f[0],t,e,n)){d=i[u]=!0;break}u++}if(!d)return!1;l++}return!0}const z_=pi;function I_(t,e,n){const r=hh(t);let i=r.length;if(hh(e).length!==i)return!1;for(;i-- >0;)if(!M0(t,e,n,r[i]))return!1;return!0}function Gi(t,e,n){const r=uh(t);let i=r.length;if(uh(e).length!==i)return!1;let s,o,a;for(;i-- >0;)if(s=r[i],!M0(t,e,n,s)||(o=fh(t,s),a=fh(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function R_(t,e){return pi(t.valueOf(),e.valueOf())}function D_(t,e){return t.source===e.source&&t.flags===e.flags}function mh(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.values();let o,a;for(;(o=s.next())&&!o.done;){const l=e.values();let c=!1,d=0;for(;(a=l.next())&&!a.done;){if(!i[d]&&n.equals(o.value,a.value,o.value,a.value,t,e,n)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function ta(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function P_(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function M0(t,e,n,r){return(r===__||r===C_||r===E_)&&(t.$$typeof||e.$$typeof)?!0:S_(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const L_="[object ArrayBuffer]",B_="[object Arguments]",$_="[object Boolean]",F_="[object DataView]",H_="[object Date]",U_="[object Error]",V_="[object Map]",W_="[object Number]",q_="[object Object]",K_="[object RegExp]",G_="[object Set]",J_="[object String]",Y_={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},X_="[object URL]",Z_=Object.prototype.toString;function Q_({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:d,areSetsEqual:u,areTypedArraysEqual:h,areUrlsEqual:f,unknownTagComparators:p}){return function(y,b,x){if(y===b)return!0;if(y==null||b==null)return!1;const w=typeof y;if(w!==typeof b)return!1;if(w!=="object")return w==="number"?a(y,b,x):w==="function"?s(y,b,x):!1;const v=y.constructor;if(v!==b.constructor)return!1;if(v===Object)return l(y,b,x);if(Array.isArray(y))return e(y,b,x);if(v===Date)return r(y,b,x);if(v===RegExp)return d(y,b,x);if(v===Map)return o(y,b,x);if(v===Set)return u(y,b,x);const E=Z_.call(y);if(E===H_)return r(y,b,x);if(E===K_)return d(y,b,x);if(E===V_)return o(y,b,x);if(E===G_)return u(y,b,x);if(E===q_)return typeof y.then!="function"&&typeof b.then!="function"&&l(y,b,x);if(E===X_)return f(y,b,x);if(E===U_)return i(y,b,x);if(E===B_)return l(y,b,x);if(Y_[E])return h(y,b,x);if(E===L_)return t(y,b,x);if(E===F_)return n(y,b,x);if(E===$_||E===W_||E===J_)return c(y,b,x);if(p){let C=p[E];if(!C){const N=k_(y);N&&(C=p[N])}if(C)return C(y,b,x)}return!1}}function eN({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:N_,areArraysEqual:n?Gi:T_,areDataViewsEqual:A_,areDatesEqual:M_,areErrorsEqual:O_,areFunctionsEqual:j_,areMapsEqual:n?Ml(ph,Gi):ph,areNumbersEqual:z_,areObjectsEqual:n?Gi:I_,arePrimitiveWrappersEqual:R_,areRegExpsEqual:D_,areSetsEqual:n?Ml(mh,Gi):mh,areTypedArraysEqual:n?Ml(ta,Gi):ta,areUrlsEqual:P_,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=fo(r.areArraysEqual),s=fo(r.areMapsEqual),o=fo(r.areObjectsEqual),a=fo(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:a})}return r}function tN(t){return function(e,n,r,i,s,o,a){return t(e,n,a)}}function nN({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(a,l){const{cache:c=t?new WeakMap:void 0,meta:d}=n();return e(a,l,{cache:c,equals:r,meta:d,strict:i})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(a,l){return e(a,l,s)}}const rN=Ir();Ir({strict:!0});Ir({circular:!0});Ir({circular:!0,strict:!0});Ir({createInternalComparator:()=>pi});Ir({strict:!0,createInternalComparator:()=>pi});Ir({circular:!0,createInternalComparator:()=>pi});Ir({circular:!0,createInternalComparator:()=>pi,strict:!0});function Ir(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,s=eN(t),o=Q_(s),a=n?n(o):tN(o);return nN({circular:e,comparator:o,createState:r,equals:a,strict:i})}var Ol={exports:{}},jl={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gh;function iN(){if(gh)return jl;gh=1;var t=Bt(),e=vm();function n(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return jl.useSyncExternalStoreWithSelector=function(c,d,u,h,f){var p=s(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=a(function(){function b(C){if(!x){if(x=!0,w=C,C=h(C),f!==void 0&&g.hasValue){var N=g.value;if(f(N,C))return v=N}return v=C}if(N=v,r(w,C))return N;var j=h(C);return f!==void 0&&f(N,j)?(w=C,N):(w=C,v=j)}var x=!1,w,v,E=u===void 0?null:u;return[function(){return b(d())},E===null?void 0:function(){return b(E())}]},[d,u,h,f]);var y=i(c,p[0],p[1]);return o(function(){g.hasValue=!0,g.value=y},[y]),l(y),y},jl}var yh;function sN(){return yh||(yh=1,Ol.exports=iN()),Ol.exports}var oN=sN(),aN=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},lN=({contentComponent:t})=>{const e=wm.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return m.jsx(m.Fragment,{children:Object.values(e)})};function cN(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:uk.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var dN=class extends Q.Component{constructor(t){var e;super(t),this.editorContentRef=Q.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=cN(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:aN(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&m.jsx(lN,{contentComponent:t.contentComponent})]})}},uN=$.forwardRef((t,e)=>{const n=Q.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Q.createElement(dN,{key:n,innerRef:e,...t})}),O0=Q.memo(uN),fN=typeof window<"u"?$.useLayoutEffect:$.useEffect,hN=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function pN(t){var e;const[n]=$.useState(()=>new hN(t.editor)),r=oN.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:rN);return fN(()=>n.watch(t.editor),[t.editor,n]),$.useDebugValue(r),r}var mN=!1,Hc=typeof window>"u",gN=Hc||!!(typeof window<"u"&&window.next),yN=class j0{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Hc||gN?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new o_(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?j0.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function bN(t={},e=[]){const n=$.useRef(t);n.current=t;const[r]=$.useState(()=>new yN(n)),i=wm.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return $.useDebugValue(i),$.useEffect(r.onRender(e)),pN({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var z0=$.createContext({editor:null});z0.Consumer;var I0=$.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),xN=()=>$.useContext(I0),na=Q.forwardRef((t,e)=>{const{onDragStart:n}=xN(),r=t.as||"div";return m.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function bh(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function xh(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.forward_ref)"||t.$$typeof.description==="react.forward_ref"))}function vN(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.memo)"||t.$$typeof.description==="react.memo"))}function wN(t){if(bh(t)||xh(t))return!0;if(vN(t)){const e=t.type;if(e)return bh(e)||xh(e)}return!1}function kN(){try{if($.version)return parseInt($.version.split(".")[0],10)>=19}catch{}return!1}var R0=class{constructor(t,{editor:e,props:n={},as:r="div",className:i=""}){this.ref=null,this.destroyed=!1,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=t,this.editor=e,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?xm.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.destroyed||this.render()})}render(){var t;if(this.destroyed)return;const e=this.component,n=this.props,r=this.editor,i=kN(),s=wN(e),o={...n};o.ref&&!(i||s)&&delete o.ref,!o.ref&&(i||s)&&(o.ref=a=>{this.ref=a}),this.reactElement=m.jsx(e,{...o}),(t=r==null?void 0:r.contentComponent)==null||t.setRenderer(this.id,this)}updateProps(t={}){this.destroyed||(this.props={...this.props,...t},this.render())}destroy(){var t;this.destroyed=!0;const e=this.editor;(t=e==null?void 0:e.contentComponent)==null||t.removeRenderer(this.id);try{this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}catch{}}updateAttributes(t){Object.keys(t).forEach(e=>{this.element.setAttribute(e,t[e])})}};Q.createContext({markViewContentRef:()=>{}});var SN=class extends b_{constructor(t,e,n){if(super(t,e,n),this.selectionRafId=null,this.cachedExtensionWithSyncedStorage=null,!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const r=this.dom.querySelector("[data-node-view-content]");if(!r)return;r.appendChild(this.contentDOMElement)}}get extensionWithSyncedStorage(){if(!this.cachedExtensionWithSyncedStorage){const t=this.editor,e=this.extension;this.cachedExtensionWithSyncedStorage=new Proxy(e,{get(n,r,i){var s;return r==="storage"?(s=t.storage[e.name])!=null?s:{}:Reflect.get(n,r,i)}})}return this.cachedExtensionWithSyncedStorage}mount(){const t={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extensionWithSyncedStorage,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(l={})=>this.updateAttributes(l),deleteNode:()=>this.deleteNode(),ref:$.createRef()};if(!this.component.displayName){const l=c=>c.charAt(0).toUpperCase()+c.substring(1);this.component.displayName=l(this.extension.name)}const r={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:l=>{l&&this.contentDOMElement&&l.firstChild!==this.contentDOMElement&&(l.hasAttribute("data-node-view-wrapper")&&l.removeAttribute("data-node-view-wrapper"),l.appendChild(this.contentDOMElement))}},i=this.component,s=$.memo(l=>m.jsx(I0.Provider,{value:r,children:$.createElement(i,l)}));s.displayName="ReactNodeView";let o=this.node.isInline?"span":"div";this.options.as&&(o=this.options.as);const{className:a=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new R0(s,{editor:this.editor,props:t,as:o,className:`node-${this.node.type.name} ${a}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var t;if(this.renderer.element.firstElementChild&&!((t=this.renderer.element.firstElementChild)!=null&&t.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null),this.selectionRafId=requestAnimationFrame(()=>{this.selectionRafId=null;const{from:t,to:e}=this.editor.state.selection,n=this.getPos();if(typeof n=="number")if(t<=n&&e>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}})}update(t,e,n){const r=i=>{this.renderer.updateProps(i),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(t.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const i=this.node,s=this.decorations,o=this.innerDecorations;return this.node=t,this.decorations=e,this.innerDecorations=n,this.options.update({oldNode:i,oldDecorations:s,newNode:t,newDecorations:e,oldInnerDecorations:o,innerDecorations:n,updateProps:()=>r({node:t,decorations:e,innerDecorations:n,extension:this.extensionWithSyncedStorage})})}return t===this.node&&this.decorations===e&&this.innerDecorations===n||(this.node=t,this.decorations=e,this.innerDecorations=n,r({node:t,decorations:e,innerDecorations:n,extension:this.extensionWithSyncedStorage})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null,this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null)}updateElementAttributes(){if(this.options.attrs){let t={};if(typeof this.options.attrs=="function"){const e=this.editor.extensionManager.attributes,n=Bi(this.node,e);t=this.options.attrs({node:this.node,HTMLAttributes:n})}else t=this.options.attrs;this.renderer.updateAttributes(t)}}};function Jd(t,e){return n=>n.editor.contentComponent?new SN(t,n,e):{}}var Yd=$.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});Yd.displayName="TiptapContext";var EN=()=>$.useContext(Yd);function D0({editor:t,instance:e,children:n}){const r=t??e;if(!r)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const i=$.useMemo(()=>({editor:r}),[r]),s=$.useMemo(()=>({editor:r}),[r]);return m.jsx(z0.Provider,{value:s,children:m.jsx(Yd.Provider,{value:i,children:n})})}D0.displayName="Tiptap";function P0({...t}){const{editor:e}=EN();return m.jsx(O0,{editor:e,...t})}P0.displayName="Tiptap.Content";Object.assign(D0,{Content:P0});var CN=_t.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),_N=CN,vh="&nbsp;",NN="",TN=_t.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",ot(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];if(n.length===1&&n[0].type==="image")return e.parseChildren([n[0]]);const r=e.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===vh||r[0].text===NN)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,r)},renderMarkdown:(t,e)=>{if(!t)return"";const n=Array.isArray(t.content)?t.content:[];return n.length===0?vh:e.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),AN=TN,MN=_t.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),ON=MN,ra=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},jN=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,zN=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,IN=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,RN=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,DN=$n.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return ra("strong",{...ot(this.options.HTMLAttributes,t),children:ra("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[$i({find:jN,type:this.type}),$i({find:IN,type:this.type})]},addPasteRules(){return[di({find:zN,type:this.type}),di({find:RN,type:this.type})]}}),PN=DN,LN=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,BN=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,$N=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,FN=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,HN=$n.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",ot(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[$i({find:LN,type:this.type}),$i({find:$N,type:this.type})]},addPasteRules(){return[di({find:BN,type:this.type}),di({find:FN,type:this.type})]}}),UN=HN,VN=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,WN=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,qN=$n.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",ot(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[$i({find:VN,type:this.type})]},addPasteRules(){return[di({find:WN,type:this.type})]}}),KN=qN,GN=/(^|[^`])`([^`]+)`(?!`)$/,JN=/(^|[^`])`([^`]+)`(?!`)/g,YN=$n.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",ot(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[$i({find:GN,type:this.type})]},addPasteRules(){return[di({find:JN,type:this.type})]}}),XN=YN,zl=4,ZN=/^```([a-z]+)?[\s\n]$/,QN=/^~~~([a-z]+)?[\s\n]$/,eT=_t.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:zl,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",ot(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:zl,{state:r}=t,{selection:i}=r,{$from:s,empty:o}=i;if(s.parent.type!==this.type)return!1;const a=" ".repeat(n);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:c,to:d}=i,f=r.doc.textBetween(c,d,`
`,`
`).split(`
`).map(p=>a+p).join(`
`);return l.replaceWith(c,d,r.schema.text(f)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:zl,{state:r}=t,{selection:i}=r,{$from:s,empty:o}=i;return s.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:c}=s,d=s.start(),u=s.end(),f=r.doc.textBetween(d,u,`
`,`
`).split(`
`);let p=0,g=0;const y=c-d;for(let C=0;C<f.length;C+=1){if(g+f[C].length>=y){p=C;break}g+=f[C].length+1}const x=((l=f[p].match(/^ */))==null?void 0:l[0])||"",w=Math.min(x.length,n);if(w===0)return!0;let v=d;for(let C=0;C<p;C+=1)v+=f[C].length+1;return a.delete(v,v+w),c-v<=w&&a.setSelection(Ie.create(a.doc,v)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:c}=i,h=r.doc.textBetween(l,c,`
`,`
`).split(`
`).map(f=>{var p;const g=((p=f.match(/^ */))==null?void 0:p[0])||"",y=Math.min(g.length,n);return f.slice(y)}).join(`
`);return a.replaceWith(l,c,r.schema.text(h)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(De.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[$c({find:ZN,type:this.type,getAttributes:t=>({language:t[1]})}),$c({find:QN,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new rt({key:new pt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Ie.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),tT=eT,Il,wh;function nT(){if(wh)return Il;wh=1;function t(R){return R instanceof Map?R.clear=R.delete=R.set=function(){throw new Error("map is read-only")}:R instanceof Set&&(R.add=R.clear=R.delete=function(){throw new Error("set is read-only")}),Object.freeze(R),Object.getOwnPropertyNames(R).forEach(X=>{const me=R[X],Ae=typeof me;(Ae==="object"||Ae==="function")&&!Object.isFrozen(me)&&t(me)}),R}class e{constructor(X){X.data===void 0&&(X.data={}),this.data=X.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function n(R){return R.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(R,...X){const me=Object.create(null);for(const Ae in R)me[Ae]=R[Ae];return X.forEach(function(Ae){for(const ee in Ae)me[ee]=Ae[ee]}),me}const i="</span>",s=R=>!!R.scope,o=(R,{prefix:X})=>{if(R.startsWith("language:"))return R.replace("language:","language-");if(R.includes(".")){const me=R.split(".");return[`${X}${me.shift()}`,...me.map((Ae,ee)=>`${Ae}${"_".repeat(ee+1)}`)].join(" ")}return`${X}${R}`};class a{constructor(X,me){this.buffer="",this.classPrefix=me.classPrefix,X.walk(this)}addText(X){this.buffer+=n(X)}openNode(X){if(!s(X))return;const me=o(X.scope,{prefix:this.classPrefix});this.span(me)}closeNode(X){s(X)&&(this.buffer+=i)}value(){return this.buffer}span(X){this.buffer+=`<span class="${X}">`}}const l=(R={})=>{const X={children:[]};return Object.assign(X,R),X};class c{constructor(){this.rootNode=l(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(X){this.top.children.push(X)}openNode(X){const me=l({scope:X});this.add(me),this.stack.push(me)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(X){return this.constructor._walk(X,this.rootNode)}static _walk(X,me){return typeof me=="string"?X.addText(me):me.children&&(X.openNode(me),me.children.forEach(Ae=>this._walk(X,Ae)),X.closeNode(me)),X}static _collapse(X){typeof X!="string"&&X.children&&(X.children.every(me=>typeof me=="string")?X.children=[X.children.join("")]:X.children.forEach(me=>{c._collapse(me)}))}}class d extends c{constructor(X){super(),this.options=X}addText(X){X!==""&&this.add(X)}startScope(X){this.openNode(X)}endScope(){this.closeNode()}__addSublanguage(X,me){const Ae=X.root;me&&(Ae.scope=`language:${me}`),this.add(Ae)}toHTML(){return new a(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function u(R){return R?typeof R=="string"?R:R.source:null}function h(R){return g("(?=",R,")")}function f(R){return g("(?:",R,")*")}function p(R){return g("(?:",R,")?")}function g(...R){return R.map(me=>u(me)).join("")}function y(R){const X=R[R.length-1];return typeof X=="object"&&X.constructor===Object?(R.splice(R.length-1,1),X):{}}function b(...R){return"("+(y(R).capture?"":"?:")+R.map(Ae=>u(Ae)).join("|")+")"}function x(R){return new RegExp(R.toString()+"|").exec("").length-1}function w(R,X){const me=R&&R.exec(X);return me&&me.index===0}const v=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function E(R,{joinWith:X}){let me=0;return R.map(Ae=>{me+=1;const ee=me;let xe=u(Ae),de="";for(;xe.length>0;){const ue=v.exec(xe);if(!ue){de+=xe;break}de+=xe.substring(0,ue.index),xe=xe.substring(ue.index+ue[0].length),ue[0][0]==="\\"&&ue[1]?de+="\\"+String(Number(ue[1])+ee):(de+=ue[0],ue[0]==="("&&me++)}return de}).map(Ae=>`(${Ae})`).join(X)}const C=/\b\B/,N="[a-zA-Z]\\w*",j="[a-zA-Z_]\\w*",M="\\b\\d+(\\.\\d+)?",T="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",P="\\b(0b[01]+)",_="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",z=(R={})=>{const X=/^#![ ]*\//;return R.binary&&(R.begin=g(X,/.*\b/,R.binary,/\b.*/)),r({scope:"meta",begin:X,end:/$/,relevance:0,"on:begin":(me,Ae)=>{me.index!==0&&Ae.ignoreMatch()}},R)},k={begin:"\\\\[\\s\\S]",relevance:0},L={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[k]},W={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[k]},H={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},ie=function(R,X,me={}){const Ae=r({scope:"comment",begin:R,end:X,contains:[]},me);Ae.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const ee=b("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return Ae.contains.push({begin:g(/[ ]+/,"(",ee,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),Ae},q=ie("//","$"),fe=ie("/\\*","\\*/"),I=ie("#","$"),D={scope:"number",begin:M,relevance:0},ae={scope:"number",begin:T,relevance:0},Z={scope:"number",begin:P,relevance:0},J={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[k,{begin:/\[/,end:/\]/,relevance:0,contains:[k]}]},_e={scope:"title",begin:N,relevance:0},Pe={scope:"title",begin:j,relevance:0},ne={begin:"\\.\\s*"+j,relevance:0};var Ce=Object.freeze({__proto__:null,APOS_STRING_MODE:L,BACKSLASH_ESCAPE:k,BINARY_NUMBER_MODE:Z,BINARY_NUMBER_RE:P,COMMENT:ie,C_BLOCK_COMMENT_MODE:fe,C_LINE_COMMENT_MODE:q,C_NUMBER_MODE:ae,C_NUMBER_RE:T,END_SAME_AS_BEGIN:function(R){return Object.assign(R,{"on:begin":(X,me)=>{me.data._beginMatch=X[1]},"on:end":(X,me)=>{me.data._beginMatch!==X[1]&&me.ignoreMatch()}})},HASH_COMMENT_MODE:I,IDENT_RE:N,MATCH_NOTHING_RE:C,METHOD_GUARD:ne,NUMBER_MODE:D,NUMBER_RE:M,PHRASAL_WORDS_MODE:H,QUOTE_STRING_MODE:W,REGEXP_MODE:J,RE_STARTERS_RE:_,SHEBANG:z,TITLE_MODE:_e,UNDERSCORE_IDENT_RE:j,UNDERSCORE_TITLE_MODE:Pe});function Le(R,X){R.input[R.index-1]==="."&&X.ignoreMatch()}function Re(R,X){R.className!==void 0&&(R.scope=R.className,delete R.className)}function Ge(R,X){X&&R.beginKeywords&&(R.begin="\\b("+R.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",R.__beforeBegin=Le,R.keywords=R.keywords||R.beginKeywords,delete R.beginKeywords,R.relevance===void 0&&(R.relevance=0))}function S(R,X){Array.isArray(R.illegal)&&(R.illegal=b(...R.illegal))}function K(R,X){if(R.match){if(R.begin||R.end)throw new Error("begin & end are not supported with match");R.begin=R.match,delete R.match}}function V(R,X){R.relevance===void 0&&(R.relevance=1)}const O=(R,X)=>{if(!R.beforeMatch)return;if(R.starts)throw new Error("beforeMatch cannot be used with starts");const me=Object.assign({},R);Object.keys(R).forEach(Ae=>{delete R[Ae]}),R.keywords=me.keywords,R.begin=g(me.beforeMatch,h(me.begin)),R.starts={relevance:0,contains:[Object.assign(me,{endsParent:!0})]},R.relevance=0,delete me.beforeMatch},A=["of","and","for","in","not","or","if","then","parent","list","value"],B="keyword";function Y(R,X,me=B){const Ae=Object.create(null);return typeof R=="string"?ee(me,R.split(" ")):Array.isArray(R)?ee(me,R):Object.keys(R).forEach(function(xe){Object.assign(Ae,Y(R[xe],X,xe))}),Ae;function ee(xe,de){X&&(de=de.map(ue=>ue.toLowerCase())),de.forEach(function(ue){const Ne=ue.split("|");Ae[Ne[0]]=[xe,te(Ne[0],Ne[1])]})}}function te(R,X){return X?Number(X):F(R)?0:1}function F(R){return A.includes(R.toLowerCase())}const re={},he=R=>{console.error(R)},le=(R,...X)=>{console.log(`WARN: ${R}`,...X)},Ee=(R,X)=>{re[`${R}/${X}`]||(console.log(`Deprecated as of ${R}. ${X}`),re[`${R}/${X}`]=!0)},Fe=new Error;function Be(R,X,{key:me}){let Ae=0;const ee=R[me],xe={},de={};for(let ue=1;ue<=X.length;ue++)de[ue+Ae]=ee[ue],xe[ue+Ae]=!0,Ae+=x(X[ue-1]);R[me]=de,R[me]._emit=xe,R[me]._multi=!0}function lt(R){if(Array.isArray(R.begin)){if(R.skip||R.excludeBegin||R.returnBegin)throw he("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Fe;if(typeof R.beginScope!="object"||R.beginScope===null)throw he("beginScope must be object"),Fe;Be(R,R.begin,{key:"beginScope"}),R.begin=E(R.begin,{joinWith:""})}}function sn(R){if(Array.isArray(R.end)){if(R.skip||R.excludeEnd||R.returnEnd)throw he("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Fe;if(typeof R.endScope!="object"||R.endScope===null)throw he("endScope must be object"),Fe;Be(R,R.end,{key:"endScope"}),R.end=E(R.end,{joinWith:""})}}function Et(R){R.scope&&typeof R.scope=="object"&&R.scope!==null&&(R.beginScope=R.scope,delete R.scope)}function Zt(R){Et(R),typeof R.beginScope=="string"&&(R.beginScope={_wrap:R.beginScope}),typeof R.endScope=="string"&&(R.endScope={_wrap:R.endScope}),lt(R),sn(R)}function G(R){function X(de,ue){return new RegExp(u(de),"m"+(R.case_insensitive?"i":"")+(R.unicodeRegex?"u":"")+(ue?"g":""))}class me{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(ue,Ne){Ne.position=this.position++,this.matchIndexes[this.matchAt]=Ne,this.regexes.push([Ne,ue]),this.matchAt+=x(ue)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const ue=this.regexes.map(Ne=>Ne[1]);this.matcherRe=X(E(ue,{joinWith:"|"}),!0),this.lastIndex=0}exec(ue){this.matcherRe.lastIndex=this.lastIndex;const Ne=this.matcherRe.exec(ue);if(!Ne)return null;const ct=Ne.findIndex((lr,cr)=>cr>0&&lr!==void 0),Ve=this.matchIndexes[ct];return Ne.splice(0,ct),Object.assign(Ne,Ve)}}class Ae{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(ue){if(this.multiRegexes[ue])return this.multiRegexes[ue];const Ne=new me;return this.rules.slice(ue).forEach(([ct,Ve])=>Ne.addRule(ct,Ve)),Ne.compile(),this.multiRegexes[ue]=Ne,Ne}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(ue,Ne){this.rules.push([ue,Ne]),Ne.type==="begin"&&this.count++}exec(ue){const Ne=this.getMatcher(this.regexIndex);Ne.lastIndex=this.lastIndex;let ct=Ne.exec(ue);if(this.resumingScanAtSamePosition()&&!(ct&&ct.index===this.lastIndex)){const Ve=this.getMatcher(0);Ve.lastIndex=this.lastIndex+1,ct=Ve.exec(ue)}return ct&&(this.regexIndex+=ct.position+1,this.regexIndex===this.count&&this.considerAll()),ct}}function ee(de){const ue=new Ae;return de.contains.forEach(Ne=>ue.addRule(Ne.begin,{rule:Ne,type:"begin"})),de.terminatorEnd&&ue.addRule(de.terminatorEnd,{type:"end"}),de.illegal&&ue.addRule(de.illegal,{type:"illegal"}),ue}function xe(de,ue){const Ne=de;if(de.isCompiled)return Ne;[Re,K,Zt,O].forEach(Ve=>Ve(de,ue)),R.compilerExtensions.forEach(Ve=>Ve(de,ue)),de.__beforeBegin=null,[Ge,S,V].forEach(Ve=>Ve(de,ue)),de.isCompiled=!0;let ct=null;return typeof de.keywords=="object"&&de.keywords.$pattern&&(de.keywords=Object.assign({},de.keywords),ct=de.keywords.$pattern,delete de.keywords.$pattern),ct=ct||/\w+/,de.keywords&&(de.keywords=Y(de.keywords,R.case_insensitive)),Ne.keywordPatternRe=X(ct,!0),ue&&(de.begin||(de.begin=/\B|\b/),Ne.beginRe=X(Ne.begin),!de.end&&!de.endsWithParent&&(de.end=/\B|\b/),de.end&&(Ne.endRe=X(Ne.end)),Ne.terminatorEnd=u(Ne.end)||"",de.endsWithParent&&ue.terminatorEnd&&(Ne.terminatorEnd+=(de.end?"|":"")+ue.terminatorEnd)),de.illegal&&(Ne.illegalRe=X(de.illegal)),de.contains||(de.contains=[]),de.contains=[].concat(...de.contains.map(function(Ve){return ye(Ve==="self"?de:Ve)})),de.contains.forEach(function(Ve){xe(Ve,Ne)}),de.starts&&xe(de.starts,ue),Ne.matcher=ee(Ne),Ne}if(R.compilerExtensions||(R.compilerExtensions=[]),R.contains&&R.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return R.classNameAliases=r(R.classNameAliases||{}),xe(R)}function U(R){return R?R.endsWithParent||U(R.starts):!1}function ye(R){return R.variants&&!R.cachedVariants&&(R.cachedVariants=R.variants.map(function(X){return r(R,{variants:null},X)})),R.cachedVariants?R.cachedVariants:U(R)?r(R,{starts:R.starts?r(R.starts):null}):Object.isFrozen(R)?r(R):R}var ke="11.11.1";class $e extends Error{constructor(X,me){super(X),this.name="HTMLInjectionError",this.html=me}}const Te=n,et=r,Ze=Symbol("nomatch"),Mt=7,Ot=function(R){const X=Object.create(null),me=Object.create(null),Ae=[];let ee=!0;const xe="Could not find the language '{}', did you forget to load/include a language module?",de={disableAutodetect:!0,name:"Plain text",contains:[]};let ue={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:d};function Ne(be){return ue.noHighlightRe.test(be)}function ct(be){let ze=be.className+" ";ze+=be.parentNode?be.parentNode.className:"";const Ye=ue.languageDetectRe.exec(ze);if(Ye){const dt=dr(Ye[1]);return dt||(le(xe.replace("{}",Ye[1])),le("Falling back to no-highlight mode for this block.",be)),dt?Ye[1]:"no-highlight"}return ze.split(/\s+/).find(dt=>Ne(dt)||dr(dt))}function Ve(be,ze,Ye){let dt="",Ct="";typeof ze=="object"?(dt=be,Ye=ze.ignoreIllegals,Ct=ze.language):(Ee("10.7.0","highlight(lang, code, ...args) has been deprecated."),Ee("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Ct=be,dt=ze),Ye===void 0&&(Ye=!0);const En={code:dt,language:Ct};Gs("before:highlight",En);const ur=En.result?En.result:lr(En.language,En.code,Ye);return ur.code=En.code,Gs("after:highlight",ur),ur}function lr(be,ze,Ye,dt){const Ct=Object.create(null);function En(we,Me){return we.keywords[Me]}function ur(){if(!He.keywords){jt.addText(ut);return}let we=0;He.keywordPatternRe.lastIndex=0;let Me=He.keywordPatternRe.exec(ut),qe="";for(;Me;){qe+=ut.substring(we,Me.index);const tt=On.case_insensitive?Me[0].toLowerCase():Me[0],$t=En(He,tt);if($t){const[Un,Hy]=$t;if(jt.addText(qe),qe="",Ct[tt]=(Ct[tt]||0)+1,Ct[tt]<=Mt&&(Xs+=Hy),Un.startsWith("_"))qe+=Me[0];else{const Uy=On.classNameAliases[Un]||Un;Mn(Me[0],Uy)}}else qe+=Me[0];we=He.keywordPatternRe.lastIndex,Me=He.keywordPatternRe.exec(ut)}qe+=ut.substring(we),jt.addText(qe)}function Js(){if(ut==="")return;let we=null;if(typeof He.subLanguage=="string"){if(!X[He.subLanguage]){jt.addText(ut);return}we=lr(He.subLanguage,ut,!0,vu[He.subLanguage]),vu[He.subLanguage]=we._top}else we=mt(ut,He.subLanguage.length?He.subLanguage:null);He.relevance>0&&(Xs+=we.relevance),jt.__addSublanguage(we._emitter,we.language)}function on(){He.subLanguage!=null?Js():ur(),ut=""}function Mn(we,Me){we!==""&&(jt.startScope(Me),jt.addText(we),jt.endScope())}function gu(we,Me){let qe=1;const tt=Me.length-1;for(;qe<=tt;){if(!we._emit[qe]){qe++;continue}const $t=On.classNameAliases[we[qe]]||we[qe],Un=Me[qe];$t?Mn(Un,$t):(ut=Un,ur(),ut=""),qe++}}function yu(we,Me){return we.scope&&typeof we.scope=="string"&&jt.openNode(On.classNameAliases[we.scope]||we.scope),we.beginScope&&(we.beginScope._wrap?(Mn(ut,On.classNameAliases[we.beginScope._wrap]||we.beginScope._wrap),ut=""):we.beginScope._multi&&(gu(we.beginScope,Me),ut="")),He=Object.create(we,{parent:{value:He}}),He}function bu(we,Me,qe){let tt=w(we.endRe,qe);if(tt){if(we["on:end"]){const $t=new e(we);we["on:end"](Me,$t),$t.isMatchIgnored&&(tt=!1)}if(tt){for(;we.endsParent&&we.parent;)we=we.parent;return we}}if(we.endsWithParent)return bu(we.parent,Me,qe)}function Py(we){return He.matcher.regexIndex===0?(ut+=we[0],1):(el=!0,0)}function Ly(we){const Me=we[0],qe=we.rule,tt=new e(qe),$t=[qe.__beforeBegin,qe["on:begin"]];for(const Un of $t)if(Un&&(Un(we,tt),tt.isMatchIgnored))return Py(Me);return qe.skip?ut+=Me:(qe.excludeBegin&&(ut+=Me),on(),!qe.returnBegin&&!qe.excludeBegin&&(ut=Me)),yu(qe,we),qe.returnBegin?0:Me.length}function By(we){const Me=we[0],qe=ze.substring(we.index),tt=bu(He,we,qe);if(!tt)return Ze;const $t=He;He.endScope&&He.endScope._wrap?(on(),Mn(Me,He.endScope._wrap)):He.endScope&&He.endScope._multi?(on(),gu(He.endScope,we)):$t.skip?ut+=Me:($t.returnEnd||$t.excludeEnd||(ut+=Me),on(),$t.excludeEnd&&(ut=Me));do He.scope&&jt.closeNode(),!He.skip&&!He.subLanguage&&(Xs+=He.relevance),He=He.parent;while(He!==tt.parent);return tt.starts&&yu(tt.starts,we),$t.returnEnd?0:Me.length}function $y(){const we=[];for(let Me=He;Me!==On;Me=Me.parent)Me.scope&&we.unshift(Me.scope);we.forEach(Me=>jt.openNode(Me))}let Ys={};function xu(we,Me){const qe=Me&&Me[0];if(ut+=we,qe==null)return on(),0;if(Ys.type==="begin"&&Me.type==="end"&&Ys.index===Me.index&&qe===""){if(ut+=ze.slice(Me.index,Me.index+1),!ee){const tt=new Error(`0 width match regex (${be})`);throw tt.languageName=be,tt.badRule=Ys.rule,tt}return 1}if(Ys=Me,Me.type==="begin")return Ly(Me);if(Me.type==="illegal"&&!Ye){const tt=new Error('Illegal lexeme "'+qe+'" for mode "'+(He.scope||"<unnamed>")+'"');throw tt.mode=He,tt}else if(Me.type==="end"){const tt=By(Me);if(tt!==Ze)return tt}if(Me.type==="illegal"&&qe==="")return ut+=`
`,1;if(Qa>1e5&&Qa>Me.index*3)throw new Error("potential infinite loop, way more iterations than matches");return ut+=qe,qe.length}const On=dr(be);if(!On)throw he(xe.replace("{}",be)),new Error('Unknown language: "'+be+'"');const Fy=G(On);let Za="",He=dt||Fy;const vu={},jt=new ue.__emitter(ue);$y();let ut="",Xs=0,Pr=0,Qa=0,el=!1;try{if(On.__emitTokens)On.__emitTokens(ze,jt);else{for(He.matcher.considerAll();;){Qa++,el?el=!1:He.matcher.considerAll(),He.matcher.lastIndex=Pr;const we=He.matcher.exec(ze);if(!we)break;const Me=ze.substring(Pr,we.index),qe=xu(Me,we);Pr=we.index+qe}xu(ze.substring(Pr))}return jt.finalize(),Za=jt.toHTML(),{language:be,value:Za,relevance:Xs,illegal:!1,_emitter:jt,_top:He}}catch(we){if(we.message&&we.message.includes("Illegal"))return{language:be,value:Te(ze),illegal:!0,relevance:0,_illegalBy:{message:we.message,index:Pr,context:ze.slice(Pr-100,Pr+100),mode:we.mode,resultSoFar:Za},_emitter:jt};if(ee)return{language:be,value:Te(ze),illegal:!1,relevance:0,errorRaised:we,_emitter:jt,_top:He};throw we}}function cr(be){const ze={value:Te(be),illegal:!1,relevance:0,_top:de,_emitter:new ue.__emitter(ue)};return ze._emitter.addText(be),ze}function mt(be,ze){ze=ze||ue.languages||Object.keys(X);const Ye=cr(be),dt=ze.filter(dr).filter(mu).map(on=>lr(on,be,!1));dt.unshift(Ye);const Ct=dt.sort((on,Mn)=>{if(on.relevance!==Mn.relevance)return Mn.relevance-on.relevance;if(on.language&&Mn.language){if(dr(on.language).supersetOf===Mn.language)return 1;if(dr(Mn.language).supersetOf===on.language)return-1}return 0}),[En,ur]=Ct,Js=En;return Js.secondBest=ur,Js}function Qt(be,ze,Ye){const dt=ze&&me[ze]||Ye;be.classList.add("hljs"),be.classList.add(`language-${dt}`)}function un(be){let ze=null;const Ye=ct(be);if(Ne(Ye))return;if(Gs("before:highlightElement",{el:be,language:Ye}),be.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",be);return}if(be.children.length>0&&(ue.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(be)),ue.throwUnescapedHTML))throw new $e("One of your code blocks includes unescaped HTML.",be.innerHTML);ze=be;const dt=ze.textContent,Ct=Ye?Ve(dt,{language:Ye,ignoreIllegals:!0}):mt(dt);be.innerHTML=Ct.value,be.dataset.highlighted="yes",Qt(be,Ye,Ct.language),be.result={language:Ct.language,re:Ct.relevance,relevance:Ct.relevance},Ct.secondBest&&(be.secondBest={language:Ct.secondBest.language,relevance:Ct.secondBest.relevance}),Gs("after:highlightElement",{el:be,result:Ct,text:dt})}function Sn(be){ue=et(ue,be)}const mi=()=>{Ks(),Ee("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function qs(){Ks(),Ee("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let hu=!1;function Ks(){function be(){Ks()}if(document.readyState==="loading"){hu||window.addEventListener("DOMContentLoaded",be,!1),hu=!0;return}document.querySelectorAll(ue.cssSelector).forEach(un)}function My(be,ze){let Ye=null;try{Ye=ze(R)}catch(dt){if(he("Language definition for '{}' could not be registered.".replace("{}",be)),ee)he(dt);else throw dt;Ye=de}Ye.name||(Ye.name=be),X[be]=Ye,Ye.rawDefinition=ze.bind(null,R),Ye.aliases&&pu(Ye.aliases,{languageName:be})}function Oy(be){delete X[be];for(const ze of Object.keys(me))me[ze]===be&&delete me[ze]}function jy(){return Object.keys(X)}function dr(be){return be=(be||"").toLowerCase(),X[be]||X[me[be]]}function pu(be,{languageName:ze}){typeof be=="string"&&(be=[be]),be.forEach(Ye=>{me[Ye.toLowerCase()]=ze})}function mu(be){const ze=dr(be);return ze&&!ze.disableAutodetect}function zy(be){be["before:highlightBlock"]&&!be["before:highlightElement"]&&(be["before:highlightElement"]=ze=>{be["before:highlightBlock"](Object.assign({block:ze.el},ze))}),be["after:highlightBlock"]&&!be["after:highlightElement"]&&(be["after:highlightElement"]=ze=>{be["after:highlightBlock"](Object.assign({block:ze.el},ze))})}function Iy(be){zy(be),Ae.push(be)}function Ry(be){const ze=Ae.indexOf(be);ze!==-1&&Ae.splice(ze,1)}function Gs(be,ze){const Ye=be;Ae.forEach(function(dt){dt[Ye]&&dt[Ye](ze)})}function Dy(be){return Ee("10.7.0","highlightBlock will be removed entirely in v12.0"),Ee("10.7.0","Please use highlightElement now."),un(be)}Object.assign(R,{highlight:Ve,highlightAuto:mt,highlightAll:Ks,highlightElement:un,highlightBlock:Dy,configure:Sn,initHighlighting:mi,initHighlightingOnLoad:qs,registerLanguage:My,unregisterLanguage:Oy,listLanguages:jy,getLanguage:dr,registerAliases:pu,autoDetection:mu,inherit:et,addPlugin:Iy,removePlugin:Ry}),R.debugMode=function(){ee=!1},R.safeMode=function(){ee=!0},R.versionString=ke,R.regex={concat:g,lookahead:h,either:b,optional:p,anyNumberOfTimes:f};for(const be in Ce)typeof Ce[be]=="object"&&t(Ce[be]);return Object.assign(R,Ce),R},it=Ot({});return it.newInstance=()=>Ot({}),Il=it,it.HighlightJS=it,it.default=it,Il}var rT=nT();const L0=Mr(rT);function B0(t,e=[]){return t.flatMap(n=>{const r=[...e,...n.properties?n.properties.className:[]];return n.children?B0(n.children,r):{text:n.value,classes:r}})}function kh(t){return t.value||t.children||[]}function iT(t){return!!L0.getLanguage(t)}function Sh({doc:t,name:e,lowlight:n,defaultLanguage:r}){const i=[];return Lc(t,s=>s.type.name===e).forEach(s=>{var o;let a=s.pos+1;const l=s.node.attrs.language||r,c=n.listLanguages(),d=l&&(c.includes(l)||iT(l)||(o=n.registered)!=null&&o.call(n,l))?kh(n.highlight(l,s.node.textContent)):kh(n.highlightAuto(s.node.textContent));B0(d).forEach(u=>{const h=a+u.text.length;if(u.classes.length){const f=kt.inline(a,h,{class:u.classes.join(" ")});i.push(f)}a=h})}),nt.create(t,i)}function sT(t){return typeof t=="function"}function oT({name:t,lowlight:e,defaultLanguage:n}){if(!["highlight","highlightAuto","listLanguages"].every(i=>sT(e[i])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new rt({key:new pt("lowlight"),state:{init:(i,{doc:s})=>Sh({doc:s,name:t,lowlight:e,defaultLanguage:n}),apply:(i,s,o,a)=>{const l=o.selection.$head.parent.type.name,c=a.selection.$head.parent.type.name,d=Lc(o.doc,h=>h.type.name===t),u=Lc(a.doc,h=>h.type.name===t);return i.docChanged&&([l,c].includes(t)||u.length!==d.length||i.steps.some(h=>h.from!==void 0&&h.to!==void 0&&d.some(f=>f.pos>=h.from&&f.pos+f.node.nodeSize<=h.to)))?Sh({doc:i.doc,name:t,lowlight:e,defaultLanguage:n}):s.map(i.mapping,i.doc)}},props:{decorations(i){return r.getState(i)}}});return r}var aT=tT.extend({addOptions(){var t;return{...(t=this.parent)==null?void 0:t.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},addProseMirrorPlugins(){var t;return[...((t=this.parent)==null?void 0:t.call(this))||[],oT({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),lT=aT,cT=_t.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,ot(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>$c({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),dT=cT,uT=Object.defineProperty,fT=(t,e)=>{for(var n in e)uT(t,n,{get:e[n],enumerable:!0})},hT="listItem",Eh="textStyle",Ch=/^\s*([-+*])\s$/,$0=_t.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",ot(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(hT,this.editor.getAttributes(Eh)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Fi({find:Ch,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Fi({find:Ch,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Eh),editor:this.editor})),[t]}}),F0=_t.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",ot(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);n.push(...a)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>Gd(t,e,r=>{var i,s;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((s=(i=r.meta)==null?void 0:i.parentAttrs)==null?void 0:s.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),pT={};fT(pT,{findListItemPos:()=>Ws,getNextListDepth:()=>Xd,handleBackspace:()=>Uc,handleDelete:()=>Vc,hasListBefore:()=>H0,hasListItemAfter:()=>mT,hasListItemBefore:()=>U0,listItemHasSubList:()=>V0,nextListIsDeeper:()=>W0,nextListIsHigher:()=>q0});var Ws=(t,e)=>{const{$from:n}=e.selection,r=St(t,e.schema);let i=null,s=n.depth,o=n.pos,a=null;for(;s>0&&a===null;)i=n.node(s),i.type===r?a=s:(s-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},Xd=(t,e)=>{const n=Ws(t,e);if(!n)return!1;const[,r]=bC(e,t,n.$pos.pos+4);return r},H0=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),s=t.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},U0=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},V0=(t,e,n)=>{if(!n)return!1;const r=St(t,e.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},Uc=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Ar(t.state,e)&&H0(t.state,e,n)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),c=[];l.node().descendants((h,f)=>{h.type.name===e&&c.push({node:h,pos:f})});const d=c.at(-1);if(!d)return!1;const u=t.state.doc.resolve(l.start()+d.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},u.end()).joinForward().run()}if(!Ar(t.state,e)||!kC(t.state))return!1;const r=Ws(e,t.state);if(!r)return!1;const s=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=V0(e,t.state,s);return U0(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},W0=(t,e)=>{const n=Xd(t,e),r=Ws(t,e);return!r||!n?!1:n>r.depth},q0=(t,e)=>{const n=Xd(t,e),r=Ws(t,e);return!r||!n?!1:n<r.depth},Vc=(t,e)=>{if(!Ar(t.state,e)||!wC(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:W0(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():q0(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},mT=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},gT=at.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Vc(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Vc(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&Uc(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&Uc(t,n,r)&&(e=!0)}),e}}}}),_h=/^(\s*)(\d+)\.\s+(.*)$/,yT=/^\s/;function bT(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],s=i.match(_h);if(!s)break;const[,o,a,l]=s,c=o.length;let d=l,u=n+1;const h=[i];for(;u<t.length;){const f=t[u];if(f.match(_h))break;if(f.trim()==="")h.push(f),d+=`
`,u+=1;else if(f.match(yT))h.push(f),d+=`
${f.slice(c+2)}`,u+=1;else break}e.push({indent:c,number:parseInt(a,10),content:d.trim(),raw:h.join(`
`)}),r=u,n=u}return[e,r]}function K0(t,e,n){var r;const i=[];let s=0;for(;s<t.length;){const o=t[s];if(o.indent===e){const a=o.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const d=a.slice(1).join(`
`).trim();if(d){const f=n.blockTokens(d);c.push(...f)}let u=s+1;const h=[];for(;u<t.length&&t[u].indent>e;)h.push(t[u]),u+=1;if(h.length>0){const f=Math.min(...h.map(g=>g.indent)),p=K0(h,f,n);c.push({type:"list",ordered:!0,start:h[0].number,items:p,raw:h.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:o.raw,tokens:c}),s=u}else s+=1}return i}function xT(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var vT="listItem",Nh="textStyle",Th=/^(\d+)\.\s$/,G0=_t.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",ot(this.options.HTMLAttributes,n),0]:["ol",ot(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?xT(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[s,o]=bT(i);if(s.length===0)return;const a=K0(s,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:a,raw:i.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(vT,this.editor.getAttributes(Nh)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Fi({find:Th,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Fi({find:Th,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Nh)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),wT=/^\s*(\[([( |x])?\])\s$/,kT=_t.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",ot(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return Gd(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=u=>{var h,f;a.ariaLabel=((f=(h=this.options.a11y)==null?void 0:h.checkboxLabel)==null?void 0:f.call(h,u,a.checked))||`Task item checkbox for ${u.textContent||"empty task item"}`};c(t),s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",u=>u.preventDefault()),a.addEventListener("change",u=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:h}=u.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:f})=>{const p=n();if(typeof p!="number")return!1;const g=f.doc.nodeAt(p);return f.setNodeMarkup(p,void 0,{...g==null?void 0:g.attrs,checked:h}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,h)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,h])=>{i.setAttribute(u,h)}),i.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,s.append(a,o),i.append(s,l),Object.entries(e).forEach(([u,h])=>{i.setAttribute(u,h)});let d=new Set(Object.keys(e));return{dom:i,contentDOM:l,update:u=>{if(u.type!==this.type)return!1;i.dataset.checked=u.attrs.checked,a.checked=u.attrs.checked,c(u);const h=r.extensionManager.attributes,f=Bi(u,h),p=new Set(Object.keys(f)),g=this.options.HTMLAttributes;return d.forEach(y=>{p.has(y)||(y in g?i.setAttribute(y,g[y]):i.removeAttribute(y))}),Object.entries(f).forEach(([y,b])=>{b==null?y in g?i.setAttribute(y,g[y]):i.removeAttribute(y):i.setAttribute(y,b)}),d=p,!0}}}},addInputRules(){return[Fi({find:wT,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),ST=_t.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",ot(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=s=>{const o=Fc(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(s)},i=Fc(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,o)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:n.inlineTokens(s.mainContent),nestedTokens:o}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});at.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push($0.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(F0.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(gT.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(G0.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(kT.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(ST.configure(this.options.taskList)),t}});var ET=$0,CT=G0,_T=F0,NT=/^\s*>\s$/,TT=_t.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return ra("blockquote",{...ot(this.options.HTMLAttributes,t),children:ra("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(i=>{const a=e.renderChildren([i]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Fi({find:NT,type:this.type})]}}),AT=TT;function MT(t={}){return new rt({view(e){return new OT(e,t)}})}class OT{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(n){let u=e.nodeBefore,h=e.nodeAfter;if(u||h){let f=this.editorView.nodeDOM(this.cursorPos-(u?u.nodeSize:0));if(f){let p=f.getBoundingClientRect(),g=u?p.bottom:p.top;u&&h&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*a;r={left:p.left,right:p.right,top:g-y,bottom:g+y}}}}if(!r){let u=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*o;r={left:u.left-h,right:u.left+h,top:u.top,bottom:u.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let u=l.getBoundingClientRect(),h=u.width/l.offsetWidth,f=u.height/l.offsetHeight;c=u.left-l.scrollLeft*h,d=u.top-l.scrollTop*f}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-d)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Gm(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class bt extends De{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return bt.valid(r)?new bt(r):De.near(r)}content(){return ve.empty}eq(e){return e instanceof bt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new bt(e.resolve(n.pos))}getBookmark(){return new Zd(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!jT(e)||!zT(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&bt.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(bt.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!je.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(bt.valid(a))return a}return null}}}bt.prototype.visible=!1;bt.findFrom=bt.findGapCursorFrom;De.jsonID("gapcursor",bt);class Zd{constructor(e){this.pos=e}map(e){return new Zd(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return bt.valid(n)?new bt(n):De.near(n)}}function J0(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function jT(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||J0(i.type))return!0;if(i.inlineContent)return!1}}return!0}function zT(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||J0(i.type))return!0;if(i.inlineContent)return!1}}return!0}function IT(){return new rt({props:{decorations:LT,createSelectionBetween(t,e,n){return e.pos==n.pos&&bt.valid(n)?new bt(n):null},handleClick:DT,handleKeyDown:RT,handleDOMEvents:{beforeinput:PT}}})}const RT=Ld({ArrowLeft:ho("horiz",-1),ArrowRight:ho("horiz",1),ArrowUp:ho("vert",-1),ArrowDown:ho("vert",1)});function ho(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Ie){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=bt.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new bt(c))),!0):!1}}function DT(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!bt.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&je.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new bt(r))),!0)}function PT(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof bt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=oe.empty;for(let o=r.length-1;o>=0;o--)i=oe.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new ve(i,0,0));return s.setSelection(Ie.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function LT(t){if(!(t.selection instanceof bt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",nt.create(t.doc,[kt.widget(t.selection.head,e,{key:"gapcursor"})])}var ia=200,At=function(){};At.prototype.append=function(e){return e.length?(e=At.from(e),!this.length&&e||e.length<ia&&this.leafAppend(e)||this.length<ia&&e.leafPrepend(this)||this.appendInner(e)):this};At.prototype.prepend=function(e){return e.length?At.from(e).append(this):this};At.prototype.appendInner=function(e){return new BT(this,e)};At.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?At.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};At.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};At.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};At.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};At.from=function(e){return e instanceof At?e:e&&e.length?new Y0(e):At.empty};var Y0=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=ia)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=ia)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(At);At.empty=new Y0([]);var BT=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(At);const $T=500;class Cn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],d=[];return this.items.forEach((u,h)=>{if(!u.step){i||(i=this.remapping(r,h+1),s=i.maps.length),s--,d.push(u);return}if(i){d.push(new jn(u.map));let f=u.step.map(i.slice(s)),p;f&&o.maybeStep(f).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new jn(p,void 0,void 0,c.length+d.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(u.step);if(u.selection)return a=i?u.selection.map(i.slice(s)):u.selection,l=new Cn(this.items.slice(0,r).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let u=e.steps[d].invert(e.docs[d]),h=new jn(e.mapping.maps[d],u,n),f;(f=l&&l.merge(h))&&(h=f,d?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(o++,n=void 0),i||(l=h)}let c=o-r.depth;return c>HT&&(a=FT(a,c),o-=c),new Cn(a.append(s),o)}remapping(e,n){let r=new As;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Cn(this.items.append(e.map(n=>new jn(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},i);let l=n;this.items.forEach(h=>{let f=s.getMirror(--l);if(f==null)return;o=Math.min(o,f);let p=s.maps[f];if(h.step){let g=e.steps[f].invert(e.docs[f]),y=h.selection&&h.selection.map(s.slice(l+1,f));y&&a++,r.push(new jn(p,g,y))}else r.push(new jn(p))},i);let c=[];for(let h=n;h<o;h++)c.push(new jn(s.maps[h]));let d=this.items.slice(0,i).append(c).append(r),u=new Cn(d,a);return u.emptyItemCount()>$T&&(u=u.compress(this.items.length-r.length)),u}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let d=o.selection&&o.selection.map(n.slice(r));d&&s++;let u=new jn(c.invert(),l,d),h,f=i.length-1;(h=i.length&&i[f].merge(u))?i[f]=h:i.push(u)}}else o.map&&r--},this.items.length,0),new Cn(At.from(i.reverse()),s)}}Cn.empty=new Cn(At.empty,0);function FT(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class jn{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new jn(n.getMap().invert(),n,this.selection)}}}class gr{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const HT=20;function UT(t,e,n,r){let i=n.getMeta(ri),s;if(i)return i.historyState;n.getMeta(qT)&&(t=new gr(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(ri))return o.getMeta(ri).redo?new gr(t.done.addTransform(n,void 0,r,Io(e)),t.undone,Ah(n.mapping.maps),t.prevTime,t.prevComposition):new gr(t.done,t.undone.addTransform(n,void 0,r,Io(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!VT(n,t.prevRanges)),c=o?Rl(t.prevRanges,n.mapping):Ah(n.mapping.maps);return new gr(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,Io(e)),Cn.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new gr(t.done.rebased(n,s),t.undone.rebased(n,s),Rl(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new gr(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Rl(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function VT(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function Ah(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function Rl(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function WT(t,e,n){let r=Io(e),i=ri.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new gr(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(ri,{redo:n,historyState:l})}let Dl=!1,Mh=null;function Io(t){let e=t.plugins;if(Mh!=e){Dl=!1,Mh=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Dl=!0;break}}return Dl}const ri=new pt("history"),qT=new pt("closeHistory");function KT(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new rt({key:ri,state:{init(){return new gr(Cn.empty,Cn.empty,null,0,-1)},apply(e,n,r){return UT(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?Z0:r=="historyRedo"?Q0:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function X0(t,e){return(n,r)=>{let i=ri.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=WT(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const Z0=X0(!1,!0),Q0=X0(!0,!0);at.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new rt({key:new pt("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const c=r.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=s-r,c=a-l,d=a;return e.deleteRange(c,d),!(this.storage.characters({node:e.doc})>r)}})]}});at.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[MT(this.options)]}});at.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new rt({key:new pt("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,s=[];if(!n||!r)return nt.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(i>=c&&i<=c+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(i>=c&&i<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";s.push(kt.node(c,c+l.nodeSize,{class:this.options.className}))}),nt.create(t,s)}}})]}});at.create({name:"gapCursor",addProseMirrorPlugins(){return[IT()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Qe(Oe(t,"allowGapCursor",n)))!=null?e:null}}});var Oh="placeholder";function GT(t){return t.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}at.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:Oh,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const t=this.options.dataAttribute?`data-${GT(this.options.dataAttribute)}`:`data-${Oh}`;return[new rt({key:new pt("placeholder"),props:{decorations:({doc:e,selection:n})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=n,s=[];if(!r)return null;const o=this.editor.isEmpty;return e.descendants((a,l)=>{const c=i>=l&&i<=l+a.nodeSize,d=!a.isLeaf&&qa(a);if((c||!this.options.showOnlyCurrent)&&d){const u=[this.options.emptyNodeClass];o&&u.push(this.options.emptyEditorClass);const h=kt.node(l,l+a.nodeSize,{class:u.join(" "),[t]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:l,hasAnchor:c}):this.options.placeholder});s.push(h)}return this.options.includeChildren}),nt.create(e,s)}}})]}});at.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new rt({key:new pt("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||u0(n.selection)||t.view.dragging?null:nt.create(n.doc,[kt.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function jh({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}at.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new pt(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new rt({key:e,appendTransaction:(i,s,o)=>{const{doc:a,tr:l,schema:c}=o,d=e.getState(o),u=a.content.size,h=c.nodes[n];if(d)return l.insert(u,h.create())},state:{init:(i,s)=>{const o=s.tr.doc.lastChild;return!jh({node:o,types:r})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const o=i.doc.lastChild;return!jh({node:o,types:r})}}})]}});var JT=at.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Z0(t,e),redo:()=>({state:t,dispatch:e})=>Q0(t,e)}},addProseMirrorPlugins(){return[KT(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),YT=JT,XT=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,ZT=_t.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",ot(this.options.HTMLAttributes,t)]},parseMarkdown:(t,e)=>e.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var e,n,r,i,s,o;const a=(n=(e=t.attrs)==null?void 0:e.src)!=null?n:"",l=(i=(r=t.attrs)==null?void 0:r.alt)!=null?i:"",c=(o=(s=t.attrs)==null?void 0:s.title)!=null?o:"";return c?`![${l}](${a} "${c}")`:`![${l}](${a})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:t,minWidth:e,minHeight:n,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:i,getPos:s,HTMLAttributes:o,editor:a})=>{const l=document.createElement("img");Object.entries(o).forEach(([u,h])=>{if(h!=null)switch(u){case"width":case"height":break;default:l.setAttribute(u,h);break}}),l.src=o.src;const c=new l_({element:l,editor:a,node:i,getPos:s,onResize:(u,h)=>{l.style.width=`${u}px`,l.style.height=`${h}px`},onCommit:(u,h)=>{const f=s();f!==void 0&&this.editor.chain().setNodeSelection(f).updateAttributes(this.name,{width:u,height:h}).run()},onUpdate:(u,h,f)=>u.type===i.type,options:{directions:t,min:{width:e,height:n},preserveAspectRatio:r===!0}}),d=c.dom;return d.style.visibility="hidden",d.style.pointerEvents="none",l.onload=()=>{d.style.visibility="",d.style.pointerEvents=""},c}},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[T0({find:XT,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),QT=ZT;const eA="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",tA="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Wc="numeric",qc="ascii",Kc="alpha",ms="asciinumeric",ns="alphanumeric",Gc="domain",ey="emoji",nA="scheme",rA="slashscheme",Pl="whitespace";function iA(t,e){return t in e||(e[t]=[]),e[t]}function Yr(t,e,n){e[Wc]&&(e[ms]=!0,e[ns]=!0),e[qc]&&(e[ms]=!0,e[Kc]=!0),e[ms]&&(e[ns]=!0),e[Kc]&&(e[ns]=!0),e[ns]&&(e[Gc]=!0),e[ey]&&(e[Gc]=!0);for(const r in e){const i=iA(r,n);i.indexOf(t)<0&&i.push(t)}}function sA(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function en(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}en.groups={};en.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||en.groups;let i;return e&&e.j?i=e:(i=new en(e),n&&r&&Yr(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||en.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,a=i.go(t);if(a?(o=new en,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new en,s){if(r)if(o.t&&typeof o.t=="string"){const l=Object.assign(sA(o.t,r),n);Yr(s,l,r)}else n&&Yr(s,n,r);o.t=s}return i.j[t]=o,o}};const We=(t,e,n,r,i)=>t.ta(e,n,r,i),gt=(t,e,n,r,i)=>t.tr(e,n,r,i),zh=(t,e,n,r,i)=>t.ts(e,n,r,i),pe=(t,e,n,r,i)=>t.tt(e,n,r,i),Qn="WORD",Jc="UWORD",ty="ASCIINUMERICAL",ny="ALPHANUMERICAL",Ds="LOCALHOST",Yc="TLD",Xc="UTLD",Ro="SCHEME",wi="SLASH_SCHEME",Qd="NUM",Zc="WS",eu="NL",gs="OPENBRACE",ys="CLOSEBRACE",sa="OPENBRACKET",oa="CLOSEBRACKET",aa="OPENPAREN",la="CLOSEPAREN",ca="OPENANGLEBRACKET",da="CLOSEANGLEBRACKET",ua="FULLWIDTHLEFTPAREN",fa="FULLWIDTHRIGHTPAREN",ha="LEFTCORNERBRACKET",pa="RIGHTCORNERBRACKET",ma="LEFTWHITECORNERBRACKET",ga="RIGHTWHITECORNERBRACKET",ya="FULLWIDTHLESSTHAN",ba="FULLWIDTHGREATERTHAN",xa="AMPERSAND",va="APOSTROPHE",wa="ASTERISK",yr="AT",ka="BACKSLASH",Sa="BACKTICK",Ea="CARET",xr="COLON",tu="COMMA",Ca="DOLLAR",zn="DOT",_a="EQUALS",nu="EXCLAMATION",pn="HYPHEN",bs="PERCENT",Na="PIPE",Ta="PLUS",Aa="POUND",xs="QUERY",ru="QUOTE",ry="FULLWIDTHMIDDLEDOT",iu="SEMI",In="SLASH",vs="TILDE",Ma="UNDERSCORE",iy="EMOJI",Oa="SYM";var sy=Object.freeze({__proto__:null,ALPHANUMERICAL:ny,AMPERSAND:xa,APOSTROPHE:va,ASCIINUMERICAL:ty,ASTERISK:wa,AT:yr,BACKSLASH:ka,BACKTICK:Sa,CARET:Ea,CLOSEANGLEBRACKET:da,CLOSEBRACE:ys,CLOSEBRACKET:oa,CLOSEPAREN:la,COLON:xr,COMMA:tu,DOLLAR:Ca,DOT:zn,EMOJI:iy,EQUALS:_a,EXCLAMATION:nu,FULLWIDTHGREATERTHAN:ba,FULLWIDTHLEFTPAREN:ua,FULLWIDTHLESSTHAN:ya,FULLWIDTHMIDDLEDOT:ry,FULLWIDTHRIGHTPAREN:fa,HYPHEN:pn,LEFTCORNERBRACKET:ha,LEFTWHITECORNERBRACKET:ma,LOCALHOST:Ds,NL:eu,NUM:Qd,OPENANGLEBRACKET:ca,OPENBRACE:gs,OPENBRACKET:sa,OPENPAREN:aa,PERCENT:bs,PIPE:Na,PLUS:Ta,POUND:Aa,QUERY:xs,QUOTE:ru,RIGHTCORNERBRACKET:pa,RIGHTWHITECORNERBRACKET:ga,SCHEME:Ro,SEMI:iu,SLASH:In,SLASH_SCHEME:wi,SYM:Oa,TILDE:vs,TLD:Yc,UNDERSCORE:Ma,UTLD:Xc,UWORD:Jc,WORD:Qn,WS:Zc});const Wn=/[a-z]/,Ji=new RegExp("\\p{L}","u"),Ll=new RegExp("\\p{Emoji}","u"),qn=/\d/,Bl=/\s/,Ih="\r",$l=`
`,oA="",aA="",Fl="";let po=null,mo=null;function lA(t=[]){const e={};en.groups=e;const n=new en;po==null&&(po=Rh(eA)),mo==null&&(mo=Rh(tA)),pe(n,"'",va),pe(n,"{",gs),pe(n,"}",ys),pe(n,"[",sa),pe(n,"]",oa),pe(n,"(",aa),pe(n,")",la),pe(n,"<",ca),pe(n,">",da),pe(n,"",ua),pe(n,"",fa),pe(n,"",ha),pe(n,"",pa),pe(n,"",ma),pe(n,"",ga),pe(n,"",ya),pe(n,"",ba),pe(n,"&",xa),pe(n,"*",wa),pe(n,"@",yr),pe(n,"`",Sa),pe(n,"^",Ea),pe(n,":",xr),pe(n,",",tu),pe(n,"$",Ca),pe(n,".",zn),pe(n,"=",_a),pe(n,"!",nu),pe(n,"-",pn),pe(n,"%",bs),pe(n,"|",Na),pe(n,"+",Ta),pe(n,"#",Aa),pe(n,"?",xs),pe(n,'"',ru),pe(n,"/",In),pe(n,";",iu),pe(n,"~",vs),pe(n,"_",Ma),pe(n,"\\",ka),pe(n,"",ry);const r=gt(n,qn,Qd,{[Wc]:!0});gt(r,qn,r);const i=gt(r,Wn,ty,{[ms]:!0}),s=gt(r,Ji,ny,{[ns]:!0}),o=gt(n,Wn,Qn,{[qc]:!0});gt(o,qn,i),gt(o,Wn,o),gt(i,qn,i),gt(i,Wn,i);const a=gt(n,Ji,Jc,{[Kc]:!0});gt(a,Wn),gt(a,qn,s),gt(a,Ji,a),gt(s,qn,s),gt(s,Wn),gt(s,Ji,s);const l=pe(n,$l,eu,{[Pl]:!0}),c=pe(n,Ih,Zc,{[Pl]:!0}),d=gt(n,Bl,Zc,{[Pl]:!0});pe(n,Fl,d),pe(c,$l,l),pe(c,Fl,d),gt(c,Bl,d),pe(d,Ih),pe(d,$l),gt(d,Bl,d),pe(d,Fl,d);const u=gt(n,Ll,iy,{[ey]:!0});pe(u,"#"),gt(u,Ll,u),pe(u,oA,u);const h=pe(u,aA);pe(h,"#"),gt(h,Ll,u);const f=[[Wn,o],[qn,i]],p=[[Wn,null],[Ji,a],[qn,s]];for(let g=0;g<po.length;g++)fr(n,po[g],Yc,Qn,f);for(let g=0;g<mo.length;g++)fr(n,mo[g],Xc,Jc,p);Yr(Yc,{tld:!0,ascii:!0},e),Yr(Xc,{utld:!0,alpha:!0},e),fr(n,"file",Ro,Qn,f),fr(n,"mailto",Ro,Qn,f),fr(n,"http",wi,Qn,f),fr(n,"https",wi,Qn,f),fr(n,"ftp",wi,Qn,f),fr(n,"ftps",wi,Qn,f),Yr(Ro,{scheme:!0,ascii:!0},e),Yr(wi,{slashscheme:!0,ascii:!0},e),t=t.sort((g,y)=>g[0]>y[0]?1:-1);for(let g=0;g<t.length;g++){const y=t[g][0],x=t[g][1]?{[nA]:!0}:{[rA]:!0};y.indexOf("-")>=0?x[Gc]=!0:Wn.test(y)?qn.test(y)?x[ms]=!0:x[qc]=!0:x[Wc]=!0,zh(n,y,y,x)}return zh(n,"localhost",Ds,{ascii:!0}),n.jd=new en(Oa),{start:n,tokens:Object.assign({groups:e},sy)}}function oy(t,e){const n=cA(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let a=t,l=null,c=0,d=null,u=-1,h=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(u=0,h=0,d=a):u>=0&&(u+=n[o].length,h++),c+=n[o].length,s+=n[o].length,o++;s-=u,o-=h,c-=u,i.push({t:d.t,v:e.slice(s-c,s),s:s-c,e:s})}return i}function cA(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function fr(t,e,n,r,i){let s;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new en(r),s.jr=i.slice(),t.j[l]=s),t=s}return s=new en(n),s.jr=i.slice(),t.j[e[o-1]]=s,s}function Rh(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(t[r]),r++}return e}const Ps={defaultProtocol:"http",events:null,format:Dh,formatHref:Dh,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function su(t,e=null){let n=Object.assign({},Ps);t&&(n=Object.assign(n,t instanceof su?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}su.prototype={o:Ps,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Ps[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Dh(t){return t}function ay(t,e){this.t="token",this.v=t,this.tk=e}ay.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Ps.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),o={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),d=t.getObj("attributes",n,e),u=t.getObj("events",n,e);return o.href=r,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),d&&Object.assign(o,d),{tagName:i,attributes:o,content:s,eventListeners:u}}};function Ja(t,e){class n extends ay{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Ph=Ja("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Lh=Ja("text"),dA=Ja("nl"),go=Ja("url",{isLink:!0,toHref(t=Ps.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Ds&&t[1].t===xr}}),hn=t=>new en(t);function uA({groups:t}){const e=t.domain.concat([xa,wa,yr,ka,Sa,Ea,Ca,_a,pn,Qd,bs,Na,Ta,Aa,In,Oa,vs,Ma]),n=[va,xr,tu,zn,nu,bs,xs,ru,iu,ca,da,gs,ys,oa,sa,aa,la,ua,fa,ha,pa,ma,ga,ya,ba],r=[xa,va,wa,ka,Sa,Ea,Ca,_a,pn,gs,ys,bs,Na,Ta,Aa,xs,In,Oa,vs,Ma],i=hn(),s=pe(i,vs);We(s,r,s),We(s,t.domain,s);const o=hn(),a=hn(),l=hn();We(i,t.domain,o),We(i,t.scheme,a),We(i,t.slashscheme,l),We(o,r,s),We(o,t.domain,o);const c=pe(o,yr);pe(s,yr,c),pe(a,yr,c),pe(l,yr,c);const d=pe(s,zn);We(d,r,s),We(d,t.domain,s);const u=hn();We(c,t.domain,u),We(u,t.domain,u);const h=pe(u,zn);We(h,t.domain,u);const f=hn(Ph);We(h,t.tld,f),We(h,t.utld,f),pe(c,Ds,f);const p=pe(u,pn);pe(p,pn,p),We(p,t.domain,u),We(f,t.domain,u),pe(f,zn,h),pe(f,pn,p);const g=pe(f,xr);We(g,t.numeric,Ph);const y=pe(o,pn),b=pe(o,zn);pe(y,pn,y),We(y,t.domain,o),We(b,r,s),We(b,t.domain,o);const x=hn(go);We(b,t.tld,x),We(b,t.utld,x),We(x,t.domain,o),We(x,r,s),pe(x,zn,b),pe(x,pn,y),pe(x,yr,c);const w=pe(x,xr),v=hn(go);We(w,t.numeric,v);const E=hn(go),C=hn();We(E,e,E),We(E,n,C),We(C,e,E),We(C,n,C),pe(x,In,E),pe(v,In,E);const N=pe(a,xr),j=pe(l,xr),M=pe(j,In),T=pe(M,In);We(a,t.domain,o),pe(a,zn,b),pe(a,pn,y),We(l,t.domain,o),pe(l,zn,b),pe(l,pn,y),We(N,t.domain,E),pe(N,In,E),pe(N,xs,E),We(T,t.domain,E),We(T,e,E),pe(T,In,E);const P=[[gs,ys],[sa,oa],[aa,la],[ca,da],[ua,fa],[ha,pa],[ma,ga],[ya,ba]];for(let _=0;_<P.length;_++){const[z,k]=P[_],L=pe(E,z);pe(C,z,L),pe(L,k,E);const W=hn(go);We(L,e,W);const H=hn();We(L,n),We(W,e,W),We(W,n,H),We(H,e,W),We(H,n,H),pe(W,k,E),pe(H,k,E)}return pe(i,Ds,x),pe(i,eu,dA),{start:i,tokens:sy}}function fA(t,e,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let a=t,l=null,c=null,d=0,u=null,h=-1;for(;i<r&&!(l=a.go(n[i].t));)o.push(n[i++]);for(;i<r&&(c=l||a.go(n[i].t));)l=null,a=c,a.accepts()?(h=0,u=a):h>=0&&h++,i++,d++;if(h<0)i-=d,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(Hl(Lh,e,o)),o=[]),i-=h,d-=h;const f=u.t,p=n.slice(i-d,i);s.push(Hl(f,e,p))}}return o.length>0&&s.push(Hl(Lh,e,o)),s}function Hl(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const hA=typeof console<"u"&&console&&console.warn||(()=>{}),pA="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",ht={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function mA(){return en.groups={},ht.scanner=null,ht.parser=null,ht.tokenQueue=[],ht.pluginQueue=[],ht.customSchemes=[],ht.initialized=!1,ht}function Bh(t,e=!1){if(ht.initialized&&hA(`linkifyjs: already initialized - will not register custom scheme "${t}" ${pA}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);ht.customSchemes.push([t,e])}function gA(){ht.scanner=lA(ht.customSchemes);for(let t=0;t<ht.tokenQueue.length;t++)ht.tokenQueue[t][1]({scanner:ht.scanner});ht.parser=uA(ht.scanner.tokens);for(let t=0;t<ht.pluginQueue.length;t++)ht.pluginQueue[t][1]({scanner:ht.scanner,parser:ht.parser});return ht.initialized=!0,ht}function ou(t){return ht.initialized||gA(),fA(ht.parser.start,t,oy(ht.scanner.start,t))}ou.scan=oy;function ly(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new su(n),i=ou(t),s=[];for(let o=0;o<i.length;o++){const a=i[o];a.isLink&&(!e||a.t===e)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}var au="[\0- -\u2029]",yA=new RegExp(au),bA=new RegExp(`${au}$`),xA=new RegExp(au,"g");function vA(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function wA(t){return new rt({key:new pt("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,a=n0(n.doc,[...e]);if(d0(a).forEach(({newRange:c})=>{const d=cC(r.doc,c,f=>f.isTextblock);let u,h;if(d.length>1)u=d[0],h=r.doc.textBetween(u.pos,u.pos+u.node.nodeSize,void 0," ");else if(d.length){const f=r.doc.textBetween(c.from,c.to," "," ");if(!bA.test(f))return;u=d[0],h=r.doc.textBetween(u.pos,c.to,void 0," ")}if(u&&h){const f=h.split(yA).filter(Boolean);if(f.length<=0)return!1;const p=f[f.length-1],g=u.pos+h.lastIndexOf(p);if(!p)return!1;const y=ou(p).map(b=>b.toObject(t.defaultProtocol));if(!vA(y))return!1;y.filter(b=>b.isLink).map(b=>({...b,from:g+b.start+1,to:g+b.end+1})).filter(b=>r.schema.marks.code?!r.doc.rangeHasMark(b.from,b.to,r.schema.marks.code):!0).filter(b=>t.validate(b.value)).filter(b=>t.shouldAutoLink(b.value)).forEach(b=>{Vd(b.from,b.to,r.doc).some(x=>x.mark.type===t.type)||o.addMark(b.from,b.to,t.type.create({href:b.href}))})}}),!!o.steps.length)return o}})}function kA(t){return new rt({key:new pt("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{const l=r.target;if(!l)return!1;const c=t.editor.view.dom;o=l.closest("a"),o&&!c.contains(o)&&(o=null)}if(!o)return!1;let a=!1;if(t.enableClickSelection&&(a=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){const l=c0(e.state,t.type.name),c=(i=o.href)!=null?i:l.href,d=(s=o.target)!=null?s:l.target;c&&(window.open(c,d),a=!0)}return a}}})}function SA(t){return new rt({key:new pt("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:o}=s,{empty:a}=o;if(a)return!1;let l="";r.content.forEach(d=>{l+=d.textContent});const c=ly(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!c||i!==void 0&&!i(c.value)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function Br(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(xA,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var EA=$n.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Bh(t);return}Bh(t.scheme,t.optionalSlashes)})},onDestroy(){mA()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Br(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Br(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Br(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",ot(this.options.HTMLAttributes,t),0]:["a",ot(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n,r,i,s;const o=(r=(n=t.attrs)==null?void 0:n.href)!=null?r:"",a=(s=(i=t.attrs)==null?void 0:i.title)!=null?s:"",l=e.renderChildren(t);return a?`[${l}](${o} "${a}")`:`[${l}](${o})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Br(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Br(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[di({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=ly(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!Br(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(wA({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Br(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(kA({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(SA({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),CA=EA,_A=_t.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",ot(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!c_(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return u0(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(Ie.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(je.create(o.doc,l.pos)):o.setSelection(Ie.create(o.doc,l.pos));else{const d=s.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,u=d==null?void 0:d.create();u&&(o.insert(c,u),o.setSelection(Ie.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[T0({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),NA=_A,TA=20,cy=(t,e=0)=>{const n=[];return!t.children.length||e>TA||Array.from(t.children).forEach(r=>{r.tagName==="SPAN"?n.push(r):r.children.length&&n.push(...cy(r,e+1))}),n},AA=t=>{if(!t.children.length)return;const e=cy(t);e&&e.forEach(n=>{var r,i;const s=n.getAttribute("style"),o=(i=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:i.getAttribute("style");n.setAttribute("style",`${o};${s}`)})},dy=$n.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&AA(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",ot(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),MA=at.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const s=r[i].split(":");if(s.length>=2){const o=s[0].trim().toLowerCase(),a=s.slice(1).join(":").trim();if(o==="background-color")return a.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),uy=at.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const s=r[i].split(":");if(s.length>=2){const o=s[0].trim().toLowerCase(),a=s.slice(1).join(":").trim();if(o==="color")return a.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),OA=at.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),jA=at.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),zA=at.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});at.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(MA.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(uy.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(OA.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(jA.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(zA.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(dy.configure(this.options.textStyle)),t}});var IA=uy;let Qc,ed;if(typeof WeakMap<"u"){let t=new WeakMap;Qc=e=>t.get(e),ed=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;Qc=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},ed=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var xt=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let s=r+1,o=i+1;for(let a=1;s<this.width&&this.map[e+a]==n;a++)s++;for(let a=1;o<this.height&&this.map[e+this.width*a]==n;a++)o++;return{left:r,top:i,right:s,bottom:o}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:s,bottom:o}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?s==0:o==this.height)?null:this.map[r+this.width*(n<0?s-1:o)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:s}=this.findCell(t),{left:o,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,o),top:Math.min(i,l),right:Math.max(r,a),bottom:Math.max(s,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const s=r*this.width+i,o=this.map[s];n[o]||(n[o]=!0,!(i==t.left&&i&&this.map[s-1]==o||r==t.top&&r&&this.map[s-this.width]==o)&&e.push(o))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const s=i+n.child(r).nodeSize;if(r==t){let o=e+t*this.width;const a=(t+1)*this.width;for(;o<a&&this.map[o]<i;)o++;return o==a?s-1:this.map[o]}i=s}}static get(t){return Qc(t)||ed(t,RA(t))}};function RA(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=DA(t),n=t.childCount,r=[];let i=0,s=null;const o=[];for(let c=0,d=e*n;c<d;c++)r[c]=0;for(let c=0,d=0;c<n;c++){const u=t.child(c);d++;for(let p=0;;p++){for(;i<r.length&&r[i]!=0;)i++;if(p==u.childCount)break;const g=u.child(p),{colspan:y,rowspan:b,colwidth:x}=g.attrs;for(let w=0;w<b;w++){if(w+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:d,n:b-w});break}const v=i+w*e;for(let E=0;E<y;E++){r[v+E]==0?r[v+E]=d:(s||(s=[])).push({type:"collision",row:c,pos:d,n:y-E});const C=x&&x[E];if(C){const N=(v+E)%e*2,j=o[N];j==null||j!=C&&o[N+1]==1?(o[N]=C,o[N+1]=1):j==C&&o[N+1]++}}}i+=y,d+=g.nodeSize}const h=(c+1)*e;let f=0;for(;i<h;)r[i++]==0&&f++;f&&(s||(s=[])).push({type:"missing",row:c,n:f}),d++}(e===0||n===0)&&(s||(s=[])).push({type:"zero_sized"});const a=new xt(e,n,r,s);let l=!1;for(let c=0;!l&&c<o.length;c+=2)o[c]!=null&&o[c+1]<n&&(l=!0);return l&&PA(a,o,t),a}function DA(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let s=0;if(n)for(let o=0;o<r;o++){const a=t.child(o);for(let l=0;l<a.childCount;l++){const c=a.child(l);o+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let o=0;o<i.childCount;o++){const a=i.child(o);s+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function PA(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const s=t.map[i];if(r[s])continue;r[s]=!0;const o=n.nodeAt(s);if(!o)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=o.attrs;for(let c=0;c<l.colspan;c++){const d=e[(i+c)%t.width*2];d!=null&&(!l.colwidth||l.colwidth[c]!=d)&&((a||(a=LA(l)))[c]=d)}a&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function LA(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function Ut(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}const vr=new pt("selectingCells");function ui(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function BA(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function An(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function Ya(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=ui(e.$head)||$A(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function $A(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function td(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function FA(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function lu(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function fy(t,e,n){const r=t.node(-1),i=xt.get(r),s=t.start(-1),o=i.nextCell(t.pos-s,e,n);return o==null?null:t.node(0).resolve(s+o)}function fi(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function hy(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function HA(t,e,n){const r=Ut(e.type.schema).header_cell;for(let i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var ft=class er extends De{constructor(e,n=e){const r=e.node(-1),i=xt.get(r),s=e.start(-1),o=i.rectBetween(e.pos-s,n.pos-s),a=e.node(0),l=i.cellsInRect(o).filter(d=>d!=n.pos-s);l.unshift(n.pos-s);const c=l.map(d=>{const u=r.nodeAt(d);if(!u)throw new RangeError(`No cell with offset ${d} found`);const h=s+d+1;return new Qm(a.resolve(h),a.resolve(h+u.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(td(r)&&td(i)&&lu(r,i)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?er.rowSelection(r,i):s&&this.isColSelection()?er.colSelection(r,i):new er(r,i)}return Ie.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=xt.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},o=[];for(let l=i.top;l<i.bottom;l++){const c=[];for(let d=l*n.width+i.left,u=i.left;u<i.right;u++,d++){const h=n.map[d];if(s[h])continue;s[h]=!0;const f=n.findCell(h);let p=e.nodeAt(h);if(!p)throw new RangeError(`No cell with offset ${h} found`);const g=i.left-f.left,y=f.right-i.right;if(g>0||y>0){let b=p.attrs;if(g>0&&(b=fi(b,0,g)),y>0&&(b=fi(b,b.colspan-y,y)),f.left<i.left){if(p=p.type.createAndFill(b),!p)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(b)}`)}else p=p.type.create(b,p.content)}if(f.top<i.top||f.bottom>i.bottom){const b={...p.attrs,rowspan:Math.min(f.bottom,i.bottom)-Math.max(f.top,i.top)};f.top<i.top?p=p.type.createAndFill(b):p=p.type.create(b,p.content)}c.push(p)}o.push(e.child(l).copy(oe.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:o;return new ve(oe.from(a),1,1)}replace(e,n=ve.empty){const r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){const{$from:a,$to:l}=i[o],c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),o?ve.empty:n)}const s=De.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new ve(oe.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=xt.get(n),i=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let o=0;o<s.length;o++)e(n.nodeAt(s[o]),i+s[o])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=xt.get(r),s=e.start(-1),o=i.findCell(e.pos-s),a=i.findCell(n.pos-s),l=e.node(0);return o.top<=a.top?(o.top>0&&(e=l.resolve(s+i.map[o.left])),a.bottom<i.height&&(n=l.resolve(s+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(s+i.map[a.left])),o.bottom<i.height&&(e=l.resolve(s+i.map[i.width*(i.height-1)+o.right-1]))),new er(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=xt.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(i,s)>0)return!1;const o=i+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,a)==n.width}eq(e){return e instanceof er&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=xt.get(r),s=e.start(-1),o=i.findCell(e.pos-s),a=i.findCell(n.pos-s),l=e.node(0);return o.left<=a.left?(o.left>0&&(e=l.resolve(s+i.map[o.top*i.width])),a.right<i.width&&(n=l.resolve(s+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(s+i.map[a.top*i.width])),o.right<i.width&&(e=l.resolve(s+i.map[i.width*(o.top+1)-1]))),new er(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new er(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new er(e.resolve(n),e.resolve(r))}getBookmark(){return new UA(this.$anchorCell.pos,this.$headCell.pos)}};ft.prototype.visible=!1;De.jsonID("cell",ft);var UA=class py{constructor(e,n){this.anchor=e,this.head=n}map(e){return new py(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&lu(n,r)?new ft(n,r):De.near(r,1)}};function VA(t){if(!(t.selection instanceof ft))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(kt.node(r,r+n.nodeSize,{class:"selectedCell"}))}),nt.create(t.doc,e)}function WA({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,i=t.depth;for(;i>=0&&!(t.after(i+1)<t.end(i));i--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(i).type.spec.tableRole)}function qA({$from:t,$to:e}){let n,r;for(let i=t.depth;i>0;i--){const s=t.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let i=e.depth;i>0;i--){const s=e.node(i);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function KA(t,e,n){const r=(e||t).selection,i=(e||t).doc;let s,o;if(r instanceof je&&(o=r.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")s=ft.create(i,r.from);else if(o=="row"){const a=i.resolve(r.from+1);s=ft.rowSelection(a,a)}else if(!n){const a=xt.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];s=ft.create(i,l+1,c)}}else r instanceof Ie&&WA(r)?s=Ie.create(i,r.from):r instanceof Ie&&qA(r)&&(s=Ie.create(i,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}const GA=new pt("fix-tables");function my(t,e,n,r){const i=t.childCount,s=e.childCount;e:for(let o=0,a=0;o<s;o++){const l=e.child(o);for(let c=a,d=Math.min(i,o+3);c<d;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<i&&t.child(a).sameMarkup(l)?my(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function gy(t,e){let n;const r=(i,s)=>{i.type.spec.tableRole=="table"&&(n=JA(t,i,s,n))};return e?e.doc!=t.doc&&my(e.doc,t.doc,0,r):t.doc.descendants(r),n}function JA(t,e,n,r){const i=xt.get(e);if(!i.problems)return r;r||(r=t.tr);const s=[];for(let l=0;l<i.height;l++)s.push(0);for(let l=0;l<i.problems.length;l++){const c=i.problems[l];if(c.type=="collision"){const d=e.nodeAt(c.pos);if(!d)continue;const u=d.attrs;for(let h=0;h<u.rowspan;h++)s[c.row+h]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,fi(u,u.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const d=e.nodeAt(c.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...d.attrs,rowspan:d.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const d=e.nodeAt(c.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...d.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const d=r.mapping.map(n);r.delete(d,d+e.nodeSize)}}let o,a;for(let l=0;l<s.length;l++)s[l]&&(o==null&&(o=l),a=l);for(let l=0,c=n+1;l<i.height;l++){const d=e.child(l),u=c+d.nodeSize,h=s[l];if(h>0){let f="cell";d.firstChild&&(f=d.firstChild.type.spec.tableRole);const p=[];for(let y=0;y<h;y++){const b=Ut(t.schema)[f].createAndFill();b&&p.push(b)}const g=(l==0||o==l-1)&&a==l?c+1:u-1;r.insert(r.mapping.map(g),p)}c=u}return r.setMeta(GA,{fixTables:!0})}function Fn(t){const e=t.selection,n=Ya(t),r=n.node(-1),i=n.start(-1),s=xt.get(r);return{...e instanceof ft?s.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):s.findCell(n.pos-i),tableStart:i,map:s,table:r}}function yy(t,{map:e,tableStart:n,table:r},i){let s=i>0?-1:0;HA(e,r,i+s)&&(s=i==0||i==e.width?null:0);for(let o=0;o<e.height;o++){const a=o*e.width+i;if(i>0&&i<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,hy(c.attrs,i-e.colCount(l))),o+=c.attrs.rowspan-1}else{const l=s==null?Ut(r.type.schema).cell:r.nodeAt(e.map[a+s]).type,c=e.positionAt(o,i,r);t.insert(t.mapping.map(n+c),l.createAndFill())}}return t}function YA(t,e){if(!An(t))return!1;if(e){const n=Fn(t);e(yy(t.tr,n,n.left))}return!0}function XA(t,e){if(!An(t))return!1;if(e){const n=Fn(t);e(yy(t.tr,n,n.right))}return!0}function ZA(t,{map:e,table:n,tableStart:r},i){const s=t.mapping.maps.length;for(let o=0;o<e.height;){const a=o*e.width+i,l=e.map[a],c=n.nodeAt(l),d=c.attrs;if(i>0&&e.map[a-1]==l||i<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(r+l),null,fi(d,i-e.colCount(l)));else{const u=t.mapping.slice(s).map(r+l);t.delete(u,u+c.nodeSize)}o+=d.rowspan}}function QA(t,e){if(!An(t))return!1;if(e){const n=Fn(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let i=n.right-1;ZA(r,n,i),i!=n.left;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw new RangeError("No table found");n.table=s,n.map=xt.get(s)}e(r)}return!0}function eM(t,e,n){var r;const i=Ut(e.type.schema).header_cell;for(let s=0;s<t.width;s++)if(((r=e.nodeAt(t.map[s+n*t.width]))===null||r===void 0?void 0:r.type)!=i)return!1;return!0}function by(t,{map:e,tableStart:n,table:r},i){let s=n;for(let c=0;c<i;c++)s+=r.child(c).nodeSize;const o=[];let a=i>0?-1:0;eM(e,r,i+a)&&(a=i==0||i==e.height?null:0);for(let c=0,d=e.width*i;c<e.width;c++,d++)if(i>0&&i<e.height&&e.map[d]==e.map[d-e.width]){const u=e.map[d],h=r.nodeAt(u).attrs;t.setNodeMarkup(n+u,null,{...h,rowspan:h.rowspan+1}),c+=h.colspan-1}else{var l;const u=a==null?Ut(r.type.schema).cell:(l=r.nodeAt(e.map[d+a*e.width]))===null||l===void 0?void 0:l.type,h=u==null?void 0:u.createAndFill();h&&o.push(h)}return t.insert(s,Ut(r.type.schema).row.create(null,o)),t}function tM(t,e){if(!An(t))return!1;if(e){const n=Fn(t);e(by(t.tr,n,n.top))}return!0}function nM(t,e){if(!An(t))return!1;if(e){const n=Fn(t);e(by(t.tr,n,n.bottom))}return!0}function rM(t,{map:e,table:n,tableStart:r},i){let s=0;for(let c=0;c<i;c++)s+=n.child(c).nodeSize;const o=s+n.child(i).nodeSize,a=t.mapping.maps.length;t.delete(s+r,o+r);const l=new Set;for(let c=0,d=i*e.width;c<e.width;c++,d++){const u=e.map[d];if(!l.has(u)){if(l.add(u),i>0&&u==e.map[d-e.width]){const h=n.nodeAt(u).attrs;t.setNodeMarkup(t.mapping.slice(a).map(u+r),null,{...h,rowspan:h.rowspan-1}),c+=h.colspan-1}else if(i<e.height&&u==e.map[d+e.width]){const h=n.nodeAt(u),f=h.attrs,p=h.type.create({...f,rowspan:h.attrs.rowspan-1},h.content),g=e.positionAt(i+1,c,n);t.insert(t.mapping.slice(a).map(r+g),p),c+=f.colspan-1}}}}function iM(t,e){if(!An(t))return!1;if(e){const n=Fn(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let i=n.bottom-1;rM(r,n,i),i!=n.top;i--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw new RangeError("No table found");n.table=s,n.map=xt.get(n.table)}e(r)}return!0}function $h(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function sM({width:t,height:e,map:n},r){let i=r.top*t+r.left,s=i,o=(r.bottom-1)*t+r.left,a=i+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[s]==n[s-1]||r.right<t&&n[a]==n[a+1])return!0;s+=t,a+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[i]==n[i-t]||r.bottom<e&&n[o]==n[o+t])return!0;i++,o++}return!1}function Fh(t,e){const n=t.selection;if(!(n instanceof ft)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Fn(t),{map:i}=r;if(sM(i,r))return!1;if(e){const s=t.tr,o={};let a=oe.empty,l,c;for(let d=r.top;d<r.bottom;d++)for(let u=r.left;u<r.right;u++){const h=i.map[d*i.width+u],f=r.table.nodeAt(h);if(!(o[h]||!f))if(o[h]=!0,l==null)l=h,c=f;else{$h(f)||(a=a.append(f.content));const p=s.mapping.map(h+r.tableStart);s.delete(p,p+f.nodeSize)}}if(l==null||c==null)return!0;if(s.setNodeMarkup(l+r.tableStart,null,{...hy(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size>0){const d=l+1+c.content.size,u=$h(c)?l+1:d;s.replaceWith(u+r.tableStart,d+r.tableStart,a)}s.setSelection(new ft(s.doc.resolve(l+r.tableStart))),e(s)}return!0}function Hh(t,e){const n=Ut(t.schema);return oM(({node:r})=>n[r.type.spec.tableRole])(t,e)}function oM(t){return(e,n)=>{const r=e.selection;let i,s;if(r instanceof ft){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;i=r.$anchorCell.nodeAfter,s=r.$anchorCell.pos}else{var o;if(i=BA(r.$from),!i)return!1;s=(o=ui(r.$from))===null||o===void 0?void 0:o.pos}if(i==null||s==null||i.attrs.colspan==1&&i.attrs.rowspan==1)return!1;if(n){let a=i.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const d=Fn(e),u=e.tr;for(let f=0;f<d.right-d.left;f++)l.push(c?{...a,colwidth:c&&c[f]?[c[f]]:null}:a);let h;for(let f=d.top;f<d.bottom;f++){let p=d.map.positionAt(f,d.left,d.table);f==d.top&&(p+=i.nodeSize);for(let g=d.left,y=0;g<d.right;g++,y++)g==d.left&&f==d.top||u.insert(h=u.mapping.map(p+d.tableStart,1),t({node:i,row:f,col:g}).createAndFill(l[y]))}u.setNodeMarkup(s,t({node:i,row:d.top,col:d.left}),l[0]),r instanceof ft&&u.setSelection(new ft(u.doc.resolve(r.$anchorCell.pos),h?u.doc.resolve(h):void 0)),n(u)}return!0}}function aM(t,e){return function(n,r){if(!An(n))return!1;const i=Ya(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){const s=n.tr;n.selection instanceof ft?n.selection.forEachCell((o,a)=>{o.attrs[t]!==e&&s.setNodeMarkup(a,null,{...o.attrs,[t]:e})}):s.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[t]:e}),r(s)}return!0}}function lM(t){return function(e,n){if(!An(e))return!1;if(n){const r=Ut(e.schema),i=Fn(e),s=e.tr,o=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=o.map(l=>i.table.nodeAt(l));for(let l=0;l<o.length;l++)a[l].type==r.header_cell&&s.setNodeMarkup(i.tableStart+o[l],r.cell,a[l].attrs);if(s.steps.length===0)for(let l=0;l<o.length;l++)s.setNodeMarkup(i.tableStart+o[l],r.header_cell,a[l].attrs);n(s)}return!0}}function Uh(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const s=e.table.nodeAt(r[i]);if(s&&s.type!==n.header_cell)return!1}return!0}function Ls(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?lM(t):function(n,r){if(!An(n))return!1;if(r){const i=Ut(n.schema),s=Fn(n),o=n.tr,a=Uh("row",s,i),l=Uh("column",s,i),c=(t==="column"?a:t==="row"&&l)?1:0,d=t=="column"?{left:0,top:c,right:1,bottom:s.map.height}:t=="row"?{left:c,top:0,right:s.map.width,bottom:1}:s,u=t=="column"?l?i.cell:i.header_cell:t=="row"?a?i.cell:i.header_cell:i.cell;s.map.cellsInRect(d).forEach(h=>{const f=h+s.tableStart,p=o.doc.nodeAt(f);p&&o.setNodeMarkup(f,u,p.attrs)}),r(o)}return!0}}Ls("row",{useDeprecatedLogic:!0});Ls("column",{useDeprecatedLogic:!0});const cM=Ls("cell",{useDeprecatedLogic:!0});function dM(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,i=t.before();r>=0;r--){const s=t.node(-1).child(r),o=s.lastChild;if(o)return i-1-o.nodeSize;i-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),i=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return i+1;i+=s.nodeSize}}return null}function Vh(t){return function(e,n){if(!An(e))return!1;const r=dM(Ya(e),t);if(r==null)return!1;if(n){const i=e.doc.resolve(r);n(e.tr.setSelection(Ie.between(i,FA(i))).scrollIntoView())}return!0}}function uM(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function yo(t,e){const n=t.selection;if(!(n instanceof ft))return!1;if(e){const r=t.tr,i=Ut(t.schema).cell.createAndFill().content;n.forEachCell((s,o)=>{s.content.eq(i)||r.replace(r.mapping.map(o+1),r.mapping.map(o+s.nodeSize-1),new ve(i,0,0))}),r.docChanged&&e(r)}return!0}function fM(t){if(t.size===0)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const i=e.child(0),s=i.type.spec.tableRole,o=i.type.schema,a=[];if(s=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const d=l?0:Math.max(0,n-1),u=l<e.childCount-1?0:Math.max(0,r-1);(d||u)&&(c=nd(Ut(o).row,new ve(c,d,u)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(n||r?nd(Ut(o).row,new ve(e,n,r)).content:e);else return null;return hM(o,a)}function hM(t,e){const n=[];for(let i=0;i<e.length;i++){const s=e[i];for(let o=s.childCount-1;o>=0;o--){const{rowspan:a,colspan:l}=s.child(o).attrs;for(let c=i;c<i+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let i=0;i<n.length;i++)r=Math.max(r,n[i]);for(let i=0;i<n.length;i++)if(i>=e.length&&e.push(oe.empty),n[i]<r){const s=Ut(t).cell.createAndFill(),o=[];for(let a=n[i];a<r;a++)o.push(s);e[i]=e[i].append(oe.from(o))}return{height:e.length,width:r,rows:e}}function nd(t,e){const n=t.createAndFill();return new kd(n).replace(0,n.content.size,e).doc}function pM({width:t,height:e,rows:n},r,i){if(t!=r){const s=[],o=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let d=s[a]||0,u=0;d<r;u++){let h=l.child(u%l.childCount);d+h.attrs.colspan>r&&(h=h.type.createChecked(fi(h.attrs,h.attrs.colspan,d+h.attrs.colspan-r),h.content)),c.push(h),d+=h.attrs.colspan;for(let f=1;f<h.attrs.rowspan;f++)s[a+f]=(s[a+f]||0)+h.attrs.colspan}o.push(oe.from(c))}n=o,t=r}if(e!=i){const s=[];for(let o=0,a=0;o<i;o++,a++){const l=[],c=n[a%e];for(let d=0;d<c.childCount;d++){let u=c.child(d);o+u.attrs.rowspan>i&&(u=u.type.create({...u.attrs,rowspan:Math.max(1,i-u.attrs.rowspan)},u.content)),l.push(u)}s.push(oe.from(l))}n=s,e=i}return{width:t,height:e,rows:n}}function mM(t,e,n,r,i,s,o){const a=t.doc.type.schema,l=Ut(a);let c,d;if(i>e.width)for(let u=0,h=0;u<e.height;u++){const f=n.child(u);h+=f.nodeSize;const p=[];let g;f.lastChild==null||f.lastChild.type==l.cell?g=c||(c=l.cell.createAndFill()):g=d||(d=l.header_cell.createAndFill());for(let y=e.width;y<i;y++)p.push(g);t.insert(t.mapping.slice(o).map(h-1+r),p)}if(s>e.height){const u=[];for(let p=0,g=(e.height-1)*e.width;p<Math.max(e.width,i);p++){const y=p>=e.width?!1:n.nodeAt(e.map[g+p]).type==l.header_cell;u.push(y?d||(d=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const h=l.row.create(null,oe.from(u)),f=[];for(let p=e.height;p<s;p++)f.push(h);t.insert(t.mapping.slice(o).map(r+n.nodeSize-2),f)}return!!(c||d)}function Wh(t,e,n,r,i,s,o,a){if(o==0||o==e.height)return!1;let l=!1;for(let c=i;c<s;c++){const d=o*e.width+c,u=e.map[d];if(e.map[d-e.width]==u){l=!0;const h=n.nodeAt(u),{top:f,left:p}=e.findCell(u);t.setNodeMarkup(t.mapping.slice(a).map(u+r),null,{...h.attrs,rowspan:o-f}),t.insert(t.mapping.slice(a).map(e.positionAt(o,p,n)),h.type.createAndFill({...h.attrs,rowspan:f+h.attrs.rowspan-o})),c+=h.attrs.colspan-1}}return l}function qh(t,e,n,r,i,s,o,a){if(o==0||o==e.width)return!1;let l=!1;for(let c=i;c<s;c++){const d=c*e.width+o,u=e.map[d];if(e.map[d-1]==u){l=!0;const h=n.nodeAt(u),f=e.colCount(u),p=t.mapping.slice(a).map(u+r);t.setNodeMarkup(p,null,fi(h.attrs,o-f,h.attrs.colspan-(o-f))),t.insert(p+h.nodeSize,h.type.createAndFill(fi(h.attrs,0,o-f))),c+=h.attrs.rowspan-1}}return l}function Kh(t,e,n,r,i){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let o=xt.get(s);const{top:a,left:l}=r,c=l+i.width,d=a+i.height,u=t.tr;let h=0;function f(){if(s=n?u.doc.nodeAt(n-1):u.doc,!s)throw new Error("No table found");o=xt.get(s),h=u.mapping.maps.length}mM(u,o,s,n,c,d,h)&&f(),Wh(u,o,s,n,l,c,a,h)&&f(),Wh(u,o,s,n,l,c,d,h)&&f(),qh(u,o,s,n,a,d,l,h)&&f(),qh(u,o,s,n,a,d,c,h)&&f();for(let p=a;p<d;p++){const g=o.positionAt(p,l,s),y=o.positionAt(p,c,s);u.replace(u.mapping.slice(h).map(g+n),u.mapping.slice(h).map(y+n),new ve(i.rows[p-a],0,0))}f(),u.setSelection(new ft(u.doc.resolve(n+o.positionAt(a,l,s)),u.doc.resolve(n+o.positionAt(d-1,c-1,s)))),e(u)}const gM=Ld({ArrowLeft:bo("horiz",-1),ArrowRight:bo("horiz",1),ArrowUp:bo("vert",-1),ArrowDown:bo("vert",1),"Shift-ArrowLeft":xo("horiz",-1),"Shift-ArrowRight":xo("horiz",1),"Shift-ArrowUp":xo("vert",-1),"Shift-ArrowDown":xo("vert",1),Backspace:yo,"Mod-Backspace":yo,Delete:yo,"Mod-Delete":yo});function Do(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function bo(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;if(s instanceof ft)return Do(n,r,De.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const o=xy(i,t,e);if(o==null)return!1;if(t=="horiz")return Do(n,r,De.near(n.doc.resolve(s.head+e),e));{const a=n.doc.resolve(o),l=fy(a,t,e);let c;return l?c=De.near(l,1):e<0?c=De.near(n.doc.resolve(a.before(-1)),-1):c=De.near(n.doc.resolve(a.after(-1)),1),Do(n,r,c)}}}function xo(t,e){return(n,r,i)=>{if(!i)return!1;const s=n.selection;let o;if(s instanceof ft)o=s;else{const l=xy(i,t,e);if(l==null)return!1;o=new ft(n.doc.resolve(l))}const a=fy(o.$headCell,t,e);return a?Do(n,r,new ft(o.$anchorCell,a)):!1}}function yM(t,e){const n=t.state.doc,r=ui(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new ft(r))),!0):!1}function bM(t,e,n){if(!An(t.state))return!1;let r=fM(n);const i=t.state.selection;if(i instanceof ft){r||(r={width:1,height:1,rows:[oe.from(nd(Ut(t.state.schema).cell,n))]});const s=i.$anchorCell.node(-1),o=i.$anchorCell.start(-1),a=xt.get(s).rectBetween(i.$anchorCell.pos-o,i.$headCell.pos-o);return r=pM(r,a.right-a.left,a.bottom-a.top),Kh(t.state,t.dispatch,o,a,r),!0}else if(r){const s=Ya(t.state),o=s.start(-1);return Kh(t.state,t.dispatch,o,xt.get(s.node(-1)).findCell(s.pos-o),r),!0}else return!1}function xM(t,e){var n;if(e.button!=0||e.ctrlKey||e.metaKey)return;const r=Gh(t,e.target);let i;if(e.shiftKey&&t.state.selection instanceof ft)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(i=ui(t.state.selection.$anchor))!=null&&((n=Ul(t,e))===null||n===void 0?void 0:n.pos)!=i.pos)s(i,e),e.preventDefault();else if(!r)return;function s(l,c){let d=Ul(t,c);const u=vr.getState(t.state)==null;if(!d||!lu(l,d))if(u)d=l;else return;const h=new ft(l,d);if(u||!t.state.selection.eq(h)){const f=t.state.tr.setSelection(h);u&&f.setMeta(vr,l.pos),t.dispatch(f)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",a),vr.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(vr,-1))}function a(l){const c=l,d=vr.getState(t.state);let u;if(d!=null)u=t.state.doc.resolve(d);else if(Gh(t,c.target)!=r&&(u=Ul(t,e),!u))return o();u&&s(u,c)}t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",a)}function xy(t,e,n){if(!(t.state.selection instanceof Ie))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const o=r.before(i),a=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(a)?o:null}}return null}function Gh(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function Ul(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});if(!n)return null;let{inside:r,pos:i}=n;return r>=0&&ui(t.state.doc.resolve(r))||ui(t.state.doc.resolve(i))}var vM=class{constructor(e,n){this.node=e,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),rd(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,rd(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function rd(t,e,n,r,i,s){let o=0,a=!0,l=e.firstChild;const c=t.firstChild;if(c){for(let u=0,h=0;u<c.childCount;u++){const{colspan:f,colwidth:p}=c.child(u).attrs;for(let g=0;g<f;g++,h++){const y=i==h?s:p&&p[g],b=y?y+"px":"";if(o+=y||r,y||(a=!1),l)l.style.width!=b&&(l.style.width=b),l=l.nextSibling;else{const x=document.createElement("col");x.style.width=b,e.appendChild(x)}}}for(;l;){var d;const u=l.nextSibling;(d=l.parentNode)===null||d===void 0||d.removeChild(l),l=u}a?(n.style.width=o+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=o+"px")}}const ln=new pt("tableColumnResizing");function wM({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=vM,lastColumnResizable:i=!0}={}){const s=new rt({key:ln,state:{init(o,a){var l;const c=(l=s.spec)===null||l===void 0||(l=l.props)===null||l===void 0?void 0:l.nodeViews,d=Ut(a.schema).table.name;return r&&c&&(c[d]=(u,h)=>new r(u,n,h)),new kM(-1,!1)},apply(o,a){return a.apply(o)}},props:{attributes:o=>{const a=ln.getState(o);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,a)=>{SM(o,a,t,i)},mouseleave:o=>{EM(o)},mousedown:(o,a)=>{CM(o,a,e,n)}},decorations:o=>{const a=ln.getState(o);if(a&&a.activeHandle>-1)return MM(o,a.activeHandle)},nodeViews:{}}});return s}var kM=class Po{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(ln);if(r&&r.setHandle!=null)return new Po(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new Po(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let i=e.mapping.map(n.activeHandle,-1);return td(e.doc.resolve(i))||(i=-1),new Po(i,n.dragging)}return n}};function SM(t,e,n,r){if(!t.editable)return;const i=ln.getState(t.state);if(i&&!i.dragging){const s=NM(e.target);let o=-1;if(s){const{left:a,right:l}=s.getBoundingClientRect();e.clientX-a<=n?o=Jh(t,e,"left",n):l-e.clientX<=n&&(o=Jh(t,e,"right",n))}if(o!=i.activeHandle){if(!r&&o!==-1){const a=t.state.doc.resolve(o),l=a.node(-1),c=xt.get(l),d=a.start(-1);if(c.colCount(a.pos-d)+a.nodeAfter.attrs.colspan-1==c.width-1)return}vy(t,o)}}}function EM(t){if(!t.editable)return;const e=ln.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&vy(t,-1)}function CM(t,e,n,r){var i;if(!t.editable)return!1;const s=(i=t.dom.ownerDocument.defaultView)!==null&&i!==void 0?i:window,o=ln.getState(t.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const a=t.state.doc.nodeAt(o.activeHandle),l=_M(t,o.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(ln,{setDragging:{startX:e.clientX,startWidth:l}}));function c(u){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",d);const h=ln.getState(t.state);h!=null&&h.dragging&&(TM(t,h.activeHandle,Yh(h.dragging,u,n)),t.dispatch(t.state.tr.setMeta(ln,{setDragging:null})))}function d(u){if(!u.which)return c(u);const h=ln.getState(t.state);if(h&&h.dragging){const f=Yh(h.dragging,u,n);Xh(t,h.activeHandle,f,r)}}return Xh(t,o.activeHandle,l,r),s.addEventListener("mouseup",c),s.addEventListener("mousemove",d),e.preventDefault(),!0}function _M(t,e,{colspan:n,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const s=t.domAtPos(e);let o=s.node.childNodes[s.offset].offsetWidth,a=n;if(r)for(let l=0;l<n;l++)r[l]&&(o-=r[l],a--);return o/a}function NM(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function Jh(t,e,n,r){const i=n=="right"?-r:r,s=t.posAtCoords({left:e.clientX+i,top:e.clientY});if(!s)return-1;const{pos:o}=s,a=ui(t.state.doc.resolve(o));if(!a)return-1;if(n=="right")return a.pos;const l=xt.get(a.node(-1)),c=a.start(-1),d=l.map.indexOf(a.pos-c);return d%l.width==0?-1:c+l.map[d-1]}function Yh(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function vy(t,e){t.dispatch(t.state.tr.setMeta(ln,{setHandle:e}))}function TM(t,e,n){const r=t.state.doc.resolve(e),i=r.node(-1),s=xt.get(i),o=r.start(-1),a=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<s.height;c++){const d=c*s.width+a;if(c&&s.map[d]==s.map[d-s.width])continue;const u=s.map[d],h=i.nodeAt(u).attrs,f=h.colspan==1?0:a-s.colCount(u);if(h.colwidth&&h.colwidth[f]==n)continue;const p=h.colwidth?h.colwidth.slice():AM(h.colspan);p[f]=n,l.setNodeMarkup(o+u,null,{...h,colwidth:p})}l.docChanged&&t.dispatch(l)}function Xh(t,e,n,r){const i=t.state.doc.resolve(e),s=i.node(-1),o=i.start(-1),a=xt.get(s).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1;let l=t.domAtPos(i.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&rd(s,l.firstChild,l,r,a,n)}function AM(t){return Array(t).fill(0)}function MM(t,e){const n=[],r=t.doc.resolve(e),i=r.node(-1);if(!i)return nt.empty;const s=xt.get(i),o=r.start(-1),a=s.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1;for(let c=0;c<s.height;c++){const d=a+c*s.width;if((a==s.width-1||s.map[d]!=s.map[d+1])&&(c==0||s.map[d]!=s.map[d-s.width])){var l;const u=s.map[d],h=o+u+i.nodeAt(u).nodeSize-1,f=document.createElement("div");f.className="column-resize-handle",!((l=ln.getState(t))===null||l===void 0)&&l.dragging&&n.push(kt.node(o+u,o+u+i.nodeAt(u).nodeSize,{class:"column-resize-dragging"})),n.push(kt.widget(h,f))}}return nt.create(t.doc,n)}function OM({allowTableNodeSelection:t=!1}={}){return new rt({key:vr,state:{init(){return null},apply(e,n){const r=e.getMeta(vr);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:i,pos:s}=e.mapping.mapResult(n);return i?null:s}},props:{decorations:VA,handleDOMEvents:{mousedown:xM},createSelectionBetween(e){return vr.getState(e.state)!=null?e.state.selection:null},handleTripleClick:yM,handleKeyDown:gM,handlePaste:bM},appendTransaction(e,n,r){return KA(r,gy(r,n),t)}})}var wy=_t.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{var e,n;const r=t.getAttribute("colwidth"),i=r?r.split(",").map(s=>parseInt(s,10)):null;if(!i){const s=(e=t.closest("table"))==null?void 0:e.querySelectorAll("colgroup > col"),o=Array.from(((n=t.parentElement)==null?void 0:n.children)||[]).indexOf(t);if(o&&o>-1&&s&&s[o]){const a=s[o].getAttribute("width");return a?[parseInt(a,10)]:null}}return i}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",ot(this.options.HTMLAttributes,t),0]}}),ky=_t.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",ot(this.options.HTMLAttributes,t),0]}}),Sy=_t.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",ot(this.options.HTMLAttributes,t),0]}});function id(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function Zh(t,e,n,r,i,s){var o;let a=0,l=!0,c=e.firstChild;const d=t.firstChild;if(d!==null)for(let h=0,f=0;h<d.childCount;h+=1){const{colspan:p,colwidth:g}=d.child(h).attrs;for(let y=0;y<p;y+=1,f+=1){const b=i===f?s:g&&g[y],x=b?`${b}px`:"";if(a+=b||r,b||(l=!1),c){if(c.style.width!==x){const[w,v]=id(r,b);c.style.setProperty(w,v)}c=c.nextSibling}else{const w=document.createElement("col"),[v,E]=id(r,b);w.style.setProperty(v,E),e.appendChild(w)}}}for(;c;){const h=c.nextSibling;(o=c.parentNode)==null||o.removeChild(c),c=h}const u=t.attrs.style&&typeof t.attrs.style=="string"&&/\bwidth\s*:/i.test(t.attrs.style);l&&!u?(n.style.width=`${a}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${a}px`)}var jM=class{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),t.attrs.style&&(this.table.style.cssText=t.attrs.style),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Zh(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!==this.node.type?!1:(this.node=t,Zh(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){const e=t.target,n=this.dom.contains(e),r=this.contentDOM.contains(e);return!!(n&&!r&&(t.type==="attributes"||t.type==="childList"||t.type==="characterData"))}};function zM(t,e,n,r){let i=0,s=!0;const o=[],a=t.firstChild;if(!a)return{};for(let u=0,h=0;u<a.childCount;u+=1){const{colspan:f,colwidth:p}=a.child(u).attrs;for(let g=0;g<f;g+=1,h+=1){const y=n===h?r:p&&p[g];i+=y||e,y||(s=!1);const[b,x]=id(e,y);o.push(["col",{style:`${b}: ${x}`}])}}const l=s?`${i}px`:"",c=s?"":`${i}px`;return{colgroup:["colgroup",{},...o],tableWidth:l,tableMinWidth:c}}function Qh(t,e){return t.createAndFill()}function IM(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function RM(t,e,n,r,i){const s=IM(t),o=[],a=[];for(let c=0;c<n;c+=1){const d=Qh(s.cell);if(d&&a.push(d),r){const u=Qh(s.header_cell);u&&o.push(u)}}const l=[];for(let c=0;c<e;c+=1)l.push(s.row.createChecked(null,r&&c===0?o:a));return s.table.createChecked(null,l)}function DM(t){return t instanceof ft}var vo=({editor:t})=>{const{selection:e}=t.state;if(!DM(e))return!1;let n=0;const r=r0(e.ranges[0].$from,s=>s.type.name==="table");return r==null||r.node.descendants(s=>{if(s.type.name==="table")return!1;["tableCell","tableHeader"].includes(s.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},PM="";function LM(t){return(t||"").replace(/\s+/g," ").trim()}function BM(t,e,n={}){var r;const i=(r=n.cellLineSeparator)!=null?r:PM;if(!t||!t.content||t.content.length===0)return"";const s=[];t.content.forEach(p=>{const g=[];p.content&&p.content.forEach(y=>{let b="";y.content&&Array.isArray(y.content)&&y.content.length>1?b=y.content.map(E=>e.renderChildren(E)).join(i):b=y.content?e.renderChildren(y.content):"";const x=LM(b),w=y.type==="tableHeader";g.push({text:x,isHeader:w})}),s.push(g)});const o=s.reduce((p,g)=>Math.max(p,g.length),0);if(o===0)return"";const a=new Array(o).fill(0);s.forEach(p=>{var g;for(let y=0;y<o;y+=1){const x=(((g=p[y])==null?void 0:g.text)||"").length;x>a[y]&&(a[y]=x),a[y]<3&&(a[y]=3)}});const l=(p,g)=>p+" ".repeat(Math.max(0,g-p.length)),c=s[0],d=c.some(p=>p.isHeader);let u=`
`;const h=new Array(o).fill(0).map((p,g)=>d&&c[g]&&c[g].text||"");return u+=`| ${h.map((p,g)=>l(p,a[g])).join(" | ")} |
`,u+=`| ${a.map(p=>"-".repeat(Math.max(3,p))).join(" | ")} |
`,(d?s.slice(1):s).forEach(p=>{u+=`| ${new Array(o).fill(0).map((g,y)=>l(p[y]&&p[y].text||"",a[y])).join(" | ")} |
`}),u}var $M=BM,Ey=_t.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,renderWrapper:!1,handleWidth:5,cellMinWidth:25,View:jM,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:i}=zM(t,this.options.cellMinWidth),s=e.style;function o(){return s||(r?`width: ${r}`:`min-width: ${i}`)}const a=["table",ot(this.options.HTMLAttributes,e,{style:o()}),n,["tbody",0]];return this.options.renderWrapper?["div",{class:"tableWrapper"},a]:a},parseMarkdown:(t,e)=>{const n=[];if(t.header){const r=[];t.header.forEach(i=>{r.push(e.createNode("tableHeader",{},[{type:"paragraph",content:e.parseInline(i.tokens)}]))}),n.push(e.createNode("tableRow",{},r))}return t.rows&&t.rows.forEach(r=>{const i=[];r.forEach(s=>{i.push(e.createNode("tableCell",{},[{type:"paragraph",content:e.parseInline(s.tokens)}]))}),n.push(e.createNode("tableRow",{},i))}),e.createNode("table",void 0,n)},renderMarkdown:(t,e)=>$M(t,e),addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:s})=>{const o=RM(s.schema,t,e,n);if(i){const a=r.selection.from+1;r.replaceSelectionWith(o).scrollIntoView().setSelection(Ie.near(r.doc.resolve(a)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>YA(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>XA(t,e),deleteColumn:()=>({state:t,dispatch:e})=>QA(t,e),addRowBefore:()=>({state:t,dispatch:e})=>tM(t,e),addRowAfter:()=>({state:t,dispatch:e})=>nM(t,e),deleteRow:()=>({state:t,dispatch:e})=>iM(t,e),deleteTable:()=>({state:t,dispatch:e})=>uM(t,e),mergeCells:()=>({state:t,dispatch:e})=>Fh(t,e),splitCell:()=>({state:t,dispatch:e})=>Hh(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>Ls("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>Ls("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>cM(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>Fh(t,e)?!0:Hh(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>aM(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>Vh(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>Vh(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&gy(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=ft.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:vo,"Mod-Backspace":vo,Delete:vo,"Mod-Delete":vo}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[wM({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],OM({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:Qe(Oe(t,"tableRole",e))}}});at.create({name:"tableKit",addExtensions(){const t=[];return this.options.table!==!1&&t.push(Ey.configure(this.options.table)),this.options.tableCell!==!1&&t.push(wy.configure(this.options.tableCell)),this.options.tableHeader!==!1&&t.push(ky.configure(this.options.tableHeader)),this.options.tableRow!==!1&&t.push(Sy.configure(this.options.tableRow)),t}});var $r={},Kn={},Vl={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var ep;function kn(){return ep||(ep=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Vl)),Vl.exports}var Fr={},tp;function cu(){if(tp)return Fr;tp=1;var t=Fr&&Fr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.useFrame=void 0;const e=t(Bt()),n=r=>e.default.useMemo(()=>r||{document:typeof document<"u"?document:void 0,window:typeof window<"u"?window:void 0},[r]);return Fr.useFrame=n,Fr}var Gn={},Jn={},np;function Rr(){if(np)return Jn;np=1;var t=Jn&&Jn.__rest||function(s,o){var a={};for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&o.indexOf(l)<0&&(a[l]=s[l]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(s);c<l.length;c++)o.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(s,l[c])&&(a[l[c]]=s[l[c]]);return a},e=Jn&&Jn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.EmbedStyle=void 0;const n=e(kn()),r=e(Bt()),i=s=>{var o=t(s,[]);return r.default.createElement("style",Object.assign({},o,{className:(0,n.default)(o.className),style:Object.assign({},o.style)}),`
        .rsme-embed .rsme-d-none {
          display: none;
        }
    
        .rsme-embed .twitter-tweet {
          margin: 0 !important;
        }
    
        .rsme-embed blockquote {
          margin: 0 !important;
          padding: 0 !important;
        }

        .rsme-embed.rsme-facebook-embed .fb-post iframe {
          width: 100% !important;
        }

        .rsme-embed.rsme-facebook-embed .fb-post span {
          width: 100% !important;
        }
      `)};return Jn.EmbedStyle=i,Jn}var Yn={},rp;function Cy(){if(rp)return Yn;rp=1;var t=Yn&&Yn.__rest||function(s,o){var a={};for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&o.indexOf(l)<0&&(a[l]=s[l]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(s);c<l.length;c++)o.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(s,l[c])&&(a[l[c]]=s[l[c]]);return a},e=Yn&&Yn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.BorderSpinner=void 0;const n=e(kn()),r=e(Bt()),i=s=>{var o=t(s,[]);return r.default.createElement(r.default.Fragment,null,r.default.createElement("style",null,`
        .rsme-spinner {
          border: 3px solid rgba(0,0,0,0.75);
          border-right-color: transparent;
          border-radius: 50%;
          animation: rsme-spin 1s linear infinite;
        }
        @keyframes rsme-spin {
          0% {
            transform: rotate(0deg);
          }
          100% {
            transform: rotate(360deg);
          }
        }  
      `),r.default.createElement("div",Object.assign({},o,{className:(0,n.default)("rsme-spinner",o.className),style:Object.assign({width:10,height:10},o.style)})))};return Yn.BorderSpinner=i,Yn}var Hr={},ip;function FM(){return ip||(ip=1,(function(t){var e=Hr&&Hr.__rest||function(c,d){var u={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&d.indexOf(h)<0&&(u[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,h=Object.getOwnPropertySymbols(c);f<h.length;f++)d.indexOf(h[f])<0&&Object.prototype.propertyIsEnumerable.call(c,h[f])&&(u[h[f]]=c[h[f]]);return u},n=Hr&&Hr.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0}),t.ShareArrowIcon=t.ChatBubbleIcon=t.HeartIcon=t.EngagementIconsPlaceholder=void 0;const r=n(kn()),i=n(Bt()),s=c=>{var d=e(c,[]);return i.default.createElement("div",Object.assign({},d,{className:(0,r.default)(d.className),style:Object.assign({display:"flex",alignItems:"center",columnGap:14},d.style)}),i.default.createElement(t.HeartIcon,null),i.default.createElement(t.ChatBubbleIcon,null),i.default.createElement(t.ShareArrowIcon,null))};t.EngagementIconsPlaceholder=s;const o=c=>i.default.createElement("div",Object.assign({},c),i.default.createElement("div",{style:{backgroundColor:"#F4F4F4",borderRadius:"50%",height:"12.5px",width:"12.5px",transform:"translateX(0px) translateY(7px)"}}),i.default.createElement("div",{style:{backgroundColor:"#F4F4F4",height:"12.5px",transform:"rotate(-45deg) translateX(3px) translateY(1px)",width:"12.5px",flexGrow:0,marginRight:"6px",marginLeft:"2px"}}),i.default.createElement("div",{style:{backgroundColor:"#F4F4F4",borderRadius:"50%",height:"12.5px",width:"12.5px",transform:"translateX(9px) translateY(-18px)"}}));t.HeartIcon=o;const a=c=>i.default.createElement("div",Object.assign({},c),i.default.createElement("div",{style:{backgroundColor:"#F4F4F4",borderRadius:"50%",height:"20px",width:"20px"}}),i.default.createElement("div",{style:{width:0,height:0,borderTop:"2px solid transparent",borderLeft:"6px solid #f4f4f4",borderBottom:"2px solid transparent",transform:"translateX(16px) translateY(-4px) rotate(30deg)"}}));t.ChatBubbleIcon=a;const l=c=>i.default.createElement("div",Object.assign({},c,{style:{height:25,width:25,transform:"translateX(0px) translateY(-2px)"}}),i.default.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",xmlSpace:"preserve"},i.default.createElement("path",{style:{fill:"#F4F4F4"},d:`M295.204,180.593C132.168,180.593,0,312.759,0,475.796
c51.398-130.047,184.869-203.22,317.483-183.603L295.204,180.593z`}),i.default.createElement("path",{style:{fill:"#F4F4F4"},d:`M512,253L295.204,36.204v217.818C159.946,249.655,34.992,339.262,0,475.794
c59.905-109.171,178.724-165.463,295.204-151.033v145.035L512,253z`})));t.ShareArrowIcon=l})(Hr)),Hr}var Xn={},sp;function HM(){if(sp)return Xn;sp=1;var t=Xn&&Xn.__rest||function(s,o){var a={};for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&o.indexOf(l)<0&&(a[l]=s[l]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(s);c<l.length;c++)o.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(s,l[c])&&(a[l[c]]=s[l[c]]);return a},e=Xn&&Xn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.ProfilePlaceholder=void 0;const n=e(kn()),r=e(Bt()),i=s=>{var o=t(s,[]);return r.default.createElement("div",Object.assign({},o,{className:(0,n.default)(o.className),style:Object.assign({},o.style)}),r.default.createElement("div",{style:{display:"flex",columnGap:14}},r.default.createElement("div",{style:{backgroundColor:"#F4F4F4",borderRadius:"50%",width:40,height:40}}),r.default.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",rowGap:6}},r.default.createElement("div",{style:{backgroundColor:"#F4F4F4",borderRadius:4,width:100,height:14}}),r.default.createElement("div",{style:{backgroundColor:"#F4F4F4",borderRadius:4,width:60,height:14}}))))};return Xn.ProfilePlaceholder=i,Xn}var op;function Dr(){if(op)return Gn;op=1;var t=Gn&&Gn.__rest||function(c,d){var u={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&d.indexOf(h)<0&&(u[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,h=Object.getOwnPropertySymbols(c);f<h.length;f++)d.indexOf(h[f])<0&&Object.prototype.propertyIsEnumerable.call(c,h[f])&&(u[h[f]]=c[h[f]]);return u},e=Gn&&Gn.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.PlaceholderEmbed=void 0;const n=e(kn()),r=e(Bt()),i=Rr(),s=Cy(),o=FM(),a=HM(),l=c=>{var d,{url:u,linkText:h="View post",imageUrl:f,spinner:p=r.default.createElement(s.BorderSpinner,null),spinnerDisabled:g}=c,y=t(c,["url","linkText","imageUrl","spinner","spinnerDisabled"]);return r.default.createElement("div",Object.assign({},y,{className:(0,n.default)(y.className),style:Object.assign({overflow:"hidden",border:"1px solid #dee2e6",backgroundColor:"#ffffff",borderRadius:0,boxSizing:"border-box",position:"relative"},y.style)}),r.default.createElement(i.EmbedStyle,null),r.default.createElement("a",{href:u,style:{textDecoration:"none"},target:"_blank",rel:"noopener noreferrer"},!f&&r.default.createElement("div",{style:{position:"absolute",top:0,left:0,display:"flex",justifyContent:"space-between",alignItems:"start",paddingLeft:16,paddingRight:16,paddingTop:16,paddingBottom:16,zIndex:2,backgroundColor:"#ffffff"}},r.default.createElement(a.ProfilePlaceholder,null)),r.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:f?"start":"center",height:"100%",width:"100%"}},!f&&r.default.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",rowGap:16,zIndex:3,padding:8,backgroundColor:"#ffffff"}},!g&&p,!!h&&r.default.createElement("div",{style:{color:"#000000",fontFamily:"Arial,sans-serif",fontSize:"14px",fontStyle:"normal",fontWeight:550,lineHeight:"18px",textAlign:"center"}},h)),f&&(typeof((d=y.style)===null||d===void 0?void 0:d.height)<"u"?r.default.createElement("div",{style:{width:"100%",height:"100%",background:`url("${f}")`,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",marginBottom:"40"}}):r.default.createElement("div",{style:{width:"100%",marginBottom:40}},r.default.createElement("img",{src:f,style:{width:"100%"}})))),r.default.createElement("div",{style:{position:"absolute",bottom:0,left:0,height:40,width:"100%",backgroundColor:"#ffffff",zIndex:1}},!f&&r.default.createElement(o.EngagementIconsPlaceholder,{style:{marginLeft:16}}),f&&r.default.createElement("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"space-between",columnGap:16}},r.default.createElement("div",{style:{color:"#0095f6",fontWeight:600,fontFamily:"Arial,sans-serif",fontSize:"14px",fontStyle:"normal",whiteSpace:"nowrap",marginLeft:16}},h),!g&&r.default.createElement("div",{style:{marginRight:16}},p)))))};return Gn.PlaceholderEmbed=l,Gn}var Yi={},ap;function du(){if(ap)return Yi;ap=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.generateUUID=void 0;const t=()=>{let e=new Date().getTime(),n=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){let i=Math.random()*16;return e>0?(i=(e+i)%16|0,e=Math.floor(e/16)):(i=(n+i)%16|0,n=Math.floor(n/16)),(r==="x"?i:i&3|8).toString(16)})};return Yi.generateUUID=t,Yi}var Ur={},lp;function uu(){if(lp)return Ur;lp=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.Subs=Ur.Subscribe=void 0;class t{static subscribe(r){try{return r()}catch(i){console.error(i)}return()=>{}}static subscribeEvent(r,i,s){return r.addListener(i,s),()=>{r.removeListener(i,s)}}static subscribeDOMEvent(r,i,s,o){return r.addEventListener(i,s,o),()=>{r.removeEventListener(i,s,o)}}static setTimeout(r,i,...s){const o=setTimeout(r,i,s);return()=>clearTimeout(o)}static setInterval(r,i,...s){const o=setInterval(r,i,s);return()=>clearInterval(o)}static unsubAll(r){if(Array.isArray(r))r.forEach(i=>{try{i()}catch(s){console.error(s)}});else try{r()}catch(i){console.error(i)}}static createCleanup(r){return()=>t.unsubAll(r)}}Ur.Subscribe=t;class e{constructor(r=[]){this.list=r}subscribe(r){const i=t.subscribe(r);return this.push(i),i}subscribeEvent(r,i,s){const o=t.subscribeEvent(r,i,s);return this.push(o),o}subscribeDOMEvent(r,i,s){const o=t.subscribeDOMEvent(r,i,s);return this.push(o),o}setTimeout(r,i,...s){const o=setTimeout(r,i,s),a=()=>clearTimeout(o);return this.push(a),a}setInterval(r,i,...s){const o=setInterval(r,i,s),a=()=>clearInterval(o);return this.push(a),a}push(r){this.list.push(r)}unsubAll(){t.unsubAll(this.list),this.list.splice(0,this.list.length)}createCleanup(){return()=>{this.unsubAll()}}}return Ur.Subs=e,Ur}var cp;function UM(){if(cp)return Kn;cp=1;var t=Kn&&Kn.__rest||function(C,N){var j={};for(var M in C)Object.prototype.hasOwnProperty.call(C,M)&&N.indexOf(M)<0&&(j[M]=C[M]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,M=Object.getOwnPropertySymbols(C);T<M.length;T++)N.indexOf(M[T])<0&&Object.prototype.propertyIsEnumerable.call(C,M[T])&&(j[M[T]]=C[M[T]]);return j},e=Kn&&Kn.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.FacebookEmbed=void 0;const n=e(kn()),r=e(Bt()),i=cu(),s=Dr(),o=du(),a=Rr(),l=uu(),c="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v16.0",d=550,u=d,h=372,f=3,p="check-script",g="load-script",y="confirm-script-loaded",b="process-embed",x="confirm-embed-success",w="retrying",v="embed-success",E=C=>{var N,j,{url:M,width:T,height:P,linkText:_="View post on Facebook",placeholderImageUrl:z,placeholderSpinner:k,placeholderSpinnerDisabled:L=!1,placeholderProps:W,embedPlaceholder:H,placeholderDisabled:ie=!1,scriptLoadDisabled:q=!1,retryDelay:fe=5e3,retryDisabled:I=!1,frame:D=void 0,debug:ae=!1}=C,Z=t(C,["url","width","height","linkText","placeholderImageUrl","placeholderSpinner","placeholderSpinnerDisabled","placeholderProps","embedPlaceholder","placeholderDisabled","scriptLoadDisabled","retryDelay","retryDisabled","frame","debug"]);const[J,_e]=r.default.useState(p),Pe=r.default.useMemo(()=>J===v,[J]),ne=r.default.useRef((0,o.generateUUID)()),[ge,Ce]=r.default.useState(Date.now()),Le=r.default.useMemo(()=>`${ne.current}-${ge}`,[ge]),Re=(0,i.useFrame)(D);r.default.useEffect(()=>{ae&&console.log(`[${new Date().toISOString()}]: ${J}`)},[ae,J]),r.default.useEffect(()=>{var O,A,B;J===p&&(!((B=(A=(O=Re.window)===null||O===void 0?void 0:O.FB)===null||A===void 0?void 0:A.XFBML)===null||B===void 0)&&B.parse?_e(b):q?console.error("Facebook embed script not found. Unable to process Facebook embed:",M):_e(g))},[q,J,M,Re.window]),r.default.useEffect(()=>{if(J===g&&Re.document){const O=Re.document.createElement("script");O.setAttribute("src",c),Re.document.head.appendChild(O),_e(y)}},[J,Re.document]),r.default.useEffect(()=>{const O=new l.Subs;return J===y&&O.setInterval(()=>{var A,B,Y;!((Y=(B=(A=Re.window)===null||A===void 0?void 0:A.FB)===null||B===void 0?void 0:B.XFBML)===null||Y===void 0)&&Y.parse&&_e(b)},1),O.createCleanup()},[J,Re.window]),r.default.useEffect(()=>{var O,A,B;if(J===b){const Y=(B=(A=(O=Re.window)===null||O===void 0?void 0:O.FB)===null||A===void 0?void 0:A.XFBML)===null||B===void 0?void 0:B.parse;Y?(Y(),_e(x)):console.error("Facebook embed script not found. Unable to process Facebook embed:",M)}},[J,M,Re.window]),r.default.useEffect(()=>{const O=new l.Subs;return J===x&&(O.setInterval(()=>{if(Re.document){const A=Re.document.getElementById(ne.current);if(A){const B=A.getElementsByClassName("fb-post")[0];B&&B.children.length>0&&_e(v)}}},1),I||O.setTimeout(()=>{_e(w)},fe)),O.createCleanup()},[I,fe,J,Re.document]),r.default.useEffect(()=>{J===w&&(Ce(Date.now()),_e(b))},[J]);const Ge=!!(T!=null&&T.toString().includes("%")),S=!!(P!=null&&P.toString().includes("%")),K={maxWidth:Ge?void 0:u,width:typeof T<"u"?Ge?"100%":T:"100%",height:S?"100%":typeof P<"u"?P:typeof((N=Z.style)===null||N===void 0?void 0:N.height)<"u"||typeof((j=Z.style)===null||j===void 0?void 0:j.maxHeight)<"u"?"100%":h,border:"1px solid #dee2e6",borderRadius:f},V=H??r.default.createElement(s.PlaceholderEmbed,Object.assign({url:M,imageUrl:z,linkText:_,spinner:k,spinnerDisabled:L},W,{style:Object.assign(Object.assign({},K),W==null?void 0:W.style)}));return r.default.createElement("div",Object.assign({},Z,{className:(0,n.default)("rsme-embed rsme-facebook-embed",Z.className),style:Object.assign({overflow:"hidden",width:T??void 0,height:P??void 0,borderRadius:f},Z.style)}),r.default.createElement(a.EmbedStyle,null),r.default.createElement("div",{id:ne.current,className:(0,n.default)(!Pe&&"rsme-d-none")},r.default.createElement("div",{key:Le,className:"fb-post","data-href":M,"data-width":Ge?"100%":T??d,style:{width:Ge?"100%":T??d,height:S?"100%":P??void 0}})),!Pe&&!ie&&V)};return Kn.FacebookEmbed=E,Kn}var Wt={},dp;function VM(){if(dp)return Wt;dp=1;var t=Wt&&Wt.__createBinding||(Object.create?(function(j,M,T,P){P===void 0&&(P=T);var _=Object.getOwnPropertyDescriptor(M,T);(!_||("get"in _?!M.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return M[T]}}),Object.defineProperty(j,P,_)}):(function(j,M,T,P){P===void 0&&(P=T),j[P]=M[T]})),e=Wt&&Wt.__setModuleDefault||(Object.create?(function(j,M){Object.defineProperty(j,"default",{enumerable:!0,value:M})}):function(j,M){j.default=M}),n=Wt&&Wt.__importStar||function(j){if(j&&j.__esModule)return j;var M={};if(j!=null)for(var T in j)T!=="default"&&Object.prototype.hasOwnProperty.call(j,T)&&t(M,j,T);return e(M,j),M},r=Wt&&Wt.__rest||function(j,M){var T={};for(var P in j)Object.prototype.hasOwnProperty.call(j,P)&&M.indexOf(P)<0&&(T[P]=j[P]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,P=Object.getOwnPropertySymbols(j);_<P.length;_++)M.indexOf(P[_])<0&&Object.prototype.propertyIsEnumerable.call(j,P[_])&&(T[P[_]]=j[P[_]]);return T},i=Wt&&Wt.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.InstagramEmbed=void 0;const s=i(kn()),o=n(Bt()),a=uu(),l=cu(),c=Dr(),d=du(),u=Rr(),h="https://www.instagram.com/embed.js",f=328,p=372,g=3,y="check-script",b="load-script",x="confirm-script-loaded",w="process-embed",v="confirm-embed-success",E="retrying",C="embed-success",N=j=>{var M,T,{url:P,width:_,height:z,linkText:k="View post on Instagram",captioned:L=!1,placeholderImageUrl:W,placeholderSpinner:H,placeholderSpinnerDisabled:ie=!1,placeholderProps:q,embedPlaceholder:fe,placeholderDisabled:I=!1,scriptLoadDisabled:D=!1,retryDelay:ae=5e3,retryDisabled:Z=!1,igVersion:J="14",frame:_e=void 0,debug:Pe=!1}=j,ne=r(j,["url","width","height","linkText","captioned","placeholderImageUrl","placeholderSpinner","placeholderSpinnerDisabled","placeholderProps","embedPlaceholder","placeholderDisabled","scriptLoadDisabled","retryDelay","retryDisabled","igVersion","frame","debug"]);const[ge,Ce]=o.useState(y),Le=o.useRef((0,d.generateUUID)()),[Re,Ge]=o.useState(Date.now()),S=o.useMemo(()=>`${Le.current}-${Re}`,[Re]),K=(0,l.useFrame)(_e);o.useEffect(()=>{Pe&&console.log(`[${new Date().toISOString()}]: ${ge}`)},[Pe,ge]),o.useEffect(()=>{var F,re,he;ge===y&&(!((he=(re=(F=K.window)===null||F===void 0?void 0:F.instgrm)===null||re===void 0?void 0:re.Embeds)===null||he===void 0)&&he.process?Ce(w):D?console.error("Instagram embed script not found. Unable to process Instagram embed:",P):Ce(b))},[D,ge,P,K.window]),o.useEffect(()=>{if(ge===b&&K.document){const F=K.document.createElement("script");F.setAttribute("src",h),K.document.head.appendChild(F),Ce(x)}},[ge,K.document]),o.useEffect(()=>{const F=new a.Subs;return ge===x&&F.setInterval(()=>{var re,he,le;!((le=(he=(re=K.window)===null||re===void 0?void 0:re.instgrm)===null||he===void 0?void 0:he.Embeds)===null||le===void 0)&&le.process&&Ce(w)},1),F.createCleanup()},[ge,K.window]),o.useEffect(()=>{var F,re,he;if(ge===w){const le=(he=(re=(F=K.window)===null||F===void 0?void 0:F.instgrm)===null||re===void 0?void 0:re.Embeds)===null||he===void 0?void 0:he.process;le?(le(),Ce(v)):console.error("Instagram embed script not found. Unable to process Instagram embed:",P)}},[ge,K.window,P]),o.useEffect(()=>{const F=new a.Subs;return ge===v&&(F.setInterval(()=>{K.document&&(K.document.getElementById(Le.current)||Ce(C))},1),Z||F.setTimeout(()=>{Ce(E)},ae)),F.createCleanup()},[ae,Z,ge,K.document]),o.useEffect(()=>{ge===E&&(Ge(Date.now()),Ce(w))},[ge]);const V=P.replace(/[?].*$/,""),O=`${V}${V.endsWith("/")?"":"/"}`,A=!!(_!=null&&_.toString().includes("%")),B=!!(z!=null&&z.toString().includes("%")),Y={minWidth:A?void 0:f,width:typeof _<"u"?A?"100%":_:"100%",height:B?"100%":typeof z<"u"?z:typeof((M=ne.style)===null||M===void 0?void 0:M.height)<"u"||typeof((T=ne.style)===null||T===void 0?void 0:T.maxHeight)<"u"?"100%":p,border:"1px solid #dee2e6",borderRadius:g},te=fe??o.createElement(c.PlaceholderEmbed,Object.assign({url:O,imageUrl:W,linkText:k,spinner:H,spinnerDisabled:ie},q,{style:Object.assign(Object.assign({},Y),q==null?void 0:q.style)}));return o.createElement("div",Object.assign({},ne,{className:(0,s.default)("rsme-embed rsme-instagram-embed",Le.current,ne.className),style:Object.assign({overflow:"hidden",width:_??void 0,height:z??void 0,borderRadius:g},ne.style)}),o.createElement(u.EmbedStyle,null),o.createElement("blockquote",{key:S,className:"instagram-media","data-instgrm-permalink":`${O}?utm_source=ig_embed&utm_campaign=loading`,"data-instgrm-version":J,"data-instgrm-captioned":L||void 0,"data-width":A?"100%":_??void 0,style:{width:"calc(100% - 2px)"}},!I&&te,o.createElement("div",{id:Le.current,className:"instagram-media-pre-embed rsme-d-none"},"")))};return Wt.InstagramEmbed=N,Wt}var qt={},up;function WM(){if(up)return qt;up=1;var t=qt&&qt.__createBinding||(Object.create?(function(p,g,y,b){b===void 0&&(b=y);var x=Object.getOwnPropertyDescriptor(g,y);(!x||("get"in x?!g.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return g[y]}}),Object.defineProperty(p,b,x)}):(function(p,g,y,b){b===void 0&&(b=y),p[b]=g[y]})),e=qt&&qt.__setModuleDefault||(Object.create?(function(p,g){Object.defineProperty(p,"default",{enumerable:!0,value:g})}):function(p,g){p.default=g}),n=qt&&qt.__importStar||function(p){if(p&&p.__esModule)return p;var g={};if(p!=null)for(var y in p)y!=="default"&&Object.prototype.hasOwnProperty.call(p,y)&&t(g,p,y);return e(g,p),g},r=qt&&qt.__rest||function(p,g){var y={};for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&g.indexOf(b)<0&&(y[b]=p[b]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,b=Object.getOwnPropertySymbols(p);x<b.length;x++)g.indexOf(b[x])<0&&Object.prototype.propertyIsEnumerable.call(p,b[x])&&(y[b[x]]=p[b[x]]);return y},i=qt&&qt.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(qt,"__esModule",{value:!0}),qt.LinkedInEmbed=void 0;const s=i(kn()),o=n(Bt()),a=Dr(),l=Rr(),c=250,d=550,u=550,h=8,f=p=>{var g,y,{url:b,postUrl:x,width:w,height:v=500,linkText:E="View post on LinkedIn",placeholderImageUrl:C,placeholderSpinner:N,placeholderSpinnerDisabled:j=!1,placeholderProps:M,embedPlaceholder:T,placeholderDisabled:P=!1}=p,_=r(p,["url","postUrl","width","height","linkText","placeholderImageUrl","placeholderSpinner","placeholderSpinnerDisabled","placeholderProps","embedPlaceholder","placeholderDisabled"]);const[z,k]=o.useState(!1),L={minWidth:c,maxWidth:d,width:typeof w<"u"?w:"100%",height:typeof v<"u"?v:typeof((g=_.style)===null||g===void 0?void 0:g.height)<"u"||typeof((y=_.style)===null||y===void 0?void 0:y.maxHeight)<"u"?"100%":u,border:"solid 1px rgba(0, 0, 0, 0.15)",borderRadius:h},W=T??o.createElement(a.PlaceholderEmbed,Object.assign({url:x??b,imageUrl:C,linkText:E,spinner:N,spinnerDisabled:j},M,{style:Object.assign(Object.assign({},L),M==null?void 0:M.style)}));return o.createElement("div",Object.assign({},_,{className:(0,s.default)("rsme-embed rsme-linkedin-embed",_.className),style:Object.assign({overflow:"hidden",width:w??void 0,height:v??void 0,borderRadius:h},_.style)}),o.createElement(l.EmbedStyle,null),o.createElement("iframe",{className:(0,s.default)("linkedin-post",!z&&"rsme-d-none"),src:b,width:"100%",height:z?v:0,frameBorder:"0",onLoad:()=>k(!0)}),!z&&!P&&W)};return qt.LinkedInEmbed=f,qt}var Kt={},fp;function qM(){if(fp)return Kt;fp=1;var t=Kt&&Kt.__createBinding||(Object.create?(function(p,g,y,b){b===void 0&&(b=y);var x=Object.getOwnPropertyDescriptor(g,y);(!x||("get"in x?!g.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return g[y]}}),Object.defineProperty(p,b,x)}):(function(p,g,y,b){b===void 0&&(b=y),p[b]=g[y]})),e=Kt&&Kt.__setModuleDefault||(Object.create?(function(p,g){Object.defineProperty(p,"default",{enumerable:!0,value:g})}):function(p,g){p.default=g}),n=Kt&&Kt.__importStar||function(p){if(p&&p.__esModule)return p;var g={};if(p!=null)for(var y in p)y!=="default"&&Object.prototype.hasOwnProperty.call(p,y)&&t(g,p,y);return e(g,p),g},r=Kt&&Kt.__rest||function(p,g){var y={};for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&g.indexOf(b)<0&&(y[b]=p[b]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,b=Object.getOwnPropertySymbols(p);x<b.length;x++)g.indexOf(b[x])<0&&Object.prototype.propertyIsEnumerable.call(p,b[x])&&(y[b[x]]=p[b[x]]);return y},i=Kt&&Kt.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.PinterestEmbed=void 0;const s=i(kn()),o=n(Bt()),a=Dr(),l=Rr(),c=250,d=550,u=550,h=8,f=p=>{var g,y,b,{url:x,postUrl:w,width:v,height:E=500,linkText:C="View post on Pinterest",placeholderImageUrl:N,placeholderSpinner:j,placeholderSpinnerDisabled:M=!1,placeholderProps:T,embedPlaceholder:P,placeholderDisabled:_=!1}=p,z=r(p,["url","postUrl","width","height","linkText","placeholderImageUrl","placeholderSpinner","placeholderSpinnerDisabled","placeholderProps","embedPlaceholder","placeholderDisabled"]);const[k,L]=o.useState(!1),W={minWidth:c,maxWidth:d,width:typeof v<"u"?v:"100%",height:typeof E<"u"?E:typeof((g=z.style)===null||g===void 0?void 0:g.height)<"u"||typeof((y=z.style)===null||y===void 0?void 0:y.maxHeight)<"u"?"100%":u,border:"solid 1px rgba(0, 0, 0, 0.15)",borderRadius:h},H=P??o.createElement(a.PlaceholderEmbed,Object.assign({url:w??x,imageUrl:N,linkText:C,spinner:j,spinnerDisabled:M},T,{style:Object.assign(Object.assign({},W),T==null?void 0:T.style)})),ie=(b=x.match(/pin\/([\w\d_-]+)/))===null||b===void 0?void 0:b[1],q=ie??"000000000000000000";return o.createElement("div",Object.assign({},z,{className:(0,s.default)("rsme-embed rsme-pinterest-embed",z.className),style:Object.assign({overflow:"hidden",width:v??void 0,height:E??void 0,borderRadius:h},z.style)}),o.createElement(l.EmbedStyle,null),o.createElement("iframe",{className:(0,s.default)("pinterest-post",!k&&"rsme-d-none"),src:`https://assets.pinterest.com/ext/embed.html?id=${q}`,width:"100%",height:k?E:0,frameBorder:"0",scrolling:"no",onLoad:()=>L(!0)}),!k&&!_&&H)};return Kt.PinterestEmbed=f,Kt}var Zn={},hp;function KM(){if(hp)return Zn;hp=1;var t=Zn&&Zn.__rest||function(w,v){var E={};for(var C in w)Object.prototype.hasOwnProperty.call(w,C)&&v.indexOf(C)<0&&(E[C]=w[C]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var N=0,C=Object.getOwnPropertySymbols(w);N<C.length;N++)v.indexOf(C[N])<0&&Object.prototype.propertyIsEnumerable.call(w,C[N])&&(E[C[N]]=w[C[N]]);return E},e=Zn&&Zn.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.TikTokEmbed=void 0;const n=e(kn()),r=e(Bt()),i=uu(),s=cu(),o=Dr(),a=du(),l=Rr(),c="https://www.tiktok.com/embed.js",d=325,u=480,h=550,f=8,p="process-embed",g="confirm-embed-success",y="retrying",b="embed-success",x=w=>{var v,E,{url:C,width:N,height:j,linkText:M="View post on TikTok",placeholderImageUrl:T,placeholderSpinner:P,placeholderSpinnerDisabled:_=!1,placeholderProps:z,embedPlaceholder:k,placeholderDisabled:L=!1,scriptLoadDisabled:W=!1,retryDelay:H=5e3,retryDisabled:ie=!1,frame:q=void 0,debug:fe=!1}=w,I=t(w,["url","width","height","linkText","placeholderImageUrl","placeholderSpinner","placeholderSpinnerDisabled","placeholderProps","embedPlaceholder","placeholderDisabled","scriptLoadDisabled","retryDelay","retryDisabled","frame","debug"]);const[D,ae]=r.default.useState(p),Z=r.default.useRef((0,a.generateUUID)()),[J,_e]=r.default.useState(Date.now()),Pe=r.default.useMemo(()=>`${Z.current}-${J}`,[J]),ne=(0,s.useFrame)(q);r.default.useEffect(()=>{fe&&console.log(`[${new Date().toISOString()}]: ${D}`)},[fe,D]),r.default.useEffect(()=>{if(D===p&&ne.document&&!W){const Re="tiktok-embed-script",Ge=ne.document.getElementById(Re);Ge&&Ge.remove();const S=ne.document.createElement("script");S.setAttribute("src",`${c}?t=${Date.now()}`),S.setAttribute("id",Re),ne.document.head.appendChild(S),ae(g)}},[W,D,ne.document]),r.default.useEffect(()=>{const Re=new i.Subs;return D===g&&(Re.setInterval(()=>{ne.document&&(ne.document.getElementById(Z.current)||ae(b))},1),ie||Re.setTimeout(()=>{ae(y)},H)),Re.createCleanup()},[H,ie,D,ne.document]),r.default.useEffect(()=>{D===y&&(_e(Date.now()),ae(p))},[D]);const ge=C.replace(/[?].*$/,"").replace(/^.+\//,""),Ce={minWidth:d,maxWidth:u,width:typeof N<"u"?N:"100%",height:typeof j<"u"?j:typeof((v=I.style)===null||v===void 0?void 0:v.height)<"u"||typeof((E=I.style)===null||E===void 0?void 0:E.maxHeight)<"u"?"100%":h,border:"solid 1px rgba(22,24,35,0.12)",borderRadius:f},Le=k??r.default.createElement(o.PlaceholderEmbed,Object.assign({url:C,imageUrl:T,linkText:M,spinner:P,spinnerDisabled:_},z,{style:Object.assign(Object.assign({},Ce),z==null?void 0:z.style)}));return r.default.createElement("div",Object.assign({},I,{className:(0,n.default)("rsme-embed rsme-tiktok-embed",I.className),style:Object.assign({overflow:"hidden",width:N??void 0,height:j??void 0,borderRadius:f},I.style)}),r.default.createElement(l.EmbedStyle,null),r.default.createElement("div",{className:"tiktok-embed-container"},r.default.createElement("blockquote",{key:Pe,className:"tiktok-embed",cite:C,"data-video-id":ge},L?r.default.createElement("div",{id:Z.current,style:{display:"none"}},""):r.default.createElement("div",{id:Z.current,style:{display:"flex",justifyContent:"center"}},Le))))};return Zn.TikTokEmbed=x,Zn}var Xi={},Gt={},Hn="https://platform.twitter.com/widgets.js",Wl="createTimeline",GM=function(e){var n=Q.useRef(null),r=Q.useState(!0),i=r[0],s=r[1],o=function(){var c=Object.assign({},e.options);if(e!=null&&e.autoHeight){var d,u;c.height=(d=n.current)===null||d===void 0||(u=d.parentNode)===null||u===void 0?void 0:u.offsetHeight}return c=Object.assign({},c,{theme:e==null?void 0:e.theme,linkColor:e==null?void 0:e.linkColor,borderColor:e==null?void 0:e.borderColor,lang:e==null?void 0:e.lang,tweetLimit:e==null?void 0:e.tweetLimit,ariaPolite:e==null?void 0:e.ariaPolite}),c},a=function(c){return c.chrome="",e.noHeader&&(c.chrome=c.chrome+" noheader"),e.noFooter&&(c.chrome=c.chrome+" nofooter"),e.noBorders&&(c.chrome=c.chrome+" noborders"),e.noScrollbar&&(c.chrome=c.chrome+" noscrollbar"),e.transparent&&(c.chrome=c.chrome+" transparent"),c};return Q.useEffect(function(){var l=!0,c=require("scriptjs");return c(Hn,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(l){if(!window.twttr.widgets[Wl]){console.error("Method "+Wl+" is not present anymore in twttr.widget api");return}var d=o();d=a(d),window.twttr.widgets[Wl]({sourceType:e.sourceType,screenName:e.screenName,userId:e.userId,ownerScreenName:e.ownerScreenName,slug:e.slug,id:e.id||e.widgetId,url:e.url},n==null?void 0:n.current,d).then(function(u){s(!1),e.onLoad&&e.onLoad(u)})}}),function(){l=!1}},[]),Q.createElement(Q.Fragment,null,i&&Q.createElement(Q.Fragment,null,e.placeholder),Q.createElement("div",{ref:n}))},ql="createShareButton",JM=function(e){var n=Q.useRef(null),r=Q.useState(!0),i=r[0],s=r[1];return Q.useEffect(function(){var o=!0,a=require("scriptjs");return a(Hn,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(o){if(!window.twttr.widgets[ql]){console.error("Method "+ql+" is not present anymore in twttr.widget api");return}window.twttr.widgets[ql](e.url,n==null?void 0:n.current,e.options).then(function(l){s(!1),e.onLoad&&e.onLoad(l)})}}),function(){o=!1}},[]),Q.createElement(Q.Fragment,null,i&&Q.createElement(Q.Fragment,null,e.placeholder),Q.createElement("div",{ref:n}))},Kl="createFollowButton",YM=function(e){var n=Q.useRef(null),r=Q.useState(!0),i=r[0],s=r[1];return Q.useEffect(function(){var o=!0,a=require("scriptjs");return a(Hn,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(o){if(!window.twttr.widgets[Kl]){console.error("Method "+Kl+" is not present anymore in twttr.widget api");return}window.twttr.widgets[Kl](e.screenName,n==null?void 0:n.current,e.options).then(function(l){s(!1),e.onLoad&&e.onLoad(l)})}}),function(){o=!1}},[]),Q.createElement(Q.Fragment,null,i&&Q.createElement(Q.Fragment,null,e.placeholder),Q.createElement("div",{ref:n}))},Gl="createHashtagButton",XM=function(e){var n=Q.useRef(null),r=Q.useState(!0),i=r[0],s=r[1];return Q.useEffect(function(){var o=!0,a=require("scriptjs");return a(Hn,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(o){if(!window.twttr.widgets[Gl]){console.error("Method "+Gl+" is not present anymore in twttr.widget api");return}window.twttr.widgets[Gl](e.tag,n==null?void 0:n.current,e.options).then(function(l){s(!1),e.onLoad&&e.onLoad(l)})}}),function(){o=!1}},[]),Q.createElement(Q.Fragment,null,i&&Q.createElement(Q.Fragment,null,e.placeholder),Q.createElement("div",{ref:n}))},Jl="createMentionButton",ZM=function(e){var n=Q.useRef(null),r=Q.useState(!0),i=r[0],s=r[1];return Q.useEffect(function(){var o=!0,a=require("scriptjs");return a(Hn,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(o){if(!window.twttr.widgets[Jl]){console.error("Method "+Jl+" is not present anymore in twttr.widget api");return}window.twttr.widgets[Jl](e.screenName,n==null?void 0:n.current,e.options).then(function(l){s(!1),e.onLoad&&e.onLoad(l)})}}),function(){o=!1}},[]),Q.createElement(Q.Fragment,null,i&&Q.createElement(Q.Fragment,null,e.placeholder),Q.createElement("div",{ref:n}))},Yl="createTweet",QM=function(e){var n=Q.useRef(null),r=Q.useState(!0),i=r[0],s=r[1];return Q.useEffect(function(){var o=!0,a=require("scriptjs");return a(Hn,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(o){if(!window.twttr.widgets[Yl]){console.error("Method "+Yl+" is not present anymore in twttr.widget api");return}window.twttr.widgets[Yl](e.tweetId,n==null?void 0:n.current,e.options).then(function(l){s(!1),e.onLoad&&e.onLoad(l)})}}),function(){o=!1}},[]),Q.createElement(Q.Fragment,null,i&&Q.createElement(Q.Fragment,null,e.placeholder),Q.createElement("div",{ref:n}))},Xl="createMoment",eO=function(e){var n=Q.useRef(null),r=Q.useState(!0),i=r[0],s=r[1];return Q.useEffect(function(){var o=!0,a=require("scriptjs");return a(Hn,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(o){if(!window.twttr.widgets[Xl]){console.error("Method "+Xl+" is not present anymore in twttr.widget api");return}window.twttr.widgets[Xl](e.momentId,n==null?void 0:n.current,e.options).then(function(l){s(!1),e.onLoad&&e.onLoad(l)})}}),function(){o=!1}},[]),Q.createElement(Q.Fragment,null,i&&Q.createElement(Q.Fragment,null,e.placeholder),Q.createElement("div",{ref:n}))},Zl="createDMButton",tO=function(e){var n=Q.useRef(null),r=Q.useState(!0),i=r[0],s=r[1];return Q.useEffect(function(){var o=!0,a=require("scriptjs");return a(Hn,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(o){if(!window.twttr.widgets[Zl]){console.error("Method "+Zl+" is not present anymore in twttr.widget api");return}window.twttr.widgets[Zl](e.id,n==null?void 0:n.current,e.options).then(function(l){o&&(s(!1),e.onLoad&&e.onLoad(l))})}}),function(){o=!1}},[]),Q.createElement(Q.Fragment,null,i&&Q.createElement(Q.Fragment,null,e.placeholder),Q.createElement("div",{ref:n}))},Ql="createVideo",nO=function(e){var n=Q.useRef(null),r=Q.useState(!0),i=r[0],s=r[1];return Q.useEffect(function(){var o=!0,a=require("scriptjs");return a(Hn,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(o){if(!window.twttr.widgets[Ql]){console.error("Method "+Ql+" is not present anymore in twttr.widget api");return}window.twttr.widgets[Ql](e.id,n==null?void 0:n.current).then(function(l){s(!1),e.onLoad&&e.onLoad(l)})}}),function(){o=!1}},[]),Q.createElement(Q.Fragment,null,i&&Q.createElement(Q.Fragment,null,e.placeholder),Q.createElement("div",{ref:n}))},ec="createPeriscopeOnAirButton",rO=function(e){var n=Q.useRef(null),r=Q.useState(!0),i=r[0],s=r[1];return Q.useEffect(function(){var o=!0,a=require("scriptjs");return a(Hn,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(o){if(!window.twttr.widgets[ec]){console.error("Method "+ec+" is not present anymore in twttr.widget api");return}window.twttr.widgets[ec](e.username,n==null?void 0:n.current,e.options).then(function(l){s(!1),e.onLoad&&e.onLoad(l)})}}),function(){o=!1}},[]),Q.createElement(Q.Fragment,null,i&&Q.createElement(Q.Fragment,null,e.placeholder),Q.createElement("div",{ref:n}))};const iO=Object.freeze(Object.defineProperty({__proto__:null,TwitterDMButton:tO,TwitterFollowButton:YM,TwitterHashtagButton:XM,TwitterMentionButton:ZM,TwitterMomentShare:eO,TwitterOnAirButton:rO,TwitterShareButton:JM,TwitterTimelineEmbed:GM,TwitterTweetEmbed:QM,TwitterVideoEmbed:nO},Symbol.toStringTag,{value:"Module"})),sO=Up(iO);var pp;function oO(){if(pp)return Gt;pp=1;var t=Gt&&Gt.__createBinding||(Object.create?(function(g,y,b,x){x===void 0&&(x=b);var w=Object.getOwnPropertyDescriptor(y,b);(!w||("get"in w?!y.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return y[b]}}),Object.defineProperty(g,x,w)}):(function(g,y,b,x){x===void 0&&(x=b),g[x]=y[b]})),e=Gt&&Gt.__setModuleDefault||(Object.create?(function(g,y){Object.defineProperty(g,"default",{enumerable:!0,value:y})}):function(g,y){g.default=y}),n=Gt&&Gt.__importStar||function(g){if(g&&g.__esModule)return g;var y={};if(g!=null)for(var b in g)b!=="default"&&Object.prototype.hasOwnProperty.call(g,b)&&t(y,g,b);return e(y,g),y},r=Gt&&Gt.__rest||function(g,y){var b={};for(var x in g)Object.prototype.hasOwnProperty.call(g,x)&&y.indexOf(x)<0&&(b[x]=g[x]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,x=Object.getOwnPropertySymbols(g);w<x.length;w++)y.indexOf(x[w])<0&&Object.prototype.propertyIsEnumerable.call(g,x[w])&&(b[x[w]]=g[x[w]]);return b},i=Gt&&Gt.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.XEmbed=void 0;const s=i(kn()),o=n(Bt()),a=sO,l=Dr(),c=Rr(),d=250,u=550,h=350,f=12,p=g=>{var y,b,{url:x,width:w,height:v,linkText:E="View post on X",placeholderImageUrl:C,placeholderSpinner:N,placeholderSpinnerDisabled:j=!1,placeholderProps:M,embedPlaceholder:T,placeholderDisabled:P,twitterTweetEmbedProps:_}=g,z=r(g,["url","width","height","linkText","placeholderImageUrl","placeholderSpinner","placeholderSpinnerDisabled","placeholderProps","embedPlaceholder","placeholderDisabled","twitterTweetEmbedProps"]);const k=x.substring(x.lastIndexOf("/")+1).replace(/[?].*$/,""),L=!!(w!=null&&w.toString().includes("%")),W=!!(v!=null&&v.toString().includes("%")),H={minWidth:d,maxWidth:u,width:typeof w<"u"?L?"100%":w:"100%",height:W?"100%":typeof v<"u"?v:typeof((y=z.style)===null||y===void 0?void 0:y.height)<"u"||typeof((b=z.style)===null||b===void 0?void 0:b.maxHeight)<"u"?"100%":h,border:"solid 1px #c9d4d9",borderRadius:f},ie=T??o.createElement(l.PlaceholderEmbed,Object.assign({url:x,imageUrl:C,linkText:E,spinner:N,spinnerDisabled:j},M,{style:Object.assign(Object.assign({},H),M==null?void 0:M.style)}));return o.createElement("div",Object.assign({},z,{className:(0,s.default)("rsme-embed rsme-twitter-embed",z.className),style:Object.assign({overflow:"hidden",width:w??void 0,height:v??void 0,borderRadius:f},z.style)}),o.createElement(c.EmbedStyle,null),o.createElement(a.TwitterTweetEmbed,Object.assign({tweetId:k,placeholder:P?void 0:ie},_)))};return Gt.XEmbed=p,Gt}var mp;function aO(){if(mp)return Xi;mp=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.TwitterEmbed=void 0;const t=oO();return Xi.TwitterEmbed=t.XEmbed,Xi}var Jt={},tc={exports:{}},nc,gp;function lO(){if(gp)return nc;gp=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return nc=t,nc}var rc,yp;function cO(){if(yp)return rc;yp=1;var t=lO();function e(){}function n(){}return n.resetWarningCache=e,rc=function(){function r(o,a,l,c,d,u){if(u!==t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},rc}var bp;function dO(){return bp||(bp=1,tc.exports=cO()()),tc.exports}var uO=dO();const zt=Mr(uO);var ic,xp;function fO(){return xp||(xp=1,ic=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),ic}var hO=fO();const pO=Mr(hO);var wo={exports:{}},sc,vp;function mO(){if(vp)return sc;vp=1;var t;/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/return t=function(){var e={},n={};return e.on=function(r,i){var s={name:r,handler:i};return n[r]=n[r]||[],n[r].unshift(s),s},e.off=function(r){var i=n[r.name].indexOf(r);i!==-1&&n[r.name].splice(i,1)},e.trigger=function(r,i){var s=n[r],o;if(s)for(o=s.length;o--;)s[o].handler(i)},e},sc=t,sc}var ko={exports:{}},oc,wp;function gO(){if(wp)return oc;wp=1,oc=function(i,s,o){var a=document.head||document.getElementsByTagName("head")[0],l=document.createElement("script");typeof s=="function"&&(o=s,s={}),s=s||{},o=o||function(){},l.type=s.type||"text/javascript",l.charset=s.charset||"utf8",l.async="async"in s?!!s.async:!0,l.src=i,s.attrs&&t(l,s.attrs),s.text&&(l.text=""+s.text);var c="onload"in l?e:n;c(l,o),l.onload||e(l,o),a.appendChild(l)};function t(r,i){for(var s in i)r.setAttribute(s,i[s])}function e(r,i){r.onload=function(){this.onerror=this.onload=null,i(null,r)},r.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+this.src),r)}}function n(r,i){r.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,i(null,r))}}return oc}var kp;function yO(){return kp||(kp=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=gO(),r=i(n);function i(s){return s&&s.__esModule?s:{default:s}}e.default=function(s){var o=new Promise(function(a){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){a(window.YT);return}else{var l=window.location.protocol==="http:"?"http:":"https:";(0,r.default)(l+"//www.youtube.com/iframe_api",function(d){d&&s.trigger("error",d)})}var c=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){c&&c(),a(window.YT)}});return o},t.exports=e.default})(ko,ko.exports)),ko.exports}var So={exports:{}},Eo={exports:{}},Co={exports:{}},ac,Sp;function bO(){if(Sp)return ac;Sp=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*365.25;ac=function(c,d){d=d||{};var u=typeof c;if(u==="string"&&c.length>0)return s(c);if(u==="number"&&isNaN(c)===!1)return d.long?a(c):o(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function s(c){if(c=String(c),!(c.length>100)){var d=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(c);if(d){var u=parseFloat(d[1]),h=(d[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return u*i;case"days":case"day":case"d":return u*r;case"hours":case"hour":case"hrs":case"hr":case"h":return u*n;case"minutes":case"minute":case"mins":case"min":case"m":return u*e;case"seconds":case"second":case"secs":case"sec":case"s":return u*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}}}function o(c){return c>=r?Math.round(c/r)+"d":c>=n?Math.round(c/n)+"h":c>=e?Math.round(c/e)+"m":c>=t?Math.round(c/t)+"s":c+"ms"}function a(c){return l(c,r,"day")||l(c,n,"hour")||l(c,e,"minute")||l(c,t,"second")||c+" ms"}function l(c,d,u){if(!(c<d))return c<d*1.5?Math.floor(c/d)+" "+u:Math.ceil(c/d)+" "+u+"s"}return ac}var Ep;function xO(){return Ep||(Ep=1,(function(t,e){e=t.exports=i.debug=i.default=i,e.coerce=l,e.disable=o,e.enable=s,e.enabled=a,e.humanize=bO(),e.names=[],e.skips=[],e.formatters={};var n;function r(c){var d=0,u;for(u in c)d=(d<<5)-d+c.charCodeAt(u),d|=0;return e.colors[Math.abs(d)%e.colors.length]}function i(c){function d(){if(d.enabled){var u=d,h=+new Date,f=h-(n||h);u.diff=f,u.prev=n,u.curr=h,n=h;for(var p=new Array(arguments.length),g=0;g<p.length;g++)p[g]=arguments[g];p[0]=e.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var y=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(x,w){if(x==="%%")return x;y++;var v=e.formatters[w];if(typeof v=="function"){var E=p[y];x=v.call(u,E),p.splice(y,1),y--}return x}),e.formatArgs.call(u,p);var b=d.log||e.log||console.log.bind(console);b.apply(u,p)}}return d.namespace=c,d.enabled=e.enabled(c),d.useColors=e.useColors(),d.color=r(c),typeof e.init=="function"&&e.init(d),d}function s(c){e.save(c),e.names=[],e.skips=[];for(var d=(typeof c=="string"?c:"").split(/[\s,]+/),u=d.length,h=0;h<u;h++)d[h]&&(c=d[h].replace(/\*/g,".*?"),c[0]==="-"?e.skips.push(new RegExp("^"+c.substr(1)+"$")):e.names.push(new RegExp("^"+c+"$")))}function o(){e.enable("")}function a(c){var d,u;for(d=0,u=e.skips.length;d<u;d++)if(e.skips[d].test(c))return!1;for(d=0,u=e.names.length;d<u;d++)if(e.names[d].test(c))return!0;return!1}function l(c){return c instanceof Error?c.stack||c.message:c}})(Co,Co.exports)),Co.exports}var Cp;function vO(){return Cp||(Cp=1,(function(t,e){var n={};e=t.exports=xO(),e.log=s,e.formatArgs=i,e.save=o,e.load=a,e.useColors=r,e.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:l(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(c){try{return JSON.stringify(c)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}};function i(c){var d=this.useColors;if(c[0]=(d?"%c":"")+this.namespace+(d?" %c":" ")+c[0]+(d?"%c ":" ")+"+"+e.humanize(this.diff),!!d){var u="color: "+this.color;c.splice(1,0,u,"color: inherit");var h=0,f=0;c[0].replace(/%[a-zA-Z%]/g,function(p){p!=="%%"&&(h++,p==="%c"&&(f=h))}),c.splice(f,0,u)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(c){try{c==null?e.storage.removeItem("debug"):e.storage.debug=c}catch{}}function a(){var c;try{c=e.storage.debug}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=n.DEBUG),c}e.enable(a());function l(){try{return window.localStorage}catch{}}})(Eo,Eo.exports)),Eo.exports}var _o={exports:{}},_p;function wO(){return _p||(_p=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],t.exports=e.default})(_o,_o.exports)),_o.exports}var No={exports:{}},Np;function kO(){return Np||(Np=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],t.exports=e.default})(No,No.exports)),No.exports}var To={exports:{}},Ao={exports:{}},Tp;function SO(){return Tp||(Tp=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},t.exports=e.default})(Ao,Ao.exports)),Ao.exports}var Ap;function EO(){return Ap||(Ap=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=SO(),r=i(n);function i(s){return s&&s.__esModule?s:{default:s}}e.default={pauseVideo:{acceptableStates:[r.default.ENDED,r.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[r.default.ENDED,r.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[r.default.ENDED,r.default.PLAYING,r.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},t.exports=e.default})(To,To.exports)),To.exports}var Mp;function CO(){return Mp||(Mp=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=vO(),r=d(n),i=wO(),s=d(i),o=kO(),a=d(o),l=EO(),c=d(l);function d(f){return f&&f.__esModule?f:{default:f}}var u=(0,r.default)("youtube-player"),h={};h.proxyEvents=function(f){var p={},g=function(N){var j="on"+N.slice(0,1).toUpperCase()+N.slice(1);p[j]=function(M){u('event "%s"',j,M),f.trigger(N,M)}},y=!0,b=!1,x=void 0;try{for(var w=a.default[Symbol.iterator](),v;!(y=(v=w.next()).done);y=!0){var E=v.value;g(E)}}catch(C){b=!0,x=C}finally{try{!y&&w.return&&w.return()}finally{if(b)throw x}}return p},h.promisifyPlayer=function(f){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g={},y=function(j){p&&c.default[j]?g[j]=function(){for(var M=arguments.length,T=Array(M),P=0;P<M;P++)T[P]=arguments[P];return f.then(function(_){var z=c.default[j],k=_.getPlayerState(),L=_[j].apply(_,T);return z.stateChangeRequired||Array.isArray(z.acceptableStates)&&z.acceptableStates.indexOf(k)===-1?new Promise(function(W){var H=function ie(){var q=_.getPlayerState(),fe=void 0;typeof z.timeout=="number"&&(fe=setTimeout(function(){_.removeEventListener("onStateChange",ie),W()},z.timeout)),Array.isArray(z.acceptableStates)&&z.acceptableStates.indexOf(q)!==-1&&(_.removeEventListener("onStateChange",ie),clearTimeout(fe),W())};_.addEventListener("onStateChange",H)}).then(function(){return L}):L})}:g[j]=function(){for(var M=arguments.length,T=Array(M),P=0;P<M;P++)T[P]=arguments[P];return f.then(function(_){return _[j].apply(_,T)})}},b=!0,x=!1,w=void 0;try{for(var v=s.default[Symbol.iterator](),E;!(b=(E=v.next()).done);b=!0){var C=E.value;y(C)}}catch(N){x=!0,w=N}finally{try{!b&&v.return&&v.return()}finally{if(x)throw w}}return g},e.default=h,t.exports=e.default})(So,So.exports)),So.exports}var Op;function _O(){return Op||(Op=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},r=mO(),i=c(r),s=yO(),o=c(s),a=CO(),l=c(a);function c(u){return u&&u.__esModule?u:{default:u}}var d=void 0;e.default=function(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,p=(0,i.default)();if(d||(d=(0,o.default)(p)),h.events)throw new Error("Event handlers cannot be overwritten.");if(typeof u=="string"&&!document.getElementById(u))throw new Error('Element "'+u+'" does not exist.');h.events=l.default.proxyEvents(p);var g=new Promise(function(b){if((typeof u>"u"?"undefined":n(u))==="object"&&u.playVideo instanceof Function){var x=u;b(x)}else d.then(function(w){var v=new w.Player(u,h);return p.on("ready",function(){b(v)}),null})}),y=l.default.promisifyPlayer(g,f);return y.on=p.on,y.off=p.off,y},t.exports=e.default})(wo,wo.exports)),wo.exports}var NO=_O();const TO=Mr(NO);var AO=Object.defineProperty,MO=Object.defineProperties,OO=Object.getOwnPropertyDescriptors,jp=Object.getOwnPropertySymbols,jO=Object.prototype.hasOwnProperty,zO=Object.prototype.propertyIsEnumerable,zp=(t,e,n)=>e in t?AO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sd=(t,e)=>{for(var n in e||(e={}))jO.call(e,n)&&zp(t,n,e[n]);if(jp)for(var n of jp(e))zO.call(e,n)&&zp(t,n,e[n]);return t},od=(t,e)=>MO(t,OO(e)),IO=(t,e,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(c){i(c)}},o=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())});function RO(t,e){var n,r;if(t.videoId!==e.videoId)return!0;const i=((n=t.opts)==null?void 0:n.playerVars)||{},s=((r=e.opts)==null?void 0:r.playerVars)||{};return i.start!==s.start||i.end!==s.end}function Ip(t={}){return od(sd({},t),{height:0,width:0,playerVars:od(sd({},t.playerVars),{autoplay:0,start:0,end:0})})}function DO(t,e){return t.videoId!==e.videoId||!pO(Ip(t.opts),Ip(e.opts))}function PO(t,e){var n,r,i,s;return t.id!==e.id||t.className!==e.className||((n=t.opts)==null?void 0:n.width)!==((r=e.opts)==null?void 0:r.width)||((i=t.opts)==null?void 0:i.height)!==((s=e.opts)==null?void 0:s.height)||t.iframeClassName!==e.iframeClassName||t.title!==e.title}var LO={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},BO={videoId:zt.string,id:zt.string,className:zt.string,iframeClassName:zt.string,style:zt.object,title:zt.string,loading:zt.oneOf(["lazy","eager"]),opts:zt.objectOf(zt.any),onReady:zt.func,onError:zt.func,onPlay:zt.func,onPause:zt.func,onEnd:zt.func,onStateChange:zt.func,onPlaybackRateChange:zt.func,onPlaybackQualityChange:zt.func},Lo=class extends Q.Component{constructor(t){super(t),this.destroyPlayerPromise=void 0,this.onPlayerReady=e=>{var n,r;return(r=(n=this.props).onReady)==null?void 0:r.call(n,e)},this.onPlayerError=e=>{var n,r;return(r=(n=this.props).onError)==null?void 0:r.call(n,e)},this.onPlayerStateChange=e=>{var n,r,i,s,o,a,l,c;switch((r=(n=this.props).onStateChange)==null||r.call(n,e),e.data){case Lo.PlayerState.ENDED:(s=(i=this.props).onEnd)==null||s.call(i,e);break;case Lo.PlayerState.PLAYING:(a=(o=this.props).onPlay)==null||a.call(o,e);break;case Lo.PlayerState.PAUSED:(c=(l=this.props).onPause)==null||c.call(l,e);break}},this.onPlayerPlaybackRateChange=e=>{var n,r;return(r=(n=this.props).onPlaybackRateChange)==null?void 0:r.call(n,e)},this.onPlayerPlaybackQualityChange=e=>{var n,r;return(r=(n=this.props).onPlaybackQualityChange)==null?void 0:r.call(n,e)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then(()=>this.destroyPlayerPromise=void 0),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if(typeof document>"u")return;if(this.destroyPlayerPromise){this.destroyPlayerPromise.then(this.createPlayer);return}const e=od(sd({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=TO(this.container,e),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then(n=>{this.props.title&&n.setAttribute("title",this.props.title),this.props.loading&&n.setAttribute("loading",this.props.loading)})},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var e;(e=this.internalPlayer)==null||e.getIframe().then(n=>{this.props.id?n.setAttribute("id",this.props.id):n.removeAttribute("id"),this.props.iframeClassName?n.setAttribute("class",this.props.iframeClassName):n.removeAttribute("class"),this.props.opts&&this.props.opts.width?n.setAttribute("width",this.props.opts.width.toString()):n.removeAttribute("width"),this.props.opts&&this.props.opts.height?n.setAttribute("height",this.props.opts.height.toString()):n.removeAttribute("height"),this.props.title?n.setAttribute("title",this.props.title):n.setAttribute("title","YouTube video player"),this.props.loading?n.setAttribute("loading",this.props.loading):n.removeAttribute("loading")})},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var e,n,r,i;if(typeof this.props.videoId>"u"||this.props.videoId===null){(e=this.internalPlayer)==null||e.stopVideo();return}let s=!1;const o={videoId:this.props.videoId};if((n=this.props.opts)!=null&&n.playerVars&&(s=this.props.opts.playerVars.autoplay===1,"start"in this.props.opts.playerVars&&(o.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(o.endSeconds=this.props.opts.playerVars.end)),s){(r=this.internalPlayer)==null||r.loadVideoById(o);return}(i=this.internalPlayer)==null||i.cueVideoById(o)},this.refContainer=e=>{this.container=e},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(t){return IO(this,null,function*(){PO(t,this.props)&&this.updatePlayer(),DO(t,this.props)&&(yield this.resetPlayer()),RO(t,this.props)&&this.updateVideo()})}componentWillUnmount(){this.destroyPlayer()}render(){return Q.createElement("div",{className:this.props.className,style:this.props.style},Q.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}},Xa=Lo;Xa.propTypes=BO;Xa.defaultProps=LO;Xa.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var $O=Xa;const FO=Object.freeze(Object.defineProperty({__proto__:null,default:$O},Symbol.toStringTag,{value:"Module"})),HO=Up(FO);var Rp;function UO(){if(Rp)return Jt;Rp=1;var t=Jt&&Jt.__createBinding||(Object.create?(function(p,g,y,b){b===void 0&&(b=y);var x=Object.getOwnPropertyDescriptor(g,y);(!x||("get"in x?!g.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return g[y]}}),Object.defineProperty(p,b,x)}):(function(p,g,y,b){b===void 0&&(b=y),p[b]=g[y]})),e=Jt&&Jt.__setModuleDefault||(Object.create?(function(p,g){Object.defineProperty(p,"default",{enumerable:!0,value:g})}):function(p,g){p.default=g}),n=Jt&&Jt.__importStar||function(p){if(p&&p.__esModule)return p;var g={};if(p!=null)for(var y in p)y!=="default"&&Object.prototype.hasOwnProperty.call(p,y)&&t(g,p,y);return e(g,p),g},r=Jt&&Jt.__rest||function(p,g){var y={};for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&g.indexOf(b)<0&&(y[b]=p[b]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,b=Object.getOwnPropertySymbols(p);x<b.length;x++)g.indexOf(b[x])<0&&Object.prototype.propertyIsEnumerable.call(p,b[x])&&(y[b[x]]=p[b[x]]);return y},i=Jt&&Jt.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.YouTubeEmbed=void 0;const s=i(kn()),o=n(Bt()),a=i(HO),l=Dr(),c=Rr(),d=640,u=360,h=0,f=p=>{var g,y,b,x,w,v,E,C,N,j,M,T,P,{url:_,width:z,height:k,linkText:L="Watch on YouTube",placeholderImageUrl:W,placeholderSpinner:H,placeholderSpinnerDisabled:ie=!1,placeholderProps:q,embedPlaceholder:fe,placeholderDisabled:I,youTubeProps:D}=p,ae=r(p,["url","width","height","linkText","placeholderImageUrl","placeholderSpinner","placeholderSpinnerDisabled","placeholderProps","embedPlaceholder","placeholderDisabled","youTubeProps"]);const[Z,J]=o.useState(!1),_e=(g=_.match(/[?&]v=(.+?)(?:$|[&?])/))===null||g===void 0?void 0:g[1],Pe=(y=_.match(/https:\/\/(?:www\.)?youtube\.com\/shorts\/(.+?)(?:$|[&?])/))===null||y===void 0?void 0:y[1],ne=(b=_.match(/https:\/\/youtu\.be\/(.+?)(?:$|[&?])/))===null||b===void 0?void 0:b[1],ge=(x=_.match(/https:\/\/(?:www\.)youtube(-nocookie)?\.com\/embed\/(.+?)(?:$|[&?])/))===null||x===void 0?void 0:x[2],Ce=(E=(v=(w=_e??Pe)!==null&&w!==void 0?w:ne)!==null&&v!==void 0?v:ge)!==null&&E!==void 0?E:"00000000",Le=+((N=(C=_.match(/(.+?)(?:$|[&?])start=(\d+)/))===null||C===void 0?void 0:C[2])!==null&&N!==void 0?N:0),Re=!!(z!=null&&z.toString().includes("%")),Ge=!!(k!=null&&k.toString().includes("%"));let S={};Le&&(S.playerVars={start:Le}),typeof z<"u"&&(S.width=Re?"100%":`${z}`),typeof k<"u"&&(S.height=Ge?"100%":`${k}`),S=Object.assign(Object.assign({},S),D==null?void 0:D.opts);const K={maxWidth:Re?void 0:d,width:typeof z<"u"?Re?"100%":z:"100%",height:Ge?"100%":typeof k<"u"?k:typeof((j=ae.style)===null||j===void 0?void 0:j.height)<"u"||typeof((M=ae.style)===null||M===void 0?void 0:M.maxHeight)<"u"?"100%":u,border:"1px solid #dee2e6",borderRadius:h},V=fe??o.createElement(l.PlaceholderEmbed,Object.assign({url:_,imageUrl:W,linkText:L,spinner:H,spinnerDisabled:ie},q,{style:Object.assign(Object.assign({},K),q==null?void 0:q.style)}));return o.createElement("div",Object.assign({},ae,{className:(0,s.default)("rsme-embed rsme-youtube-embed",ae.className),style:Object.assign({overflow:"hidden",width:z??void 0,height:k??void 0,borderRadius:h},ae.style)}),o.createElement(c.EmbedStyle,null),o.createElement("div",{className:(0,s.default)(!Z&&"rsme-d-none")},o.createElement(a.default,Object.assign({},D,{className:(T=D==null?void 0:D.className)!==null&&T!==void 0?T:"youtube-iframe",videoId:(P=D==null?void 0:D.videoId)!==null&&P!==void 0?P:Ce,opts:S,onReady:O=>{J(!0),D&&D.onReady&&(D==null||D.onReady(O))}}))),!Z&&!I&&V)};return Jt.YouTubeEmbed=f,Jt}var Dp;function VO(){return Dp||(Dp=1,(function(t){var e=$r&&$r.__createBinding||(Object.create?(function(r,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,a)}):(function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]})),n=$r&&$r.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(UM(),t),n(VM(),t),n(WM(),t),n(qM(),t),n(KM(),t),n(aO(),t),n(UO(),t),n(Dr(),t),n(Cy(),t)})($r)),$r}var Vr=VO();const WO=({url:t})=>{const n=`https://embed.bsky.app/embed/iframe?uri=${encodeURIComponent(t)}`;return m.jsx("div",{className:"w-full max-w-[550px] mx-auto border border-zinc-800 rounded-xl overflow-hidden bg-white",children:m.jsx("iframe",{src:n,width:"100%",height:"400",frameBorder:"0",scrolling:"no",title:"Bluesky Embed",style:{border:"none",display:"block"}})})},_y=({url:t,service:e})=>{const n=({children:r,maxWidth:i=550})=>m.jsx("div",{className:"flex justify-center w-full mx-auto overflow-hidden bg-zinc-950 rounded-xl my-4",style:{maxWidth:i},children:r});if(!t)return null;try{switch(e){case"twitter":case"x":return m.jsx(n,{maxWidth:550,children:m.jsx(Vr.TwitterEmbed,{url:t,width:"100%"})});case"instagram":return m.jsx(n,{maxWidth:350,children:m.jsx(Vr.InstagramEmbed,{url:t,width:"100%"})});case"youtube":return m.jsx(n,{maxWidth:600,children:m.jsx(Vr.YouTubeEmbed,{url:t,width:"100%",height:340})});case"tiktok":return m.jsx(n,{maxWidth:325,children:m.jsx(Vr.TikTokEmbed,{url:t,width:"100%"})});case"pinterest":return m.jsx(n,{maxWidth:345,children:m.jsx(Vr.PinterestEmbed,{url:t,width:"100%",height:500})});case"facebook":return m.jsx(n,{maxWidth:550,children:m.jsx(Vr.FacebookEmbed,{url:t,width:"100%"})});case"linkedin":if(t.includes("/embed/"))return m.jsx(n,{maxWidth:500,children:m.jsx(Vr.LinkedInEmbed,{url:t,width:"100%",height:500})});break;case"bluesky":return m.jsx(WO,{url:t})}}catch(r){console.warn("Embed Error",r)}return m.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-zinc-900 border border-zinc-800 rounded-lg text-zinc-500 max-w-md mx-auto my-4",children:[m.jsx(Jp,{size:32,className:"mb-2 opacity-50"}),m.jsx("p",{className:"text-xs font-bold text-zinc-400",children:"Linked Content"}),m.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[10px] text-indigo-400 hover:underline mt-1 break-all text-center",children:[t," ",m.jsx(Kp,{size:10})]})]})},qO=({node:t,selected:e})=>{const{url:n,service:r}=t.attrs;return n?m.jsx(na,{className:"social-embed-component my-6 select-none",children:m.jsxs("div",{className:`
            relative rounded-xl transition-all duration-200
            ${e?"ring-2 ring-indigo-500 ring-offset-2 ring-offset-black":""}
        `,children:[m.jsx(_y,{url:n,service:r}),!e&&m.jsx("div",{className:"absolute inset-0 z-10"})]})}):m.jsx(na,{className:"my-4",children:m.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-500/10 border border-red-500/20 rounded text-red-400 text-xs",children:[m.jsx(ja,{size:14}),m.jsx("span",{children:"Invalid Embed URL"})]})})},KO=_t.create({name:"socialEmbed",group:"block",atom:!0,addAttributes(){return{url:{default:null},service:{default:null}}},parseHTML(){return[{tag:'div[data-type="social-embed"]'}]},renderHTML({HTMLAttributes:t}){return["div",{"data-type":"social-embed",...t}]},addNodeView(){return Jd(qO)}}),GO=["zip","rar","7z","tar","gz","bz2","xz","iso"],Ny=({id:t,fileName:e,size:n,mimeType:r,selected:i,className:s})=>{var f;const[o,a]=$.useState(null),l=((f=e==null?void 0:e.split(".").pop())==null?void 0:f.toLowerCase())||"file",c=GO.includes(l);$.useEffect(()=>{if(!navigator.onLine)return;(async()=>{try{const g=`https://api.iconify.design/material-icon-theme/${l}.svg?width=24&height=24`;(await fetch(g)).ok&&a(g)}catch{}})()},[l]);const d=async p=>{p.preventDefault(),p.stopPropagation();try{const g=await Ke.getAttachment(t);if(g){const y=URL.createObjectURL(g.blob),b=document.createElement("a");b.href=y,b.download=e,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(y)}else alert("File not found in database.")}catch(g){console.error(g),alert("Error retrieving file.")}},u=p=>{p.preventDefault(),p.stopPropagation();const g=new CustomEvent("preview-attachment",{detail:{id:t}});document.dispatchEvent(g)},h=p=>{if(p===0)return"0 B";const g=1024,y=["B","KB","MB","GB"],b=Math.floor(Math.log(p)/Math.log(g));return parseFloat((p/Math.pow(g,b)).toFixed(1))+" "+y[b]};return m.jsxs("div",{className:`
            flex items-center gap-3 p-2 pr-4 rounded-lg border bg-zinc-900 transition-all select-none cursor-default
            ${i?"border-indigo-500 ring-1 ring-indigo-500":"border-zinc-800 hover:border-zinc-700"}
            ${s||""}
        `,children:[m.jsx("div",{className:"w-8 h-8 flex items-center justify-center shrink-0",children:o?m.jsx("img",{src:o,alt:l,className:"w-6 h-6",onError:()=>a(null)}):m.jsx("div",{className:"text-zinc-400",children:c?m.jsx(qp,{size:20}):m.jsx(dx,{size:20})})}),m.jsxs("div",{className:"flex flex-col min-w-[80px] max-w-[200px]",children:[m.jsx("span",{className:"text-xs font-bold text-zinc-200 truncate",title:e,children:e}),m.jsx("span",{className:"text-[10px] text-zinc-500 font-mono",children:h(n||0)})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("button",{onClick:u,className:"p-1.5 text-zinc-500 hover:text-indigo-400 hover:bg-zinc-800 rounded-md transition-colors",title:"Preview",children:m.jsx(ld,{size:14})}),m.jsx("button",{onClick:d,className:"p-1.5 text-zinc-500 hover:text-indigo-400 hover:bg-zinc-800 rounded-md transition-colors",title:"Download",children:m.jsx(Gb,{size:14})})]})]})},JO=({node:t,selected:e})=>{const{id:n,fileName:r,size:i,mimeType:s}=t.attrs;return m.jsx(na,{className:"inline-block mx-1 align-middle my-1",children:m.jsx(Ny,{id:n,fileName:r,size:i,mimeType:s,selected:e})})},YO=_t.create({name:"fileAttachment",group:"inline",inline:!0,atom:!0,addAttributes(){return{id:{default:null},fileName:{default:"file"},size:{default:0},mimeType:{default:"application/octet-stream"}}},parseHTML(){return[{tag:"file-attachment"}]},renderHTML({HTMLAttributes:t}){return["file-attachment",t]},addNodeView(){return Jd(JO)}}),Pp={},XO="hljs-";function ZO(t){const e=L0.newInstance();return{highlight:n,highlightAuto:r,listLanguages:i,register:s,registerAlias:o,registered:a};function n(l,c,d){const u=d||Pp,h=typeof u.prefix=="string"?u.prefix:XO;if(!e.getLanguage(l))throw new Error("Unknown language: `"+l+"` is not registered");e.configure({__emitter:QO,classPrefix:h});const f=e.highlight(c,{ignoreIllegals:!0,language:l});if(f.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:f.errorRaised});const p=f._emitter.root,g=p.data;return g.language=f.language,g.relevance=f.relevance,p}function r(l,c){const u=(c||Pp).subset||i();let h=-1,f=0,p;for(;++h<u.length;){const g=u[h];if(!e.getLanguage(g))continue;const y=n(g,l,c);y.data&&y.data.relevance!==void 0&&y.data.relevance>f&&(f=y.data.relevance,p=y)}return p||{type:"root",children:[],data:{language:void 0,relevance:f}}}function i(){return e.listLanguages()}function s(l,c){if(typeof l=="string")e.registerLanguage(l,c);else{let d;for(d in l)Object.hasOwn(l,d)&&e.registerLanguage(d,l[d])}}function o(l,c){if(typeof l=="string")e.registerAliases(typeof c=="string"?c:[...c],{languageName:l});else{let d;for(d in l)if(Object.hasOwn(l,d)){const u=l[d];e.registerAliases(typeof u=="string"?u:[...u],{languageName:d})}}}function a(l){return!!e.getLanguage(l)}}class QO{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=e:n.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,n){const r=this.stack[this.stack.length-1],i=e.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:i}):r.children.push(...i)}openNode(e){const n=this,r=e.split(".").map(function(o,a){return a?o+"_".repeat(a):n.options.classPrefix+o}),i=this.stack[this.stack.length-1],s={type:"element",tagName:"span",properties:{className:r},children:[]};i.children.push(s),this.stack.push(s)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const lc=ZO(),cc=new Set,Lp=new Map;let hr=null;const Bp={javascript:"javascript",js:"javascript",typescript:"typescript",ts:"typescript",jsx:"javascript",tsx:"typescript",python:"python",py:"python",bash:"bash",sh:"bash",shell:"bash",html:"xml",xml:"xml",css:"css",json:"json",sql:"sql",markdown:"markdown",md:"markdown",java:"java",go:"go",rust:"rust",php:"php",cpp:"cpp",c:"c",yaml:"yaml",yml:"yaml"};class ws{static getLowlight(){return lc}static async preloadStandard(){const e=["javascript","typescript","xml","css","json","bash","sql"];await Promise.all(e.map(n=>this.ensureLanguage(n)))}static async ensureLanguage(e){const n=e.toLowerCase().trim(),r=Bp[n]||n;if(cc.has(r))return!0;try{const o=(await import(`https://esm.sh/highlight.js@11.9.0/lib/languages/${r}`)).default;return o?(lc.register(r,o),Lp.set(r,o),hr&&hr.registerLanguage(r,o),cc.add(r),r==="xml"&&(lc.register("html",o),hr&&hr.registerLanguage("html",o)),console.debug(`[CodeLanguageService] Loaded: ${r}`),!0):!1}catch(i){return console.warn(`[CodeLanguageService] Failed to load language: ${r}`,i),!1}}static isLoaded(e){const n=e.toLowerCase().trim(),r=Bp[n]||n;return cc.has(r)}static async highlightBlock(e){if(!hr)try{hr=(await Xe(()=>import("https://esm.sh/highlight.js@11.9.0/lib/core"),[])).default,Lp.forEach((r,i)=>{hr.registerLanguage(i,r)})}catch(n){console.error("Failed to load highlight.js core",n);return}hr.highlightElement(e)}}const ej=({node:t,selected:e})=>{const[n,r]=$.useState(""),[i,s]=$.useState(!0),[o,a]=$.useState(!1),l=t.attrs.src;return $.useEffect(()=>{let c=!0,d=null;return(async()=>{if(!l){s(!1);return}if(l.startsWith("attachment:")){const h=l.replace("attachment:","");try{const f=await Ke.getAttachment(h);f&&c?(d=URL.createObjectURL(f.blob),r(d),s(!1)):c&&(a(!0),s(!1))}catch{c&&a(!0),s(!1)}}else r(l),s(!1)})(),()=>{c=!1,d&&URL.revokeObjectURL(d)}},[l]),m.jsx(na,{className:"image-view-wrapper inline-block max-w-full",children:m.jsx("div",{className:`relative rounded-lg overflow-hidden border border-zinc-800 bg-zinc-900 transition-all ${e?"ring-2 ring-indigo-500":""}`,children:i?m.jsxs("div",{className:"w-64 h-40 flex flex-col items-center justify-center text-zinc-500",children:[m.jsx(yt,{size:24,className:"animate-spin mb-2"}),m.jsx("span",{className:"text-xs",children:"Loading Attachment..."})]}):o?m.jsxs("div",{className:"w-64 h-40 flex flex-col items-center justify-center text-red-500 bg-red-500/5",children:[m.jsx(ja,{size:24,className:"mb-2"}),m.jsx("span",{className:"text-xs",children:"Image Not Found"}),m.jsx("span",{className:"text-[10px] opacity-60 font-mono mt-1",children:l})]}):m.jsx("img",{src:n,alt:t.attrs.alt,title:t.attrs.title,className:"block max-w-full h-auto"})})})};function tj(t){var e;const{char:n,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:s,startOfLine:o,$position:a}=t,l=r&&!i,c=d_(n),d=new RegExp(`\\s${c}$`),u=o?"^":"",h=i?"":c,f=l?new RegExp(`${u}${c}.*?(?=\\s${h}|$)`,"gm"):new RegExp(`${u}(?:^)?${c}[^\\s${h}]*`,"gm"),p=((e=a.nodeBefore)==null?void 0:e.isText)&&a.nodeBefore.text;if(!p)return null;const g=a.pos-p.length,y=Array.from(p.matchAll(f)).pop();if(!y||y.input===void 0||y.index===void 0)return null;const b=y.input.slice(Math.max(0,y.index-1),y.index),x=new RegExp(`^[${s==null?void 0:s.join("")}\0]?$`).test(b);if(s!==null&&!x)return null;const w=g+y.index;let v=w+y[0].length;return l&&d.test(p.slice(v-1,v+1))&&(y[0]+=" ",v+=1),w<a.pos&&v>=a.pos?{range:{from:w,to:v},query:y[0].slice(n.length),text:y[0]}:null}var nj=new pt("suggestion");function rj({pluginKey:t=nj,editor:e,char:n="@",allowSpaces:r=!1,allowToIncludeChar:i=!1,allowedPrefixes:s=[" "],startOfLine:o=!1,decorationTag:a="span",decorationClass:l="suggestion",decorationContent:c="",decorationEmptyClass:d="is-empty",command:u=()=>null,items:h=()=>[],render:f=()=>({}),allow:p=()=>!0,findSuggestionMatch:g=tj,shouldShow:y}){let b;const x=f==null?void 0:f(),w=()=>{const N=e.state.selection.$anchor.pos,j=e.view.coordsAtPos(N),{top:M,right:T,bottom:P,left:_}=j;try{return new DOMRect(_,M,T-_,P-M)}catch{return null}},v=(N,j)=>j?()=>{const M=t.getState(e.state),T=M==null?void 0:M.decorationId,P=N.dom.querySelector(`[data-decoration-id="${T}"]`);return(P==null?void 0:P.getBoundingClientRect())||null}:w;function E(N,j){var M;try{const P=t.getState(N.state),_=P!=null&&P.decorationId?N.dom.querySelector(`[data-decoration-id="${P.decorationId}"]`):null,z={editor:e,range:(P==null?void 0:P.range)||{from:0,to:0},query:(P==null?void 0:P.query)||null,text:(P==null?void 0:P.text)||null,items:[],command:k=>u({editor:e,range:(P==null?void 0:P.range)||{from:0,to:0},props:k}),decorationNode:_,clientRect:v(N,_)};(M=x==null?void 0:x.onExit)==null||M.call(x,z)}catch{}const T=N.state.tr.setMeta(j,{exit:!0});N.dispatch(T)}const C=new rt({key:t,view(){return{update:async(N,j)=>{var M,T,P,_,z,k,L;const W=(M=this.key)==null?void 0:M.getState(j),H=(T=this.key)==null?void 0:T.getState(N.state),ie=W.active&&H.active&&W.range.from!==H.range.from,q=!W.active&&H.active,fe=W.active&&!H.active,I=!q&&!fe&&W.query!==H.query,D=q||ie&&I,ae=I||ie,Z=fe||ie&&I;if(!D&&!ae&&!Z)return;const J=Z&&!D?W:H,_e=N.dom.querySelector(`[data-decoration-id="${J.decorationId}"]`);b={editor:e,range:J.range,query:J.query,text:J.text,items:[],command:Pe=>u({editor:e,range:J.range,props:Pe}),decorationNode:_e,clientRect:v(N,_e)},D&&((P=x==null?void 0:x.onBeforeStart)==null||P.call(x,b)),ae&&((_=x==null?void 0:x.onBeforeUpdate)==null||_.call(x,b)),(ae||D)&&(b.items=await h({editor:e,query:J.query})),Z&&((z=x==null?void 0:x.onExit)==null||z.call(x,b)),ae&&((k=x==null?void 0:x.onUpdate)==null||k.call(x,b)),D&&((L=x==null?void 0:x.onStart)==null||L.call(x,b))},destroy:()=>{var N;b&&((N=x==null?void 0:x.onExit)==null||N.call(x,b))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(N,j,M,T){const{isEditable:P}=e,{composing:_}=e.view,{selection:z}=N,{empty:k,from:L}=z,W={...j},H=N.getMeta(t);if(H&&H.exit)return W.active=!1,W.decorationId=null,W.range={from:0,to:0},W.query=null,W.text=null,W;if(W.composing=_,P&&(k||e.view.composing)){(L<j.range.from||L>j.range.to)&&!_&&!j.composing&&(W.active=!1);const ie=g({char:n,allowSpaces:r,allowToIncludeChar:i,allowedPrefixes:s,startOfLine:o,$position:z.$from}),q=`id_${Math.floor(Math.random()*4294967295)}`;ie&&p({editor:e,state:T,range:ie.range,isActive:j.active})&&(!y||y({editor:e,range:ie.range,query:ie.query,text:ie.text,transaction:N}))?(W.active=!0,W.decorationId=j.decorationId?j.decorationId:q,W.range=ie.range,W.query=ie.query,W.text=ie.text):W.active=!1}else W.active=!1;return W.active||(W.decorationId=null,W.range={from:0,to:0},W.query=null,W.text=null),W}},props:{handleKeyDown(N,j){var M,T,P,_;const{active:z,range:k}=C.getState(N.state);if(!z)return!1;if(j.key==="Escape"||j.key==="Esc"){const W=C.getState(N.state),H=(M=b==null?void 0:b.decorationNode)!=null?M:null,ie=H??(W!=null&&W.decorationId?N.dom.querySelector(`[data-decoration-id="${W.decorationId}"]`):null);if(((T=x==null?void 0:x.onKeyDown)==null?void 0:T.call(x,{view:N,event:j,range:W.range}))||!1)return!0;const fe={editor:e,range:W.range,query:W.query,text:W.text,items:[],command:I=>u({editor:e,range:W.range,props:I}),decorationNode:ie,clientRect:ie?()=>ie.getBoundingClientRect()||null:null};return(P=x==null?void 0:x.onExit)==null||P.call(x,fe),E(N,t),!0}return((_=x==null?void 0:x.onKeyDown)==null?void 0:_.call(x,{view:N,event:j,range:k}))||!1},decorations(N){const{active:j,range:M,decorationId:T,query:P}=C.getState(N);if(!j)return null;const _=!(P!=null&&P.length),z=[l];return _&&z.push(d),nt.create(N.doc,[kt.inline(M.from,M.to,{nodeName:a,class:z.join(" "),"data-decoration-id":T,"data-decoration-content":c})])}}});return C}var ij=rj;const Ty=$.forwardRef(({items:t,command:e},n)=>{const[r,i]=$.useState(0),s=$.useRef(null),o=$.useRef(null);$.useEffect(()=>{i(0)},[t]),$.useEffect(()=>{if(o.current&&s.current){const l=s.current,c=o.current,d=l.scrollTop,u=d+l.clientHeight,h=c.offsetTop,f=h+c.offsetHeight;h<d?l.scrollTop=h:f>u&&(l.scrollTop=f-l.clientHeight)}},[r]);const a=l=>{const c=t[l];c&&e({id:c.id,label:c.title})};return $.useImperativeHandle(n,()=>({onKeyDown:({event:l})=>l.key==="ArrowUp"?(i((r+t.length-1)%t.length),!0):l.key==="ArrowDown"?(i((r+1)%t.length),!0):l.key==="Enter"?(a(r),!0):!1})),t.length===0?null:m.jsxs("div",{ref:s,className:"bg-zinc-950 border border-zinc-800 rounded-lg shadow-2xl overflow-y-auto overflow-x-hidden max-h-64 min-w-[250px] p-1 animate-in fade-in duration-100 custom-scrollbar",children:[m.jsxs("div",{className:"px-3 py-1.5 text-[10px] font-bold text-zinc-500 border-b border-zinc-800/50 mb-1 sticky top-0 bg-zinc-950 z-10 uppercase tracking-wider flex justify-between",children:[m.jsx("span",{children:"Link Note"}),m.jsxs("span",{children:[t.length," found"]})]}),t.map((l,c)=>m.jsxs("button",{ref:c===r?o:null,className:`flex items-center gap-2 w-full text-left px-3 py-2 text-xs rounded-md transition-colors ${c===r?"bg-zinc-800 text-white":"text-zinc-400 hover:bg-zinc-900"}`,onClick:()=>a(c),children:[m.jsx(Es,{size:14,className:"shrink-0 opacity-50"}),m.jsx("span",{className:"truncate font-medium",children:l.title})]},l.id))]})});Ty.displayName="SuggestionList";function sj(t,e){let n=null;return(...r)=>(n&&clearTimeout(n),new Promise(i=>{n=setTimeout(()=>{i(t(...r))},e)}))}const oj=$n.create({name:"noteLink",addOptions(){return{HTMLAttributes:{class:"note-link text-indigo-400 hover:underline cursor-pointer bg-indigo-500/10 px-1 rounded"},trigger:"[["}},addAttributes(){return{"data-note-id":{default:null}}},parseHTML(){return[{tag:"a[data-note-id]"}]},renderHTML({HTMLAttributes:t}){return["a",ot(this.options.HTMLAttributes,t),0]},addProseMirrorPlugins(){const t=this.options.trigger,e=new rt({props:{handleClick(r,i,s){const{schema:o}=r.state,a=r.state.doc.nodeAt(i),l=r.state.doc.nodeAt(i-1),c=u=>u&&u.marks&&u.marks.find(h=>h.type.name==="noteLink");let d=c(a);if(d||(d=c(l)),d){const u=d.attrs["data-note-id"];if(u){const h=new CustomEvent("navigate-note",{detail:{noteId:u},bubbles:!0});return r.dom.dispatchEvent(h),!0}}return!1}}}),n=ij({editor:this.editor,char:t,allowSpaces:!0,items:sj(async({query:r})=>{try{return await Ke.searchNotes(r,100)}catch(i){return console.error("Failed to search notes",i),[]}},150),render:()=>{let r=null,i=null;return{onStart:s=>{r=new R0(Ty,{props:s,editor:s.editor}),s.clientRect&&(i=Hi("body",{getReferenceClientRect:s.clientRect,appendTo:()=>document.body,content:r.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"})[0])},onUpdate(s){r==null||r.updateProps(s),s.clientRect&&(i==null||i.setProps({getReferenceClientRect:s.clientRect}))},onKeyDown(s){var o;return s.event.key==="Escape"?(i==null||i.hide(),!0):((o=r==null?void 0:r.ref)==null?void 0:o.onKeyDown(s))||!1},onExit(){i==null||i.destroy(),r==null||r.destroy()}}},command:({editor:r,range:i,props:s})=>{const o=t.length,a=i.from,l=i.to;r.chain().focus().deleteRange({from:a,to:l}).deleteRange({from:i.from-t.length,to:i.from}).setMark("noteLink",{"data-note-id":s.id}).insertContent(s.label).unsetMark("noteLink").insertContent(" ").run()}});return[e,n]}}),aj=Q.lazy(()=>Xe(()=>import("./Palette-Da6hWOEh.js"),__vite__mapDeps([7,3]))),lj={slate:"#94a3b8",gray:"#9ca3af",zinc:"#a1a1aa",neutral:"#a3a3a3",stone:"#a8a29e",red:"#f87171",orange:"#fb923c",amber:"#fbbf24",yellow:"#facc15",lime:"#a3e635",green:"#4ade80",emerald:"#34d399",teal:"#2dd4bf",cyan:"#22d3ee",sky:"#38bdf8",blue:"#60a5fa",indigo:"#818cf8",violet:"#a78bfa",purple:"#c084fc",fuchsia:"#e879f9",pink:"#f472b6",rose:"#fb7185"},cj=[{id:"twitter",regex:/twitter\.com|x\.com/},{id:"instagram",regex:/instagram\.com/},{id:"linkedin",regex:/linkedin\.com/},{id:"pinterest",regex:/pinterest\.com|pin\.it/},{id:"tiktok",regex:/tiktok\.com/},{id:"bluesky",regex:/bsky\.app/},{id:"youtube",regex:/youtube\.com|youtu\.be/},{id:"facebook",regex:/facebook\.com/}],dj=$n.create({name:"diffIns",parseHTML(){return[{tag:"ins"},{tag:'span[data-diff="ins"]'}]},renderHTML({HTMLAttributes:t}){return["span",ot(t,{"data-diff":"ins",class:"bg-green-500/20 text-green-500 no-underline px-1 rounded-sm decoration-0 mx-0.5"}),0]}}),uj=$n.create({name:"diffDel",parseHTML(){return[{tag:"del"},{tag:'span[data-diff="del"]'}]},renderHTML({HTMLAttributes:t}){return["span",ot(t,{"data-diff":"del",class:"bg-red-500/20 text-red-500 line-through px-1 rounded-sm mx-0.5"}),0]}}),vt=({onClick:t,isActive:e=!1,disabled:n=!1,children:r,title:i,className:s=""})=>{const o=m.jsx("button",{type:"button",onClick:t,disabled:n,className:`p-1.5 rounded transition-colors ${e?"bg-indigo-500 text-white":"text-zinc-400 hover:text-white hover:bg-zinc-800"} ${n?"opacity-50 cursor-not-allowed":""} ${s}`,children:r});return i?m.jsx(Pt,{content:i,placement:"top",children:o}):o},fj=()=>m.jsxs("div",{className:"flex flex-col border border-zinc-800 rounded-xl bg-zinc-950 h-[60vh] animate-pulse",children:[m.jsxs("div",{className:"flex items-center gap-2 p-2 border-b border-zinc-800 bg-zinc-950/80",children:[m.jsx("div",{className:"w-6 h-6 bg-zinc-800 rounded"}),m.jsx("div",{className:"w-6 h-6 bg-zinc-800 rounded"}),m.jsx("div",{className:"w-6 h-6 bg-zinc-800 rounded"}),m.jsx("div",{className:"w-px h-4 bg-zinc-800 mx-1"}),m.jsx("div",{className:"w-24 h-6 bg-zinc-800 rounded"})]}),m.jsxs("div",{className:"p-6 space-y-4",children:[m.jsx("div",{className:"w-3/4 h-4 bg-zinc-800 rounded"}),m.jsx("div",{className:"w-full h-4 bg-zinc-800 rounded"}),m.jsx("div",{className:"w-5/6 h-4 bg-zinc-800 rounded"})]})]}),hj=({noteId:t,content:e,onChange:n,onNavigate:r})=>{const[i,s]=$.useState([]),[o,a]=$.useState("[["),[l,c]=$.useState(!1),d=$.useRef(null),u=$.useRef(null),h=$.useRef(null),[,f]=$.useState(0),[p,g]=$.useState(!1),[y,b]=$.useState(""),[x,w]=$.useState(!1),[v,E]=$.useState(""),[C,N]=$.useState(!1),[j,M]=$.useState(!1);$.useEffect(()=>{let I=!0;return(async()=>{const ae=await Ke.getSettings();I&&(s(ae.codeLanguages),ae.internalLinkTrigger&&a(ae.internalLinkTrigger)),await ws.preloadStandard()})(),()=>{I=!1}},[]),$.useEffect(()=>{const I=ae=>{ae.detail&&ae.detail.noteId&&r&&r(ae.detail.noteId)},D=h.current;return D&&D.addEventListener("navigate-note",I),()=>{D&&D.removeEventListener("navigate-note",I)}},[r]);const T=bN({extensions:[_N,AN,ON,PN,UN,KN,XN,dy,IA,dj,uj,lT.configure({lowlight:ws.getLowlight(),defaultLanguage:null}),dT.configure({levels:[1,2,3,4]}),ET,CT,_T,AT,YT,NA,CA.configure({openOnClick:!1,autolink:!0,defaultProtocol:"https"}),oj.configure({trigger:o}),QT.configure({inline:!0,allowBase64:!0}).extend({addNodeView(){return Jd(ej)}}),KO,YO,Ey.configure({resizable:!0}),Sy,ky,wy],content:e,onUpdate:({editor:I})=>{n(I.getHTML())},onTransaction:()=>{f(I=>I+1)},editorProps:{attributes:{class:"prose prose-invert prose-zinc max-w-none focus:outline-none min-h-[50vh] prose-headings:text-zinc-200 prose-a:text-indigo-400 prose-img:rounded-xl prose-pre:bg-zinc-950 prose-pre:border prose-pre:border-zinc-800 prose-table:border-collapse prose-td:border prose-td:border-zinc-700 prose-td:p-2 prose-th:border prose-th:border-zinc-700 prose-th:p-2 prose-th:bg-zinc-900"}}},[o]),P=async I=>{if(!T)return;I&&I!=="auto"&&await ws.ensureLanguage(I);const D=I==="auto"?null:I;T.chain().focus().updateAttributes("codeBlock",{language:D}).run()},_=async I=>{var ae;const D=(ae=I.target.files)==null?void 0:ae[0];if(!(!D||!T)){c(!0);try{const J=`attachment:${await Ke.saveAttachment(D)}`;T.chain().focus().setImage({src:J}).run()}catch{alert("Failed to insert image.")}finally{c(!1),d.current&&(d.current.value="")}}},z=async I=>{var ae;const D=(ae=I.target.files)==null?void 0:ae[0];if(!(!D||!T)&&!(D.size>10*1024*1024&&!confirm(`File is ${Math.round(D.size/1024/1024)}MB. Large files may slow down the app. Continue?`))){c(!0);try{const Z=await Ke.saveAttachment(D);T.chain().focus().insertContent({type:"fileAttachment",attrs:{id:Z,fileName:D.name,size:D.size,mimeType:D.type}}).run()}catch{alert("Failed to attach file.")}finally{c(!1),u.current&&(u.current.value="")}}},k=()=>{if(!T)return;const I=T.getAttributes("link").href;b(I||""),g(!0),w(!1)},L=()=>{T&&(y===""?T.chain().focus().extendMarkRange("link").unsetLink().run():T.chain().focus().extendMarkRange("link").setLink({href:y,target:"_blank"}).run(),g(!1))},W=()=>{T&&(E(""),w(!0),g(!1))},H=()=>{if(!T)return;if(!v){w(!1);return}const I=v,D=cj.find(Z=>I.match(Z.regex)),ae=D?D.id:null;ae?T.chain().focus().insertContent({type:"socialEmbed",attrs:{url:I,service:ae}}).run():T.chain().focus().setLink({href:I}).insertContent(I).run(),w(!1)},ie=I=>{if(T){if(I==="default")T.chain().focus().unsetColor().run();else{const D=lj[I]||I;T.chain().focus().setColor(D).run()}N(!1)}};if(!T)return m.jsx(fj,{});const q=T.isActive("codeBlock"),fe=T.getAttributes("codeBlock").language||"auto";return m.jsxs("div",{ref:h,className:"flex flex-col border border-zinc-800 rounded-xl bg-zinc-950 relative",children:[p&&m.jsxs("div",{className:"absolute top-12 left-1/2 -translate-x-1/2 z-[60] bg-zinc-900 border border-zinc-700 p-2 rounded-lg shadow-2xl flex items-center gap-2 animate-in fade-in zoom-in-95 duration-200",children:[m.jsx("input",{autoFocus:!0,type:"url",value:y,onChange:I=>b(I.target.value),placeholder:"https://example.com",className:"bg-black border border-zinc-700 rounded px-2 py-1 text-xs text-white outline-none focus:border-indigo-500 w-64",onKeyDown:I=>I.key==="Enter"&&L()}),m.jsx("button",{onClick:L,className:"p-1 bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:m.jsx(ii,{size:14})}),m.jsx("button",{onClick:()=>g(!1),className:"p-1 hover:bg-zinc-800 text-zinc-400 rounded",children:m.jsx(sr,{size:14})})]}),x&&m.jsxs("div",{className:"absolute top-12 left-1/2 -translate-x-1/2 z-[60] bg-zinc-900 border border-zinc-700 p-3 rounded-lg shadow-2xl flex flex-col gap-2 animate-in fade-in zoom-in-95 duration-200 min-w-[320px]",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-[10px] text-zinc-400 font-bold uppercase",children:"Embed Social Media"}),m.jsx("button",{onClick:()=>w(!1),className:"hover:text-white text-zinc-500",children:m.jsx(sr,{size:12})})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{autoFocus:!0,type:"url",value:v,onChange:I=>E(I.target.value),placeholder:"Paste URL (YouTube, X, Insta...)",className:"bg-black border border-zinc-700 rounded px-2 py-1 text-xs text-white outline-none focus:border-indigo-500 flex-1",onKeyDown:I=>I.key==="Enter"&&H()}),m.jsx("button",{onClick:H,className:"p-1 bg-indigo-600 hover:bg-indigo-500 text-white rounded",children:m.jsx(ii,{size:14})})]}),m.jsx("div",{className:"text-[9px] text-zinc-600 leading-tight",children:"Supports: YouTube, X/Twitter, Facebook, Instagram, TikTok, LinkedIn, Pinterest, Bluesky"})]}),m.jsxs("div",{className:"sticky top-0 z-40 flex flex-wrap items-center gap-1 p-2 border-b border-zinc-800 bg-zinc-950/80 backdrop-blur-md rounded-t-xl transition-all",children:[m.jsx(vt,{onClick:()=>T.chain().focus().toggleBold().run(),isActive:T.isActive("bold"),title:"Bold (Cmd+B)",children:m.jsx(pb,{size:16})}),m.jsx(vt,{onClick:()=>T.chain().focus().toggleItalic().run(),isActive:T.isActive("italic"),title:"Italic (Cmd+I)",children:m.jsx(Rx,{size:16})}),m.jsxs("div",{className:"relative",children:[m.jsx(vt,{onClick:()=>N(!C),isActive:C||T.getAttributes("textStyle").color,title:"Text Color",children:m.jsx(x1,{size:16})}),C&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>N(!1)}),m.jsx("div",{className:"absolute top-full left-0 mt-2 z-50 bg-zinc-900 border border-zinc-800 rounded-lg shadow-xl p-2 w-64 animate-in fade-in zoom-in-95 duration-100",children:m.jsx($.Suspense,{fallback:m.jsx("div",{className:"h-20 bg-zinc-800 animate-pulse rounded"}),children:m.jsx(aj,{selectedColor:"",onSelect:ie,mode:"text"})})})]})]}),m.jsx(vt,{onClick:()=>T.chain().focus().toggleStrike().run(),isActive:T.isActive("strike"),title:"Strikethrough",children:m.jsx(dv,{size:16})}),m.jsx(vt,{onClick:()=>T.chain().focus().toggleCode().run(),isActive:T.isActive("code"),title:"Inline Code (Cmd+E)",children:m.jsx(rs,{size:16})}),m.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1"}),m.jsx(Pt,{content:"Insertion (Diff)",placement:"top",children:m.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleMark("diffIns").run(),className:`p-1.5 rounded transition-colors ${T.isActive("diffIns")?"bg-green-500/20 text-green-500":"text-zinc-400 hover:text-green-500 hover:bg-zinc-800"}`,children:m.jsx(Gp,{size:16})})}),m.jsx(Pt,{content:"Deletion (Diff)",placement:"top",children:m.jsx("button",{type:"button",onClick:()=>T.chain().focus().toggleMark("diffDel").run(),className:`p-1.5 rounded transition-colors ${T.isActive("diffDel")?"bg-red-500/20 text-red-500":"text-zinc-400 hover:text-red-500 hover:bg-zinc-800"}`,children:m.jsx(ox,{size:16})})}),m.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1"}),m.jsx(vt,{onClick:()=>T.chain().focus().toggleHeading({level:1}).run(),isActive:T.isActive("heading",{level:1}),title:"Heading 1",children:m.jsx(Ex,{size:16})}),m.jsx(vt,{onClick:()=>T.chain().focus().toggleHeading({level:2}).run(),isActive:T.isActive("heading",{level:2}),title:"Heading 2",children:m.jsx(_x,{size:16})}),m.jsx(vt,{onClick:()=>T.chain().focus().toggleHeading({level:3}).run(),isActive:T.isActive("heading",{level:3}),title:"Heading 3",children:m.jsx(Tx,{size:16})}),m.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1"}),m.jsx(vt,{onClick:()=>T.chain().focus().toggleCodeBlock().run(),isActive:q,title:"Code Block",children:m.jsx(mv,{size:16})}),q&&m.jsx("div",{className:"flex items-center animate-in fade-in zoom-in-95 duration-200 ml-1",children:m.jsxs("select",{value:fe,onChange:I=>P(I.target.value),className:"h-7 bg-zinc-900 border border-zinc-700 rounded px-2 text-[10px] text-zinc-300 focus:border-indigo-500 outline-none cursor-pointer hover:bg-zinc-800 transition-colors",children:[m.jsx("option",{value:"auto",children:"Auto-Detect"}),m.jsx("option",{value:"plaintext",children:"Plain Text"}),m.jsx("optgroup",{label:"Languages",children:i.map(I=>m.jsx("option",{value:I,children:I},I))})]})}),m.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1"}),m.jsx(vt,{onClick:k,isActive:T.isActive("link"),title:"Insert Link",children:m.jsx(Hx,{size:16})}),m.jsx(vt,{onClick:()=>{var I;return(I=d.current)==null?void 0:I.click()},title:"Insert Image",disabled:l,children:l?m.jsx(yt,{size:16,className:"animate-spin"}):m.jsx(Yp,{size:16})}),m.jsx("input",{type:"file",ref:d,className:"hidden",accept:"image/*",onChange:_}),m.jsx(vt,{onClick:()=>{var I;return(I=u.current)==null?void 0:I.click()},title:"Attach File",disabled:l,children:m.jsx(Zp,{size:16})}),m.jsx("input",{type:"file",ref:u,className:"hidden",onChange:z}),m.jsx(vt,{onClick:W,title:"Embed Media",children:m.jsx(c1,{size:16})}),m.jsx(vt,{onClick:()=>{T.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).command(({tr:I,state:D,dispatch:ae})=>{if(ae){const{$from:Z}=I.selection;for(let J=Z.depth;J>0;J--)if(Z.node(J).type.name==="table"){const _e=Z.after(J);return I.insert(_e,D.schema.nodes.paragraph.create()),!0}}return!1}).run()},title:"Insert Table",children:m.jsx(fv,{size:16})}),T.isActive("table")&&m.jsxs("div",{className:"relative group",children:[m.jsx(vt,{onClick:()=>M(!j),isActive:j,title:"Table Options",children:m.jsx($b,{size:16})}),j&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>M(!1)}),m.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-zinc-900 border border-zinc-800 rounded-xl shadow-xl p-2 min-w-[180px] z-50 flex flex-col gap-1",children:[m.jsx("span",{className:"text-[10px] font-bold text-zinc-500 px-2 py-1 uppercase tracking-wider",children:"Columns"}),m.jsxs("button",{onClick:()=>{T.chain().focus().addColumnBefore().run(),M(!1)},className:"flex items-center gap-2 text-xs text-zinc-300 hover:bg-zinc-800 p-1.5 rounded text-left",children:[m.jsx(S1,{size:14})," Add Before"]}),m.jsxs("button",{onClick:()=>{T.chain().focus().addColumnAfter().run(),M(!1)},className:"flex items-center gap-2 text-xs text-zinc-300 hover:bg-zinc-800 p-1.5 rounded text-left",children:[m.jsx(C1,{size:14})," Add After"]}),m.jsxs("button",{onClick:()=>{T.chain().focus().deleteColumn().run(),M(!1)},className:"flex items-center gap-2 text-xs text-red-400 hover:bg-zinc-800 p-1.5 rounded text-left",children:[m.jsx(Ci,{size:14})," Delete Col"]}),m.jsx("div",{className:"h-px bg-zinc-800 my-1"}),m.jsx("span",{className:"text-[10px] font-bold text-zinc-500 px-2 py-1 uppercase tracking-wider",children:"Rows"}),m.jsxs("button",{onClick:()=>{T.chain().focus().addRowBefore().run(),M(!1)},className:"flex items-center gap-2 text-xs text-zinc-300 hover:bg-zinc-800 p-1.5 rounded text-left",children:[m.jsx(N1,{size:14})," Add Before"]}),m.jsxs("button",{onClick:()=>{T.chain().focus().addRowAfter().run(),M(!1)},className:"flex items-center gap-2 text-xs text-zinc-300 hover:bg-zinc-800 p-1.5 rounded text-left",children:[m.jsx(w1,{size:14})," Add After"]}),m.jsxs("button",{onClick:()=>{T.chain().focus().deleteRow().run(),M(!1)},className:"flex items-center gap-2 text-xs text-red-400 hover:bg-zinc-800 p-1.5 rounded text-left",children:[m.jsx(Ci,{size:14})," Delete Row"]}),m.jsx("div",{className:"h-px bg-zinc-800 my-1"}),m.jsxs("button",{onClick:()=>{T.chain().focus().mergeCells().run(),M(!1)},disabled:!T.can().mergeCells(),className:"flex items-center gap-2 text-xs text-zinc-300 hover:bg-zinc-800 p-1.5 rounded text-left disabled:opacity-50",children:[m.jsx(r1,{size:14})," Merge Cells"]}),m.jsxs("button",{onClick:()=>{T.chain().focus().splitCell().run(),M(!1)},disabled:!T.can().splitCell(),className:"flex items-center gap-2 text-xs text-zinc-300 hover:bg-zinc-800 p-1.5 rounded text-left disabled:opacity-50",children:[m.jsx(iv,{size:14})," Split Cell"]}),m.jsxs("button",{onClick:()=>{T.chain().focus().deleteTable().run(),M(!1)},className:"flex items-center gap-2 text-xs text-red-400 hover:bg-zinc-800 p-1.5 rounded text-left",children:[m.jsx(Ci,{size:14})," Delete Table"]})]})]})]}),m.jsx("div",{className:"w-px h-4 bg-zinc-700 mx-1"}),m.jsx(vt,{onClick:()=>T.chain().focus().toggleBulletList().run(),isActive:T.isActive("bulletList"),title:"Bullet List",children:m.jsx(Xx,{size:16})}),m.jsx(vt,{onClick:()=>T.chain().focus().toggleOrderedList().run(),isActive:T.isActive("orderedList"),title:"Ordered List",children:m.jsx(Kx,{size:16})}),m.jsx(vt,{onClick:()=>T.chain().focus().toggleBlockquote().run(),isActive:T.isActive("blockquote"),title:"Blockquote",children:m.jsx(B1,{size:16})}),m.jsx(vt,{onClick:()=>T.chain().focus().setHorizontalRule().run(),title:"Horizontal Rule",children:m.jsx(a1,{size:16})}),m.jsx("div",{className:"flex-1"}),m.jsx(vt,{onClick:()=>T.chain().focus().undo().run(),disabled:!T.can().undo(),title:"Undo (Cmd+Z)",children:m.jsx(wv,{size:16})}),m.jsx(vt,{onClick:()=>T.chain().focus().redo().run(),disabled:!T.can().redo(),title:"Redo (Cmd+Shift+Z)",children:m.jsx(F1,{size:16})})]}),m.jsx("div",{className:"p-4 rounded-b-xl bg-zinc-950 min-h-[500px]",children:m.jsx(O0,{editor:T})})]})},pj=$.memo(hj,(t,e)=>t.noteId===e.noteId),fu=t=>{const n=new DOMParser().parseFromString(t,"text/html");let r="";const i=s=>{var o,a;if(s.nodeType===Node.TEXT_NODE){r+=s.textContent;return}if(s.nodeType===Node.ELEMENT_NODE){const l=s,c=l.tagName.toLowerCase();switch(c){case"h1":r+=`
# `;break;case"h2":r+=`
## `;break;case"h3":r+=`
### `;break;case"p":r+=`

`;break;case"ul":r+=`
`;break;case"ol":r+=`
`;break;case"li":r+=`
- `;break;case"blockquote":r+=`
> `;break;case"pre":r+="\n```\n";break;case"code":((o=l.parentElement)==null?void 0:o.tagName)!=="PRE"&&(r+="`");break;case"b":case"strong":r+="**";break;case"i":case"em":r+="_";break;case"s":case"strike":r+="~~";break}switch(s.childNodes.forEach(i),c){case"pre":r+="\n```\n";break;case"code":((a=l.parentElement)==null?void 0:a.tagName)!=="PRE"&&(r+="`");break;case"b":case"strong":r+="**";break;case"i":case"em":r+="_";break;case"s":case"strike":r+="~~";break}}};return n.body.childNodes.forEach(i),r.replace(/\n{3,}/g,`

`).trim()},Ay=(t,e,n)=>{const r=new Blob([e],{type:n}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)},mj=t=>{const e=fu(t.content),n=`# ${t.title}

${e}

---
*Exported from NotesDB*`;Ay(`${t.title.replace(/\s+/g,"_")}.md`,n,"text/markdown")},gj=async t=>{try{const e=fu(t.content),n=`# ${t.title}

${e}`;return await navigator.clipboard.writeText(n),!0}catch{return!1}},yj=(t,e,n)=>{var o;const r=((o=e.find(a=>a.id===t.categoryId))==null?void 0:o.name)||"Uncategorized",i=n.filter(a=>t.tags.includes(a.id)).map(a=>a.name).join(", "),s=`
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>${t.title}</title>
    <style>
        body { font-family: system-ui, sans-serif; max-width: 800px; margin: 40px auto; padding: 20px; line-height: 1.6; color: #333; }
        h1 { border-bottom: 2px solid #eee; padding-bottom: 10px; }
        .meta { color: #666; font-size: 0.9em; margin-bottom: 20px; font-family: monospace; }
        .badge { background: #eee; padding: 2px 6px; border-radius: 4px; margin-right: 5px; }
        img { max-width: 100%; border-radius: 8px; }
        pre { background: #f4f4f5; padding: 15px; border-radius: 5px; overflow-x: auto; }
        blockquote { border-left: 4px solid #ddd; margin: 0; padding-left: 15px; color: #555; }
    </style>
</head>
<body>
    <h1>${t.title}</h1>
    <div class="meta">
        <div><strong>Category:</strong> ${r}</div>
        <div><strong>Tags:</strong> ${i}</div>
        <div><strong>Date:</strong> ${new Date(t.updatedAt).toLocaleDateString()}</div>
    </div>
    <hr/>
    <div class="content">
        ${t.content}
    </div>
</body>
</html>
    `;Ay(`${t.title.replace(/\s+/g,"_")}.html`,s,"text/html")},bj=()=>{window.print()},Ti={getApiUrl:t=>{var e;if(t.provider==="github")return"https://api.github.com/gists";{const n=((e=t.hostUrl)==null?void 0:e.replace(/\/$/,""))||"";if(!n)throw new Error("Gitea Host URL is missing");return`${n}/api/v1/gists`}},publishToGist:async(t,e,n,r)=>{if(!t.personalAccessToken)throw new Error("Missing Access Token");const i=Ti.getApiUrl(t);let s={},o=r||"";typeof e=="string"?(s={[e]:{content:n||""}},o=r||""):(s=e,o=n||"");const a={description:o,public:!1,files:s},l=await fetch(i,{method:"POST",headers:{Authorization:`token ${t.personalAccessToken}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)});if(!l.ok)throw new Error(`Sync Failed: ${l.status} ${l.statusText}`);const c=await l.json();return{id:c.id,html_url:c.html_url}},updateGist:async(t,e,n,r,i)=>{if(!t.personalAccessToken)throw new Error("Missing Access Token");const o=`${Ti.getApiUrl(t)}/${e}`;let a={},l=i||"";typeof n=="string"?(a={[n]:{content:r||""}},l=i||""):(a=n,l=r||"");const c={description:l,files:a},d=await fetch(o,{method:"PATCH",headers:{Authorization:`token ${t.personalAccessToken}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(c)});if(!d.ok)throw d.status===404?new Error("Gist not found (404). It may have been deleted."):new Error(`Update Failed: ${d.status} ${d.statusText}`);const u=await d.json();return{id:u.id,html_url:u.html_url}},fetchFromGist:async(t,e)=>{const r=`${Ti.getApiUrl(t)}/${e}`,i={Accept:"application/json"};t.personalAccessToken&&(i.Authorization=`token ${t.personalAccessToken}`);const s=await fetch(r,{method:"GET",headers:i});if(!s.ok)throw new Error(`Fetch Failed: ${s.status} ${s.statusText}`);const o=await s.json(),a=Object.keys(o.files).find(c=>c.endsWith(".json"));if(!a)throw new Error("No JSON file found in this Gist.");const l=o.files[a].content;return JSON.parse(l)}},xj=Q.lazy(()=>Xe(()=>import("./Toast-B_dwJU6k.js"),__vite__mapDeps([8,3]))),vj=({note:t,categories:e,tags:n,onNoteUpdate:r})=>{const[i,s]=$.useState(!1),[o,a]=$.useState(!1),[l,c]=$.useState(!1),[d,u]=$.useState("idle"),[h,f]=$.useState(null),p=$.useRef(null);$.useEffect(()=>{const w=v=>{p.current&&!p.current.contains(v.target)&&s(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),$.useEffect(()=>{i||setTimeout(()=>u("idle"),300)},[i]);const g=async()=>{await gj(t)&&(a(!0),setTimeout(()=>a(!1),2e3),s(!1))},y=w=>{w(),s(!1)},b=async w=>{const C=new DOMParser().parseFromString(w,"text/html").querySelectorAll("file-attachment"),N={};for(let j=0;j<C.length;j++){const M=C[j].getAttribute("id"),T=C[j].getAttribute("filename");if(M&&T)try{const P=await Ke.getAttachment(M);if(P&&P.blob&&(P.mimeType.startsWith("text/")||P.mimeType.includes("json")||P.mimeType.includes("xml")||P.mimeType.includes("javascript")||/\.(txt|md|js|ts|py|json|xml|html|css|sql|sh|yml|yaml|java|c|cpp|h|rs|go)$/i.test(P.fileName))){const z=await P.blob.text();N[T]={content:z}}}catch{console.warn("Failed to attach file to Gist",T)}}return N},x=async()=>{c(!0),u("idle");try{const w=await Ke.getSettings();if(!w.syncConfig.enabled||!w.syncConfig.personalAccessToken){f({show:!0,msg:"Git Integration Not Configured. Check Settings.",type:"warning"}),c(!1),s(!1);return}const v=fu(t.content),E=`# ${t.title}

${v}

---
*Shared via NotesDB*`,C=`${t.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.md`,N=`NotesDB Share: ${t.title}`,j=await b(t.content),M={[C]:{content:E},...j};let T;if(t.gistId)try{T=await Ti.updateGist(w.syncConfig,t.gistId,M,N)}catch(_){if(_.message.includes("404"))console.warn("Gist not found, creating new one."),T=await Ti.publishToGist(w.syncConfig,M,N);else throw _}else T=await Ti.publishToGist(w.syncConfig,M,N);const P={...t,gistId:T.id,gistUrl:T.html_url,updatedAt:Date.now()};await Ke.saveNote(P),r&&r(P),await navigator.clipboard.writeText(T.html_url),u("success"),f({show:!0,msg:"Published & Link Copied!",type:"success"}),setTimeout(()=>s(!1),1500)}catch(w){console.error("Gist Publish Failed",w),f({show:!0,msg:`Publish Failed: ${w.message}`,type:"error"}),u("error")}finally{c(!1)}};return m.jsxs("div",{className:"relative",ref:p,children:[m.jsx(Pt,{content:"Export & Share",children:m.jsx("button",{onClick:()=>s(!i),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg transition-colors border ${i?"bg-indigo-500/20 border-indigo-500/50 text-white":"text-zinc-400 hover:text-white hover:bg-zinc-800 border-transparent"}`,title:"",children:m.jsx(Z1,{size:16})})}),i&&m.jsx("div",{className:"absolute right-0 top-full mt-2 w-56 bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl z-50 animate-in fade-in zoom-in-95 duration-100 overflow-hidden",children:m.jsxs("div",{className:"p-1",children:[m.jsxs("div",{className:"mb-1 pb-1 border-b border-zinc-800",children:[m.jsxs("button",{onClick:x,disabled:l,className:`w-full flex items-center gap-2 px-3 py-2 text-xs font-bold rounded-lg transition-colors text-left ${d==="success"?"bg-emerald-500/10 text-emerald-400":"text-zinc-200 hover:bg-zinc-800 hover:text-white"}`,children:[l?m.jsx(yt,{size:14,className:"animate-spin text-indigo-500"}):d==="success"?m.jsx(ii,{size:14}):m.jsx(Jp,{size:14,className:"text-indigo-400"}),m.jsx("span",{className:"flex-1",children:l?"Publishing...":d==="success"?"Link Copied!":t.gistId?"Update Gist":"Publish to Gist"})]}),t.gistUrl&&m.jsxs("a",{href:t.gistUrl,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 px-3 py-1.5 text-[10px] text-zinc-500 hover:text-indigo-400 transition-colors ml-6",children:["Open Link ",m.jsx(Kp,{size:10})]})]}),m.jsxs("button",{onClick:g,className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-zinc-300 hover:bg-zinc-800 hover:text-white rounded-lg transition-colors text-left",children:[o?m.jsx(ii,{size:14,className:"text-emerald-500"}):m.jsx(Hb,{size:14}),"Copy Markdown"]}),m.jsx("div",{className:"h-px bg-zinc-800 my-1 mx-2"}),m.jsxs("button",{onClick:()=>y(()=>mj(t)),className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-zinc-300 hover:bg-zinc-800 hover:text-white rounded-lg transition-colors text-left",children:[m.jsx(ix,{size:14}),"Download MD"]}),m.jsxs("button",{onClick:()=>y(()=>yj(t,e,n)),className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-zinc-300 hover:bg-zinc-800 hover:text-white rounded-lg transition-colors text-left",children:[m.jsx(nx,{size:14}),"Download HTML"]}),m.jsx("div",{className:"h-px bg-zinc-800 my-1 mx-2"}),m.jsxs("button",{onClick:()=>y(bj),className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-zinc-300 hover:bg-zinc-800 hover:text-white rounded-lg transition-colors text-left",children:[m.jsx(P1,{size:14}),"Print / PDF"]})]})}),m.jsx($.Suspense,{fallback:null,children:h&&h.show&&m.jsx(xj,{message:h.msg,type:h.type,onClose:()=>f(null)})})]})},wj=t=>{const e=new Set;if(!t)return[];const n=/data-note-id="([^"]+)"/g;let r;for(;(r=n.exec(t))!==null;)r[1]&&e.add(r[1]);return Array.from(e)},kj=Q.lazy(()=>Xe(()=>import("./Toast-B_dwJU6k.js"),__vite__mapDeps([8,3]))),Sj=Q.lazy(()=>Xe(()=>import("./NotesToc-CQgVTXV7.js"),__vite__mapDeps([9,3]))),Ej=Q.lazy(()=>Xe(()=>import("./TagManagerModal-B-MA6qjC.js"),__vite__mapDeps([5,3]))),Cj=Q.lazy(()=>Xe(()=>import("./CategoryManagerModal-ByWPupyB.js"),__vite__mapDeps([4,1,3]))),_j=({note:t,initialEditMode:e=!1,onSave:n,onDelete:r,onCancel:i,settings:s,onToggleResearch:o,isResearchOpen:a,onNavigateMain:l,onSearch:c,onNavigate:d})=>{const[u,h]=$.useState(e),[f,p]=$.useState(t.title),[g,y]=$.useState(t.content),[b,x]=$.useState(t.categoryId),[w,v]=$.useState(new Set(t.tags)),[E,C]=$.useState(t.isEncrypted||!1),[N,j]=$.useState(null),[M,T]=$.useState(!1),[P,_]=$.useState("visual"),[z,k]=$.useState(!1),[L,W]=$.useState([]),[H,ie]=$.useState([]),[q,fe]=$.useState(null),[I,D]=$.useState([]),[ae,Z]=$.useState(!1),[J,_e]=$.useState(!1),[Pe,ne]=$.useState(!1),[ge,Ce]=$.useState(!1),[Le,Re]=$.useState(!1),[Ge,S]=$.useState(!1),[K,V]=$.useState(null),[O,A]=$.useState([]),[B,Y]=$.useState(!0),[te,F]=$.useState(!1),[re,he]=$.useState("animate-in fade-in duration-500"),le=$.useRef(null),Fe=(()=>{var ue;if(!((ue=s==null?void 0:s.aiConfig)!=null&&ue.enabled))return{status:"disabled",msg:"Research Lab Disabled (Settings)"};const{agenticSource:ee,apiKey:xe,baseUrl:de}=s.aiConfig;if(ee==="browser"&&!window.ai)return{status:"error",msg:"Browser AI Not Detected"};if(ee==="provider"){if(!de)return{status:"error",msg:"Missing Base URL"};if(!(de.includes("localhost")||de.includes("127.0.0.1"))&&!xe)return{status:"error",msg:"Missing API Key"}}return{status:"ready",msg:"Research Lab Online"}})(),Be=()=>Fe.status==="disabled"||Fe.status==="error"?"text-red-500 bg-red-500/10 hover:bg-red-500/20 border-transparent":a?"bg-indigo-600 border-indigo-500 text-white shadow-[0_0_15px_rgba(79,70,229,0.5)]":"text-zinc-400 hover:text-indigo-400 hover:bg-zinc-800 border-transparent";$.useEffect(()=>{const ee=setTimeout(()=>{Y(!1),he("")},550);return()=>clearTimeout(ee)},[]),$.useEffect(()=>{const ee=async()=>{const ue=(await Ke.getAllOutboxTasks()).filter(Ne=>Ne.noteId===t.id);A(ue)};ee();const xe=setInterval(ee,5e3);return()=>clearInterval(xe)},[t.id]),$.useEffect(()=>{const ee=de=>{const Ne=de.target.closest("a[data-note-id]");if(Ne){de.preventDefault();const ct=Ne.getAttribute("data-note-id");ct&&d&&d(ct)}},xe=le.current;return xe&&xe.addEventListener("click",ee),()=>{xe&&xe.removeEventListener("click",ee)}},[d,u]),$.useEffect(()=>{if(!u&&le.current&&M){const ee=le.current;let xe=!0;const de=[],ue=[];return requestAnimationFrame(async()=>{var cr;if(!ee||!xe)return;const Ne=ee.querySelectorAll("pre code");Ne.length>0&&ws.preloadStandard().then(()=>{xe&&Ne.forEach(mt=>{ws.highlightBlock(mt)})});const ct=ee.querySelectorAll('img[src^="attachment:"]');for(let mt=0;mt<ct.length&&xe;mt++){const Qt=ct[mt],un=(cr=Qt.getAttribute("src"))==null?void 0:cr.replace("attachment:","");if(un)try{const Sn=await Ke.getAttachment(un);if(Sn){const mi=URL.createObjectURL(Sn.blob);Qt.src=mi,de.push(mi)}else Qt.alt="Image not found",Qt.style.opacity="0.5"}catch(Sn){console.error("Failed to load image attachment",Sn)}}ee.querySelectorAll('div[data-type="social-embed"]').forEach(mt=>{const Qt=mt.getAttribute("url"),un=mt.getAttribute("service");if(Qt&&un){const Sn=dc.createRoot(mt);Sn.render(m.jsx(_y,{url:Qt,service:un})),ue.push(Sn)}}),ee.querySelectorAll("file-attachment").forEach(mt=>{const Qt=mt.getAttribute("id"),un=mt.getAttribute("filename"),Sn=parseInt(mt.getAttribute("size")||"0",10),mi=mt.getAttribute("mimetype")||"";if(Qt&&un){mt.setAttribute("style","display: inline-block; vertical-align: middle; margin: 4px;");const qs=dc.createRoot(mt);qs.render(m.jsx(Ny,{id:Qt,fileName:un,size:Sn,mimeType:mi})),ue.push(qs)}})}),()=>{xe=!1,de.forEach(Ne=>URL.revokeObjectURL(Ne)),ue.forEach(Ne=>Ne.unmount())}}},[t.content,u,M]);const lt=u&&(s==null?void 0:s.isEditorEnabled)&&P==="visual";$.useEffect(()=>{if(lt&&!B){const ee=setTimeout(()=>F(!0),200);return()=>clearTimeout(ee)}else F(!1)},[lt,B]),$.useEffect(()=>{(async()=>{if(p(t.title),x(t.categoryId),v(new Set(t.tags)),h(e),Z(!1),ne(!1),V(null),Ce(!1),C(!!t.isEncrypted),j(null),t.isEncrypted){T(!1);try{if(t.iv&&_n.hasSessionKey()){const ue=await _n.decrypt(t.content,t.iv);y(ue),T(!0)}else j("Session locked. Please reload to unlock."),y("")}catch(ue){console.error("Decrypt Error",ue),j("Decryption failed. Check console.")}}else y(t.content),T(!0);_("visual");const xe=await Ke.getCategories(),de=await Ke.getTags();W(xe),ie(de),fe(xe.find(ue=>ue.id===t.categoryId)||null),D(de.filter(ue=>t.tags.includes(ue.id)))})()},[t.id,t.categoryId,t.tags,e,t.isEncrypted,t.content,t.iv]);const sn=async()=>{k(!0);try{let ee=g,xe,de=[];if(E||(de=wj(ee)),E){if(!_n.hasSessionKey())throw new Error("Cannot encrypt: Session key missing or vault locked.");const ue=await _n.encrypt(g);if(ee=ue.ciphertext,xe=ue.iv,de=[],!ee||ee===g)throw new Error("Encryption failed. Save aborted to prevent plaintext leak.")}await n({...t,title:f,content:ee,categoryId:b,tags:Array.from(w),updatedAt:Date.now(),isEncrypted:E,iv:xe,outgoingLinks:de,originalData:E?null:t.originalData}),h(!1),Z(!1)}catch(ee){console.error(ee),V({show:!0,msg:ee.message||"Save failed",type:"error"})}finally{k(!1)}},Et=async ee=>{const xe=ee.target.value;if(!xe)return;const de=new Date(xe).getTime();if(de<Date.now()){V({show:!0,msg:"Please select a future time.",type:"error"});return}if(!(s!=null&&s.webhooks)||s.webhooks.length===0){V({show:!0,msg:"No Webhooks configured.",type:"error"});return}const ue=s.webhooks.filter(Ve=>Ve.enabled?Ve.triggerTagId?t.tags.includes(Ve.triggerTagId):!0:!1);if(ue.length===0){const Ve=t.tags.map(cr=>{var mt;return(mt=H.find(Qt=>Qt.id===cr))==null?void 0:mt.name}).filter(Boolean).join(", "),lr=Ve?`No Webhook configured for tags: [${Ve}]. Check Settings.`:"No Global Webhook configured. Check Settings.";V({show:!0,msg:lr,type:"error"});return}const Ne=ue.map(Ve=>({id:crypto.randomUUID(),noteId:t.id,webhookUrl:Ve.url,serviceName:Ve.name,payload:{title:t.title,content:t.content,id:t.id,tags:t.tags,intent:t.intent,service:Ve.name},scheduledAt:de,status:"pending",retryCount:0,triggerType:Ve.triggerTagId?"tag":"manual",triggerValue:Ve.triggerTagId}));await Promise.all(Ne.map(Ve=>Ke.saveOutboxTask(Ve))),A(Ve=>[...Ve,...Ne]),Ce(!1);const ct=ue.map(Ve=>Ve.name).join(", ");V({show:!0,msg:`Scheduled via ${ct}`,type:"success"})},Zt=async ee=>{V({show:!0,msg:"Updating Intent...",type:"info"});const xe={...t,intent:ee,updatedAt:Date.now()};await n(xe,u),ne(!1),setTimeout(()=>V(null),2e3)},G=ee=>{n(ee,u)},U=async()=>{const ee=await Ke.getTags();ie(ee)},ye=async()=>{const ee=await Ke.getCategories();if(W(ee),t.categoryId){const xe=ee.find(de=>de.id===t.categoryId);xe&&fe(xe)}},ke=()=>{confirm("Are you sure you want to delete this note?")&&r(t.id)},$e=(ee,xe)=>{ee.preventDefault(),ee.stopPropagation();const de=new Set(w);de.has(xe)?de.delete(xe):de.add(xe),v(de)},Te=ee=>{const xe=new Set(w);xe.delete(ee),v(xe)},et=u?b:q==null?void 0:q.id,Ze=L.find(ee=>ee.id===et),Mt=Ze&&hc[Ze.icon]?hc[Ze.icon]:Es,Ot=O.filter(ee=>ee.status==="failed"),it=O.filter(ee=>ee.status==="pending"),R=O.filter(ee=>ee.status==="sent").sort((ee,xe)=>(xe.lastAttempt||0)-(ee.lastAttempt||0))[0];let X="text-zinc-400 hover:text-white hover:bg-zinc-800 border-transparent",me=Tb;Ot.length>0?(X="bg-red-500/20 border-red-500/20 text-red-500",Ot.map(ee=>`${ee.serviceName||"Webhook"}: ${ee.error||"Failed"}`).join(`
`),me=Ss):it.length>0?(X="bg-amber-500/20 border-amber-500/30 text-amber-500",it.map(ee=>`${ee.serviceName||"Webhook"} @ ${new Date(ee.scheduledAt).toLocaleString()}`).join(`
`),me=uc):R&&(X="bg-green-500/20 border-green-500/20 text-green-500",`${R.serviceName||"Webhook"}${new Date(R.lastAttempt||R.scheduledAt).toLocaleString()}`,me=Db);const Ae=()=>{var xe;const ee={__meta:{noteId:t.id,title:t.title,category:((xe=L.find(de=>de.id===t.categoryId))==null?void 0:xe.name)||"Uncategorized",tags:H.filter(de=>t.tags.includes(de.id)).map(de=>de.name),created:new Date(t.createdAt).toISOString(),last_updated:new Date(t.updatedAt).toISOString(),user_intent:t.intent||void 0}};return t.isEncrypted?(ee.__meta.security="ENCRYPTED_ON_DISK",ee.storage_image=`[AES-GCM CIPHERTEXT] ${t.content.substring(0,32)}...`,ee.decryption_status="UNLOCKED_IN_MEMORY"):ee.live_content=t.content,ee.source_data=t.originalData,ee};return M?m.jsxs("div",{className:`flex flex-col h-full w-full relative ${re}`,children:[J&&m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-200 print:hidden",children:m.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-xl w-full max-w-2xl max-h-[80vh] flex flex-col shadow-2xl animate-in zoom-in-95 duration-200",children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-800",children:[m.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 text-sm",children:[m.jsx(zu,{size:16,className:"text-indigo-400"})," Agent Context (Live Data)"]}),m.jsx("button",{onClick:()=>_e(!1),className:"text-zinc-500 hover:text-white",children:m.jsx(sr,{size:20})})]}),m.jsxs("div",{className:"p-0 overflow-auto bg-zinc-950 flex-1 relative",children:[m.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 bg-zinc-900 border border-zinc-800 rounded text-[10px] text-zinc-500 uppercase font-bold tracking-wider",children:"Read Only"}),m.jsx("pre",{className:"p-4 text-xs font-mono text-zinc-400 whitespace-pre-wrap",children:JSON.stringify(Ae(),null,2)})]})]})}),Pe&&m.jsx(em,{mode:"edit",initialIntent:t.intent,settings:s,onSave:Zt,onClose:()=>ne(!1)}),m.jsx("div",{className:"flex-1 min-h-0 h-screen max-h-screen overflow-y-auto custom-scrollbar z-50",children:m.jsxs("div",{className:"w-full max-w-5xl mx-auto py-6 px-6 flex flex-col min-h-full print:block print:max-w-none print:p-0",children:[m.jsxs("div",{className:"w-full mb-8 border-b border-zinc-800 pb-4 relative print:border-none print:pb-0",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4 print:hidden",children:[m.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-400",children:[m.jsx("button",{onClick:l,className:"hover:text-indigo-400 transition-colors font-bold",children:"Main"}),m.jsx(Ei,{size:10,className:"text-zinc-500"}),u?m.jsxs("div",{className:"relative group flex items-center gap-2",children:[m.jsxs("div",{className:"relative",children:[m.jsx("select",{value:b,onChange:ee=>x(ee.target.value),className:"appearance-none bg-zinc-900 border border-zinc-700 rounded px-2 pl-8 py-1 text-xs text-white outline-none focus:border-indigo-500 cursor-pointer pr-6",children:L.map(ee=>m.jsx("option",{value:ee.id,children:ee.name},ee.id))}),m.jsx(Mt,{size:12,className:"absolute left-2 top-1.5 text-zinc-400 pointer-events-none"}),m.jsx(ad,{size:12,className:"absolute right-2 top-1.5 text-zinc-500 pointer-events-none"})]}),m.jsx("button",{onClick:()=>S(!0),className:"text-[10px] text-indigo-400 hover:text-indigo-300",children:"Manage"})]}):Ze&&m.jsxs("button",{onClick:()=>c&&c({catId:Ze.id}),className:"flex items-center gap-1 cursor-pointer hover:bg-zinc-900 p-2 rounded -ml-2 transition-colors group",title:"Filter by this category",children:[m.jsx(Mt,{size:12,className:`text-${Ze.color}-500 group-hover:text-${Ze.color}-400`}),m.jsx("span",{className:`text-xs uppercase tracking-wider font-bold text-${Ze.color}-400 group-hover:underline`,children:Ze.name})]}),m.jsx("span",{className:"text-zinc-500 mx-1",children:""}),m.jsxs("span",{className:"flex items-center gap-1 bg-zinc-900 p-2 rounded-md border border-zinc-800 text-zinc-400",children:[m.jsx(Bo,{size:12}),m.jsx("span",{className:"text-xs",children:new Date(t.createdAt).toLocaleDateString()})]}),t.isEncrypted&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"text-zinc-500 mx-1",children:""}),m.jsxs("span",{className:"flex items-center gap-1 bg-red-500/20 px-2 py-1 rounded border border-red-500/20 text-red-400",children:[m.jsx(Xr,{size:12})," Encrypted"]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"relative flex items-center",children:[ge&&m.jsx("div",{className:"absolute right-full mr-2 z-20 animate-in fade-in slide-in-from-right-2",children:m.jsx("input",{type:"datetime-local",className:"bg-zinc-900 border border-zinc-700 text-white text-xs rounded-md px-2 py-1 outline-none focus:border-indigo-500",onChange:Et,onBlur:()=>setTimeout(()=>Ce(!1),200),autoFocus:!0})}),m.jsxs("button",{onClick:()=>Ce(!ge),className:`flex items-center gap-1.5 py-2 rounded-lg transition-colors ${X}`,children:[m.jsx(me,{size:16}),m.jsx("span",{className:"text-xs font-bold",children:"WebHook"})]})]}),m.jsxs("button",{onClick:()=>ne(!0),className:`flex items-center gap-1.5 p-2 rounded-lg transition-colors border ${t.intent?"text-indigo-400 bg-indigo-500/10 border-indigo-500/20":"text-zinc-400 hover:text-white hover:bg-zinc-800 border-transparent"}`,title:"Update User Intent",children:[m.jsx(kb,{size:16}),m.jsx("span",{className:"text-xs font-bold",children:"Intent"})]}),m.jsx(vj,{note:t,categories:L,tags:H,onNoteUpdate:G}),o&&m.jsx(Pt,{content:a?"Close Research Lab":Fe.status==="ready"?"Open Research Lab":Fe.msg,children:m.jsx("button",{onClick:o,className:`p-2 rounded-lg transition-colors border ${Be()}`,children:Fe.status==="error"?m.jsx(Ss,{size:16}):m.jsx(fx,{size:16})})}),m.jsx("div",{className:"w-px h-6 bg-zinc-700 mx-1"}),u?m.jsxs(m.Fragment,{children:[m.jsx(Pt,{content:E?"Note will be encrypted on save":"Note is plain text",children:m.jsx("button",{onClick:()=>C(!E),className:`p-2 rounded-lg transition-colors ${E?"text-emerald-400 bg-emerald-500/10 border border-emerald-500/20":"text-zinc-500 hover:text-zinc-300"}`,children:E?m.jsx(Xr,{size:18}):m.jsx(e1,{size:18})})}),(s==null?void 0:s.isEditorEnabled)&&m.jsxs("div",{className:"flex items-center bg-zinc-900 rounded-lg p-0.5 border border-zinc-950 mr-2",children:[m.jsx(Pt,{content:"Visual Editor",children:m.jsx("button",{onClick:()=>_("visual"),className:`p-1.5 rounded transition-all ${P==="visual"?"bg-zinc-800 text-indigo-400":"text-zinc-500 hover:text-white"}`,children:m.jsx(ld,{size:14})})}),m.jsx(Pt,{content:"Source Code",children:m.jsx("button",{onClick:()=>_("code"),className:`p-1.5 rounded transition-all ${P==="code"?"bg-zinc-800 text-indigo-400":"text-zinc-500 hover:text-white"}`,children:m.jsx(rs,{size:14})})})]}),m.jsx("button",{onClick:sn,disabled:z,className:"p-2 text-indigo-400 hover:bg-indigo-500/20 hover:text-white rounded-lg transition-colors",children:m.jsx(cd,{size:18})})]}):m.jsxs(m.Fragment,{children:[m.jsx(Pt,{content:"Manage Layouts",children:m.jsx("button",{onClick:()=>_e(!0),className:"p-2 text-zinc-400 hover:bg-indigo-500/20 hover:text-white rounded-lg transition-colors",title:"View Source Data",children:m.jsx(zu,{size:18})})}),m.jsx("button",{onClick:()=>h(!0),className:"p-2 text-zinc-400 hover:bg-zinc-800 hover:text-white rounded-lg transition-colors",children:m.jsx(j1,{size:18})}),m.jsx("button",{onClick:ke,className:"p-2 text-zinc-400 hover:bg-red-500/20 hover:text-red-400 rounded-lg transition-colors",children:m.jsx(Ci,{size:18})})]})]})]}),u?m.jsx("div",{className:"flex gap-2",children:m.jsx("input",{value:f,onChange:ee=>p(ee.target.value),className:"flex-1 text-4xl font-bold text-white bg-zinc-900/50 border border-zinc-700 rounded-lg px-4 py-2 focus:outline-none focus:border-indigo-500 transition-colors",placeholder:"Note Title"})}):m.jsx("h1",{className:"text-4xl font-bold text-white print:text-black",children:t.title}),m.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4 min-h-[28px] print:hidden",children:[u&&m.jsxs("div",{className:"relative",children:[m.jsxs("button",{onClick:()=>Z(!ae),className:"flex items-center gap-1 text-[10px] bg-zinc-800 hover:bg-zinc-700 hover:text-white text-zinc-300 px-2 py-1 rounded-md border border-zinc-700 transition-colors",children:[m.jsx(ss,{size:12})," Add Tags"]}),ae&&m.jsxs("div",{className:"absolute top-full left-0 mt-2 w-48 bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl p-2 z-50 max-h-60 overflow-y-auto",children:[m.jsxs("button",{onClick:ee=>{ee.preventDefault(),ee.stopPropagation(),Re(!0),Z(!1)},className:"flex items-center gap-2 w-full p-2 text-xs font-bold text-indigo-400 hover:bg-zinc-800 rounded mb-1 text-left",children:[m.jsx(Qp,{size:12})," Manage Tags"]}),m.jsx("div",{className:"h-px bg-zinc-800 my-1"}),H.map(ee=>m.jsxs("div",{onClick:xe=>$e(xe,ee.id),className:"flex items-center gap-2 p-1.5 hover:bg-zinc-800 rounded cursor-pointer select-none",children:[m.jsx("div",{className:`w-4 h-4 shrink-0 rounded-sm border flex items-center justify-center ${w.has(ee.id)?"bg-indigo-500 border-indigo-500":"border-zinc-600"}`,children:w.has(ee.id)&&m.jsx(ii,{size:10,className:"text-white"})}),m.jsx("span",{className:`text-xs px-1.5 rounded ${pc[ee.color]}`,children:ee.name})]},ee.id)),H.length===0&&m.jsx("div",{className:"text-xs text-zinc-500 p-2 text-center",children:"No tags defined."})]}),ae&&m.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>Z(!1)})]}),(u?Array.from(w):t.tags).map(ee=>{const xe=H.find(de=>de.id===ee);return xe?m.jsxs("button",{onClick:de=>{u||c&&c({tagId:ee})},className:`flex items-center gap-1.5 text-xs px-2 py-1 rounded-sm border transition-all ${pc[xe.color]} ${u?"cursor-default":"cursor-pointer hover:opacity-80"}`,title:u?"":"Filter by this tag",children:[m.jsx(dd,{size:10}),xe.name,u&&m.jsx("div",{onClick:de=>{de.stopPropagation(),Te(ee)},className:"ml-1 hover:text-white hover:bg-black/20 rounded-full p-0.5 cursor-pointer",children:m.jsx(sr,{size:10})})]},ee):null})]}),m.jsx("div",{className:"hidden print:block mt-2 text-sm text-zinc-600 mb-6",children:m.jsxs("p",{children:[m.jsx("strong",{children:"Category:"})," ",(Ze==null?void 0:Ze.name)||"Uncategorized","  ",m.jsx("strong",{children:"Date:"})," ",new Date(t.createdAt).toLocaleDateString()]})})]}),m.jsxs("div",{className:"flex-1 flex gap-12 relative",children:[m.jsx("div",{className:"flex-1 min-w-0 max-w-5xl mx-auto",children:lt?te?m.jsx(pj,{noteId:t.id,content:g,onChange:y,onNavigate:d}):m.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] bg-zinc-950 border border-zinc-800 rounded-xl text-zinc-500",children:[m.jsx(yt,{size:24,className:"animate-spin mb-4 text-indigo-500"}),m.jsx("div",{className:"text-xs font-medium",children:"Initializing Editor..."})]}):u?m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("label",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"HTML Content Source"}),(s==null?void 0:s.isEditorEnabled)&&m.jsx("span",{className:"text-[10px] text-zinc-500",children:"Switch to Visual (Eye icon) for rich editing"})]}),m.jsx("textarea",{value:g,onChange:ee=>y(ee.target.value),className:"w-full h-[60vh] bg-zinc-950 border border-zinc-800 rounded-lg p-4 text-sm font-mono text-zinc-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 resize-none leading-relaxed"})]}):m.jsx("div",{ref:le,className:"prose prose-invert prose-zinc max-w-none prose-headings:text-zinc-200 prose-a:text-indigo-400 prose-img:rounded-xl prose-pre:bg-zinc-900 prose-pre:border prose-pre:border-zinc-800 print:prose-black print:text-black",dangerouslySetInnerHTML:{__html:g}})}),!u&&m.jsx("div",{className:"hidden lg:block w-16 shrink-0",children:m.jsx("div",{className:"sticky top-[30%] border-r-2 border-zinc-800",children:m.jsx($.Suspense,{fallback:m.jsx("div",{className:"h-64 animate-pulse bg-zinc-900 rounded-lg"}),children:m.jsx(Sj,{contentRef:le,noteId:t.id})})})})]})]})}),m.jsxs($.Suspense,{fallback:null,children:[K&&K.show&&m.jsx(kj,{message:K.msg,type:K.type,onClose:()=>V(null)}),Le&&m.jsx(Ej,{onClose:()=>Re(!1),onUpdate:U}),Ge&&m.jsx(Cj,{onClose:()=>S(!1),onUpdate:ye})]})]}):m.jsx("div",{className:`w-full max-w-[1400px] mx-auto py-8 px-6 flex flex-col min-h-full items-center justify-center ${re}`,children:m.jsxs("div",{className:"text-center space-y-4 max-w-sm",children:[m.jsx("div",{className:"w-16 h-16 bg-zinc-900 rounded-2xl flex items-center justify-center mx-auto border border-zinc-800",children:m.jsx(Xr,{size:32,className:"text-red-500"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-bold text-white",children:"Encrypted Note"}),m.jsx("p",{className:"text-sm text-zinc-500 mt-2",children:N||"This content is secured. Please enter your master password to decrypt."})]}),N&&m.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg text-sm font-bold transition-colors",children:"Unlock Vault"})]})})};class Nj{constructor(e){this.intervalId=null,this.isRunning=!1,this.onTaskUpdate=null,this.onTaskUpdate=e||null}start(e=3e4){this.intervalId||(console.debug("[Scheduler] Started"),this.intervalId=window.setInterval(()=>this.processOutbox(),e),this.processOutbox())}stop(){this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null,console.debug("[Scheduler] Stopped"))}async processOutbox(){if(!this.isRunning){this.isRunning=!0;try{const e=await Ke.getPendingOutboxTasks(),n=Date.now(),r=e.filter(i=>i.scheduledAt<=n);r.length>0&&(console.log(`[Scheduler] Processing ${r.length} due tasks...`),await Promise.all(r.map(i=>this.executeTask(i))),this.onTaskUpdate&&this.onTaskUpdate())}catch(e){console.error("[Scheduler] Error processing outbox",e)}finally{this.isRunning=!1}}}async executeTask(e){try{const n=Date.now()-e.scheduledAt,r=n>300*1e3,i={...e.payload,_meta:{sent_at:new Date().toISOString(),scheduled_for:new Date(e.scheduledAt).toISOString(),delivery_status:r?"late":"on-time",delay_ms:n}},s=await fetch(e.webhookUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!s.ok)throw new Error(`Webhook Error: ${s.status} ${s.statusText}`);e.status="sent",e.lastAttempt=Date.now(),await Ke.saveOutboxTask(e),console.log(`[Scheduler] Task ${e.id} SENT.`)}catch(n){console.error(`[Scheduler] Task ${e.id} FAILED:`,n),e.retryCount=(e.retryCount||0)+1,e.lastAttempt=Date.now(),e.error=n.message,e.retryCount>=5?e.status="failed":e.scheduledAt=Date.now()+e.retryCount*6e4,await Ke.saveOutboxTask(e)}}}const $p=new Nj,Tj=Q.lazy(()=>Xe(()=>import("./ResearchSidebar-BuT8IglB.js"),__vite__mapDeps([10,11,3]))),Aj=Q.lazy(()=>Xe(()=>import("./SettingsAdmin-CjyZQBiU.js"),__vite__mapDeps([12,13,14,15,16,11,17,2,3]))),Mj=Q.lazy(()=>Xe(()=>import("./SearchPalette-IxceRV1K.js"),__vite__mapDeps([18,1,19,3]))),Oj=Q.lazy(()=>Xe(()=>import("./LibraryView-Cu_CbN9Q.js"),__vite__mapDeps([20,21,17,1,22,19,3]))),jj=Q.lazy(()=>Xe(()=>import("./DashboardView-DZiFCX_v.js"),__vite__mapDeps([23,21,17,1,22,14,15,3]))),zj=Q.lazy(()=>Xe(()=>import("./CalendarWeek-q9nm1UDd.js"),__vite__mapDeps([24,25,22,3]))),Ij=Q.lazy(()=>Xe(()=>import("./CalendarMonth-DbAaOLdi.js"),__vite__mapDeps([26,25,22,3]))),Rj=Q.lazy(()=>Xe(()=>import("./CalendarDay-B2S61wtw.js"),__vite__mapDeps([27,25,22,3]))),Dj=Q.lazy(()=>Xe(()=>import("./AttachmentManager-BEsqdKrB.js"),__vite__mapDeps([28,16,15,3]))),Pj=Q.lazy(()=>Xe(()=>import("./InfoModal-2XG9T8mW.js"),__vite__mapDeps([29,16,3]))),Lj=Q.lazy(()=>Xe(()=>import("./CategoryManagerModal-ByWPupyB.js"),__vite__mapDeps([4,1,3]))),Bj=Q.lazy(()=>Xe(()=>import("./TagManagerModal-B-MA6qjC.js"),__vite__mapDeps([5,3]))),$j=Q.lazy(()=>Xe(()=>import("./AttachmentPreviewModal-BHF15BqN.js"),__vite__mapDeps([30,3]))),Fj=Q.lazy(()=>Xe(()=>import("./EventModal-D6Dr8-iB.js"),__vite__mapDeps([31,3]))),Hj=Q.lazy(()=>Xe(()=>import("./GraphView-CA_YTEuF.js"),__vite__mapDeps([32,3]))),Uj=Q.lazy(()=>Xe(()=>import("./NotePreviewModal-Bi9uNkZf.js"),__vite__mapDeps([33,3]))),Vj=Q.lazy(()=>Xe(()=>import("./CategoryBrowser-DaDIjLO5.js"),__vite__mapDeps([34,21,17,1,22,3]))),Wj=Q.lazy(()=>Xe(()=>import("./BookmarkView-ChTIE2Pb.js"),__vite__mapDeps([35,17,3]))),qj=Q.lazy(()=>Xe(()=>import("./BookmarkLibrary-D_WhoPAS.js"),__vite__mapDeps([36,21,17,1,22,3]))),Kj=Q.lazy(()=>Xe(()=>import("./BookmarkManager-BLRRF4C1.js"),__vite__mapDeps([37,1,3])));class Gj extends $.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){var e;return this.state.hasError?m.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-6 text-white",children:m.jsxs("div",{className:"max-w-md bg-zinc-900 border border-red-900 rounded-xl p-6",children:[m.jsx("h2",{className:"text-lg font-bold text-red-500 mb-2",children:"Something went wrong"}),m.jsx("p",{className:"text-zinc-400 text-xs font-mono mb-4",children:(e=this.state.error)==null?void 0:e.message}),m.jsx("button",{onClick:()=>window.location.reload(),className:"bg-zinc-800 hover:bg-zinc-700 text-white px-4 py-2 rounded text-sm transition-colors",children:"Reload Application"})]})}):this.props.children}}const Jj=()=>{var Zt;const[t,e]=$.useState(!1),[n,r]=$.useState(null),[i,s]=$.useState(null),[o,a]=$.useState(!1),[l,c]=$.useState(!1),[d,u]=$.useState(null),[h,f]=$.useState({isOpen:!1}),[p,g]=$.useState(null),[y,b]=$.useState(null),[x,w]=$.useState({isOpen:!1}),[v,E]=$.useState([]),[C,N]=$.useState([]),[j,M]=$.useState([]),[T,P]=$.useState(null),[_,z]=$.useState(new Set),[k,L]=$.useState("list"),[W,H]=$.useState(null),[ie,q]=$.useState(null),[fe,I]=$.useState(!1),[D,ae]=$.useState(new Set),[Z,J]=$.useState(!1),[_e,Pe]=$.useState(!1);$.useEffect(()=>{let G=!0;const U=setTimeout(()=>{G&&n===null&&c(!0)},4e3);return(async()=>{var ke;try{await Je();const $e=await Ke.checkAuth();if(G){r($e);const Te=await Ke.getSettings();P(Te),(ke=Te.aiConfig)!=null&&ke.enabled&&Pe(!0),Te.hasCompletedOnboarding||a(!0),c(!1)}}catch($e){console.error("Boot error",$e),G&&s($e.message||"Failed to initialize application.")}})(),()=>{G=!1,clearTimeout(U)}},[]),$.useEffect(()=>{const G=U=>{U&&U.detail&&typeof U.detail.id=="string"&&g(U.detail.id)};return document.addEventListener("preview-attachment",G),()=>document.removeEventListener("preview-attachment",G)},[]),$.useEffect(()=>{if(t){const G=async()=>{const ye=await Ke.getPendingOutboxTasks();z(new Set(ye.map(ke=>ke.noteId)))};G(),$p.start(3e4);const U=setInterval(G,3e4);return()=>{$p.stop(),clearInterval(U)}}},[t]),$.useEffect(()=>{const G=U=>{(U.metaKey||U.ctrlKey)&&U.key==="k"&&(U.preventDefault(),t&&w(ye=>({...ye,isOpen:!ye.isOpen,initialCatId:void 0,initialTagId:void 0})))};return window.addEventListener("keydown",G),()=>window.removeEventListener("keydown",G)},[t]);const ne=$.useCallback(G=>{w({isOpen:!0,initialCatId:G==null?void 0:G.catId,initialTagId:G==null?void 0:G.tagId})},[]),ge=async()=>{E(await Ke.getNotes()),N(await Ke.getCategories()),M(await Ke.getTags())},Ce=async()=>{var U;const G=await Ke.getSettings();P(G),(U=G.aiConfig)!=null&&U.enabled&&Pe(!0)},Le=async()=>{e(!0),await ge()},Re=async()=>{a(!1),await Ce()},Ge=()=>{L("create_wizard")},S=()=>{H(null),q(null),L("list"),I(!1)},K=async(G,U=!1)=>{await Ke.saveNote(G),await ge(),H(G),U||I(!1)},V=async G=>{await Ke.deleteNote(G),await ge(),(W==null?void 0:W.id)===G&&(H(null),L("list"))},O=G=>{H(G),I(!1),L("view")},A=G=>{const U=v.find(ye=>ye.id===G);U?O(U):alert("Note not found")},B=G=>{b(G)},Y=G=>{b(null),A(G)},te=G=>{const U=new Set(D);U.has(G)?U.delete(G):U.add(G),ae(U)},F=$.useCallback(()=>{Z||Pe(!0),J(G=>!G)},[Z]),re=$.useCallback(()=>{J(!1)},[]),he=()=>Xe(()=>import("./CategoryManagerModal-ByWPupyB.js"),__vite__mapDeps([4,1,3])),le=()=>Xe(()=>import("./TagManagerModal-B-MA6qjC.js"),__vite__mapDeps([5,3])),Ee=async(G,U)=>{const ye={id:crypto.randomUUID(),title:G.title,categoryId:G.categoryId,tags:G.tags,createdAt:Date.now(),updatedAt:Date.now(),eventDate:G.date,content:"",originalData:null};await Ke.saveNote(ye),await ge(),f({isOpen:!1}),U&&(H(ye),I(!0),L("view"))},Fe=async(G,U,ye,ke,$e)=>{var X,me;if($e){const Ae={id:crypto.randomUUID(),title:"Untitled Note",categoryId:U||((X=C[0])==null?void 0:X.id)||"cat_default",tags:ye||[],createdAt:Date.now(),updatedAt:Date.now(),content:"",originalData:null,intent:ke||void 0};await Ke.saveNote(Ae),await ge(),H(Ae),I(!0),L("view");return}const{items:Te,mappings:et,title:Ze}=G;let Mt="";const Ot=et.find(Ae=>Ae.uiType===Se.HEADING||Ae.targetSlot==="title");Te.forEach(Ae=>{let xe=`<div class="note-entry ${Te.length>1?"mb-8 pb-8 border-b border-zinc-800 last:border-0":""}">`;et.forEach(de=>{const ue=Ai(Ae,de.jsonPath);if(!(ue==null||ue===""))switch(de.uiType){case Se.HEADING:xe+=`<h2 class="text-xl font-bold text-white mb-2">${ue}</h2>`;break;case Se.RICH_TEXT:xe+=`<div class="rich-content mb-4 text-zinc-300 leading-relaxed">${ue}</div>`;break;case Se.TEXTAREA:xe+=`<div class="mb-4 text-zinc-300 whitespace-pre-wrap">${ue}</div>`;break;case Se.IMAGE:xe+=`<img src="${ue}" alt="Note Image" class="w-full max-h-96 object-cover rounded-lg mb-6 bg-zinc-900" />`;break;case Se.CODE:xe+=`<pre class="bg-zinc-900 p-4 rounded text-xs overflow-x-auto text-zinc-300 mb-4"><code>${ue}</code></pre>`;break;case Se.DATE:xe+=`<div class="text-xs text-zinc-500 mb-2 font-mono">${ue}</div>`;break;default:xe+=`<div class="mb-2">${ue}</div>`}}),xe+="</div>",Mt+=xe});let it=Ze;if(!it)if(Te.length===1&&Ot){const Ae=Ai(Te[0],Ot.jsonPath);Ae&&(it=String(Ae))}else it=`Imported Collection (${Te.length} items)`;const R={id:crypto.randomUUID(),title:it||"Untitled Note",categoryId:U||((me=C[0])==null?void 0:me.id)||"cat_default",tags:ye||[],createdAt:Date.now(),updatedAt:Date.now(),content:Mt||'<p class="italic text-zinc-500">No content mapped.</p>',originalData:Te,intent:ke||void 0};await Ke.saveNote(R),await ge(),H(R),I(!1),L("view")},Be=C.map(G=>({...G,notes:v.filter(U=>U.categoryId===G.id)})),lt=v.filter(G=>!G.categoryId||!C.find(U=>U.id===G.categoryId)),sn=()=>m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm",children:m.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-zinc-800 backdrop-blur-md flex flex-col items-center gap-3 shadow-2xl",children:[m.jsx(yt,{size:32,className:"text-indigo-500 animate-spin"}),m.jsx("p",{className:"text-xs text-zinc-400 font-medium",children:"Loading Module..."})]})}),Et=async()=>{if(confirm("EMERGENCY RESET: This will delete all local data to fix the stuck loading state. Continue?")){const G=indexedDB.deleteDatabase("NotesDB_v1");G.onsuccess=()=>window.location.reload(),G.onerror=()=>alert("Could not delete database. Please clear site data manually.")}};return i?m.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-6",children:m.jsxs("div",{className:"max-w-md w-full bg-zinc-900 border border-red-900/50 rounded-xl p-6 shadow-2xl",children:[m.jsxs("div",{className:"flex items-center gap-3 text-red-500 mb-4",children:[m.jsx(ja,{size:32}),m.jsx("h2",{className:"text-xl font-bold",children:"Startup Failed"})]}),m.jsx("p",{className:"text-zinc-400 text-sm mb-6 leading-relaxed",children:i}),m.jsx("p",{className:"text-zinc-500 text-xs mb-6",children:"This often happens if the database is open in another tab or window. Please close other instances and refresh."}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("button",{onClick:()=>window.location.reload(),className:"flex-1 flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-lg font-bold transition-colors",children:[m.jsx(fc,{size:16}),"Reload"]}),m.jsx("button",{onClick:Et,className:"px-4 bg-zinc-800 hover:bg-red-900/50 text-red-400 rounded-lg transition-colors border border-zinc-700 hover:border-red-800",title:"Factory Reset DB",children:m.jsx(Ci,{size:16})})]})]})}):l&&n===null?m.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-6",children:m.jsxs("div",{className:"max-w-md w-full bg-zinc-900 border border-amber-900/50 rounded-xl p-6 shadow-2xl animate-in fade-in",children:[m.jsxs("div",{className:"flex items-center gap-3 text-amber-500 mb-4",children:[m.jsx(yt,{size:32,className:"animate-spin"}),m.jsx("h2",{className:"text-xl font-bold",children:"Taking longer than usual..."})]}),m.jsx("p",{className:"text-zinc-400 text-sm mb-6 leading-relaxed",children:"The database connection is delayed. This can happen if a previous version of the app is still running in a background process or tab."}),m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full flex items-center justify-center gap-2 bg-zinc-800 hover:bg-zinc-700 text-white py-3 rounded-lg font-bold transition-colors",children:[m.jsx(fc,{size:16}),"Try Reloading"]}),m.jsx("button",{onClick:Et,className:"w-full flex items-center justify-center gap-2 text-red-400 text-xs hover:text-red-300 py-2",children:"Clear Database & Reset"})]})]})}):n===null?m.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col items-center justify-center gap-4",children:[m.jsx(yt,{size:48,className:"text-indigo-500 animate-spin"}),m.jsx("p",{className:"text-zinc-500 text-sm font-medium animate-pulse",children:"Initializing Secure Storage..."})]}):t?m.jsx(Gj,{children:m.jsxs("div",{className:"flex h-screen bg-black text-zinc-300 font-sans selection:bg-indigo-500 selection:text-white overflow-hidden",children:[o&&m.jsx(Cv,{onClose:Re}),m.jsxs($.Suspense,{fallback:m.jsx(sn,{}),children:[d==="info"&&m.jsx(Pj,{onClose:()=>u(null)}),d==="categories"&&m.jsx(Lj,{onClose:()=>u(null),onUpdate:ge}),d==="tags"&&m.jsx(Bj,{onClose:()=>u(null),onUpdate:ge}),h.isOpen&&m.jsx(Fj,{initialDate:h.date,categories:C,tags:j,onClose:()=>f({isOpen:!1}),onSave:Ee}),p&&m.jsx($j,{attachmentId:p,onClose:()=>g(null)}),y&&m.jsx(Uj,{noteId:y,onClose:()=>b(null),onNavigate:Y})]}),x.isOpen&&m.jsx($.Suspense,{fallback:null,children:m.jsx(Mj,{notes:v,categories:C,tags:j,initialCategoryId:x.initialCatId,initialTagId:x.initialTagId,onSelect:O,onClose:()=>w(G=>({...G,isOpen:!1}))})}),m.jsxs("aside",{className:"w-64 flex flex-col border-r border-zinc-800 bg-zinc-900/30 z-10",children:[m.jsxs("div",{className:"min-h-16 flex items-center px-4 py-4 border-b border-zinc-700 mb-4",children:[m.jsxs("button",{onClick:S,className:"flex items-center gap-3 flex-1 text-left hover:opacity-80 transition-opacity",children:[m.jsx("div",{className:"w-6 h-6 bg-indigo-600 rounded flex items-center justify-center font-bold text-white text-xs",children:"N"}),m.jsx("span",{className:"font-bold text-zinc-100 tracking-tight",children:"NotesDB"})]}),m.jsx(Pt,{content:"Quick Search (K)",children:m.jsx("button",{onClick:()=>w({isOpen:!0}),className:"bg-zinc-800/80 border border-zinc-700 rounded text-[10px] font-bold text-indigo-200 hover:text-white px-2 py-1 transition-colors",children:"K"})})]}),m.jsx("div",{className:"px-2 my-2",children:m.jsxs("button",{onClick:Ge,className:"w-full flex items-center gap-2 px-3 py-2 text-indigo-200 font-bold hover:text-white transition-colors mb-1",children:[m.jsx(ss,{size:14})," Create New Note"]})}),m.jsxs("div",{className:"flex-1 border-b-1 border-zinc-700 mb-1 pb-2 space-y-1",children:[m.jsxs("button",{onClick:S,className:`w-full flex items-center gap-2 px-3 py-1 rounded-md transition-colors mb-1 ${k==="list"?"bg-zinc-800 text-white":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/50"}`,children:[m.jsx("div",{className:"p-1 rounded bg-zinc-800/50 text-indigo-400",children:m.jsx(q1,{size:14})}),m.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Library"})]}),m.jsxs("button",{onClick:()=>L("dashboard"),className:`w-full flex items-center gap-2 px-3 py-1 rounded-md transition-colors mb-1 ${k==="dashboard"?"bg-zinc-800 text-white":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/50"}`,children:[m.jsx("div",{className:"p-1 rounded bg-zinc-800/50 text-indigo-400",children:m.jsx(Px,{size:14})}),m.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Dashboard"})]}),m.jsxs("div",{className:"mb-1",children:[m.jsxs("button",{onClick:()=>L("calendar"),className:`w-full flex items-center gap-2 px-3 py-1 rounded-nd transition-colors ${k==="calendar"||k==="calendar_week"||k==="calendar_month"?"bg-zinc-800 text-white":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/50"}`,children:[m.jsx("div",{className:"p-1 rounded bg-zinc-800/50 text-indigo-400",children:m.jsx(Bo,{size:14})}),m.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Calendar"})]}),(k==="calendar"||k==="calendar_week"||k==="calendar_month")&&m.jsxs("div",{className:"ml-9 border-l border-zinc-800 pl-2 space-y-1 animate-in slide-in-from-top-2 duration-200 mt-1",children:[m.jsx("button",{onClick:()=>L("calendar"),className:`w-full text-left px-2 py-1 rounded text-xs transition-colors ${k==="calendar"?"text-white font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Day View"}),m.jsx("button",{onClick:()=>L("calendar_week"),className:`w-full text-left px-2 py-1 rounded text-xs transition-colors ${k==="calendar_week"?"text-white font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Week View"}),m.jsx("button",{onClick:()=>L("calendar_month"),className:`w-full text-left px-2 py-1 rounded text-xs transition-colors ${k==="calendar_month"?"text-white font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Month View"})]})]}),m.jsxs("div",{className:"mb-1",children:[m.jsxs("button",{onClick:()=>L("bookmarks"),className:`w-full flex items-center gap-2 px-3 py-1 rounded-md transition-colors mb-1 ${k==="bookmarks"||k==="bookmark_library"||k==="bookmark_manager"?"bg-zinc-800 text-white":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/50"}`,children:[m.jsx("div",{className:"p-1 rounded bg-zinc-800/50 text-emerald-400",children:m.jsx(yb,{size:14})}),m.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Bookmarks"})]}),(k==="bookmarks"||k==="bookmark_library"||k==="bookmark_manager")&&m.jsxs("div",{className:"ml-9 border-l border-zinc-800 pl-2 space-y-1 animate-in slide-in-from-top-2 duration-200",children:[m.jsx("button",{onClick:()=>L("bookmarks"),className:`w-full text-left px-2 py-1 rounded text-[12px] transition-colors ${k==="bookmarks"?"text-white font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Favorites"}),m.jsx("button",{onClick:()=>L("bookmark_library"),className:`w-full text-left px-2 py-1 rounded text-[12px] transition-colors flex items-center gap-2 ${k==="bookmark_library"?"text-white font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"All Bookmarks"}),m.jsx("button",{onClick:()=>L("bookmark_manager"),className:`w-full text-left px-2 py-1 rounded text-[12px] transition-colors ${k==="bookmark_manager"?"text-white font-bold":"text-zinc-500 hover:text-zinc-300"}`,children:"Manager"})]})]}),m.jsxs("button",{onClick:()=>L("attachments"),className:`w-full flex items-center gap-2 px-3 py-1 rounded-md transition-colors mb-2 ${k==="attachments"?"bg-zinc-800 text-white":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/50"}`,children:[m.jsx("div",{className:"p-1 rounded bg-zinc-800/50 text-pink-400",children:m.jsx(Zp,{size:14})}),m.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Storage"})]}),m.jsxs("button",{onClick:()=>L("graph"),className:`w-full flex items-center gap-2 px-3 py-1 rounded-md transition-colors mb-1 ${k==="graph"?"bg-zinc-800 text-white":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-800/50"}`,children:[m.jsx("div",{className:"p-1 rounded bg-zinc-800/50 text-purple-400",children:m.jsx(m1,{size:14})}),m.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Graph View"})]})]}),m.jsxs("div",{className:"w-64 flex flex-col max-w-full h-full overflow-y-auto",children:[Be.map(G=>{const U=hc[G.icon]||il,ye=D.has(G.id);if(G.notes.length===0)return null;const ke=[...G.notes].sort((Te,et)=>et.updatedAt-Te.updatedAt),$e=ye?ke.slice(0,5):[];return m.jsxs("div",{className:"mb-1",children:[m.jsxs("button",{onClick:()=>te(G.id),className:`w-full flex items-center gap-2 px-3 py-1 rounded-md transition-colors hover:bg-zinc-800/50 ${ye?"text-white":"text-zinc-500"}`,children:[ye?m.jsx(ad,{size:14}):m.jsx(Ei,{size:14}),m.jsx("div",{className:`w-4 h-4 flex items-center justify-center text-${G.color}-500`,children:G.svgData?m.jsx("span",{dangerouslySetInnerHTML:{__html:G.svgData},className:"flex"}):m.jsx(U,{size:14})}),m.jsx("span",{className:"text-xs font-bold uppercase tracking-wide flex-1 text-left",children:G.name}),m.jsx("span",{className:"text-[10px] bg-zinc-800 px-1.5 rounded-full text-zinc-500",children:G.notes.length})]}),ye&&m.jsxs("div",{className:"ml-3 border-l border-zinc-800 pl-2 mt-1 space-y-0.5",children:[$e.map(Te=>{const et=_.has(Te.id);return m.jsxs("button",{onClick:()=>O(Te),className:`w-full text-left px-3 py-1.5 text-xs transition-colors flex items-center gap-2 ${(W==null?void 0:W.id)===Te.id?"text-white":"text-zinc-400 hover:text-zinc-100"}`,children:[m.jsx("span",{className:"truncate flex-1",children:Te.title}),!!Te.isEncrypted&&m.jsx(Xr,{size:12,className:"text-red-500 shrink-0"}),et&&m.jsx(uc,{size:12,className:"text-amber-500 shrink-0"})]},Te.id)}),ke.length>5&&m.jsxs("button",{onClick:()=>{q(G.id),L("category_browser")},className:"w-full text-left px-3 py-2 rounded-lg text-xs text-indigo-400 hover:text-indigo-200 transition-colors flex items-center gap-2 italic",children:[m.jsx(Ei,{size:10}),"View all ",ke.length," notes..."]})]})]},G.id)}),lt.length>0&&m.jsxs("div",{className:"mb-1",children:[m.jsxs("button",{className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-zinc-500 cursor-default",children:[m.jsx(il,{size:14}),m.jsx("span",{className:"text-xs font-bold uppercase tracking-wide flex-1 text-left",children:"Uncategorized"}),m.jsx("span",{className:"text-[10px] bg-zinc-800 px-1.5 rounded-full text-zinc-500",children:lt.length})]}),m.jsxs("div",{className:"ml-3 border-l border-zinc-800 pl-2 mt-1 space-y-0.5",children:[lt.slice(0,5).map(G=>{const U=_.has(G.id);return m.jsxs("button",{onClick:()=>O(G),className:`w-full text-left px-3 py-2 rounded-lg text-xs transition-colors flex items-center gap-2 ${(W==null?void 0:W.id)===G.id?"bg-zinc-800 text-white":"text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800/30"}`,children:[m.jsx("span",{className:"truncate flex-1",children:G.title}),!!G.isEncrypted&&m.jsx(Xr,{size:12,className:"text-zinc-500 shrink-0"}),U&&m.jsx(uc,{size:12,className:"text-amber-500 shrink-0"})]},G.id)}),lt.length>5&&m.jsxs("button",{className:"w-full text-left px-3 py-2 rounded-lg text-xs text-indigo-500 hover:text-indigo-400 hover:bg-zinc-900/50 transition-colors flex items-center gap-2 italic",onClick:()=>alert("Uncategorized browsing not implemented yet. Move notes to a category to browse full collection."),children:[m.jsx(Ei,{size:10}),"View all ",lt.length," notes..."]})]})]})]}),m.jsxs("div",{className:"h-14 border-t border-zinc-800 flex items-center p-4 gap-2",children:[m.jsx(Pt,{content:"App Settings",children:m.jsx("button",{onClick:()=>L("settings"),className:`p-1.5 transition-colors hover:bg-zinc-800 rounded ${k==="settings"?"text-indigo-400 bg-zinc-800":"text-zinc-500 hover:text-white"}`,children:m.jsx(Qp,{size:16})})}),m.jsx(Pt,{content:"About NotesDB",children:m.jsx("button",{onClick:()=>u("info"),className:"p-1.5 text-zinc-500 hover:text-white transition-colors hover:bg-zinc-800 rounded",children:m.jsx(zx,{size:16})})}),m.jsx("div",{className:"flex-1"}),m.jsx(Pt,{content:"Manage Categories",children:m.jsx("button",{onMouseEnter:he,onClick:()=>u("categories"),className:"p-1.5 text-zinc-500 hover:text-indigo-400 transition-colors hover:bg-zinc-800 rounded",children:m.jsx(gx,{size:16})})}),m.jsx(Pt,{content:"Manage Tags",children:m.jsx("button",{onMouseEnter:le,onClick:()=>u("tags"),className:"p-1.5 text-zinc-500 hover:text-indigo-400 transition-colors hover:bg-zinc-800 rounded",children:m.jsx(dd,{size:16})})})]})]}),m.jsxs("main",{className:"relative flex-1 flex flex-col overflow-hidden",children:[m.jsx("div",{className:"absolute z-auto inset-0 h-full w-full bg-[radial-gradient(circle,#73737350_1px,transparent_1px)] bg-[size:10px_10px] [mask-image:radial-gradient(ellipse_50%_50%_at_50%_50%,#000_80%,transparent_100%)]"}),m.jsxs("div",{className:"z-[10] h-full max-h-full",children:[k==="view"&&W?m.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:m.jsx(_j,{note:W,initialEditMode:fe,onSave:K,onDelete:V,onCancel:()=>I(!1),settings:T,onToggleResearch:F,isResearchOpen:Z,onNavigateMain:S,onSearch:ne,onNavigate:A},`${W.id}-${fe?"edit":"view"}`)}):k==="create_wizard"?m.jsx(dk,{onComplete:G=>Fe(G.data,G.catId,G.tagIds,G.intent,G.isBlank),onCancel:()=>L("list")}):k==="dashboard"?m.jsx($.Suspense,{fallback:m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-600 bg-black animate-pulse",children:[m.jsx(yt,{size:32,className:"animate-spin mb-4"}),m.jsx("p",{className:"text-xs font-mono",children:"Loading Dashboard..."})]}),children:m.jsx(jj,{notes:v,categories:C,tags:j,onNavigate:G=>L(G),onSelectNote:O,onBack:()=>L("list")})}):k==="calendar"?m.jsx($.Suspense,{fallback:m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-600 bg-black animate-pulse",children:[m.jsx(yt,{size:32,className:"animate-spin mb-4"}),m.jsx("p",{className:"text-xs font-mono",children:"Loading Day View..."})]}),children:m.jsx(Rj,{notes:v,categories:C,tags:j,onSelectNote:O,onNavigateView:G=>L(G==="month"?"calendar_month":G==="week"?"calendar_week":"calendar"),onCreateEvent:G=>f({isOpen:!0,date:G})})}):k==="calendar_week"?m.jsx($.Suspense,{fallback:m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-600 bg-black animate-pulse",children:[m.jsx(yt,{size:32,className:"animate-spin mb-4"}),m.jsx("p",{className:"text-xs font-mono",children:"Loading Calendar..."})]}),children:m.jsx(zj,{notes:v,categories:C,tags:j,onSelectNote:O,onNavigateView:G=>L(G==="month"?"calendar_month":G==="day"?"calendar":"calendar_week"),onCreateEvent:G=>f({isOpen:!0,date:G})})}):k==="calendar_month"?m.jsx($.Suspense,{fallback:m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-600 bg-black animate-pulse",children:[m.jsx(yt,{size:32,className:"animate-spin mb-4"}),m.jsx("p",{className:"text-xs font-mono",children:"Loading Month View..."})]}),children:m.jsx(Ij,{notes:v,categories:C,tags:j,onSelectNote:O,onNavigateView:G=>L(G==="week"?"calendar_week":G==="day"?"calendar":"calendar_month"),onCreateEvent:G=>f({isOpen:!0,date:G})})}):k==="graph"?m.jsx($.Suspense,{fallback:m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-600 bg-black animate-pulse",children:[m.jsx(yt,{size:32,className:"animate-spin mb-4"}),m.jsx("p",{className:"text-xs font-mono",children:"Loading Neural Graph..."})]}),children:m.jsx(Hj,{notes:v,categories:C,onSelectNote:O,onPreviewNote:B})}):k==="attachments"?m.jsx($.Suspense,{fallback:m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-600 bg-black animate-pulse",children:[m.jsx(yt,{size:32,className:"animate-spin mb-4"}),m.jsx("p",{className:"text-xs font-mono",children:"Loading Storage..."})]}),children:m.jsx(Dj,{onNavigate:A,onPreview:G=>g(G)})}):k==="bookmarks"?m.jsx($.Suspense,{fallback:m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-600 bg-black animate-pulse",children:[m.jsx(yt,{size:32,className:"animate-spin mb-4"}),m.jsx("p",{className:"text-xs font-mono",children:"Loading Favorites..."})]}),children:m.jsx(Wj,{onNavigateManager:()=>L("bookmark_manager"),onBack:()=>L("bookmark_library")})}):k==="bookmark_library"?m.jsx($.Suspense,{fallback:m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-600 bg-black animate-pulse",children:[m.jsx(yt,{size:32,className:"animate-spin mb-4"}),m.jsx("p",{className:"text-xs font-mono",children:"Loading Library..."})]}),children:m.jsx(qj,{onBack:()=>L("bookmarks")})}):k==="bookmark_manager"?m.jsx($.Suspense,{fallback:m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-600 bg-black animate-pulse",children:[m.jsx(yt,{size:32,className:"animate-spin mb-4"}),m.jsx("p",{className:"text-xs font-mono",children:"Loading Manager..."})]}),children:m.jsx(Kj,{})}):k==="category_browser"&&ie?m.jsx($.Suspense,{fallback:m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-600 bg-black animate-pulse",children:[m.jsx(yt,{size:32,className:"animate-spin mb-4"}),m.jsx("p",{className:"text-xs font-mono",children:"Loading Category..."})]}),children:m.jsx(Vj,{category:C.find(G=>G.id===ie),notes:v.filter(G=>G.categoryId===ie),tags:j,onSelectNote:O,onBack:()=>{L("list"),q(null)}})}):k==="settings"?m.jsx($.Suspense,{fallback:m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-600 bg-black animate-pulse",children:[m.jsx(yt,{size:32,className:"animate-spin mb-4"}),m.jsx("p",{className:"text-xs font-mono",children:"Loading Settings..."})]}),children:m.jsx(Aj,{onBack:S,onSettingsChanged:Ce})}):k==="list"&&(T!=null&&T.libraryMode)?m.jsx($.Suspense,{fallback:m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-600 bg-black animate-pulse",children:[m.jsx(yt,{size:32,className:"animate-spin mb-4"}),m.jsx("p",{className:"text-xs font-mono",children:"Loading Library..."})]}),children:m.jsx(Oj,{notes:v,categories:C,tags:j,onSelect:O,onSearch:ne,onBack:()=>L("dashboard")})}):m.jsxs("div",{className:"h-full flex flex-col items-center place-content-center text-zinc-500",children:[m.jsx("div",{children:m.jsx(il,{size:48,className:"mb-4"})}),m.jsx("h2",{className:"text-xl mb-4",children:"Select a note or create a new one."}),m.jsx("div",{className:"flex gap-2",children:m.jsx("span",{className:"px-2 py-1 bg-zinc-800 border border-zinc-700 rounded text-xs text-zinc-500 font-mono",children:"K Search"})})]}),(_e||((Zt=T==null?void 0:T.aiConfig)==null?void 0:Zt.enabled))&&m.jsx($.Suspense,{fallback:null,children:m.jsx(Tj,{isOpen:Z,onClose:re,settings:T,note:W})})]})]})]})}):m.jsx(_v,{isRegistration:!n,onSuccess:Le})},ks=new URLSearchParams(window.location.search);var Fp;const Yj=ks.has("code")&&((Fp=ks.get("state"))==null?void 0:Fp.startsWith("notesdb"));if(Yj)window.opener&&window.opener.postMessage({type:"NOTESDB_OAUTH_RESPONSE",code:ks.get("code"),state:ks.get("state"),error:ks.get("error")},window.location.origin),setTimeout(()=>window.close(),100);else{const t=document.getElementById("root");if(!t)throw new Error("Failed to find the root element");Ky.createRoot(t).render(m.jsx(Q.StrictMode,{children:m.jsx(Jj,{})}))}export{zt as $,Pt as A,xb as B,Vb as C,Gb as D,Kp as E,bx as F,Jp as G,ld as H,zx as I,Yp as J,qp as K,yt as L,u1 as M,m1 as N,dx as O,M1 as P,ja as Q,fc as R,nv as S,dd as T,Sv as U,Iu as V,j1 as W,sr as X,ws as Y,Bs as Z,Xe as _,cd as a,xv as a0,h1 as a1,Xp as a2,ad as a3,yb as a4,V1 as a5,kx as a6,Ai as a7,Ou as a8,Nv as a9,Wx as aa,Db as ab,Mv as ac,Zj as ad,Qp as b,ce as c,Ke as d,ii as e,Ci as f,ss as g,Xr as h,qb as i,m as j,Eb as k,is as l,Q as m,Es as n,pc as o,Ei as p,il as q,$ as r,hc as s,Zp as t,Bo as u,Ss as v,kb as w,sl as x,Xx as y,uc as z};
