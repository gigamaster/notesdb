import{r as i,j as s}from"./index-KKYn1hr3.js";import"./vendor-B7FnPyzq.js";const w=({contentRef:a,noteId:p})=>{const[d,g]=i.useState([]),[x,u]=i.useState(""),c=i.useRef(null);i.useEffect(()=>{if(!a.current)return;const e=Array.from(a.current.querySelectorAll("h1, h2, h3, h4")),n=e.map((t,r)=>{var o;if(!t.id){const b=((o=t.textContent)==null?void 0:o.toLowerCase().replace(/[^a-z0-9]+/g,"-"))||`heading-${r}`;t.id=`${b}-${r}`}return{id:t.id,text:t.textContent||"Untitled Section",level:parseInt(t.tagName.substring(1))}});g(n);const l=t=>{const r=t.find(o=>o.isIntersecting);r&&u(r.target.id)};return c.current=new IntersectionObserver(l,{root:null,rootMargin:"-80px 0px -60% 0px",threshold:.1}),e.forEach(t=>{var r;return(r=c.current)==null?void 0:r.observe(t)}),()=>{var t;return(t=c.current)==null?void 0:t.disconnect()}},[p,a]);const m=e=>{const n=document.getElementById(e);n&&(n.scrollIntoView({behavior:"smooth",block:"start"}),u(e))};if(d.length<2)return null;const h=e=>{switch(e){case 1:return"w-8";case 2:return"w-6";case 3:return"w-4";default:return"w-2"}};return s.jsx("nav",{className:"w-full flex flex-col items-end gap-1.5 py-8 pr-2","aria-label":"Table of Contents",children:d.map(e=>{const n=x===e.id,l=h(e.level);return s.jsxs("button",{onClick:()=>m(e.id),className:"group relative flex justify-end items-center py-1 outline-none","aria-label":`Jump to ${e.text}`,children:[s.jsx("div",{className:`
                            h-1 rounded-full transition-all duration-300
                            ${n?"bg-indigo-500 w-10 shadow-[0_0_10px_rgba(99,102,241,0.5)]":`bg-zinc-800 group-hover:bg-zinc-500 ${l}`}
                        `}),s.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 mr-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50 origin-right scale-95 group-hover:scale-100",children:s.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 text-zinc-300 text-[10px] font-medium px-2 py-1 rounded-md shadow-xl whitespace-nowrap max-w-[200px] truncate flex items-center",children:[e.text,s.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 -right-1 w-2 h-2 bg-zinc-900 border-t border-r border-zinc-800 transform rotate-45"})]})})]},e.id)})})};export{w as default};
