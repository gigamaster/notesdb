import{c as S,r as n,j as t,q as E,s as u,n as v,h as N,o as y}from"./index-DboLLwwP.js";import{C as F}from"./CollectionHeader-C_4O6W4b.js";import{H as I}from"./hash-D4bagVh5.js";import"./vendor-B7FnPyzq.js";import"./arrow-left-D3hN5_uF.js";import"./search-DXFRVerH.js";import"./layout-grid-UR75HWh0.js";/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],P=S("library",O),U=({notes:l,categories:m,tags:p,onSelect:f,onSearch:c,onBack:z})=>{const[o,w]=n.useState("grid"),[d,C]=n.useState(""),[i,k]=n.useState("category"),a=n.useMemo(()=>{if(!d)return l;const e=d.toLowerCase();return l.filter(s=>s.title.toLowerCase().includes(e)||s.content.toLowerCase().includes(e))},[l,d]),M=n.useMemo(()=>i!=="category"?[]:m.map(e=>({...e,items:a.filter(s=>s.categoryId===e.id).sort((s,r)=>r.updatedAt-s.updatedAt)})).filter(e=>e.items.length>0),[a,m,i]),g=n.useMemo(()=>{if(i==="category")return[];const e=[...a];return i==="title"?e.sort((s,r)=>s.title.localeCompare(r.title)):e.sort((s,r)=>r.updatedAt-s.updatedAt),e},[a,i]),L=e=>{const s=p.find(r=>r.id===e);return s&&y[s.color]||"bg-zinc-800 text-zinc-500 border-zinc-700"},b=e=>{const s=p.find(r=>r.id===e);return s?s.name:"Unknown"},j=e=>t.jsxs("div",{onClick:()=>f(e),className:"w-60 h-40 bg-zinc-900 border border-zinc-800 rounded-xl p-4 hover:border-indigo-500 transition-colors cursor-pointer flex-none flex flex-col gap-2 group relative shadow-sm hover:shadow-lg hover:shadow-indigo-500/10 snap-start",children:[t.jsxs("div",{className:"flex-1 min-h-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("h3",{className:"font-bold text-sm text-zinc-200 group-hover:text-white truncate flex-1",children:e.title}),e.isEncrypted&&t.jsx(N,{size:12,className:"bg-red-500/20 text-red-500 shrink-0"})]}),e.intent?t.jsxs("p",{className:"text-[10px] text-zinc-400 italic leading-relaxed line-clamp-3",children:['"',e.intent,'"']}):t.jsx("p",{className:"text-[10px] text-zinc-600 leading-relaxed line-clamp-3",children:"No intent defined."})]}),t.jsx("div",{className:"flex items-center gap-1 overflow-hidden mt-auto pt-2 border-t border-zinc-800/50",children:e.tags.length>0?e.tags.map(s=>t.jsx("button",{onClick:r=>{r.stopPropagation(),c&&c({tagId:s})},className:`text-[9px] px-1.5 py-0.5 rounded border shrink-0 max-w-[80px] truncate hover:opacity-80 transition-opacity ${L(s)}`,title:`Filter by ${b(s)}`,children:b(s)},s)):t.jsxs("span",{className:"text-[9px] text-zinc-700 italic flex items-center gap-1",children:[t.jsx(I,{size:8})," No tags"]})})]},e.id),A=e=>{const s=m.find(x=>x.id===e.categoryId),r=s&&u[s.icon]?u[s.icon]:v;return t.jsxs("button",{onClick:()=>f(e),className:"w-full flex items-center gap-4 p-3 rounded-lg border border-transparent hover:bg-zinc-900 hover:border-zinc-800 transition-all group text-left",children:[t.jsx("div",{className:"p-2 bg-zinc-900 rounded border border-zinc-800 text-zinc-500 group-hover:text-white group-hover:border-zinc-700",children:t.jsx(r,{size:16})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-bold text-zinc-300 group-hover:text-white truncate",children:e.title}),e.isEncrypted&&t.jsx(N,{size:12,className:"text-zinc-500"})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsxs("span",{className:"text-[10px] text-zinc-600 font-mono",children:["Updated ",new Date(e.updatedAt).toLocaleDateString()]}),s&&t.jsx("span",{className:"text-[10px] text-zinc-500 px-1.5 border border-zinc-800 rounded",children:s.name})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:e.tags.slice(0,3).map(x=>{const h=p.find($=>$.id===x);return h?t.jsxs("span",{className:`text-[9px] px-1.5 py-0.5 rounded border ${y[h.color]}`,children:["#",h.name]},x):null})})]},e.id)};return t.jsxs("div",{className:"flex-1 flex flex-col h-full bg-black animate-in fade-in duration-500",children:[t.jsx(F,{title:"Library",subtitle:`${l.length} total notes`,icon:t.jsx(P,{size:24}),onBack:z,searchValue:d,onSearchChange:C,searchPlaceholder:"Search all notes...",viewMode:o,onViewChange:w,sortMode:i,onSortChange:e=>k(e),sortOptions:[{label:"By Category",value:"category"},{label:"Recently Updated",value:"updated"},{label:"Alphabetical",value:"title"}]}),t.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-8",children:a.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-zinc-600",children:[t.jsx(E,{size:48,className:"mb-4 opacity-20"}),t.jsx("p",{children:"No notes found."})]}):t.jsxs(t.Fragment,{children:[o==="list"&&t.jsx("div",{className:"space-y-1 max-w-4xl mx-auto",children:(i==="category"?a.sort((e,s)=>s.updatedAt-e.updatedAt):g).map(A)}),o==="grid"&&i==="category"&&M.map(e=>{const s=u[e.icon]||v;return t.jsxs("div",{className:"space-y-3",children:[t.jsxs("button",{onClick:()=>c&&c({catId:e.id}),className:"flex items-center gap-2 px-1 hover:opacity-80 transition-opacity group",title:`Filter by ${e.name}`,children:[t.jsx("div",{className:`p-1.5 rounded-lg bg-${e.color}-500/10 text-${e.color}-500`,children:t.jsx(s,{size:16})}),t.jsx("h2",{className:"text-sm font-bold text-zinc-200 uppercase tracking-wide group-hover:text-white group-hover:underline decoration-zinc-700 underline-offset-4",children:e.name}),t.jsx("span",{className:"text-xs text-zinc-600 font-mono ml-auto",children:e.items.length})]}),t.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-hide px-1",children:[e.items.map(j),t.jsx("div",{className:"w-2 flex-none"})]})]},e.id)}),o==="grid"&&i!=="category"&&t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4 animate-in fade-in duration-300",children:g.map(e=>t.jsx("div",{className:"flex justify-center",children:j(e)},e.id))})]})})]})};export{U as default};
