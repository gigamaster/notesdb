const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Palette-DfyCJY_S.js","assets/index-KKYn1hr3.js","assets/vendor-B7FnPyzq.js","assets/index-DyUq36P8.css"])))=>i.map(i=>d[i]);
import{r as a,d as c,j as e,a2 as C,X as E,g as _,a as D,W as B,f as I,m as $,_ as P}from"./index-KKYn1hr3.js";import"./vendor-B7FnPyzq.js";const M=$.lazy(()=>P(()=>import("./Palette-DfyCJY_S.js"),__vite__mapDeps([0,1,2,3]))),U=({currentLayoutIds:v,onClose:h,onSelect:f,onUpdateList:j,initialLayout:o})=>{const[z,u]=a.useState([]),[i,g]=a.useState(null),[r,d]=a.useState(""),[p,l]=a.useState(""),[b,x]=a.useState("indigo");a.useEffect(()=>{k()},[]),a.useEffect(()=>{o&&(g(o.id),d(o.name),l(o.description||""),x(o.color||"indigo"))},[o]);const k=async()=>{const t=await c.getSettings();u(t.savedBookmarkLayouts||[])},N=()=>{d(""),l(""),x("indigo"),g(null)},w=async()=>{if(!r.trim())return;const t=await c.getSettings();let s=[...t.savedBookmarkLayouts||[]];if(i)s=s.map(n=>n.id===i?{...n,name:r,description:p,color:b,bookmarkIds:v}:n);else{const n={id:crypto.randomUUID(),name:r,description:p,color:b,bookmarkIds:v};s.push(n)}t.savedBookmarkLayouts=s,await c.saveSettings(t),u(s);const m=s.find(n=>n.id===(i||s[s.length-1].id));m&&f(m),j(),h()},y=t=>{g(t.id),d(t.name),l(t.description||""),x(t.color||"indigo")},L=async t=>{if(!confirm("Delete this layout template?"))return;const s=await c.getSettings();s.savedBookmarkLayouts=(s.savedBookmarkLayouts||[]).filter(m=>m.id!==t),await c.saveSettings(s),u(s.savedBookmarkLayouts),j(),i===t&&N()},S=t=>{f(t),h()};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"w-full max-w-lg bg-zinc-900 border border-zinc-800 rounded-xl shadow-2xl overflow-hidden flex flex-col animate-in zoom-in-95 duration-200 max-h-[85vh]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-800 bg-zinc-900/50 shrink-0",children:[e.jsxs("h3",{className:"text-sm font-bold text-white flex items-center gap-2",children:[e.jsx(C,{size:16,className:"text-indigo-400"}),"Manage Layouts"]}),e.jsx("button",{onClick:h,className:"text-zinc-500 hover:text-white transition-colors",children:e.jsx(E,{size:18})})]}),e.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"space-y-4 p-4 bg-black/20 rounded-xl border border-zinc-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:`text-xs font-bold uppercase tracking-wider ${i?"text-indigo-400":"text-zinc-400"}`,children:i?"Update Selected Layout":"Save Current Arrangement"}),i?e.jsxs("button",{onClick:N,className:"text-[10px] text-zinc-500 hover:text-white flex items-center gap-1",children:[e.jsx(_,{size:10})," Create New"]}):e.jsx("span",{className:"text-[10px] text-zinc-600",children:"Creating New Layout"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsx("input",{value:r,onChange:t=>d(t.target.value),placeholder:i?"Layout Name":"Name your bookmark layout",className:"w-full bg-zinc-900 border border-zinc-800 rounded-lg p-2 text-xs text-white focus:border-indigo-500 outline-none placeholder:text-zinc-600"})}),e.jsx("div",{children:e.jsx("textarea",{value:p,onChange:t=>l(t.target.value),placeholder:"Description (Optional)",className:"w-full h-16 bg-zinc-900 border border-zinc-800 rounded-lg p-2 text-xs text-white focus:border-indigo-500 outline-none resize-none placeholder:text-zinc-600"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:"Layout Color"}),e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"h-8 bg-zinc-900 animate-pulse rounded"}),children:e.jsx(M,{selectedColor:b,onSelect:x})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:w,disabled:!r.trim(),className:`flex items-center gap-2 px-4 py-2 text-white rounded-lg text-xs font-bold transition-colors disabled:opacity-50 ${i?"bg-emerald-600 hover:bg-emerald-500":"bg-indigo-600 hover:bg-indigo-500"}`,children:[e.jsx(D,{size:14}),i?"Update Layout":"Save as New Layout"]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2",children:"Your Saved Layouts"}),z.length===0&&e.jsx("div",{className:"text-center py-8 text-zinc-600 text-xs italic border-2 border-dashed border-zinc-800 rounded-xl",children:"No saved layouts yet."}),z.map(t=>{const s=i===t.id;return e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-colors group ${s?"bg-indigo-500/10 border-indigo-500/30":"bg-black border-zinc-800 hover:border-zinc-700"}`,children:[e.jsxs("div",{className:"flex items-start gap-3 overflow-hidden",children:[e.jsx("div",{className:`w-1 h-8 rounded-full shrink-0 bg-${t.color||"zinc"}-500`}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:`text-sm font-bold truncate ${s?"text-white":"text-zinc-300"}`,children:t.name}),t.description&&e.jsx("span",{className:"text-[10px] text-zinc-500 truncate",children:t.description}),e.jsxs("span",{className:"text-[9px] text-zinc-600 font-mono mt-0.5",children:[t.bookmarkIds.length," items"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>S(t),className:"p-1.5 text-zinc-400 hover:text-emerald-400 bg-zinc-900 hover:bg-zinc-800 rounded transition-colors text-xs font-bold mr-2",title:"Load Layout",children:"Load"}),e.jsx("button",{onClick:()=>y(t),className:`p-1.5 rounded transition-colors ${s?"text-indigo-400 bg-indigo-500/10":"text-zinc-600 hover:text-indigo-400 hover:bg-zinc-900"}`,title:"Edit Metadata",children:e.jsx(B,{size:14})}),e.jsx("button",{onClick:()=>L(t.id),className:"p-1.5 text-zinc-600 hover:text-red-400 hover:bg-zinc-900 rounded transition-colors",title:"Delete",children:e.jsx(I,{size:14})})]})]},t.id)})]})]})]})})};export{U as default};
